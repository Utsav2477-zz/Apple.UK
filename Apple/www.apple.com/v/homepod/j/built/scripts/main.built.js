!function(){function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}return e}()({1:[function(e,t,i){"use strict";var n=e("./ac-ajax/Ajax"),r=e("./ac-ajax/Request");t.exports=new n,t.exports.Ajax=n,t.exports.Request=r},{"./ac-ajax/Ajax":2,"./ac-ajax/Request":3}],2:[function(e,t,i){"use strict";var n=e("./Request"),r=e("./XDomain-request"),o=e("./URLParser"),s=function(){};s._Request=n,s.prototype={_defaults:{method:"get",timeout:5e3},_extend:function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},_getOptions:function(e,t){return this._extend({},this._defaults,t,e)},_isCrossDomainRequest:function(e){var t=new o,i=t.parse(window.location.href).origin,n=t.parse(e).origin;return t.destroy(),n!==i},create:function(e){return new n(e)},cors:function(e){var t=window.XDomainRequest&&document.documentMode<10?r:n;return new t(e)},get:function(e){var t;return e=this._getOptions({method:"get"},e),t=this._isCrossDomainRequest(e.url)?this.cors(e):this.create(e),t.send()},getJSON:function(e){return this.get(e).then(function(e){return JSON.parse(e.responseText)})},head:function(e){return e=this._getOptions({method:"head"},e),this.create(e).send()},isCrossDomainRequest:function(e){return this._isCrossDomainRequest(e)},post:function(e){return e=this._getOptions({method:"post"},e),this.create(e).send()}},t.exports=s},{"./Request":3,"./URLParser":4,"./XDomain-request":5}],3:[function(e,t,i){"use strict";var n=function(e){this._initialize(e)};n.create=function(){var e=function(){};return e.prototype=n.prototype,new e},n.prototype={_addReadyStateChangeHandler:function(){this.xhr.onreadystatechange=function(e){4===this.xhr.readyState&&(clearTimeout(this._timeout),this.xhr.status>=200&&this.xhr.status<300?this.resolve(this.xhr):this.reject(this.xhr))}.bind(this)},_getPromise:function(){this.promise=new Promise(function(e,t){this.resolve=e,this.reject=t}.bind(this))},_getTransport:function(){return new XMLHttpRequest},_initialize:function(e){var t=this._validateConfiguration(e);if(t)throw t;this._configuration=e;var i=this._configuration.method.toUpperCase();this.xhr=this._getTransport(),this._getPromise(),this.xhr.open(i,this._configuration.url),this._setRequestHeaders(e.headers),this._addReadyStateChangeHandler()},_sendXHR:function(){this.xhr&&(this._configuration&&this._configuration.data?this.xhr.send(this._configuration.data):this.xhr.send())},_setRequestHeaders:function(e){e&&e.forEach(function(e){this.xhr.setRequestHeader(e.name,e.value)},this)},_setTimeout:function(e){e||(this._configuration&&this._configuration.timeout?e=this._configuration.timeout:(clearTimeout(this._timeout),this._timeout=null)),null!==this._timeout&&clearTimeout(this._timeout),e>0&&(this._timeout=setTimeout(function(){this.xhr.abort(),this.reject()}.bind(this),e))},_timeout:null,_validateConfiguration:function(e){if(!e)return"Must provide a configuration object";var t=[],i=e.headers;if(e.url||t.push("Must provide a url"),e.method||t.push("Must provide a method"),i){if(!Array.isArray(i))return"Must provide an array of headers";this._validateHeaders(i,t)}return t.join(", ")},_validateHeaders:function(e,t){for(var i=0,n=e.length;i<n;i++)if(!e[i].hasOwnProperty("name")||!e[i].hasOwnProperty("value")){t.push("Must provide a name and value key for all headers");break}},promise:null,reject:null,resolve:null,send:function(){return this._setTimeout(),this._sendXHR(),this.promise},xhr:null},t.exports=n},{}],4:[function(e,t,i){"use strict";var n=function(){this.parser=null},r=n.prototype;r.parse=function(e){var t,i,n,r,o;if("string"!=typeof e)throw new TypeError(e+" must be a string");return this.parser||(this.parser=document.createElement("a")),this._qualifyPath(e),n=this.parser.hostname,i=this.parser.protocol,r=this._normalizePort(this.parser),t=this.parser.origin||this._constructOriginString(this.parser,r),o=this.parser.search,{originalPath:e,qualifiedPath:this.parser.href,protocol:i,hostname:n,origin:t,port:r,search:o}},r.destroy=function(){this.parser=null},r._constructOriginString=function(e,t){var i=t?":"+t:"";return e.protocol+"//"+e.hostname+i},r._normalizePort=function(e){return"80"===e.port||"443"===e.port||"0"===e.port?"":e.port},r._qualifyPath=function(e){this.parser.href=e,this.parser.href=this.parser.href},t.exports=n},{}],5:[function(e,t,i){"use strict";var n=e("./Request"),r=function(e){n.apply(this,arguments)};r.prototype=n.create(),r.prototype._getTransport=function(){return new XDomainRequest},r.prototype._addReadyStateChangeHandler=function(){this.xhr.ontimeout=function(){this.reject(this.xhr)}.bind(this),this.xhr.onerror=function(){this.reject(this.xhr)}.bind(this),this.xhr.onload=function(){this.resolve(this.xhr)}.bind(this)},r.prototype._setTimeout=function(e){e||this._configuration&&this._configuration.timeout&&(e=this._configuration.timeout),e>0&&(this.xhr.timeout=e)},r.prototype._sendXHR=function(){setTimeout(function(){n.prototype._sendXHR.call(this)}.bind(this),0)},t.exports=r},{"./Request":3}],6:[function(e,t,i){"use strict";function n(e,t){o.call(this),this.options=s(a,t||{}),this.src=e,this.data=null,this.error=null,this.priority=this.options.priority,this.status="idle",this._onLoad=this._onLoad.bind(this),this._onError=this._onError.bind(this)}var r,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-object/defaults"),a={priority:5};r=n.prototype=Object.create(o.prototype),r.load=function(){"idle"===this.status&&(this.status="pending",this._load())},r.destroy=function(){o.prototype.destroy.call(this),this.status="destroyed",this.data=null},r._load=function(){this.data={src:this.src},window.setTimeout(this._onLoad.bind(this),20)},r._onLoad=function(){"destroyed"!==this.status&&(this.status="loaded",this.trigger("loaded",this))},r._onError=function(e){"destroyed"!==this.status&&(this.error=e,this.status="error",this.trigger("error",this))},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-object/defaults":179}],7:[function(e,t,i){"use strict";function n(e,t){o.apply(this,arguments)}var r,o=e("../Asset");r=n.prototype=Object.create(o.prototype),r._load=function(){this.data=new Image,this.data.addEventListener("load",this._onLoad),this.data.addEventListener("error",this._onError),this.data.src=this.src},r.destroy=function(){this.data&&(this.data.removeEventListener("load",this._onLoad),this.data.removeEventListener("error",this._onError)),this.status="destroyed",this.data=null},t.exports=n},{"../Asset":6}],8:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Promise");var n,r=e("@marcom/ac-object/defaults"),o=e("./XHR/ArrayBuffer"),s=e("./XHR/JSON"),a=e("../Asset"),c=e("../AssetGroup"),l={manifestTimeout:5e3,chunkTimeout:1e4},u=function(e,t){var i=r(l,t||{});a.call(this,e,i),e.lastIndexOf("https://www.apple.com/")!==e.length-1&&(e+="https://www.apple.com/");var n="j";this._manifestPath=e+"manifest."+n+"son",this._chunks=[],this._loadChunks=this._loadChunks.bind(this),this._onChunksLoaded=this._onChunksLoaded.bind(this),this._manifestLoader=null,this._chunkLoader=null};n=u.prototype=Object.create(a.prototype),n._load=function(){this._loadManifest().then(this._loadChunks).then(this._onChunksLoaded)["catch"](this._onError)},n._loadManifest=function(){var e=new s(this._manifestPath,{timeout:this.options.manifestTimeout}),t=new c(e,{privateQueue:this.options.queue});return t.load(),this._manifestLoader=t,new Promise(function(e,i){t.once("load",function(t){e(t.latest)}),t.once("error",function(e){i(e.latest.error)})})},n._loadChunks=function(e){this._manifest=e.data,this._manifestLoader.destroy(),this._manifestLoader=null;var t=[];this._manifest.files.forEach(function(e,i){t.push(this._getOrCreateChunkObject(e,i))},this);var i=new c(t,{privateQueue:this.options.queue,failFast:!0}),n=new Promise(function(e,t){i.once("load",e),i.once("error",function(e){t(e.latest.error)})});return i.load(),this._chunkLoader=i,n},n._getOrCreateChunkObject=function(e,t){var i=this.options.chunkTimeout?{timeout:this.options.chunkTimeout}:null;if(!this._chunks[t]){var n=e.path;if(n.match(/(^http(s?))/)){if(this.src.match(/(^http(s?))/)){var r=n.indexOf("https://www.apple.com/",10),s=this.src.indexOf("https://www.apple.com/",10);n=this.src.substring(0,s)+n.substring(r)}}else n=this.src+"/"+n;this._chunks[t]=new o(n,i)}return this._chunks[t]},n._onChunksLoaded=function(){for(var e=this._chunks.length,t=[],i=0;i<e;i++)t.push(this._chunks[i].data),this._chunks[i].off();this.data=new Blob(t,{type:this._manifest.mimeType}),t=this._chunks=null,this._chunkLoader.destroy(),this._chunkLoader=null,this._onLoad()},n.pause=function(){this._manifestLoader&&this._manifestLoader.pause(),this._chunkLoader&&this._chunkLoader.pause()},n.resume=function(){this._manifestLoader&&this._manifestLoader.resume(),this._chunkLoader&&this._chunkLoader.resume()},n.destroy=function(){this.pause(),this._manifestLoader&&this._manifestLoader.destroy(),this._chunkLoader&&this._chunkLoader.destroy(),this._chunks=null,a.prototype.destroy.call(this)},t.exports=u},{"../Asset":6,"../AssetGroup":13,"./XHR/ArrayBuffer":11,"./XHR/JSON":12,"@marcom/ac-object/defaults":179,"@marcom/ac-polyfills/Promise":void 0}],9:[function(e,t,i){"use strict";function n(e,t){o.apply(this,arguments),this.options=t||{},this._binary=this.options.binary||this._createAssetType()}var r,o=e("../Asset"),s=e("./SplitFile");r=n.prototype=Object.create(o.prototype),r._canUseBlob=function(){return void 0!==window.Blob&&void 0!==window.URL&&"function"==typeof window.URL.createObjectURL},r._createAssetType=function(){if(this._canUseBlob())return new s(this.src,this.options)},r._load=function(){this._binary.on("loaded",this._onLoad),this._binary.on("error",this._onError),this._binary.load()},r._onLoad=function(e){this.data=e,this.data instanceof window.Blob&&(this.data=this.options.element,this.data||(this.data=document.createElement("video")),this.data.getAttribute("type")!==e.type&&this.data.setAttribute("type",e.type),this.data.src=window.URL.createObjectURL(e)),o.prototype._onLoad.call(this,this.data)},r.pause=function(){this._binary.pause()},r.destroy=function(){this._binary.destroy(),o.prototype.destroy.call(this)},t.exports=n},{"../Asset":6,"./SplitFile":8}],10:[function(e,t,i){"use strict";function n(e,t){var i=a(c,t||{});s.call(this,e,i),this._request=this._createRequest(),this._request.xhr.responseType=this.options.responseType}var r,o=e("@marcom/ac-ajax"),s=e("../Asset"),a=e("@marcom/ac-object/defaults"),c={timeout:3e4,responseType:""};r=n.prototype=Object.create(s.prototype),r.destroy=function(){return"idle"!==this.status&&"loaded"!==this.status||(this._request=null),"pending"===this.status?(this._request.xhr.abort(),void s.prototype.destroy.call(this)):void s.prototype.destroy.call(this)},r._createRequest=function(){return o.create({url:this.src,method:"GET",timeout:this.options.timeout,responseType:this.options.responseType})},r._load=function(){this._request.send().then(this._onLoad)["catch"](this._onError)},r._onLoad=function(e){this.data=this.data||e.response,this._request=null,s.prototype._onLoad.call(this)},t.exports=n},{"../Asset":6,"@marcom/ac-ajax":1,"@marcom/ac-object/defaults":179}],11:[function(e,t,i){"use strict";function n(e,t){var i=s(t||{},a);o.call(this,e,i)}var r,o=e("../XHR"),s=e("@marcom/ac-object/extend"),a={responseType:"arraybuffer"};r=n.prototype=Object.create(o.prototype),t.exports=n},{"../XHR":10,"@marcom/ac-object/extend":180}],12:[function(e,t,i){"use strict";function n(e,t){o.apply(this,arguments)}var r,o=e("../XHR");r=n.prototype=Object.create(o.prototype),r._onLoad=function(e){try{this.data=JSON.parse(e.response||e.responseText)}catch(t){this._onError(t)}o.prototype._onLoad.call(this,e)},t.exports=n},{"../XHR":10}],13:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Promise");var n=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=e("@marcom/ac-object/defaults"),o=e("./utils/enqueueAsset"),s=e("./utils/selectQueue"),a=e("./queue"),c={failFast:!0,privateQueue:!1,privateQueueThreads:a.DEFAULT_THREADS},l=function(e,t){n.call(this),this.options=r(c,t||{}),this._onGroupError=this._onGroupError.bind(this),this._onAssetError=this._onAssetError.bind(this),this._onScheduled=this._onScheduled.bind(this),this._onProgress=this._onProgress.bind(this),this._onComplete=this._onComplete.bind(this),this.errors=[],this._queue=s(this.options.privateQueue,this.options.privateQueueThreads),this._assets=[].concat(e),this._loaded=[],this._errored=[],this._enqueued=[],this._dequeued=[],this._pending=[],this._isRunning=!1,this._isComplete=!1,this._isErrored=!1,this._destroyPending=!1},u=l.prototype=Object.create(n.prototype);u.load=function(){var e=this._assets.map(function(e){var t={asset:e,success:this._onProgress,failure:this._onAssetError,scheduled:this._onScheduled},i=o(this._queue,t,this.options.failFast);return this._enqueued.push(i),i.promise},this);Promise.all(e).then(this._onComplete)["catch"](this._onGroupError),this._isRunning=!0,this._queue.start();var t=new Promise(function(e,t){this.once("load",e),this.options.failFast&&this.once("error",e)}.bind(this));return t},u.isRunning=function(){return this._isRunning},u.count=function(){return this._enqueued.length},u.pending=function(){return this._pending.length},u.loadedCount=function(){return this._loaded.length},u.isComplete=function(){return this._isComplete},u.isErrored=function(){return this._isErrored},u.pause=function(){this.isComplete()||this.isErrored()||!this.isRunning()||(this._dequeueItems(),this._pauseAssets(),this._isRunning=!1)},u.resume=function(){this.isComplete()||this.isErrored()||this.isRunning()||this._destroyPending||(this._reenqueueItems(),this._resumeAssets(),this._isRunning=!0)},u.destroy=function(){this._destroyPending||(n.prototype.destroy.call(this),this.pause(),this._destroyPending=!0,this._assets.forEach(function(e){e.destroy()}),0===this.pending()&&this._destroy())},u.trigger=function(){this._destroyPending||n.prototype.trigger.apply(this,arguments)},u._destroy=function(){this.privateQueue&&(this._queue.destroy(),this._queue=null,this.options.privateQueue=null),this.errors=null,this._assets=null,this._loaded=null,this._errored=null,this._enqueued=null,this._dequeued=null,this._pending=null},u._pauseAssets=function(){this._assets.forEach(function(e){"function"==typeof e.pause&&e.pause()})},u._resumeAssets=function(){this._assets.forEach(function(e){"function"==typeof e.resume&&e.resume()})},u._onProgress=function(e){if(!this.isErrored()){var t=this._pending.indexOf(e),i=this._pending.splice(t,1)[0];if(i&&"loaded"===i.asset.status&&this._loaded.push(i.asset),this._destroyPending)return void(0===this.pending()&&this._destroy());var n=this._makeDataObject(e.asset);this.trigger("progress",n)}},u._onScheduled=function(e){var t=this._enqueued.indexOf(e);t>-1&&(this._enqueued.splice(t,1),this._pending.push(e))},u._onComplete=function(e){this._isRunning=!1,this._isComplete=!0;var t=this._makeDataObject(this._loaded[this._loaded.length-1]);this.trigger("load",t)},u._onAssetError=function(e){this.errors.push(e.error),this._errored.push(e);var t=this._pending.indexOf(e);this._pending.splice(t,1);var i=this._makeDataObject(e.asset);this.trigger("error",i)},u._onGroupError=function(e){this.options.failFast&&(this.pause(),this._isErrored=!0,this._isRunning=!1,this._isComplete=!1)},u._makeDataObject=function(e){var t=this.errors.length;this.errors.map(function(e){return this._assets.indexOf(e)},this);return{latest:e,assets:this._assets,error:!!(t>0),errored:this.errors}},u._dequeueItems=function(){this._enqueued.forEach(function(e){this._queue.dequeueQueueItem(e.queueItem),this._dequeued.push(e)},this),this._enqueued=[]},u._reenqueueItems=function(){this._dequeued.forEach(function(e){this._queue.enqueueQueueItem(e.queueItem),this._enqueued.push(e)},this),this._dequeued=[]},t.exports=l},{"./queue":18,"./utils/enqueueAsset":19,"./utils/selectQueue":20,"@marcom/ac-event-emitter-micro":96,"@marcom/ac-object/defaults":179,"@marcom/ac-polyfills/Promise":void 0}],14:[function(e,t,i){t.exports.assetLoader=e("./assetLoader"),t.exports.types=e("./assetTypes"),t.exports.AssetGroup=e("./AssetGroup"),t.exports.createAsset=e("./createAsset")},{"./AssetGroup":13,"./assetLoader":15,"./assetTypes":16,"./createAsset":17}],15:[function(e,t,i){"use strict";function n(e,t){return e=[].concat(e),e.map(function(e){return c(e,t)})}function r(e,t){var i=u(t||{});return i.privateQueue=l(i.privateQueue,i.privateQueueThreads),e=n(e,i.privateQueue),new s(e,i)}var o=e("./queue"),s=e("./AssetGroup"),a=e("./assetTypes"),c=e("./createAsset"),l=e("./utils/selectQueue"),u=e("@marcom/ac-object/clone");t.exports={count:function(){return o.getInstance().count()},pending:function(){return o.getInstance().pending()},pause:function(){return o.getInstance().pause()},stop:function(){return o.getInstance().stop()},clear:function(){return o.getInstance().clear()},isEmpty:function(){return o.getInstance().isEmpty()},load:function(e,t){var i=r(e,t);return i.load()},resume:function(){return o.getInstance().start()},setThreads:function(e){o.setThreads(e)},createAssets:function(e,t){return n(e,t)},createAssetGroup:function(e,t){return r(e,t)},types:a}},{"./AssetGroup":13,"./assetTypes":16,"./createAsset":17,"./queue":18,"./utils/selectQueue":20,"@marcom/ac-object/clone":177}],16:[function(e,t,i){"use strict";var n=e("./Asset/XHR"),r=e("./Asset/SplitFile"),o=e("./Asset/Img"),s=e("./Asset/Video"),a=e("./Asset/XHR/ArrayBuffer"),c=e("./Asset/XHR/JSON");t.exports={XHR_ASSET:n,JSON_ASSET:c,SPLITFILE_ASSET:r,IMG_ASSET:o,VIDEO_ASSET:s,ARRAY_BUFFER_ASSET:a}},{"./Asset/Img":7,"./Asset/SplitFile":8,"./Asset/Video":9,"./Asset/XHR":10,"./Asset/XHR/ArrayBuffer":11,"./Asset/XHR/JSON":12}],17:[function(e,t,i){"use strict";function n(e){return e=e.replace(/([?#].*)$/,""),s[e.split(".").pop()]}var r=e("./assetTypes"),o=e("./Asset"),s={txt:r.XHR_ASSET,xml:r.XHR_ASSET,csv:r.XHR_ASSET,json:r.JSON_ASSET,png:r.IMG_ASSET,jpg:r.IMG_ASSET,gif:r.IMG_ASSET,svg:r.IMG_ASSET,splitfile:r.SPLITFILE_ASSET};t.exports=function(e,t){var i={};return o.prototype.isPrototypeOf(e)?src:("string"==typeof e&&(i.src=e,i.type=n(e)),"object"==typeof e&&(i=e,"string"==typeof i.type&&(i.type=n(i.type)),i.type||(i.type=n(i.src))),i.options||(i.options={}),t&&(i.options.queue=t),new i.type(i.src,i.options))}},{"./Asset":6,"./assetTypes":16}],18:[function(e,t,i){"use strict";function n(e){return e=e||c,new a(e)}function r(e){return e=e||l,s||(s=n(e)),s}function o(e){l=e}var s,a=e("@marcom/ac-queue").LiveQueue,c=4,l=c;t.exports={getInstance:function(e){return r(e)},setThreads:function(e){o(e)},newInstance:function(e){return n(e)},isLiveQueue:function(e){return e instanceof a},DEFAULT_THREADS:c}},{"@marcom/ac-queue":202}],19:[function(e,t,i){"use strict";function n(e,t){"function"==typeof e[t]&&e[t](e)}e("@marcom/ac-polyfills/Promise"),t.exports=function(e,t,i){var r=function(e,n){t.scheduled(t),t.asset.once("loaded",function(i){e(t)}),t.asset.once("error",function(r){return i?n(r):void e(t)}),t.asset.load()},o=function(){return new Promise(r)},s=new Promise(function(e,r){t.asset.once("loaded",function(i){n(t,"success"),e(i)}),t.asset.once("error",function(o){return t.error=o,n(t,"failure"),i?r(o):void e(t)})});return t.queueItem=e.enqueue(o,t.asset.priority),t.promise=s,t}},{"@marcom/ac-polyfills/Promise":void 0}],20:[function(e,t,i){"use strict";var n=e("../queue");t.exports=function(e,t){return t=t||n.DEFAULT_THREADS,n.isLiveQueue(e)?e:e===!0?n.newInstance(t):n.getInstance()}},{"../queue":18}],21:[function(e,t,i){"use strict";var n=function(){function e(e){for(var t=0;t<c.length;t++){var n=i[t]+e;if(void 0!==a.style[n])return n}}function t(e){for(var t=0;t<l.length;t++){var i=l[t]+e;if(void 0!==a.style[i])return i}}var i=["","-webkit-","-moz-","-o-","-ms-"],n={"animation-delay":"transitionend","-o-animation-delay":"oTransitionEnd","-moz-animation-delay":"transitionend","-webkit-animation-delay":"webkitTransitionEnd","-ms-animation-delay":"transitionend"},r={"animation-delay":"animationstart","-o-animation-delay":"oanimationstart","-moz-animation-delay":"animationstart","-webkit-animation-delay":"webkitAnimationStart","-ms-animation-delay":"MSAnimationStart"},o={"animation-delay":"animationiteration","-o-animation-delay":"oanimationiteration","-moz-animation-delay":"animationiteration","-webkit-animation-delay":"webkitAnimationIteration","-ms-animation-delay":"MSAnimationIteration"},s={"animation-delay":"animationend","-o-animation-delay":"oanimationend","-moz-animation-delay":"animationend","-webkit-animation-delay":"webkitAnimationEnd","-ms-animation-delay":"MSAnimationEnd"},a=document.createElement("_"),c=["","-webkit-","-moz-","-o-","-ms-"],l=["-webkit-","","-moz-","-o-","-ms-"];return{filter:t("filter"),transform:e("transform"),transformOrigin:e("transform-origin"),transition:e("transition"),transitionDelay:e("transition-delay"),transitionDuration:e("transition-duration"),transitionProperty:e("transition-property"),transitionTimingFunction:e("transition-timing-function"),transitionEnd:n[e("animation-delay")],animation:e("animation"),animationDelay:e("animation-delay"),animationDirection:e("animation-direction"),animationDuration:e("animation-duration"),animationFillMode:e("animation-fill-mode"),animationIterationCount:e("animation-iteration-count"),animationName:e("animation-name"),animationTimingFunction:e("animation-timing-function"),animationPlayState:e("animation-play-state"),animationStart:r[e("animation-delay")],animationIteration:o[e("animation-delay")],animationEnd:s[e("animation-delay")]}}();t.exports=n},{}],22:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var n=e("./className/add");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),i=t.shift(t);if(i.classList&&i.classList.add)return void i.classList.add.apply(i.classList,t);for(e=0;e<t.length;e++)n(i,t[e])}},{"./className/add":23,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],23:[function(e,t,i){"use strict";var n=e("./contains");t.exports=function(e,t){n(e,t)||(e.className+=" "+t)}},{"./contains":24}],24:[function(e,t,i){"use strict";var n=e("./getTokenRegExp");t.exports=function(e,t){return n(t).test(e.className)}},{"./getTokenRegExp":25}],25:[function(e,t,i){"use strict";t.exports=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")}},{}],26:[function(e,t,i){"use strict";var n=e("./contains"),r=e("./getTokenRegExp");t.exports=function(e,t){n(e,t)&&(e.className=e.className.replace(r(t),"$1").trim())}},{"./contains":24,"./getTokenRegExp":25}],27:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var n=e("./className/remove");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),i=t.shift(t);if(i.classList&&i.classList.remove)return void i.classList.remove.apply(i.classList,t);for(e=0;e<t.length;e++)n(i,t[e])}},{"./className/remove":26,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],28:[function(e,t,i){"use strict";t.exports={DOMEmitter:e("./ac-dom-emitter/DOMEmitter")}},{"./ac-dom-emitter/DOMEmitter":29}],29:[function(e,t,i){"use strict";function n(e){null!==e&&(this.el=e,this._bindings={},this._delegateFuncs={},this._eventEmitter=new o)}var r,o=e("ac-event-emitter").EventEmitter,s=e("./DOMEmitterEvent"),a={addEventListener:e("@marcom/ac-dom-events/addEventListener"),removeEventListener:e("@marcom/ac-dom-events/removeEventListener"),dispatchEvent:e("@marcom/ac-dom-events/dispatchEvent")},c={querySelectorAll:e("@marcom/ac-dom-traversal/querySelectorAll"),matchesSelector:e("@marcom/ac-dom-traversal/matchesSelector")},l="dom-emitter";r=n.prototype,r.on=function(){return this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._on),this},r.once=function(){return this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._once),this},r.off=function(){return this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._off),this},r.has=function(e,t,i,n){var r,o;if("string"==typeof t?(r=t,o=i):(o=t,n=i),r){var s=this._getDelegateFuncBindingIdx(e,r,o,n,!0);return s>-1}return!(!this._eventEmitter||!this._eventEmitter.has.apply(this._eventEmitter,arguments))},r.trigger=function(e,t,i,n){e=this._parseEventNames(e),e=this._cleanStringData(e);var r,o,s,a=e.length;for("string"==typeof t?(r=this._cleanStringData(t),o=i):(o=t,n=i),s=0;s<a;s++)this._triggerDOMEvents(e[s],o,r);return this},r.emitterTrigger=function(e,t,i){if(!this._eventEmitter)return this;e=this._parseEventNames(e),e=this._cleanStringData(e),t=new s(t,this);var n,r=e.length;for(n=0;n<r;n++)this._eventEmitter.trigger(e[n],t,i);return this},r.propagateTo=function(e,t){return this._eventEmitter.propagateTo(e,t),this},r.stopPropagatingTo=function(e){return this._eventEmitter.stopPropagatingTo(e),this},r.stopImmediatePropagation=function(){return this._eventEmitter.stopImmediatePropagation(),this},r.destroy=function(){this._triggerInternalEvent("willdestroy"),this.off();var e;for(e in this)this.hasOwnProperty(e)&&(this[e]=null)},r._parseEventNames=function(e){return e?e.split(" "):[e]},r._onListenerEvent=function(e,t){var i=new s(t,this);this._eventEmitter.trigger(e,i,!1)},r._setListener=function(e){this._bindings[e]=this._onListenerEvent.bind(this,e),a.addEventListener(this.el,e,this._bindings[e])},r._removeListener=function(e){a.removeEventListener(this.el,e,this._bindings[e]),this._bindings[e]=null},r._triggerInternalEvent=function(e,t){this.emitterTrigger(l+":"+e,t)},r._normalizeArgumentsAndCall=function(e,t){var i={};if(0===e.length)return void t.call(this,i);if("string"==typeof e[0]||null===e[0])return e=this._cleanStringData(e),i.events=e[0],"string"==typeof e[1]?(i.delegateQuery=e[1],i.callback=e[2],i.context=e[3]):(i.callback=e[1],i.context=e[2]),void t.call(this,i);var n,r,o=":",s=e[0];for(n in s)s.hasOwnProperty(n)&&(i={},r=this._cleanStringData(n.split(o)),i.events=r[0],i.delegateQuery=r[1],i.callback=s[n],i.context=e[1],t.call(this,i))},r._registerDelegateFunc=function(e,t,i,n,r){var o=this._delegateFunc.bind(this,e,t,i,r);return this._delegateFuncs[t]=this._delegateFuncs[t]||{},this._delegateFuncs[t][e]=this._delegateFuncs[t][e]||[],this._delegateFuncs[t][e].push({func:n,context:r,delegateFunc:o}),o},r._cleanStringData=function(e){var t=!1;"string"==typeof e&&(e=[e],t=!0);var i,n,r,o=[],s=e.length;for(i=0;i<s;i++){if(n=e[i],"string"==typeof n){if(""===n||" "===n)continue;for(r=n.length;" "===n[0];)n=n.slice(1,r),r--;for(;" "===n[r-1];)n=n.slice(0,r-1),r--}o.push(n)}return t?o[0]:o},r._unregisterDelegateFunc=function(e,t,i,n){if(this._delegateFuncs[t]&&this._delegateFuncs[t][e]){var r,o=this._getDelegateFuncBindingIdx(e,t,i,n);return o>-1&&(r=this._delegateFuncs[t][e][o].delegateFunc,this._delegateFuncs[t][e].splice(o,1),0===this._delegateFuncs[t][e].length&&(this._delegateFuncs[t][e]=null)),r}},r._unregisterDelegateFuncs=function(e,t){if(this._delegateFuncs[t]&&(null===e||this._delegateFuncs[t][e]))if(null!==e)this._unbindDelegateFunc(e,t);else{var i;for(i in this._delegateFuncs[t])this._delegateFuncs[t].hasOwnProperty(i)&&this._unbindDelegateFunc(i,t)}},r._unbindDelegateFunc=function(e,t){for(var i,n,r=0;this._delegateFuncs[t][e]&&this._delegateFuncs[t][e][r];)i=this._delegateFuncs[t][e][r],n=this._delegateFuncs[t][e][r].length,this._off({events:e,delegateQuery:t,callback:i.func,context:i.context}),this._delegateFuncs[t][e]&&n===this._delegateFuncs[t][e].length&&r++;i=n=null},r._unregisterDelegateFuncsByEvent=function(e){var t;for(t in this._delegateFuncs)this._delegateFuncs.hasOwnProperty(t)&&this._unregisterDelegateFuncs(e,t)},r._delegateFunc=function(e,t,i,n,r){if(this._targetHasDelegateAncestor(r.target,t)){var o=Array.prototype.slice.call(arguments,0),s=o.slice(4,o.length);n=n||window,"object"==typeof r.detail&&(s[0]=r.detail),i.apply(n,s)}},r._targetHasDelegateAncestor=function(e,t){for(var i=e;i&&i!==this.el&&i!==document.documentElement;){if(c.matchesSelector(i,t))return!0;i=i.parentNode}return!1},r._on=function(e){var t=e.events,i=e.callback,n=e.delegateQuery,r=e.context,o=e.unboundCallback||i;t=this._parseEventNames(t),t.forEach(function(e,t,i,n,r){this.has(r)||this._setListener(r),"string"==typeof n&&(e=this._registerDelegateFunc(r,n,e,t,i)),this._triggerInternalEvent("willon",{evt:r,callback:e,context:i,delegateQuery:n}),this._eventEmitter.on(r,e,i),this._triggerInternalEvent("didon",{evt:r,callback:e,context:i,delegateQuery:n})}.bind(this,i,o,r,n)),t=i=o=n=r=null},r._off=function(e){var t=e.events,i=e.callback,n=e.delegateQuery,r=e.context,o=e.unboundCallback||i;if("undefined"!=typeof t)t=this._parseEventNames(t),t.forEach(function(e,t,i,n,r){if("string"!=typeof n||"function"!=typeof t||(e=this._unregisterDelegateFunc(r,n,t,i)))return"string"==typeof n&&"undefined"==typeof e?void this._unregisterDelegateFuncs(r,n):void("string"==typeof r&&"undefined"==typeof e&&(this._unregisterDelegateFuncsByEvent(r),"string"==typeof n)||(this._triggerInternalEvent("willoff",{evt:r,callback:e,context:i,delegateQuery:n}),this._eventEmitter.off(r,e,i),this._triggerInternalEvent("didoff",{evt:r,callback:e,context:i,delegateQuery:n}),this.has(r)||this._removeListener(r)))}.bind(this,i,o,r,n)),t=i=o=n=r=null;else{this._eventEmitter.off();var s;for(s in this._bindings)this._bindings.hasOwnProperty(s)&&this._removeListener(s);for(s in this._delegateFuncs)this._delegateFuncs.hasOwnProperty(s)&&(this._delegateFuncs[s]=null)}},r._once=function(e){var t=e.events,i=e.callback,n=e.delegateQuery,r=e.context;t=this._parseEventNames(t),t.forEach(function(e,t,i,n){return"string"==typeof i?this._handleDelegateOnce(n,e,t,i):(this.has(n)||this._setListener(n),this._triggerInternalEvent("willonce",{evt:n,callback:e,context:t,delegateQuery:i}),this._eventEmitter.once.call(this,n,e,t),void this._triggerInternalEvent("didonce",{evt:n,callback:e,context:t,delegateQuery:i}))}.bind(this,i,r,n)),t=i=n=r=null},r._handleDelegateOnce=function(e,t,i,n){return this._triggerInternalEvent("willonce",{evt:e,callback:t,context:i,delegateQuery:n}),this._on({events:e,context:i,delegateQuery:n,callback:this._getDelegateOnceCallback.bind(this,e,t,i,n),unboundCallback:t}),this._triggerInternalEvent("didonce",{evt:e,callback:t,context:i,delegateQuery:n}),this},r._getDelegateOnceCallback=function(e,t,i,n){var r=Array.prototype.slice.call(arguments,0),o=r.slice(4,r.length);t.apply(i,o),this._off({events:e,delegateQuery:n,callback:t,context:i})},r._getDelegateFuncBindingIdx=function(e,t,i,n,r){var o=-1;if(this._delegateFuncs[t]&&this._delegateFuncs[t][e]){var s,a,c=this._delegateFuncs[t][e].length;for(s=0;s<c;s++)if(a=this._delegateFuncs[t][e][s],r&&"undefined"==typeof i&&(i=a.func),a.func===i&&a.context===n){o=s;break}}return o},r._triggerDOMEvents=function(e,t,i){var n=[this.el];i&&(n=c.querySelectorAll(i,this.el));var r,o=n.length;for(r=0;r<o;r++)a.dispatchEvent(n[r],e,{bubbles:!0,cancelable:!0,detail:t})},t.exports=n},{"./DOMEmitterEvent":30,"@marcom/ac-dom-events/addEventListener":31,"@marcom/ac-dom-events/dispatchEvent":32,"@marcom/ac-dom-events/removeEventListener":34,"@marcom/ac-dom-traversal/matchesSelector":79,"@marcom/ac-dom-traversal/querySelectorAll":80,"ac-event-emitter":227}],30:[function(e,t,i){"use strict";var n,r={preventDefault:e("@marcom/ac-dom-events/preventDefault"),stopPropagation:e("@marcom/ac-dom-events/stopPropagation"),target:e("@marcom/ac-dom-events/target")},o=function(e,t){this._domEmitter=t,this.originalEvent=e||{},
this._originalTarget=r.target(this.originalEvent),this.target=this._originalTarget||this._domEmitter.el,this.currentTarget=this._domEmitter.el,this.timeStamp=this.originalEvent.timeStamp||Date.now(),this._isDOMEvent(this.originalEvent)?"object"==typeof this.originalEvent.detail&&(this.data=this.originalEvent.detail):e&&(this.data=this.originalEvent,this.originalEvent={})};n=o.prototype,n.preventDefault=function(){r.preventDefault(this.originalEvent)},n.stopPropagation=function(){r.stopPropagation(this.originalEvent)},n.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this._domEmitter.stopImmediatePropagation()},n._isDOMEvent=function(e){return!!(this._originalTarget||"undefined"!==document.createEvent&&"undefined"!=typeof CustomEvent&&e instanceof CustomEvent)},t.exports=o},{"@marcom/ac-dom-events/preventDefault":33,"@marcom/ac-dom-events/stopPropagation":36,"@marcom/ac-dom-events/target":37}],31:[function(e,t,i){"use strict";var n=e("./utils/addEventListener"),r=e("./shared/getEventType");t.exports=function(e,t,i,o){return t=r(e,t),n(e,t,i,o)}},{"./shared/getEventType":35,"./utils/addEventListener":38}],32:[function(e,t,i){"use strict";var n=e("./utils/dispatchEvent"),r=e("./shared/getEventType");t.exports=function(e,t,i){return t=r(e,t),n(e,t,i)}},{"./shared/getEventType":35,"./utils/dispatchEvent":39}],33:[function(e,t,i){"use strict";t.exports=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1}},{}],34:[function(e,t,i){"use strict";var n=e("./utils/removeEventListener"),r=e("./shared/getEventType");t.exports=function(e,t,i,o){return t=r(e,t),n(e,t,i,o)}},{"./shared/getEventType":35,"./utils/removeEventListener":40}],35:[function(e,t,i){"use strict";var n=e("@marcom/ac-prefixer/getEventType");t.exports=function(e,t){var i,r;return i="tagName"in e?e.tagName:e===window?"window":"document",r=n(t,i),r?r:t}},{"@marcom/ac-prefixer/getEventType":186}],36:[function(e,t,i){"use strict";t.exports=function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},{}],37:[function(e,t,i){"use strict";t.exports=function(e){return e=e||window.event,"undefined"!=typeof e.target?e.target:e.srcElement}},{}],38:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){return e.addEventListener?e.addEventListener(t,i,!!n):e.attachEvent("on"+t,i),e}},{}],39:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/CustomEvent"),t.exports=function(e,t,i){var n;return e.dispatchEvent?(n=i?new CustomEvent(t,i):new CustomEvent(t),e.dispatchEvent(n)):(n=document.createEventObject(),i&&"detail"in i&&(n.detail=i.detail),e.fireEvent("on"+t,n)),e}},{"@marcom/ac-polyfills/CustomEvent":void 0}],40:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){return e.removeEventListener?e.removeEventListener(t,i,!!n):e.detachEvent("on"+t,i),e}},{}],41:[function(e,t,i){"use strict";t.exports=function(e,t){var i;return t?(i=e.getBoundingClientRect(),{width:i.width,height:i.height}):{width:e.offsetWidth,height:e.offsetHeight}}},{}],42:[function(e,t,i){"use strict";var n=e("./getDimensions"),r=e("./getScrollX"),o=e("./getScrollY");t.exports=function(e,t){var i,s,a,c;if(t)return i=e.getBoundingClientRect(),s=r(),a=o(),{top:i.top+a,right:i.right+s,bottom:i.bottom+a,left:i.left+s};for(c=n(e,t),i={top:e.offsetTop,left:e.offsetLeft,width:c.width,height:c.height};e=e.offsetParent;)i.top+=e.offsetTop,i.left+=e.offsetLeft;return{top:i.top,right:i.left+i.width,bottom:i.top+i.height,left:i.left}}},{"./getDimensions":41,"./getScrollX":43,"./getScrollY":44}],43:[function(e,t,i){"use strict";t.exports=function(e){return e=e||window,e===window?window.scrollX||window.pageXOffset:e.scrollLeft}},{}],44:[function(e,t,i){"use strict";t.exports=function(e){return e=e||window,e===window?window.scrollY||window.pageYOffset:e.scrollTop}},{}],45:[function(e,t,i){"use strict";var n=e("./getPagePosition"),r=e("./getScrollX"),o=e("./getScrollY");t.exports=function(e,t){var i,s,a;return t?(i=e.getBoundingClientRect(),{top:i.top,right:i.right,bottom:i.bottom,left:i.left}):(i=n(e),s=r(),a=o(),{top:i.top-a,right:i.right-s,bottom:i.bottom-a,left:i.left-s})}},{"./getPagePosition":42,"./getScrollX":43,"./getScrollY":44}],46:[function(e,t,i){"use strict";t.exports=8},{}],47:[function(e,t,i){"use strict";t.exports=11},{}],48:[function(e,t,i){"use strict";t.exports=9},{}],49:[function(e,t,i){"use strict";t.exports=10},{}],50:[function(e,t,i){"use strict";t.exports=1},{}],51:[function(e,t,i){"use strict";t.exports=3},{}],52:[function(e,t,i){"use strict";t.exports={createDocumentFragment:e("./createDocumentFragment"),filterByNodeType:e("./filterByNodeType"),hasAttribute:e("./hasAttribute"),indexOf:e("./indexOf"),insertAfter:e("./insertAfter"),insertBefore:e("./insertBefore"),insertFirstChild:e("./insertFirstChild"),insertLastChild:e("./insertLastChild"),isComment:e("./isComment"),isDocument:e("./isDocument"),isDocumentFragment:e("./isDocumentFragment"),isDocumentType:e("./isDocumentType"),isElement:e("./isElement"),isNode:e("./isNode"),isNodeList:e("./isNodeList"),isTextNode:e("./isTextNode"),remove:e("./remove"),replace:e("./replace"),COMMENT_NODE:e("./COMMENT_NODE"),DOCUMENT_FRAGMENT_NODE:e("./DOCUMENT_FRAGMENT_NODE"),DOCUMENT_NODE:e("./DOCUMENT_NODE"),DOCUMENT_TYPE_NODE:e("./DOCUMENT_TYPE_NODE"),ELEMENT_NODE:e("./ELEMENT_NODE"),TEXT_NODE:e("./TEXT_NODE")}},{"./COMMENT_NODE":46,"./DOCUMENT_FRAGMENT_NODE":47,"./DOCUMENT_NODE":48,"./DOCUMENT_TYPE_NODE":49,"./ELEMENT_NODE":50,"./TEXT_NODE":51,"./createDocumentFragment":53,"./filterByNodeType":54,"./hasAttribute":55,"./indexOf":56,"./insertAfter":57,"./insertBefore":58,"./insertFirstChild":59,"./insertLastChild":60,"./isComment":63,"./isDocument":64,"./isDocumentFragment":65,"./isDocumentType":66,"./isElement":67,"./isNode":68,"./isNodeList":69,"./isTextNode":70,"./remove":71,"./replace":72}],53:[function(e,t,i){"use strict";t.exports=function(e){var t,i=document.createDocumentFragment();if(e)for(t=document.createElement("div"),t.innerHTML=e;t.firstChild;)i.appendChild(t.firstChild);return i}},{}],54:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Array/prototype.filter");var n=e("./internal/isNodeType"),r=e("./ELEMENT_NODE");t.exports=function(e,t){return t=t||r,e=Array.prototype.slice.call(e),e.filter(function(e){return n(e,t)})}},{"./ELEMENT_NODE":50,"./internal/isNodeType":61,"@marcom/ac-polyfills/Array/prototype.filter":void 0,"@marcom/ac-polyfills/Array/prototype.slice":void 0}],55:[function(e,t,i){"use strict";t.exports=function(e,t){return"hasAttribute"in e?e.hasAttribute(t):null!==e.attributes.getNamedItem(t)}},{}],56:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.indexOf"),e("@marcom/ac-polyfills/Array/prototype.slice");var n=(e("./internal/validate"),e("./filterByNodeType"));t.exports=function(e,t){var i,r=e.parentNode;return r?(i=r.childNodes,i=t!==!1?n(i,t):Array.prototype.slice.call(i),i.indexOf(e)):0}},{"./filterByNodeType":54,"./internal/validate":62,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0,"@marcom/ac-polyfills/Array/prototype.slice":void 0}],57:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e,t){return n.insertNode(e,!0,"insertAfter"),n.childNode(t,!0,"insertAfter"),n.hasParentNode(t,"insertAfter"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)}},{"./internal/validate":62}],58:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e,t){return n.insertNode(e,!0,"insertBefore"),n.childNode(t,!0,"insertBefore"),n.hasParentNode(t,"insertBefore"),t.parentNode.insertBefore(e,t)}},{"./internal/validate":62}],59:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e,t){return n.insertNode(e,!0,"insertFirstChild"),n.parentNode(t,!0,"insertFirstChild"),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}},{"./internal/validate":62}],60:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e,t){return n.insertNode(e,!0,"insertLastChild"),n.parentNode(t,!0,"insertLastChild"),t.appendChild(e)}},{"./internal/validate":62}],61:[function(e,t,i){"use strict";var n=e("../isNode");t.exports=function(e,t){return!!n(e)&&("number"==typeof t?e.nodeType===t:t.indexOf(e.nodeType)!==-1)}},{"../isNode":68}],62:[function(e,t,i){"use strict";var n=e("./isNodeType"),r=e("../COMMENT_NODE"),o=e("../DOCUMENT_FRAGMENT_NODE"),s=e("../ELEMENT_NODE"),a=e("../TEXT_NODE"),c=[s,a,r,o],l=" must be an Element, TextNode, Comment, or Document Fragment",u=[s,a,r],h=" must be an Element, TextNode, or Comment",m=[s,o],d=" must be an Element, or Document Fragment",p=" must have a parentNode";t.exports={parentNode:function(e,t,i,r){if(r=r||"target",(e||t)&&!n(e,m))throw new TypeError(i+": "+r+d)},childNode:function(e,t,i,r){if(r=r||"target",(e||t)&&!n(e,u))throw new TypeError(i+": "+r+h)},insertNode:function(e,t,i,r){if(r=r||"node",(e||t)&&!n(e,c))throw new TypeError(i+": "+r+l)},hasParentNode:function(e,t,i){if(i=i||"target",!e.parentNode)throw new TypeError(t+": "+i+p)}}},{"../COMMENT_NODE":46,"../DOCUMENT_FRAGMENT_NODE":47,"../ELEMENT_NODE":50,"../TEXT_NODE":51,"./isNodeType":61}],63:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./COMMENT_NODE");t.exports=function(e){return n(e,r)}},{"./COMMENT_NODE":46,"./internal/isNodeType":61}],64:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./DOCUMENT_NODE");t.exports=function(e){return n(e,r)}},{"./DOCUMENT_NODE":48,"./internal/isNodeType":61}],65:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./DOCUMENT_FRAGMENT_NODE");t.exports=function(e){return n(e,r)}},{"./DOCUMENT_FRAGMENT_NODE":47,"./internal/isNodeType":61}],66:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./DOCUMENT_TYPE_NODE");t.exports=function(e){return n(e,r)}},{"./DOCUMENT_TYPE_NODE":49,"./internal/isNodeType":61}],67:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./ELEMENT_NODE");t.exports=function(e){return n(e,r)}},{"./ELEMENT_NODE":50,"./internal/isNodeType":61}],68:[function(e,t,i){"use strict";t.exports=function(e){return!(!e||!e.nodeType)}},{}],69:[function(e,t,i){"use strict";var n=/^\[object (HTMLCollection|NodeList|Object)\]$/;t.exports=function(e){return!!e&&("number"==typeof e.length&&(!!("object"!=typeof e[0]||e[0]&&e[0].nodeType)&&n.test(Object.prototype.toString.call(e))))}},{}],70:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./TEXT_NODE");t.exports=function(e){return n(e,r)}},{"./TEXT_NODE":51,"./internal/isNodeType":61}],71:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e){return n.childNode(e,!0,"remove"),e.parentNode?e.parentNode.removeChild(e):e}},{"./internal/validate":62}],72:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e,t){return n.insertNode(e,!0,"insertFirstChild","newNode"),n.childNode(t,!0,"insertFirstChild","oldNode"),n.hasParentNode(t,"insertFirstChild","oldNode"),t.parentNode.replaceChild(e,t)}},{"./internal/validate":62}],73:[function(e,t,i){"use strict";t.exports={getStyle:e("./getStyle"),setStyle:e("./setStyle")}},{"./getStyle":74,"./setStyle":76}],74:[function(e,t,i){"use strict";var n=e("@marcom/ac-prefixer/getStyleProperty"),r=e("@marcom/ac-prefixer/stripPrefixes");t.exports=function(){var e,t,i,o,s=Array.prototype.slice.call(arguments),a=s.shift(s),c=window.getComputedStyle(a),l={};for("string"!=typeof s[0]&&(s=s[0]),o=0;o<s.length;o++)e=s[o],t=n(e),t?(e=r(t),i=c[t],i&&"auto"!==i||(i=null),i&&(i=r(i))):i=null,l[e]=i;return l}},{"@marcom/ac-prefixer/getStyleProperty":188,"@marcom/ac-prefixer/stripPrefixes":196}],75:[function(e,t,i){"use strict";t.exports=function(e){var t,i,n;if(!e&&0!==e)return"";if(Array.isArray(e))return e+"";if("object"==typeof e){for(t="",i=Object.keys(e),n=0;n<i.length;n++)t+=i[n]+"("+e[i[n]]+") ";return t.trim()}return e}},{}],76:[function(e,t,i){"use strict";var n=e("@marcom/ac-prefixer/getStyleCSS"),r=e("@marcom/ac-prefixer/getStyleProperty"),o=e("./internal/normalizeValue");t.exports=function(e,t){var i,s,a,c,l,u="";if("object"!=typeof t)throw new TypeError("setStyle: styles must be an Object");for(s in t)c=o(t[s]),c||0===c?(i=n(s,c),i!==!1&&(u+=" "+i)):(a=r(s),"removeAttribute"in e.style?e.style.removeAttribute(a):e.style[a]="");return u.length&&(l=e.style.cssText,";"!==l.charAt(l.length-1)&&(l+=";"),l+=u,e.style.cssText=l),e}},{"./internal/normalizeValue":75,"@marcom/ac-prefixer/getStyleCSS":187,"@marcom/ac-prefixer/getStyleProperty":188}],77:[function(e,t,i){"use strict";t.exports=window.Element?function(e){return e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector}(Element.prototype):null},{}],78:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.indexOf");var n=e("@marcom/ac-dom-nodes/isNode"),r=e("@marcom/ac-dom-nodes/COMMENT_NODE"),o=e("@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE"),s=e("@marcom/ac-dom-nodes/DOCUMENT_NODE"),a=e("@marcom/ac-dom-nodes/ELEMENT_NODE"),c=e("@marcom/ac-dom-nodes/TEXT_NODE"),l=function(e,t){return!!n(e)&&("number"==typeof t?e.nodeType===t:t.indexOf(e.nodeType)!==-1)},u=[a,s,o],h=" must be an Element, Document, or Document Fragment",m=[a,c,r],d=" must be an Element, TextNode, or Comment",p=" must be a string";t.exports={parentNode:function(e,t,i,n){if(n=n||"node",(e||t)&&!l(e,u))throw new TypeError(i+": "+n+h)},childNode:function(e,t,i,n){if(n=n||"node",(e||t)&&!l(e,m))throw new TypeError(i+": "+n+d)},selector:function(e,t,i,n){if(n=n||"selector",(e||t)&&"string"!=typeof e)throw new TypeError(i+": "+n+p)}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":46,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":47,"@marcom/ac-dom-nodes/DOCUMENT_NODE":48,"@marcom/ac-dom-nodes/ELEMENT_NODE":50,"@marcom/ac-dom-nodes/TEXT_NODE":51,"@marcom/ac-dom-nodes/isNode":68,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0}],79:[function(e,t,i){"use strict";var n=e("@marcom/ac-dom-nodes/isElement"),r=e("./internal/validate"),o=e("./internal/nativeMatches"),s=e("./shims/matchesSelector");t.exports=function(e,t){return r.selector(t,!0,"matchesSelector"),!!n(e)&&(o?o.call(e,t):s(e,t))}},{"./internal/nativeMatches":77,"./internal/validate":78,"./shims/matchesSelector":81,"@marcom/ac-dom-nodes/isElement":67}],80:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice");var n=e("./internal/validate"),r=e("./shims/querySelectorAll"),o="querySelectorAll"in document;t.exports=function(e,t){return t=t||document,n.parentNode(t,!0,"querySelectorAll","context"),n.selector(e,!0,"querySelectorAll"),o?Array.prototype.slice.call(t.querySelectorAll(e)):r(e,t)}},{"./internal/validate":78,"./shims/querySelectorAll":82,"@marcom/ac-polyfills/Array/prototype.slice":void 0}],81:[function(e,t,i){"use strict";var n=e("../querySelectorAll");t.exports=function(e,t){var i,r=e.parentNode||document,o=n(t,r);for(i=0;i<o.length;i++)if(o[i]===e)return!0;return!1}},{"../querySelectorAll":80}],82:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.indexOf");var n=e("@marcom/ac-dom-nodes/isElement"),r=e("@marcom/ac-dom-nodes/isDocumentFragment"),o=e("@marcom/ac-dom-nodes/remove"),s="_ac_qsa_",a=function(e,t){var i;if(t===document)return!0;for(i=e;(i=i.parentNode)&&n(i);)if(i===t)return!0;return!1},c=function(e){"recalc"in e?e.recalc(!1):document.recalc(!1),window.scrollBy(0,0)};t.exports=function(e,t){var i,n=document.createElement("style"),l=s+(Math.random()+"").slice(-6),u=[];for(t=t||document,document[l]=[],r(t)?t.appendChild(n):document.documentElement.firstChild.appendChild(n),n.styleSheet.cssText="*{display:recalc;}"+e+'{ac-qsa:expression(document["'+l+'"] && document["'+l+'"].push(this));}',c(t);document[l].length;)i=document[l].shift(),i.style.removeAttribute("ac-qsa"),u.indexOf(i)===-1&&a(i,t)&&u.push(i);return document[l]=null,o(n),c(t),u}},{"@marcom/ac-dom-nodes/isDocumentFragment":65,"@marcom/ac-dom-nodes/isElement":67,"@marcom/ac-dom-nodes/remove":71,"@marcom/ac-polyfills/Array/prototype.indexOf":void 0}],83:[function(e,t,i){"use strict";t.exports={createBezier:e("./ac-easing/createBezier"),createPredefined:e("./ac-easing/createPredefined"),createStep:e("./ac-easing/createStep"),Ease:e("./ac-easing/Ease")}},{"./ac-easing/Ease":84,"./ac-easing/createBezier":85,"./ac-easing/createPredefined":86,"./ac-easing/createStep":87}],84:[function(e,t,i){"use strict";function n(e,t){if("function"!=typeof e)throw new TypeError(r);this.easingFunction=e,this.cssString=t||null}var r="Ease expects an easing function.",o=n.prototype;o.getValue=function(e){return this.easingFunction(e,0,1,1)},t.exports=n},{}],85:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.every");var n=e("./Ease"),r=e("./helpers/KeySpline"),o="Bezier curve expects exactly four (4) numbers. Given: ";t.exports=function(e,t,i,s){var a=Array.prototype.slice.call(arguments),c=a.every(function(e){return"number"==typeof e});if(4!==a.length||!c)throw new TypeError(o+a);var l=new r(e,t,i,s),u=function(e,t,i,n){return l.get(e/n)*i+t},h="cubic-bezier("+a.join(", ")+")";return new n(u,h)}},{"./Ease":84,"./helpers/KeySpline":88,"@marcom/ac-polyfills/Array/prototype.every":void 0}],86:[function(e,t,i){"use strict";var n=e("./createStep"),r=e("./helpers/cssAliases"),o=e("./helpers/easingFunctions"),s=e("./Ease"),a='Easing function "%TYPE%" not recognized among the following: '+Object.keys(o).join(", ");t.exports=function(e){var t;if("step-start"===e)return n(1,"start");if("step-end"===e)return n(1,"end");if(t=o[e],!t)throw new Error(a.replace("%TYPE%",e));return new s(t,r[e])}},{"./Ease":84,"./createStep":87,"./helpers/cssAliases":89,"./helpers/easingFunctions":90}],87:[function(e,t,i){"use strict";var n=e("./Ease"),r="Step function expects a numeric value greater than zero. Given: ",o='Step function direction must be either "start" or "end" (default). Given: ';t.exports=function(e,t){if(t=t||"end","number"!=typeof e||e<1)throw new TypeError(r+e);if("start"!==t&&"end"!==t)throw new TypeError(o+t);var i=function(i,n,r,o){var s=r/e,a=Math["start"===t?"floor":"ceil"](i/o*e);return n+s*a},s="steps("+e+", "+t+")";return new n(i,s)}},{"./Ease":84}],88:[function(e,t,i){function n(e,t,i,n){function r(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function s(e){return 3*e}function a(e,t,i){return((r(t,i)*e+o(t,i))*e+s(t))*e}function c(e,t,i){return 3*r(t,i)*e*e+2*o(t,i)*e+s(t)}function l(t){for(var n=t,r=0;r<4;++r){var o=c(n,e,i);if(0===o)return n;var s=a(n,e,i)-t;n-=s/o}return n}this.get=function(r){return e===t&&i===n?r:a(l(r),t,n)}}t.exports=n},{}],89:[function(e,t,i){"use strict";var n={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)","ease-in-cubic":"cubic-bezier(0.55, 0.055, 0.675, 0.19)","ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)","ease-in-quad":"cubic-bezier(0.55, 0.085, 0.68, 0.53)","ease-out-quad":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","ease-in-out-quad":"cubic-bezier(0.455, 0.03, 0.515, 0.955)","ease-in-quart":"cubic-bezier(0.895, 0.03, 0.685, 0.22)","ease-out-quart":"cubic-bezier(0.165, 0.84, 0.44, 1)","ease-in-out-quart":"cubic-bezier(0.77, 0, 0.175, 1)","ease-in-quint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","ease-out-quint":"cubic-bezier(0.23, 1, 0.32, 1)","ease-in-out-quint":"cubic-bezier(0.86, 0, 0.07, 1)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)"};n.easeIn=n["ease-in"],n.easeOut=n["ease-out"],n.easeInOut=n["ease-in-out"],n.easeInCubic=n["ease-in-cubic"],n.easeOutCubic=n["ease-out-cubic"],n.easeInOutCubic=n["ease-in-out-cubic"],n.easeInQuad=n["ease-in-quad"],n.easeOutQuad=n["ease-out-quad"],n.easeInOutQuad=n["ease-in-out-quad"],n.easeInQuart=n["ease-in-quart"],n.easeOutQuart=n["ease-out-quart"],n.easeInOutQuart=n["ease-in-out-quart"],n.easeInQuint=n["ease-in-quint"],n.easeOutQuint=n["ease-out-quint"],n.easeInOutQuint=n["ease-in-out-quint"],n.easeInSine=n["ease-in-sine"],n.easeOutSine=n["ease-out-sine"],n.easeInOutSine=n["ease-in-out-sine"],n.easeInExpo=n["ease-in-expo"],n.easeOutExpo=n["ease-out-expo"],n.easeInOutExpo=n["ease-in-out-expo"],n.easeInCirc=n["ease-in-circ"],n.easeOutCirc=n["ease-out-circ"],n.easeInOutCirc=n["ease-in-out-circ"],n.easeInBack=n["ease-in-back"],n.easeOutBack=n["ease-out-back"],n.easeInOutBack=n["ease-in-out-back"],t.exports=n},{}],90:[function(e,t,i){"use strict";var n=e("../createBezier"),r=n(.25,.1,.25,1).easingFunction,o=n(.42,0,1,1).easingFunction,s=n(0,0,.58,1).easingFunction,a=n(.42,0,.58,1).easingFunction,c=function(e,t,i,n){return i*e/n+t},l=function(e,t,i,n){return i*(e/=n)*e+t},u=function(e,t,i,n){return-i*(e/=n)*(e-2)+t},h=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},m=function(e,t,i,n){return i*(e/=n)*e*e+t},d=function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},p=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},f=function(e,t,i,n){return i*(e/=n)*e*e*e+t},_=function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},g=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},v=function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},y=function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},b=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},E=function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},w=function(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t},S=function(e,t,i,n){return-i/2*(Math.cos(Math.PI*e/n)-1)+t},O=function(e,t,i,n){return 0===e?t:i*Math.pow(2,10*(e/n-1))+t},T=function(e,t,i,n){return e===n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t},k=function(e,t,i,n){return 0===e?t:e===n?t+i:(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(-Math.pow(2,-10*--e)+2)+t},A=function(e,t,i,n){return-i*(Math.sqrt(1-(e/=n)*e)-1)+t},x=function(e,t,i,n){return i*Math.sqrt(1-(e=e/n-1)*e)+t},F=function(e,t,i,n){return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},C=function(e,t,i,n){var r=1.70158,o=0,s=i;return 0===e?t:1===(e/=n)?t+i:(o||(o=.3*n),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/o))+t)},R=function(e,t,i,n){var r=1.70158,o=0,s=i;return 0===e?t:1===(e/=n)?t+i:(o||(o=.3*n),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*e)*Math.sin((e*n-r)*(2*Math.PI)/o)+i+t)},P=function(e,t,i,n){var r=1.70158,o=0,s=i;return 0===e?t:2===(e/=n/2)?t+i:(o||(o=n*(.3*1.5)),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),e<1?-.5*(s*Math.pow(2,10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/o))+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/o)*.5+i+t)},M=function(e,t,i,n,r){return void 0===r&&(r=1.70158),i*(e/=n)*e*((r+1)*e-r)+t},D=function(e,t,i,n,r){return void 0===r&&(r=1.70158),i*((e=e/n-1)*e*((r+1)*e+r)+1)+t},L=function(e,t,i,n,r){return void 0===r&&(r=1.70158),(e/=n/2)<1?i/2*(e*e*(((r*=1.525)+1)*e-r))+t:i/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+t},I=function(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},j=function(e,t,i,n){return i-I(n-e,0,i,n)+t},V=function(e,t,i,n){return e<n/2?.5*j(2*e,0,i,n)+t:.5*I(2*e-n,0,i,n)+.5*i+t};t.exports={linear:c,ease:r,easeIn:o,"ease-in":o,easeOut:s,"ease-out":s,easeInOut:a,"ease-in-out":a,easeInCubic:m,"ease-in-cubic":m,easeOutCubic:d,"ease-out-cubic":d,easeInOutCubic:p,"ease-in-out-cubic":p,easeInQuad:l,"ease-in-quad":l,easeOutQuad:u,"ease-out-quad":u,easeInOutQuad:h,"ease-in-out-quad":h,easeInQuart:f,"ease-in-quart":f,easeOutQuart:_,"ease-out-quart":_,easeInOutQuart:g,"ease-in-out-quart":g,easeInQuint:v,"ease-in-quint":v,easeOutQuint:y,"ease-out-quint":y,easeInOutQuint:b,"ease-in-out-quint":b,easeInSine:E,"ease-in-sine":E,easeOutSine:w,"ease-out-sine":w,easeInOutSine:S,"ease-in-out-sine":S,easeInExpo:O,"ease-in-expo":O,easeOutExpo:T,"ease-out-expo":T,easeInOutExpo:k,"ease-in-out-expo":k,easeInCirc:A,"ease-in-circ":A,easeOutCirc:x,"ease-out-circ":x,easeInOutCirc:F,"ease-in-out-circ":F,easeInBack:M,"ease-in-back":M,easeOutBack:D,"ease-out-back":D,easeInOutBack:L,"ease-in-out-back":L,easeInElastic:C,"ease-in-elastic":C,easeOutElastic:R,"ease-out-elastic":R,easeInOutElastic:P,"ease-in-out-elastic":P,easeInBounce:j,"ease-in-bounce":j,easeOutBounce:I,"ease-out-bounce":I,easeInOutBounce:V,"ease-in-out-bounce":V}},{"../createBezier":85}],91:[function(e,t,i){var n=e("./ac-element-engagement/ElementEngagement");t.exports=new n,t.exports.ElementEngagement=n},{"./ac-element-engagement/ElementEngagement":92}],92:[function(e,t,i){"use strict";var n,r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o={defaults:e("@marcom/ac-object/defaults"),extend:e("@marcom/ac-object/extend")},s=e("@marcom/ac-element-tracker").ElementTracker,a={timeToEngage:500,inViewThreshold:.75,stopOnEngaged:!0},c={thresholdEnterTime:0,thresholdExitTime:0,inThreshold:!1,engaged:!1,tracking:!0},l=function(e){s.call(this,null,e),r.call(this),this._thresholdEnter=this._thresholdEnter.bind(this),this._thresholdExit=this._thresholdExit.bind(this),this._enterView=this._enterView.bind(this),this._exitView=this._exitView.bind(this)};n=l.prototype=Object.create(s.prototype),n=o.extend(n,r.prototype),n._decorateTrackedElement=function(e,t){var i;i=o.defaults(a,t||{}),o.extend(e,i),o.extend(e,c)},n._attachElementListeners=function(e){e.on("thresholdenter",this._thresholdEnter,this),e.on("thresholdexit",this._thresholdExit,this),e.on("enterview",this._enterView,this),e.on("exitview",this._exitView,this)},n._removeElementListeners=function(e){e.off("thresholdenter",this._thresholdEnter),e.off("thresholdexit",this._thresholdExit),e.off("enterview",this._enterView),e.off("exitview",this._exitView)},n._attachAllElementListeners=function(){this.elements.forEach(function(e){e.stopOnEngaged?e.engaged||this._attachElementListeners(e):this._attachElementListeners(e)},this)},n._removeAllElementListeners=function(){this.elements.forEach(function(e){this._removeElementListeners(e)},this)},n._elementInViewPastThreshold=function(e){var t=!1;return t=e.pixelsInView===this._windowHeight||e.percentInView>e.inViewThreshold},n._ifInView=function(e,t){var i=e.inThreshold;s.prototype._ifInView.apply(this,arguments),!i&&this._elementInViewPastThreshold(e)&&(e.inThreshold=!0,e.trigger("thresholdenter",e),"number"==typeof e.timeToEngage&&e.timeToEngage>=0&&(e.engagedTimeout=window.setTimeout(this._engaged.bind(this,e),e.timeToEngage)))},n._ifAlreadyInView=function(e){var t=e.inThreshold;s.prototype._ifAlreadyInView.apply(this,arguments),t&&!this._elementInViewPastThreshold(e)&&(e.inThreshold=!1,e.trigger("thresholdexit",e),e.engagedTimeout&&(window.clearTimeout(e.engagedTimeout),e.engagedTimeout=null))},n._engaged=function(e){e.engagedTimeout=null,this._elementEngaged(e),e.trigger("engaged",e),this.trigger("engaged",e)},n._thresholdEnter=function(e){e.thresholdEnterTime=Date.now(),e.thresholdExitTime=0,this.trigger("thresholdenter",e)},n._thresholdExit=function(e){e.thresholdExitTime=Date.now(),this.trigger("thresholdexit",e)},n._enterView=function(e){this.trigger("enterview",e)},n._exitView=function(e){this.trigger("exitview",e)},n._elementEngaged=function(e){e.engaged=!0,e.stopOnEngaged&&this.stop(e)},n.stop=function(e){this.tracking&&!e&&(this._removeAllElementListeners(),s.prototype.stop.call(this)),e&&e.tracking&&(e.tracking=!1,this._removeElementListeners(e),this.removeElement(e))},n.start=function(e){e||this._attachAllElementListeners(),e&&!e.tracking&&(e.stopOnEngaged?e.engaged||(e.tracking=!0,this._attachElementListeners(e)):(e.tracking=!0,this._attachElementListeners(e))),this.tracking?(this.refreshAllElementMetrics(),this.refreshAllElementStates()):s.prototype.start.call(this)},n.addElement=function(e,t){t=t||{};var i=s.prototype.addElement.call(this,e,t.useRenderedPosition);return this._decorateTrackedElement(i,t),i},n.addElements=function(e,t){[].forEach.call(e,function(e){this.addElement(e,t)},this)},t.exports=l},{"@marcom/ac-element-tracker":93,"@marcom/ac-event-emitter-micro":96,"@marcom/ac-object/defaults":179,"@marcom/ac-object/extend":180}],93:[function(e,t,i){var n=e("./ac-element-tracker/ElementTracker"),r=e("./ac-element-tracker/TrackedElement");t.exports=new n,t.exports.ElementTracker=n,t.exports.TrackedElement=r},{"./ac-element-tracker/ElementTracker":94,"./ac-element-tracker/TrackedElement":95}],94:[function(e,t,i){"use strict";function n(e,t){this.options=s.clone(c),this.options="object"==typeof t?s.extend(this.options,t):this.options,this._scrollY=this._getScrollY(),this._windowHeight=this._getWindowHeight(),this.tracking=!1,this.elements=[],e&&(Array.isArray(e)||r.isNodeList(e)||r.isElement(e))&&this.addElements(e),this.refreshAllElementStates=this.refreshAllElementStates.bind(this),this.refreshAllElementMetrics=this.refreshAllElementMetrics.bind(this),this.options.autoStart&&this.start()}var r={isNodeList:e("@marcom/ac-dom-nodes/isNodeList"),isElement:e("@marcom/ac-dom-nodes/isElement")},o={getDimensions:e("@marcom/ac-dom-metrics/getDimensions"),getPagePosition:e("@marcom/ac-dom-metrics/getPagePosition"),getScrollY:e("@marcom/ac-dom-metrics/getScrollY")},s={clone:e("@marcom/ac-object/clone"),extend:e("@marcom/ac-object/extend")},a=e("./TrackedElement"),c={autoStart:!1,useRenderedPosition:!1},l=n.prototype;l.destroy=function(){var e,t;for(this.stop(),e=0,t=this.elements.length;e<t;e++)this.elements[e].destroy();this.elements=null,this.options=null},l._registerTrackedElements=function(e){var t=[].concat(e);t.forEach(function(e){this._elementInDOM(e.element)&&(e.offsetTop=e.element.offsetTop,this.elements.push(e))},this)},l._elementInDOM=function(e){var t=!1,i=document.getElementsByTagName("body")[0];return r.isElement(e)&&i.contains(e)&&(t=!0),t},l._elementPercentInView=function(e){return e.pixelsInView/e.height},l._elementPixelsInView=function(e){var t=e.top-this._scrollY,i=e.bottom-this._scrollY;return t>this._windowHeight||i<0?0:Math.min(i,this._windowHeight)-Math.max(t,0)},l._ifInView=function(e,t){t||e.trigger("enterview",e)},l._ifAlreadyInView=function(e){e.inView||e.trigger("exitview",e)},l.addElements=function(e,t){"undefined"==typeof t&&(t=this.options.useRenderedPosition),e=r.isNodeList(e)?Array.prototype.slice.call(e):[].concat(e);for(var i=0,n=e.length;i<n;i++)this.addElement(e[i],t)},l.addElement=function(e,t){var i=null;if("undefined"==typeof t&&(t=this.options.useRenderedPosition),!r.isElement(e))throw new TypeError("ElementTracker: "+e+" is not a valid DOM element");return i=new a(e,t),this._registerTrackedElements(i),this.refreshElementMetrics(i),this.refreshElementState(i),i},l.removeElement=function(e){var t,i=[];this.elements.forEach(function(t,n){t!==e&&t.element!==e||i.push(n)}),t=this.elements.filter(function(e,t){return i.indexOf(t)<0}),this.elements=t},l.start=function(){this.tracking===!1&&(this.tracking=!0,window.addEventListener("resize",this.refreshAllElementMetrics),window.addEventListener("orientationchange",this.refreshAllElementMetrics),window.addEventListener("scroll",this.refreshAllElementStates),this.refreshAllElementMetrics())},l.stop=function(){this.tracking===!0&&(this.tracking=!1,
window.removeEventListener("resize",this.refreshAllElementMetrics),window.removeEventListener("orientationchange",this.refreshAllElementMetrics),window.removeEventListener("scroll",this.refreshAllElementStates))},l.refreshAllElementMetrics=function(e,t){"number"!=typeof e&&(e=this._getScrollY()),"number"!=typeof t&&(t=this._getWindowHeight()),this._scrollY=e,this._windowHeight=t,this.elements.forEach(this.refreshElementMetrics,this)},l.refreshElementMetrics=function(e){if(!e.isActive)return e;var t=o.getDimensions(e.element,e.useRenderedPosition),i=o.getPagePosition(e.element,e.useRenderedPosition);return e=s.extend(e,t,i),this.refreshElementState(e)},l.refreshAllElementStates=function(e){"number"!=typeof e&&(e=this._getScrollY()),this._scrollY=e,this.elements.forEach(this.refreshElementState,this)},l.refreshElementState=function(e){if(!e.isActive)return e;var t=e.inView;return e.pixelsInView=this._elementPixelsInView(e),e.percentInView=this._elementPercentInView(e),e.inView=e.pixelsInView>0,e.inView&&this._ifInView(e,t),t&&this._ifAlreadyInView(e),e},l.pauseElementTracking=function(e){e&&(e.isActive=!1)},l.resumeElementTracking=function(e){e&&(e.isActive=!0)},l._getWindowHeight=function(){return window.innerHeight},l._getScrollY=function(){return o.getScrollY()},t.exports=n},{"./TrackedElement":95,"@marcom/ac-dom-metrics/getDimensions":41,"@marcom/ac-dom-metrics/getPagePosition":42,"@marcom/ac-dom-metrics/getScrollY":44,"@marcom/ac-dom-nodes/isElement":67,"@marcom/ac-dom-nodes/isNodeList":69,"@marcom/ac-object/clone":177,"@marcom/ac-object/extend":180}],95:[function(e,t,i){"use strict";function n(e,t){if(!r.isElement(e))throw new TypeError("TrackedElement: "+e+" is not a valid DOM element");o.call(this),this.element=e,this.inView=!1,this.isActive=!0,this.percentInView=0,this.pixelsInView=0,this.offsetTop=0,this.top=0,this.right=0,this.bottom=0,this.left=0,this.width=0,this.height=0,this.useRenderedPosition=t||!1}var r={isElement:e("@marcom/ac-dom-nodes/isElement")},o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=o.prototype,a=n.prototype=Object.create(s);a.destroy=function(){this.element=null,s.destroy.call(this)},t.exports=n},{"@marcom/ac-dom-nodes/isElement":67,"@marcom/ac-event-emitter-micro":96}],96:[function(e,t,i){"use strict";t.exports={EventEmitterMicro:e("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":97}],97:[function(e,t,i){"use strict";function n(){this._events={}}var r=n.prototype;r.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},r.once=function(e,t){function i(r){n.off(e,i),void 0!==r?t(r):t()}var n=this;this.on(e,i)},r.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var i=this._events[e].indexOf(t);i!==-1&&this._events[e].splice(i,1)}},r.trigger=function(e,t){if(this.has(e))for(var i=this._events[e].length-1;i>=0;i--)void 0!==t?this._events[e][i](t):this._events[e][i]()},r.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},r.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=n},{}],98:[function(e,t,i){"use strict";t.exports={canvasAvailable:e("./canvasAvailable"),continuousScrollEventsAvailable:e("./continuousScrollEventsAvailable"),cookiesAvailable:e("./cookiesAvailable"),cssLinearGradientAvailable:e("./cssLinearGradientAvailable"),cssPropertyAvailable:e("./cssPropertyAvailable"),cssViewportUnitsAvailable:e("./cssViewportUnitsAvailable"),elementAttributeAvailable:e("./elementAttributeAvailable"),eventTypeAvailable:e("./eventTypeAvailable"),isDesktop:e("./isDesktop"),isHandheld:e("./isHandheld"),isRetina:e("./isRetina"),isTablet:e("./isTablet"),localStorageAvailable:e("./localStorageAvailable"),mediaElementsAvailable:e("./mediaElementsAvailable"),mediaQueriesAvailable:e("./mediaQueriesAvailable"),prefersReducedMotion:e("./prefersReducedMotion"),sessionStorageAvailable:e("./sessionStorageAvailable"),svgAvailable:e("./svgAvailable"),threeDTransformsAvailable:e("./threeDTransformsAvailable"),touchAvailable:e("./touchAvailable"),webGLAvailable:e("./webGLAvailable")}},{"./canvasAvailable":99,"./continuousScrollEventsAvailable":100,"./cookiesAvailable":101,"./cssLinearGradientAvailable":102,"./cssPropertyAvailable":103,"./cssViewportUnitsAvailable":104,"./elementAttributeAvailable":105,"./eventTypeAvailable":106,"./isDesktop":108,"./isHandheld":109,"./isRetina":110,"./isTablet":111,"./localStorageAvailable":112,"./mediaElementsAvailable":113,"./mediaQueriesAvailable":114,"./prefersReducedMotion":115,"./sessionStorageAvailable":116,"./svgAvailable":117,"./threeDTransformsAvailable":118,"./touchAvailable":119,"./webGLAvailable":120}],99:[function(e,t,i){"use strict";var n=e("./helpers/globals"),r=e("@marcom/ac-function/once"),o=function(){var e=n.getDocument(),t=e.createElement("canvas");return!("function"!=typeof t.getContext||!t.getContext("2d"))};t.exports=r(o),t.exports.original=o},{"./helpers/globals":107,"@marcom/ac-function/once":142}],100:[function(e,t,i){"use strict";function n(){return!o()||r.os.ios&&r.os.version.major>=8||r.browser.chrome}var r=e("@marcom/ac-useragent"),o=e("./touchAvailable").original,s=e("@marcom/ac-function/once");t.exports=s(n),t.exports.original=n},{"./touchAvailable":119,"@marcom/ac-function/once":142,"@marcom/ac-useragent":221}],101:[function(e,t,i){"use strict";function n(){var e=!1,t=r.getDocument(),i=r.getNavigator();try{"cookie"in t&&i.cookieEnabled&&(t.cookie="ac_feature_cookie=1",e=t.cookie.indexOf("ac_feature_cookie")!==-1,t.cookie="ac_feature_cookie=; expires=Thu, 01 Jan 1970 00:00:01 GMT;")}catch(n){}return e}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],102:[function(e,t,i){"use strict";function n(){var e=["linear-gradient(to bottom right, #9f9, white)","linear-gradient(top left, #9f9, white)","gradient(linear, left top, right bottom, from(#9f9), to(white))"];return e.some(function(e){return!!r("background-image",e)})}var r=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"@marcom/ac-function/once":142,"@marcom/ac-prefixer/getStyleValue":189}],103:[function(e,t,i){"use strict";function n(e,t){return"undefined"!=typeof t?!!r(e,t):!!o(e)}var r=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-prefixer/getStyleProperty"),s=e("@marcom/ac-function/memoize");t.exports=s(n),t.exports.original=n},{"@marcom/ac-function/memoize":141,"@marcom/ac-prefixer/getStyleProperty":188,"@marcom/ac-prefixer/getStyleValue":189}],104:[function(e,t,i){"use strict";function n(){return!!r("margin","1vw 1vh")}var r=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"@marcom/ac-function/once":142,"@marcom/ac-prefixer/getStyleValue":189}],105:[function(e,t,i){"use strict";function n(e,t){var i,n=r.getDocument();return t=t||"div",i=n.createElement(t),e in i}var r=e("./helpers/globals"),o=e("@marcom/ac-function/memoize");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/memoize":141}],106:[function(e,t,i){"use strict";function n(e,t){return!!r(e,t)}var r=e("@marcom/ac-prefixer/getEventType"),o=e("@marcom/ac-function/memoize");t.exports=o(n),t.exports.original=n},{"@marcom/ac-function/memoize":141,"@marcom/ac-prefixer/getEventType":186}],107:[function(e,t,i){"use strict";t.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],108:[function(e,t,i){"use strict";function n(){var e=o.getWindow();return!r()&&!e.orientation}var r=e("./touchAvailable").original,o=e("./helpers/globals"),s=e("@marcom/ac-function/once");t.exports=s(n),t.exports.original=n},{"./helpers/globals":107,"./touchAvailable":119,"@marcom/ac-function/once":142}],109:[function(e,t,i){"use strict";function n(){return!r()&&!o()}var r=e("./isDesktop").original,o=e("./isTablet").original,s=e("@marcom/ac-function/once");t.exports=s(n),t.exports.original=n},{"./isDesktop":108,"./isTablet":111,"@marcom/ac-function/once":142}],110:[function(e,t,i){"use strict";var n=e("./helpers/globals");t.exports=function(){var e=n.getWindow();return"devicePixelRatio"in e&&e.devicePixelRatio>=1.5}},{"./helpers/globals":107}],111:[function(e,t,i){"use strict";function n(){var e=o.getWindow(),t=e.screen.width;return e.orientation&&e.screen.height<t&&(t=e.screen.height),!r()&&t>=a}var r=e("./isDesktop").original,o=e("./helpers/globals"),s=e("@marcom/ac-function/once"),a=600;t.exports=s(n),t.exports.original=n},{"./helpers/globals":107,"./isDesktop":108,"@marcom/ac-function/once":142}],112:[function(e,t,i){"use strict";function n(){var e=r.getWindow(),t=!1;try{t=!(!e.localStorage||null===e.localStorage.non_existent)}catch(i){}return t}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],113:[function(e,t,i){"use strict";function n(){var e=r.getWindow();return"HTMLMediaElement"in e}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],114:[function(e,t,i){"use strict";function n(){var e=r.getWindow(),t=e.matchMedia("only all");return!(!t||!t.matches)}e("@marcom/ac-polyfills/matchMedia");var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142,"@marcom/ac-polyfills/matchMedia":void 0}],115:[function(e,t,i){"use strict";function n(){var e=r.getWindow(),t=e.matchMedia("(prefers-reduced-motion)");return!(!t||!t.matches)}var r=e("./helpers/globals");t.exports=n},{"./helpers/globals":107}],116:[function(e,t,i){"use strict";function n(){var e=r.getWindow(),t=!1;try{"sessionStorage"in e&&"function"==typeof e.sessionStorage.setItem&&(e.sessionStorage.setItem("ac_feature","test"),t=!0,e.sessionStorage.removeItem("ac_feature","test"))}catch(i){}return t}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],117:[function(e,t,i){"use strict";function n(){var e=r.getDocument();return!!e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],118:[function(e,t,i){"use strict";function n(){return!(!r("perspective","1px")||!r("transform","translateZ(0)"))}var r=e("@marcom/ac-prefixer/getStyleValue"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"@marcom/ac-function/once":142,"@marcom/ac-prefixer/getStyleValue":189}],119:[function(e,t,i){"use strict";function n(){var e=r.getWindow(),t=r.getDocument(),i=r.getNavigator();return!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch||i.maxTouchPoints>0||i.msMaxTouchPoints>0)}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],120:[function(e,t,i){"use strict";function n(){var e=r.getDocument(),t=e.createElement("canvas");return"function"==typeof t.getContext&&!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}var r=e("./helpers/globals"),o=e("@marcom/ac-function/once");t.exports=o(n),t.exports.original=n},{"./helpers/globals":107,"@marcom/ac-function/once":142}],121:[function(e,t,i){"use strict";function n(e){e=e||{},o.call(this),this.id=a.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),a=e("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");r=n.prototype=Object.create(o.prototype),r.run=function(){return!this._willRun&&(this._willRun=!0,this.executor.subscribe(this),!0)},r.cancel=function(){var e=!1;return this._willRun&&(this.executor.unsubscribe(this),this._willRun=!1,e=!0),this._reset(),e},r.destroy=function(){var e=this.cancel();return this.executor.unsubscribe(this),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,e},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},r._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":206,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":123}],122:[function(e,t,i){"use strict";function n(e){e=e||{},this._reset(),this._willRun=!1,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var r;r=n.prototype,r.subscribe=function(e){return!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberCount++,this._run(),!0)},r.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.trigger=function(e,t){var i;for(i in this._subscribers)this._subscribers.hasOwnProperty(i)&&null!==this._subscribers[i]&&this._subscribers[i]._didDestroy===!1&&this._subscribers[i].trigger(e,t)},r.destroy=function(){var e=this._cancel();return this._subscribers=null,this._nextFrameSubscribers=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},r.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=window.requestAnimationFrame(this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=requestAnimationFrame(this._boundOnAnimationFrame)),!0},r._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},r._onSubscribersAnimationFrameStart=function(e){var t;for(t in this._subscribers)this._subscribers.hasOwnProperty(t)&&null!==this._subscribers[t]&&this._subscribers[t]._didDestroy===!1&&this._subscribers[t]._onAnimationFrameStart(e)},r._onSubscribersAnimationFrameEnd=function(e){var t;for(t in this._subscribers)this._subscribers.hasOwnProperty(t)&&null!==this._subscribers[t]&&this._subscribers[t]._didDestroy===!1&&this._subscribers[t]._onAnimationFrameEnd(e)},r._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._nextFrameSubscribers={},this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},r._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},r._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._nextFrameSubscribers={},this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=n},{"@marcom/ac-polyfills/performance/now":void 0}],123:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-executor:sharedRAFExecutorInstance",o="1.0.3",s=e("./RAFExecutor");t.exports=n.share(r,o,s)},{"./RAFExecutor":122,"@marcom/ac-shared-instance":218}],124:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Promise"),e("@marcom/ac-polyfills/JSON"),t.exports={createFlow:e("./ac-flow/flow/factory"),Player:e("./ac-flow/flow/Player")}},{"./ac-flow/flow/Player":127,"./ac-flow/flow/factory":138,"@marcom/ac-polyfills/JSON":void 0,"@marcom/ac-polyfills/Promise":void 0}],125:[function(e,t,i){"use strict";function n(e,t,i,n){r.call(this),this._compositor=new l(t,i,n),this.options=e||{}}var r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("./compositor/decorator/Keyframe"),s=e("./compositor/decorator/Superframe"),a=e("./compositor/decorator/SuperKeyframe"),c=e("./compositor/decorator/Cache"),l=e("./compositor/Sequence"),u=n.prototype=new r(null);u._gotoImageFrame=function(e){return this._rendering?Promise.resolve():this._currentFrame===e?Promise.resolve():(this._rendering=!0,this._compositor.compositeFrames(this._currentFrame,e).then(function(){this._rendering=!1,this._currentFrame=e}.bind(this)))},u.init=function(){var e;return"CANVAS"===this.options.element.nodeName?e=this.options.element:(e=document.createElement("canvas"),this.options.element.appendChild(e)),this.gotoFrame=this._gotoImageFrame,this._compositor.init(e).then(this._decorateCompositor.bind(this))},u.resumeLoading=function(){return this._compositor.resumeLoading()},u.pauseLoading=function(){this._compositor.pauseLoading()},u._decorateCompositor=function(){var e,t,i=this._compositor;return i?(e=this._compositor._diffRender.flowData,t=this._compositor.canvas,e.superframeFrequency&&(i=new s(i,e.superframeFrequency)),e.version>=4&&(i=new o(i)),e.version>=4&&e.superframeFrequency&&(i=new a(i)),this.options.keyframeCache&&(i=new c(i,this.options.keyframeCache)),i===this._compositor?Promise.resolve():(this._compositor=i,this._compositor.init(t))):Promise.reject()},u._destroy=function(){this.off(),this._compositor.destroy()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(u,{_currentFrame:{value:0,enumerable:!1,writable:!0},frameCount:{get:function(){return this._compositor.frameCount},enumerable:!0}}),t.exports=n},{"./compositor/Sequence":128,"./compositor/decorator/Cache":129,"./compositor/decorator/Keyframe":130,"./compositor/decorator/SuperKeyframe":131,"./compositor/decorator/Superframe":132,"@marcom/ac-event-emitter-micro":96}],126:[function(e,t,i){"use strict";var n=e("@marcom/ac-asset-loader/assetLoader"),r=e("./data/provider/Async"),o=function(e,t,i){this._manifestUrl=e,this._keyframeUrls=t,this._imageUrlPattern=i,this.state={manifestLoaded:!1,keyframesLoaded:!1,diffsLoaded:!1,diffCountLoaded:0,totalDiffs:null},this.assets={keyframes:null,manifest:null,diffs:null},this._promises={},this._loaders={},this._activeLoaders=[],this._resumeQueue=[],this._paused=!0,this._shouldPause=!1,this._boundOnManifestLoaded=this._onManifestLoaded.bind(this),this._boundOnKeyframesLoaded=this._onKeyframesLoaded.bind(this),this._boundOnDiffsLoaded=this._onDiffsLoaded.bind(this)},s=o.prototype;s.setManifestUrl=function(e){return this._manifestUrl=e,this},s.setKeyframeUrls=function(e){return this._keyframeUrls=e,this},s.setImageUrlPattern=function(e){return this._imageUrlPattern=e,this},s.pause=function(){this._shouldPause=!0;var e,t=this._activeLoaders.length;for(e=0;e<t;e++)this._activeLoaders[e].pause();this._paused=!0},s.destroy=function(){var e,t,i;this.pause();for(e in this._loaders)this._loaders.hasOwnProperty(e)&&this._loaders[e].destroy();for(t in this._promises)this._promises.hasOwnProperty(t)&&"pending"===this._promises[t].status()&&this._promises[t].reject();for(i in this)this.hasOwnProperty(i)&&(this[i]=null)},s.load=function(){if(this._paused&&(this._activeLoaders.length>0||this._resumeQueue.length>0))return this._resume(),!0},s._resume=function(){this._shouldPause=!1;var e,t=this._activeLoaders.length;for(e=0;e<t;e++)this._activeLoaders[e].load();var i,n=this._resumeQueue.length;for(i=0;i<n;i++)this._resumeQueue[i].call(this);this._resumeQueue=[],this._paused=!1},s.loadManifest=function(){return this._shouldPause?void this._resumeQueue.push(this.loadManifest):this.assets.manifest?this.assets.manifest:(this._paused=!1,this._loaders.manifest=new r(this._getManifestAssetsData()),this._activeLoaders.push(this._loaders.manifest),this._loaders.manifest.load().then(this._boundOnManifestLoaded))},s.loadKeyframes=function(){var e;return this._shouldPause&&this._resumeQueue.push(this.loadKeyframes),this.assets.keyframes?e=Promise.resolve(this.assets.keyframes):(this._paused=!1,this._loaders.keyframes=n.createAssetGroup(this._getKeyframesAssetsData()),this._activeLoaders.push(this._loaders.keyframes),e=this._loaders.keyframes.load().then(this._boundOnKeyframesLoaded)),this._promises.keyframes=e,this._promises.keyframes},s.loadDiffs=function(){var e;return this._shouldPause&&this._resumeQueue.push(this.loadDiffs),this.assets.diffs?e=this._promises.diffs.resolve(this.assets.diffs):(this._paused=!1,this._loaders.diffs=n.createAssetGroup(this._getDiffsAssetsData()),this._activeLoaders.push(this._loaders.diffs),e=this._loaders.diffs.load().then(this._boundOnDiffsLoaded)),this._promises.diffs=e,this._promises.diffs},s._getManifestAssetsData=function(){return this._manifestUrl},s._getKeyframesAssetsData=function(){return this._keyframeUrls},s._getDiffsAssetsData=function(){var e,t,i=this.assets.manifest.imagesRequired,n=[],r=this._imageUrlPattern.match(/#/g).length;for(e=1;e<=i;e++)t="0000"+e,t=t.substring(t.length-r),n.push(this._imageUrlPattern.replace(/#{2,}/g,t));return n},s._onManifestLoaded=function(e){if(this.assets)return this.assets.manifest=e,this.state.manifestLoaded=!0,this._paused=!0,this._removeFromActiveLoaders(this._loaders.manifest),this.assets.manifest},s._onKeyframesLoaded=function(e){if(this.assets)return this.assets.keyframes=e,this.state.keyframeLoaded=!0,this._paused=!0,this._removeFromActiveLoaders(this._loaders.keyframes),Promise.resolve(this.assets.keyframes)},s._onDiffsLoaded=function(e){if(this.assets)return this.assets.diffs=e,this.state.diffsLoaded=!0,this._paused=!0,this._removeFromActiveLoaders(this._loaders.diffs),Promise.resolve(this.assets.diffs)},s._removeFromActiveLoaders=function(e){var t,i=this._activeLoaders.length;for(t=0;t<i;t++)if(this._activeLoaders[t]===e)return void this._activeLoaders.splice(t,1)},t.exports=o},{"./data/provider/Async":136,"@marcom/ac-asset-loader/assetLoader":15}],127:[function(e,t,i){"use strict";function n(e,t){this.element=t,this._domEmitter=new r(t),this._frameRate=30,this.paused=!0,this.loop=!1,this._destroyed=!1,this._flow=e,this._rafEmitter=new o,this._rafDrawSet=!1,this._shouldAdvanceToTimeGlobal=!1,this._shouldGlobalTimeUpdate=!1,this._shouldLocalTimeUpdate=!1,this._boundAdvanceTimeToGlobal=this._advanceToTimeGlobal.bind(this),this._onBoundGlobalTimeUpdate=this._onGlobalTimeUpdate.bind(this),this._onBoundLocalTimeUpdate=this._onLocalTimeUpdate.bind(this),this._rafEmitter.on("draw",this._onDraw.bind(this))}var r=e("@marcom/ac-dom-emitter").DOMEmitter,o=e("@marcom/ac-raf-emitter/RAFEmitter"),s=n.prototype;s._timeToFrame=function(e){var t;return t=Math.round(e/this.duration*this._flow.frameCount),t%=this._flow.frameCount+1,t<0?this._flow.frameCount+t:t},s._advanceToTimeGlobal=function(e){if(this._rafDrawSet){this._prevTime=this._prevTime||e.time,this._currentTime+=(e.time-this._prevTime)/1e3*this.playbackRate,this._prevTime=e.time,this._pauseAfterRender=!1;var t=this._timeToFrame(this._currentTime);if(this.loop?this._currentTime=(this.duration+this._currentTime)%this.duration:this.playbackRate>0&&this._currentTime>this.duration?(t=this._flow.frameCount,this._currentTime=this.duration,this._pauseAfterRender=!0):this.playbackRate<0&&this._currentTime<0&&(t=0,this._currentTime=0,this._pauseAfterRender=!0),!this.paused&&!this.seeking)return this._flow.gotoFrame(t).then(this._onBoundGlobalTimeUpdate)}},s._onGlobalTimeUpdate=function(){this.trigger("timeupdate"),this._pauseAfterRender?(this.paused=!0,this.trigger("ended")):this._bindAdvanceToTimeGlobal()},s._onLocalTimeUpdate=function(){this.seeking=!1,this.trigger("timeupdate"),this.trigger("seeked"),this._bindAdvanceToTimeGlobal()},s._advanceToTimeLocal=function(e){this.seeking||(this.seeking=!0,this.trigger("seeking"),this._currentTime=1*e,this._prevTime=null,this._cancelFrame(),this._flow.gotoFrame(this._timeToFrame(e)).then(this._onBoundLocalTimeUpdate))},s._onLoaded=function(){this.trigger("loaded"),this.trigger("canplaythrough")},s._nullProperties=function(e){var t;for(t in e)e.hasOwnProperty(t)&&(e[t]=null);return e},s.destroy=function(){this._rafEmitter.destroy(),this.trigger("destroy"),this.pause(),this.off(),this._flow.destroy(),this._flow=this._nullProperties(this._flow),this._nullProperties(this)},s.load=function(){if(!this._flow.resumeLoading())return this.trigger("loadstart"),this._flow.init().then(function(e){var t=function(){this._onLoaded()}.bind(this),i=function(){this._destroyed===!1&&this.trigger("error")}.bind(this);return e?e.then(t,i):void t()}.bind(this))},s.pauseLoading=function(){this._flow.pauseLoading()},s.play=function(){return this.paused&&(this.paused=!1,this.trigger("play"),this._prevTime=null,this._bindAdvanceToTimeGlobal()),this},s.pause=function(){return this.paused||(this.paused=!0,this._cancelFrame(),this.trigger("pause")),this},s.on=function(){this._domEmitter.on.apply(this._domEmitter,arguments)},s.once=function(){this._domEmitter.once.apply(this._domEmitter,arguments)},s.trigger=function(){this._domEmitter.trigger.apply(this._domEmitter,arguments)},s.off=function(){this._domEmitter.off.apply(this._domEmitter,arguments)},s._cancelFrame=function(){this._rafEmitter.cancel(),this._rafDrawSet=!1},s._onDraw=function(e){this._shouldAdvanceToTimeGlobal?this._advanceToTimeGlobal(e):this._shouldGlobalTimeUpdate?this._onGlobalTimeUpdate(e):this._shouldLocalTimeUpdate&&this._onLocalTimeUpdate(e),this._shouldLocalTimeUpdate=!1,this._shouldGlobalTimeUpdate=!1,this._shouldLocalTimeUpdate=!1},s._bindAdvanceToTimeGlobal=function(){this._rafDrawSet=!0,this._shouldAdvanceToTimeGlobal=!0,this._rafEmitter.run()},s._bindGlobalTimeUpdate=function(){this._rafDrawSet=!0,this._shouldGlobalTimeUpdate=!0,this._rafEmitter.run()},s._bindLocalTimeUpdate=function(){this._rafDrawSet=!0,this._shouldLocalTimeUpdate=!0,this._rafEmitter.run()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(s,{_currentTime:{value:0,enumerable:!1,writable:!0},_playbackRate:{value:1,enumerable:!1,writable:!0},currentTime:{get:function(){return 1*this._currentTime},set:s._advanceToTimeLocal,enumerable:!0},frameRate:{get:function(){return this._frameRate},set:function(e){isFinite(e)&&(this._frameRate=e,this.trigger("durationchange"))},enumerable:!0},playbackRate:{get:function(){return 1*this._playbackRate},set:function(e){isFinite(e)&&(this._playbackRate=1*e,this.trigger("ratechange"))},enumerable:!0},duration:{get:function(){return this._flow.frameCount/this.frameRate},enumerable:!0}}),t.exports=n},{"@marcom/ac-dom-emitter":28,"@marcom/ac-raf-emitter/RAFEmitter":121}],128:[function(e,t,i){"use strict";function n(e,t,i){this._keyframes=t,this._imageUrlPattern=i,this._loadController=new o(e,t,i)}var r=e("../diff/Render"),o=e("../LoadController"),s=n.prototype;s._initDiffRender=function(e){this._images=e.assets.map(function(e){return e.data}),this.canvas.height=this._images[0].height,this.canvas.width=this._images[0].width,this.applyFrame(this._images[0])},s.init=function(e){return this.canvas=e||document.createElement("canvas"),this.context=e.getContext("2d"),this._loadController.loadKeyframes().then(this._initDiffRender.bind(this)).then(this._loadController.loadManifest.bind(this._loadController)).then(this.createDiffRender.bind(this))},s.resumeLoading=function(){return this._loadController.load()},s.pauseLoading=function(){this._loadController.pause()},s.createDiffRender=function(e){return this._diffRender=new r(e,this._imageUrlPattern,this._loadController),this._diffRender.init()},s.applyFrame=function(e){var t=this.context;t.drawImage(e,0,0)},s.calculateRenderCount=function(e,t){var i=0;return Math.abs(t-e)>=t?(e=1,i=1):Math.abs(t-e)>=this.frameCount-t&&this._images[1]&&(e=this.frameCount-2,i=1),t>0&&t<this.frameCount-1?Math.abs(e-t)+i:i},s.compositeFrames=function(e,t){t=this.frameCount<t?this.frameCount-1:t<0?0:t,e=this.frameCount-2<e?this.frameCount-2:e<0?0:e;var i;if(Math.abs(t-e)>=t?(e=1,this.applyFrame(this._images[0])):Math.abs(t-e)>=this.frameCount-t&&this._images[1]&&(e=this.frameCount-2,this.applyFrame(this._images[1])),i=e>t?-1:e<t?1:0,t>0&&t<this.frameCount-1)for(;e!==t;)this._diffRender.renderDiff(this.canvas,e),e+=i;return Promise.resolve(e)},s.destroy=function(){this._loadController.destroy()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(s,{frameCount:{get:function(){return this._diffRender.frames.length+2},enumerable:!0},canvas:{get:function(){return this._canvas},set:function(e){return this._canvas=e},enumerable:!0},mainCompositor:{get:function(){for(var e=this;e._compositor;)e=e._compositor;return e},enumerable:!0}}),t.exports=n},{"../LoadController":126,"../diff/Render":137}],129:[function(e,t,i){"use strict";function n(e,t){this._compositor=e,this._keyframeInterval=t||8,this._keyframes=[]}var r=n.prototype;r._getClosestKeyframe=function(e){var t=e%this._keyframeInterval,i=Math.floor(e/this._keyframeInterval)+(t>this._keyframeInterval/2?1:0);return i},r._getFrameFromKeyframe=function(e){return e*this._keyframeInterval},r._saveKeyframe=function(e){var t,i=Math.floor(e/this._keyframeInterval);e%this._keyframeInterval!==0||this._keyframes[i]||(t=document.createElement("canvas"),t.width=this._compositor.canvas.width,t.height=this._compositor.canvas.height,t.getContext("2d").drawImage(this._compositor.canvas,0,0),this._keyframes[i]=t)},r.init=function(e){return this._compositor.init.apply(this._compositor,arguments)},r.resumeLoading=function(){return this._compositor.resumeLoading()},r.pauseLoading=function(){return this._compositor.pauseLoading()},r.applyFrame=function(){this._compositor.applyFrame.apply(this._compositor,arguments)},r.calculateRenderCount=function(e,t){return e=this._getFrameFromKeyframe(this._getClosestKeyframe(t)),this._compositor.calculateRenderCount(e,t)+1},r.compositeFrames=function(e,t){var i=this._getClosestKeyframe(t);return this._keyframes[i]&&this._compositor.calculateRenderCount(e,t)>this.calculateRenderCount(e,t)?(e=this._getFrameFromKeyframe(i),this.applyFrame(this._keyframes[i]),this._compositor.compositeFrames(e,t).then(function(){})):this._compositor.compositeFrames(e,t).then(function(){},null,this._saveKeyframe.bind(this))},r.destroy=function(){return this._compositor.destroy()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(r,{frameCount:{get:function(){return this._compositor.frameCount},enumerable:!0},canvas:{get:function(){return this._compositor.canvas},set:function(e){return this._compositor.canvas=e},enumerable:!0}}),t.exports=n},{}],130:[function(e,t,i){"use strict";function n(e){
this._compositor=e,this._flowDataProvider=this.mainCompositor._loadController._loaders.manifest}var r=e("../../keyframe/Render"),o=n.prototype;o.init=function(e){return this._keyframeDiffRender=new r(this._flowDataProvider._data,this.mainCompositor._imageUrlPattern),this._keyframeDiffRender.init()},o.resumeLoading=function(){return this._compositor.resumeLoading()},o.pauseLoading=function(){return this._compositor.pauseLoading()},o.applyFrame=function(e){return this._compositor.applyFrame.apply(this._compositor,arguments)},o.applyKeyframe=function(e,t){this._keyframeDiffRender.renderKeyframe(this.canvas,e,t)},o.compositeFrames=function(e,t){return this._isKeyframeDiff(t-1)?(this.applyKeyframe(t-1),Promise.resolve(e-1)):this._compositor.compositeFrames.apply(this._compositor,arguments)},o._isKeyframeDiff=function(e){return e in this._keyframeDiffRender._loader._keyframes},o.calculateRenderCount=function(e,t){return this._compositor.calculateRenderCount.apply(this._compositor,arguments)},o.destroy=function(){return this._compositor.destroy()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(o,{frameCount:{get:function(){return this._compositor.frameCount},enumerable:!0},canvas:{get:function(){return this._compositor.canvas},set:function(e){return this._compositor.canvas=e},enumerable:!0},mainCompositor:{get:function(){return this._compositor.mainCompositor},enumerable:!0}}),t.exports=n},{"../../keyframe/Render":140}],131:[function(e,t,i){"use strict";function n(e){this._compositor=e,this._frames=this.mainCompositor._loadController._loaders.manifest._data.frames,this._superframeInterval=this.mainCompositor._diffRender.flowData.superframeFrequency}var r=n.prototype;r.init=function(e){return this._compositor.init.apply(this._compositor,arguments)},r.resumeLoading=function(){return this._compositor.resumeLoading()},r.pauseLoading=function(){return this._compositor.pauseLoading()},r.applyFrame=function(e){return this._compositor.applyFrame.apply(this._compositor,arguments)},r.applyKeyframe=function(e,t){this._compositor.applyKeyframe.apply(this._compositor,arguments)},r.compositeFrames=function(e,t){var i,n;return t<1||t>this.frameCount-2?this._compositor.compositeFrames.apply(this._compositor,arguments):this._isKeyframeDiff(t-1)?(i=1===Math.abs(e-t),this.applyKeyframe(t-1,i),Promise.resolve(e-1)):Math.abs(t-e)>this._superframeInterval&&(n=this._getShortestRender(e,t),this._isKeyframeDiff(n-1)||n<=0||n>=this.frameCount-2)?this._compositeFromSuperKeyframe(n,t):this._compositor.compositeFrames.apply(this._compositor,[e,t])},r._getShortestRender=function(e,t){var i=this._compositor.calculateRenderCount,n=this._getClosestSuperKeyframe(t-1),r=i.apply(this._compositor,[n,t])+1,o=i.apply(this._compositor,[e,t]);return r<=o?n:e},r._compositeFromSuperKeyframe=function(e,t){var i=this.canvas.getContext("2d"),n=e<=0?this.mainCompositor._images[0]:e>=this.frameCount-2?this.mainCompositor._images[1]:this._frames[e-1].image;return i.drawImage(n,0,0),this._compositor.compositeFrames.call(this._compositor,e,t)},r._getClosestSuperFrame=function(e){return Math.round(e/this._superframeInterval)*this._superframeInterval},r._getClosestSuperKeyframe=function(e){var t,i,n,r,o=this._frames.length;if(e<o+1&&e>0){for(r=e-1;r>=0;){if("keyframe"===this._frames[r].type){t=r+1;break}r-=1}for(r=e+1;r<=o-1;){if("keyframe"===this._frames[r].type){i=r+1;break}r+=1}}return t=t?t:0,i=i?i:this.frameCount,n=e-t<i-e?t:i},r._isKeyframeDiff=function(e){return this._compositor._isKeyframeDiff.apply(this._compositor,arguments)},r.destroy=function(){return this._compositor.destroy()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(r,{frameCount:{get:function(){return this._compositor.frameCount},enumerable:!0},canvas:{get:function(){return this._compositor.canvas},set:function(e){return this._compositor.canvas=e},enumerable:!0},mainCompositor:{get:function(){return this._compositor.mainCompositor},enumerable:!0}}),t.exports=n},{}],132:[function(e,t,i){"use strict";function n(e,t){this._compositor=e,this._superframeInterval=t||4}var r=n.prototype;r._getClosestSuperframe=function(e){return Math.round(e/this._superframeInterval)*this._superframeInterval},r.init=function(e){this._screenCanvas=e},r.resumeLoading=function(){return this._compositor.resumeLoading()},r.pauseLoading=function(){return this._compositor.pauseLoading()},r.applyFrame=function(){this._compositor.applyFrame.apply(this._compositor,arguments)},r.calculateRenderCount=function(e,t){var i=this._getClosestSuperframe(e);return Math.abs(i-t)>this._superframeInterval/2?(e=i+(e>t?-1:1)*this._superframeInterval,this.calculateRenderCount(e,t)+1):Math.abs(i-t)+1},r.compositeFrames=function(e,t){var i,n;return(t<=0||t>=this.frameCount-2)&&this._compositor.compositeFrames(e,t),e>this.frameCount-2?e=this.frameCount-2:e<=0&&(e=1),n=this._getClosestSuperframe(e),i=this._compositor.calculateRenderCount(e,t)>this.calculateRenderCount(e,t)?this._compositor.compositeFrames(n,n).then(function(){var i=n+(e>t?-1:1)*this._superframeInterval;this._compositor.compositeFrames(n,i).then(function(){return this.compositeFrames(i,t)}.bind(this))}.bind(this)):this._compositor.compositeFrames(e,t).then(function(){}.bind(this)),i.then(function(){}.bind(this)),i},r.destroy=function(){return this._compositor.destroy()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(r,{frameCount:{get:function(){return this._compositor.frameCount},enumerable:!0},canvas:{get:function(){return this._compositor.canvas},set:function(e){return this._compositor.canvas=e},enumerable:!0},mainCompositor:{get:function(){return this._compositor.mainCompositor},enumerable:!0}}),t.exports=n},{}],133:[function(e,t,i){"use strict";function n(e,t){this.location=e,this.length=t}t.exports=n},{}],134:[function(e,t,i){"use strict";function n(){}t.exports=n},{}],135:[function(e,t,i){"use strict";var n,r=e("./Manifest"),o=e("./Block"),s={parseData:function(e){n=0;var t=e.frames.map(this._parseFrame,this);return Object.create(r.prototype,{version:{value:e.version},framecount:{value:e.frameCount},blockSize:{value:e.blockSize},imagesRequired:{value:e.imagesRequired},reversible:{value:e.reversible},superframeFrequency:{value:e.superframeFrequency},frames:{value:t}})},_valueForCharAt:function(e,t){var i=e.charCodeAt(t);return i>64&&i<91?i-65:i>96&&i<123?i-71:i>47&&i<58?i+4:43===i?62:47===i?63:void 0},_createNumberFromBase64Range:function(e,t,i){for(var n,r=0;i--;)n=this._valueForCharAt(e,t++),r+=n<<6*i;return r},_parseFrame:function(e){var t,i,n,r=[],s=e.value,a=e.startImageIndex,c=e.startBlockIndex;if("keyframe"===e.type)return r.type="keyframe",r.width=e.width,r.height=e.height,r.x=e.x,r.y=e.y,r;for(t=0;t<s.length;t+=5)n=this._createNumberFromBase64Range(s,t,3),i=this._createNumberFromBase64Range(s,t+3,2),r.push(Object.create(o.prototype,{location:{value:n,enumerable:!0},length:{value:i,enumerable:!0},block:{value:(c+=i)-i,enumerable:!0},startImageIndex:{value:a,enumerable:!0}}));return r}};t.exports=s},{"./Block":133,"./Manifest":134}],136:[function(e,t,i){"use strict";function n(e){this.url=e}var r=e("@marcom/ac-asset-loader/assetLoader"),o=e("../processor"),s=n.prototype;s.load=function(){return r.load(this.url).then(function(e){var t;return e&&e.latest&&e.latest.data&&(t=o.parseData(e.latest.data),this._data=t),t}.bind(this))},t.exports=n},{"../processor":135,"@marcom/ac-asset-loader/assetLoader":15}],137:[function(e,t,i){"use strict";function n(e,t,i){this.flowData=e,this.flowData.imageUrlPattern=t,this._loadController=i}var r=n.prototype;r._storeImages=function(e){var t=e.assets.length;this.images=e.assets.map(function(e){return e.data}),this._blocksPerFullDiff=[],this._blockCountUpToIndex=[];for(var i=0,n=0;n<t;n++)this._blocksPerFullDiff[n]=this.images[n].width/this.flowData.blockSize*(this.images[n].height/this.flowData.blockSize),i+=this._blocksPerFullDiff[n],this._blockCountUpToIndex[n]=i},r._applyDiffRange=function(e,t){for(var i,n,r=t.block,o=t.length,s=e.canvas.width/this.flowData.blockSize,a=t.startImageIndex,c=this.images[a].width,l=r%this._blockCountUpToIndex[a],u=c/this.flowData.blockSize,h=l%u*this.flowData.blockSize,m=Math.floor(l/(u||1))*this.flowData.blockSize,d=t.location%s*this.flowData.blockSize,p=Math.floor(t.location/s)*this.flowData.blockSize;o;)i=Math.min(o*this.flowData.blockSize,e.canvas.width-d,c-h),n=i/this.flowData.blockSize,e.drawImage(this.images[a],h,m,i,this.flowData.blockSize,d,p,i,this.flowData.blockSize),o-=n,o&&((h+=i)>=c&&(h=0,m+=this.flowData.blockSize),(d+=i)>=e.canvas.width&&(d=0,p+=this.flowData.blockSize),r+=n)},r.init=function(){return this._loadController.loadDiffs().then(this._storeImages.bind(this))},r.renderDiff=function(e,t){var i=e.getContext("2d");t-=1;for(var n=0,r=this.frames[t].length;n<r;n++)this._applyDiffRange(i,this.frames[t][n])},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(r,{frames:{get:function(){return this.flowData.frames},set:function(e){this.flowData.frames=e},enumerable:!0}}),t.exports=n},{}],138:[function(e,t,i){"use strict";var n=e("@marcom/ac-object/defaults"),r=e("./Flow"),o=e("./Player"),s={keyframeCache:8,preload:!0},a={fileFormat:"jpg",baseName:"flow",imageUrlPattern:"###",startframeFileFormat:null,endframeFileFormat:null,basePath:null,manifestPath:null,manifestFileFormat:"json",diffPath:null,framePath:null},c=function(e){return e.lastIndexOf("https://www.apple.com/")!==e.length-1&&(e+="https://www.apple.com/"),e},l=function(e){var t=e.basePath?c(e.basePath):null,i=e.framePath?c(e.framePath):null,n=e.diffPath?c(e.diffPath):null,r=e.manifestPath?c(e.manifestPath):null,o=e.baseName+"_",s={};return s.startframe=(i||t)+o+"startframe."+(e.startframeFileFormat||e.fileFormat),s.endframe=(i||t)+o+"endframe."+(e.endframeFileFormat||e.fileFormat),s.imageUrlPattern=(n||t)+o+e.imageUrlPattern+"."+e.fileFormat,s.manifest=(r||t)+o+"manifest."+e.manifestFileFormat,s},u=function(e,t){var i=l(t),n=[i.startframe,i.endframe];return new r(e,i.manifest,n,i.imageUrlPattern)},h=function(e,t){var i=e||{},r=t||{};i=n(s,e),r=n(a,t),i.element||(e.element=document.createElement("canvas"));var c=u(i,r),l=new o(c,i.element);return i.preload&&l.load(),l};t.exports=h},{"./Flow":125,"./Player":127,"@marcom/ac-object/defaults":179}],139:[function(e,t,i){"use strict";function n(e,t){var i,n=e.match(/#/g).length;this._keyframes={},e=e.replace(/([^#]+)(#+)(\..*)/,"$1key_$2$3"),this._imageUrls=[],t.frames&&t.frames.forEach(function(t,r){"keyframe"===t.type&&(i="0000"+r,i=i.substring(i.length-n),this._imageUrls.push(e.replace(/#+/g,i)),this._keyframes[r]=t)}.bind(this))}var r=e("@marcom/ac-asset-loader/assetLoader"),o=n.prototype;o.load=function(){return this._imageUrls.length>0?r.load(this._imageUrls):Promise.resolve()},"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(){}),Object.defineProperties(o,{keyframes:{get:function(){return this._keyframes},enumerable:!0}}),t.exports=n},{"@marcom/ac-asset-loader/assetLoader":15}],140:[function(e,t,i){"use strict";function n(e,t){this.flowData=e,this.flowData.imageUrlPattern=t}var r=e("./Loader"),o=n.prototype;o._storeImages=function(e){var t,i=0;if(e&&e.assets.length>0)for(var n in this._loader._keyframes)this._loader._keyframes.hasOwnProperty(n)&&(t=e.assets[i],this._loader._keyframes[n].image=t.data,i+=1)},o.init=function(){return this._loader=new r(this.flowData.imageUrlPattern,this.flowData),this._loader.load().then(this._storeImages.bind(this))},o.renderKeyframe=function(e,t,i){var n=e.getContext("2d"),r=this._loader.keyframes[t],o=r.image,s=r.x,a=r.y,c=r.width,l=r.height;i===!0?n.drawImage(o,s,a,c,l,s,a,c,l):this.flowData.reversible?n.drawImage(o,0,0):n.drawImage(o,s,a,c,l)},t.exports=n},{"./Loader":139}],141:[function(e,t,i){"use strict";var n=function(){var e,t="";for(e=0;e<arguments.length;e++)e>0&&(t+=","),t+=arguments[e];return t};t.exports=function(e,t){t=t||n;var i=function(){var n=arguments,r=t.apply(this,n);return r in i.cache||(i.cache[r]=e.apply(this,n)),i.cache[r]};return i.cache={},i}},{}],142:[function(e,t,i){"use strict";t.exports=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}}},{}],143:[function(e,t,i){"use strict";function n(e,t,i,n,o,a,c){if(this.name="EngagedElementComponent_"+c,r.call(this,e,t,i,n,o,a,c),this.timeToEngage=300,this.inViewThreshold=.75,this.element.hasAttribute(s.ELEMENT_ENGAGEMENT))try{this._overwriteElementEngagementProps()}catch(l){console.error("EngagedElementAnimationComponent::_overwriteElementEngagementProps bad JSON in data-attribute!",l)}this.trackedElement=this.section.elementEngagement.addElement(this.element,{timeToEngage:this.timeToEngage,inViewThreshold:this.inViewThreshold})}var r=e("@marcom/ac-jetpack-lib/core/BaseComponent"),o=r.prototype,s={ELEMENT_ENGAGEMENT:"data-engaged"},a=n.prototype=Object.create(r.prototype);n.prototype.constructor=n,a.setupEvents=function(){o.setupEvents.call(this),this._onElementEngaged=this._onElementEngaged.bind(this),this.trackedElement.once("engaged",this._onElementEngaged)},a._onElementEngaged=function(e){this.element.classList.add("engaged")},a._overwriteElementEngagementProps=function(){var e=this.element.getAttribute(s.ELEMENT_ENGAGEMENT),t=JSON.parse(e);this.timeToEngage=void 0===t.timeToEngage?this.timeToEngage:parseFloat(t.timeToEngage),this.inViewThreshold=void 0===t.inViewThreshold?this.inViewThreshold:parseFloat(t.inViewThreshold)},t.exports=n},{"@marcom/ac-jetpack-lib/core/BaseComponent":145}],144:[function(e,t,i){"use strict";function n(e,t,i,n,o,s,a){this.name="LocalnavThemeChangerComponent_"+l++,r.call(this,e,t,i,n,o,s,a),this.theme=this.element.getAttribute(u.THEME),this.top=this.element.getBoundingClientRect().top+o,this.bottom=this.element.getBoundingClientRect().bottom+o}var r=e("@marcom/ac-jetpack-lib/core/BaseComponent"),o=document.querySelector("#ac-localnav"),s=o.clientHeight,a="",c=null,l=0,u={THEME:"data-localnav-theme"},h=n.prototype=Object.create(r.prototype);n.prototype.constructor=n,h.onSectionWillAppear=function(e,t){this.onScroll(null,e,t)},h.onSectionWillDisappear=function(e,t){this.onScroll(null,e,t)},h.onScroll=function(e,t,i){var n=t+s;this.top<n&&this.bottom>n?(c&&c.theme!==this.theme&&c.removeTheme(),c=this,this.setTheme()):c===this&&(this.removeTheme(),c=null)},h.onResizeImmediate=function(e,t,i){this.top=this.element.getBoundingClientRect().top+t,this.bottom=this.element.getBoundingClientRect().bottom+t,s=o.clientHeight},h.setTheme=function(){a!==this.theme&&(""!==a&&o.classList.remove(a),o.classList.add(this.theme),a=this.theme)},h.removeTheme=function(){a===this.theme&&(o.classList.remove(a),a="")},t.exports=n},{"@marcom/ac-jetpack-lib/core/BaseComponent":145}],145:[function(e,t,i){"use strict";function n(e,t,i,n,r,s,a){if(7!==arguments.length)throw new Error("Incorrect number of arguments passed to BaseComponent check the constructor or BaseComponent.call method - argument's should be (section, componentElement, componentName, currentBreakpoint, scrollPosition, windowHeight, index)");o.call(this),this.section=e,this.element=t,this.componentName=i,this.index=a,this.isEnabled=!0}e("@marcom/ac-polyfills/Object/create");var r=e("@marcom/ac-raf-emitter/RAFEmitter"),o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=o.prototype,a=n.prototype=Object.create(o.prototype);n.prototype.constructor=n,a.destroy=function(){this.teardownEvents(),this.teardownRAFEmitter(),this.section=null,s.destroy.call(this)},a.setupEvents=function(){},a.teardownEvents=function(){},a.setupRAFEmitter=function(){this._rafEmitter||(this._rafEmitter=new r,this.onDOMRead=this.onDOMRead.bind(this),this.onDOMWrite=this.onDOMWrite.bind(this),this._rafEmitter.on("update",this.onDOMRead),this._rafEmitter.on("draw",this.onDOMWrite))},a.teardownRAFEmitter=function(){this._rafEmitter&&(this._rafEmitter.destroy(),this._rafEmitter=null)},a.parsePropsFromDataAttribute=function(e,t,i){i=i||this.element,t=t||{},e="data-"+e;var n=i.getAttribute(e)||"{}",r=null;try{r=JSON.parse(n)}catch(o){throw new Error(this.componentName+"::parsePropsFromDataAttribute bad JSON in `"+e+"`",o)}var s={};for(var a in t)if(s[a]=r[a],!r.hasOwnProperty(a)){if(null===t[a])throw new Error(this.componentName+"::parsePropsFromDataAttribute `"+a+"` is required in `"+e+"`");s[a]=t[a]}return s},a.onSectionWillAppearWithPadding=function(e,t){},a.onSectionWillAppear=function(e,t){},a.activate=function(){},a.animateIn=function(){},a.requestDOMChange=function(){return!(!this.isEnabled||!this.section.isVisible)&&(this._rafEmitter||this.setupRAFEmitter(),this._rafEmitter.run())},a.onDOMRead=function(e){},a.onDOMWrite=function(e){},a.deactivate=function(){},a.onScroll=function(e,t,i){},a.onSectionWillDisappearWithPadding=function(e,t){},a.onSectionWillDisappear=function(e,t){},a.onResizeDebounced=function(e,t,i){},a.onResizeImmediate=function(e,t,i){},a.onOrientationChange=function(e,t,i,n){},a.onBreakpoint=function(e,t,i,n){},a.onRetinaChange=function(e,t,i,n){},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-polyfills/Object/create":void 0,"@marcom/ac-raf-emitter/RAFEmitter":207}],146:[function(e,t,i){"use strict";function n(e){l.init(),s.setPage(this),this.name=this.name||"[NOT SET]",this._mainEl=document.querySelector("main,.main"),this._sections=[],this._visibleSections=[],this._visibleSectionsWithPadding=[],this._elementTracker=new r(null,{autoStart:!0}),this._currentSection=null,this._sectionUnderLocalNav=null,this._currentBreakpoint=o.viewport,this.isRetina=o.retina,this._cachedScrollY=this._getScrollY(!0),this._cachedWindowHeight=this.getWindowHeight(!0),this._resizeTimeout=-1,this._resizeTimeoutDelay=this._resizeTimeoutDelay||250,this.setupSections(),this.setupEvents(),this._updateSectionVisibility()}e("@marcom/ac-polyfills/console.log");var r=e("@marcom/ac-element-tracker").ElementTracker,o=e("@marcom/ac-viewport-emitter");o.viewport||(console.log("Jetpack Error: Required module `ac-viewport-emitter` not initialized properly (missing required css styles). Please see `ac-viewport-emitter` documentation.\n\tBreakpoint will always be 'large' and no `onBreakPoint` events will be fired"),o=e("../utils/ViewportEmitterStub")());var s=e("../utils/Page"),a=e("../model/SectionMap"),c=e("../model/DataAttributes"),l=e("../model/EnabledFeatures"),u=n.prototype;u.destroy=function(){for(var e=0,t=this._sections.length;e<t;e++)this._sections[e].destroy();this.teardownEvents(),this._elementTracker.destroy(),this._elementTracker=null,this._sections=null,this._currentSection=null,this._sectionUnderLocalNav=null,this._visibleSections=null,this._mainEl=null,s.removePage(this)},u.setupEvents=function(){this._onScroll=this._onScroll.bind(this),this._onBreakpoint=this._onBreakpoint.bind(this),this._onRetinaChange=this._onRetinaChange.bind(this),this._onPageDidAppear=this._onPageDidAppear.bind(this),this._onResizeImmediate=this._onResizeImmediate.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onPageWillDisappear=this._onPageWillDisappear.bind(this),this.performDeepMetricsRefresh=this.performDeepMetricsRefresh.bind(this),window.addEventListener("scroll",this._onScroll),window.addEventListener("resize",this._onResizeImmediate),window.addEventListener("orientationchange",this._onOrientationChange),o.on("change",this._onBreakpoint),o.on("retinachange",this._onRetinaChange),s.on(s.DEEP_REFRESH_ALL_METRICS,this.performDeepMetricsRefresh)},u.teardownEvents=function(){window.removeEventListener("scroll",this._onScroll),window.removeEventListener("resize",this._onResizeImmediate),window.removeEventListener("orientationchange",this._onOrientationChange),o.off("change",this._onBreakpoint),o.off("retinachange",this._onRetinaChange),s.off(s.DEEP_REFRESH_ALL_METRICS,this.performDeepMetricsRefresh),this._elementTracker.stop(),clearTimeout(this._resizeTimeout)},u.setupSections=function(){for(var e=this._mainEl.querySelectorAll("section,.section,[data-section-type]"),t=0,i=e.length;t<i;t++)if(e[t].parentElement===this._mainEl){var n=e[t];this._addSectionImp(n)}else console.warn("BasePage::addSection - Jetpack does not support nested BaseSections, consider using a component instead.",e[t])},u.addSection=function(e){var t=this.getBaseSectionForElement(e);return t?t:(t=this._addSectionImp(e),this._updateSectionVisibility(),t)},u.removeSection=function(e){var t=e instanceof a.BaseSection,i=t?e:this.getBaseSectionForElement(e);return i&&this._sections.splice(this._sections.indexOf(i),1),this._updateSectionVisibility(),i},u._addSectionImp=function(e){if(e.parentNode!==this._mainEl&&this._isNestedSection(e))return console.warn("BasePage::addSection - Jetpack does not support nested BaseSections, consider using a component instead.",e),null;var t=this._elementTracker.addElement(e);this._elementTracker.refreshElementState(t);var i=e.hasAttribute(c.SECTION_TYPE)?e.getAttribute(c.SECTION_TYPE):"BaseSection";if(""===i&&(i="BaseSection"),!a.hasOwnProperty(i))throw"BasePage::setupSections parsing '#"+e.id+" ."+e.className+"' no section type '"+i+"'found!";var n=a[i],r=new n(e,t,this._getCurrentBreakpoint(),this._getScrollY(),this.getWindowHeight(),this._sections.length);return r.setupEvents(),this._sections.push(r),r},u.getWindowHeight=function(e){return e&&(this._cachedWindowHeight=window.innerHeight),this._cachedWindowHeight},u._activateSection=function(e){this._currentSection!==e&&(this._currentSection&&this._currentSection.deactivate(),this._currentSection=e,this._currentSection.activate())},u._updateSectionVisibility=function(){for(var e=this._getScrollY(),t=this.getWindowHeight(),i=s.getViewportPadding(),n=[],r=this._sections[0],o=[],a=0,c=[],l=e-i,u=e+t+i,h=0,m=this._sections.length;h<m;h++){var d=this._sections[h],p=d.trackedElement,f=p.pixelsInView;d.isFixedHero&&(f=t-e),f>a&&(r=d,a=f),f>1e-6?(n.push(d),o.push(d),c.push(d)):u>p.top&&l<p.bottom&&(n.push(d),c.push(d))}var _={},g={};for(h=0,m=Math.max(this._visibleSections.length,n.length);h<m;h++)this._visibleSectionsWithPadding[h]&&("undefined"==typeof _[h]&&(_[h]=c.indexOf(this._visibleSectionsWithPadding[h])===-1),_[h]&&this._visibleSectionsWithPadding[h].onSectionWillDisappearWithPadding(e,t)),this._visibleSections[h]&&o.indexOf(this._visibleSections[h])===-1&&this._visibleSections[h].onSectionWillDisappear(e,t),c[h]&&("undefined"==typeof g[h]&&(g[h]=this._visibleSectionsWithPadding.indexOf(c[h])===-1),g[h]&&c[h].onSectionWillAppearWithPadding(e,t)),o[h]&&this._visibleSections.indexOf(o[h])===-1&&o[h].onSectionWillAppear(e,t);this._visibleSections=o,this._visibleSectionsWithPadding=c,this._activateSection(r)},u._onPageDidAppear=function(e){},u._onPageWillDisappear=function(e){this.destroy()},u._onBreakpoint=function(e){var t=e.to,i=e.from;this._currentBreakpoint=t;var n=this._getScrollY(),r=this.getWindowHeight();this._elementTracker.refreshAllElementMetrics(n,r);for(var o=0,s=this._sections.length;o<s;o++)this._sections[o].onBreakpoint(t,i,n,r);this.performDeepMetricsRefresh()},u._onRetinaChange=function(e){var t=this._getScrollY(!0),i=this.getWindowHeight(!0);this.isRetina=o.retina;var n=this._currentBreakpoint;this._elementTracker.refreshAllElementMetrics(t,i);for(var r=0,s=this._sections.length;r<s;r++)this._sections[r].onRetinaChange(this.isRetina,n,t,i)},u._onScroll=function(e){var t=this._getScrollY(!0),i=this.getWindowHeight();this._updateSectionVisibility();for(var n=0,r=this._visibleSections.length;n<r;n++)this._visibleSections[n].onScroll(e,t,i)},u._onResizeDebounced=function(e){for(var t=this._getScrollY(),i=this.getWindowHeight(),n=!1,r=0,o=this._sections.length;r<o;r++)!n&&this._sections[r].onResize&&(console.warn("Jetpack: onResize has been removed please use `onResizeImmediate` or `onResizeDebounced` instead."),n=!0),this._sections[r].onResizeDebounced(e,t,i);this._updateSectionVisibility()},u.performDeepMetricsRefresh=function(){var e=this._getScrollY(),t=this.getWindowHeight();this._elementTracker.refreshAllElementMetrics(e,t);for(var i=0,n=this._sections.length;i<n;i++)this._sections[i].elementEngagement.refreshAllElementMetrics(e,t),this._sections[i].updateScrollToPosition();this._updateSectionVisibility()},u._onOrientationChange=function(e){for(var t=this._getScrollY(!0),i=this.getWindowHeight(!0),n=e.orientation,r=0,o=this._sections.length;r<o;r++)this._sections[r].onOrientationChange(e,n,t,i)},u._onResizeImmediate=function(e){for(var t=this._getScrollY(),i=this.getWindowHeight(!0),n=!1,r=0,o=this._sections.length;r<o;r++)!n&&this._sections[r].onResizeWillBeCalledAfterDelay&&(console.warn("Jetpack: onResizeWillBeCalledAfterDelay has been removed please use `onResizeImmediate` or `onResizeDebounced` instead."),n=!0),this._sections[r].onResizeImmediate(e,t,i);window.clearTimeout(this._resizeTimeout),this._resizeTimeout=window.setTimeout(this._onResizeDebounced.bind(this,e),this._resizeTimeoutDelay)},u._getScrollY=function(e){return e&&(this._cachedScrollY=window.pageYOffset||(document.documentElement||document.body).scrollTop),this._cachedScrollY},u._getVisibleBottomOfPage=function(){return this._getScrollY()+this.getWindowHeight()},u._getCurrentBreakpoint=function(){return this._currentBreakpoint},u._isNestedSection=function(e){for(var t=e,i=this._sections.length;t=t.parentElement;)for(var n=0;n<i;n++)if(this._sections[n].element===t)return!0;return!1},u.getBaseSectionForElement=function(e){for(var t=0,i=this._sections.length;t<i;t++)if(this._sections[t].element===e)return this._sections[t];return null},t.exports=n},{"../model/DataAttributes":149,"../model/EnabledFeatures":150,"../model/SectionMap":151,"../utils/Page":152,"../utils/ViewportEmitterStub":153,"@marcom/ac-element-tracker":93,"@marcom/ac-polyfills/console.log":void 0,"@marcom/ac-viewport-emitter":226}],147:[function(e,t,i){"use strict";function n(e,t,i,n,r,o){if(6!==arguments.length)throw new Error("Incorrect number of arguments passed to BaseSection");l.call(this),this.element=e,this.trackedElement=t,this.elementEngagement=new s(null,{autoStart:!1}),this.index=o,this.isVisible=this.trackedElement.pixelsInView>0,this.isVisibleWithPadding=!1,this.hasAnimatedIn=!1,this.isActive=!1,this.isFixedHero=!1,this.cachedBreakpoint=i,this.cachedScrollPosition=n,this.cachedWindowHeight=r,this.name=this.name||this.element.className,this.scrollToPosition=0,this.updateScrollToPosition(),this._components=[],this.setupComponents(i,n,r),this.setIsFixedHero(),this.performDeprecatedMethodCheck()}e("@marcom/ac-polyfills/Object/create"),e("@marcom/ac-polyfills/console.log");var r={},o={getPagePosition:e("@marcom/ac-dom-metrics/getPagePosition")},s=e("@marcom/ac-element-engagement").ElementEngagement,a=e("./../model/DataAttributes"),c=e("./../model/ComponentMap"),l=(e("./BaseComponent"),e("@marcom/ac-event-emitter-micro").EventEmitterMicro),u=l.prototype,h=n.prototype=Object.create(l.prototype);n.prototype.constructor=n,h.performDeprecatedMethodCheck=function(){if(this.onViewWillAppear)throw new Error("Section.onViewWillAppear is now `onSectionWillAppear`, please update your BaseSection subclass");if(this.onViewWillDisappear)throw new Error("Section.onViewWillDisappear is now `onSectionWillDisappear`, please update your BaseSection subclass");return!0},h.destroy=function(){this.teardownEvents(),this.elementEngagement.stop(),this.elementEngagement=null;for(var e=0,t=this._components.length;e<t;e++)this._components[e].destroy();this._components=null,this.trackedElement=null,this.element=null,u.destroy.call(this)},h.setupEvents=function(){for(var e=0,t=this._components.length;e<t;e++)this._components[e].setupEvents()},h.teardownEvents=function(){for(var e=0,t=this._components.length;e<t;e++)this._components[e].teardownEvents()},h.setupComponents=function(){var e=Array.prototype.slice.call(this.element.querySelectorAll("["+a.COMPONENT_LIST+"]"));this.element.hasAttribute(a.COMPONENT_LIST)&&e.push(this.element);for(var t=0;t<e.length;t++){var i=e[t],n=i.getAttribute(a.COMPONENT_LIST);if(n.indexOf("|")!==-1)throw"BaseSection::setupComponents component list should be space delimited, pipe character is no longer supported. Error at: '"+n+"'";for(var r=n.split(" "),o=0,s=r.length;o<s;o++){var c=r[o];""!==c&&" "!==c&&this.addComponentOfType(c,i)}setTimeout(this.elementEngagement.refreshAllElementStates.bind(this.elementEngagement),100)}},h.addComponentOfType=function(e,t){if(!c.hasOwnProperty(e))throw"BaseSection::setupComponents parsing '#"+t.id+" ."+t.className+"' no component type '"+e+"'found!";var i=c[e];if(!this.componentIsSupported(i,e))return void(void 0===r[e]&&(console.log("BaseSection::setupComponents unsupported component '"+e+"'. Reason: '"+e+".IS_SUPPORTED' returned false"),r[e]=!0));var n=new i(this,t,e,this.cachedBreakpoint,this.cachedScrollPosition,this.cachedWindowHeight,this._components.length);return this._components.push(n),n},h.removeComponentOfType=function(e){var t=this.getComponentOfType(e);null!==t&&this.removeComponent(t)},h.removeComponent=function(e){var t=this._components.indexOf(e);t!==-1&&(this._components.splice(t,1),e.destroy())},h.activate=function(){for(var e=0,t=this._components.length;e<t;e++)this._components[e].isEnabled&&this._components[e].activate();this.isActive=!0,this.hasAnimatedIn||(this.animateIn(),this.hasAnimatedIn=!0)},h.deactivate=function(){this.isActive=!1;for(var e=0,t=this._components.length;e<t;e++)this._components[e].isEnabled&&this._components[e].deactivate()},h.animateIn=function(){for(var e=0,t=this._components.length;e<t;e++)this._components[e].isEnabled&&this._components[e].animateIn()},h.onResizeImmediate=function(e,t,i){this.cachedScrollPosition=t,this.cachedWindowHeight=i;for(var n=!1,r=0,o=this._components.length;r<o;r++)this._components[r].isEnabled&&(!n&&this._components[r].onResizeWillBeCalledAfterDelay&&(console.warn("Jetpack: onResizeWillBeCalledAfterDelay has been removed please use `onResizeImmediate` or `onResizeDebounced` instead."),n=!0),this._components[r].onResizeImmediate(e,t,i))},h.onResizeDebounced=function(e,t,i){this.updateScrollToPosition();for(var n=!1,r=0,o=this._components.length;r<o;r++)this._components[r].isEnabled&&(!n&&this._components[r].onResize&&(console.warn("Jetpack: onResize has been removed please use `onResizeImmediate` or `onResizeDebounced` instead."),n=!0),this._components[r].onResizeDebounced(e,t,i));this.elementEngagement.refreshAllElementMetrics(t,i)},h.onBreakpoint=function(e,t,i,n){this.cachedBreakpoint=e;for(var r=0,o=this._components.length;r<o;r++)this._components[r].isEnabled&&this._components[r].onBreakpoint(e,t,i,n)},h.onRetinaChange=function(e,t,i,n){for(var r=0,o=this._components.length;r<o;r++)this._components[r].isEnabled&&this._components[r].onRetinaChange(e,t,i,n);this.elementEngagement.refreshAllElementMetrics(i,n)},h.onOrientationChange=function(e,t,i,n){this.cachedScrollPosition=i,this.cachedWindowHeight=n;for(var r=0,o=this._components.length;r<o;r++)this._components[r].isEnabled&&this._components[r].onOrientationChange(e,t,i,n)},h.onScroll=function(e,t,i){this.cachedScrollPosition=t,this.elementEngagement.refreshAllElementStates(t);for(var n=0,r=this._components.length;n<r;n++)this._components[n].isEnabled&&this._components[n].onScroll(e,t,i)},h.onSectionWillAppearWithPadding=function(e,t){this.cachedScrollPosition=e,this.isVisibleWithPadding=!0,this.elementEngagement.refreshAllElementStates(e);for(var i=0,n=this._components.length;i<n;i++)this._components[i].onSectionWillAppearWithPadding(e,t)},h.onSectionWillAppear=function(e,t){this.cachedScrollPosition=e,this.isVisible=!0,this.elementEngagement.refreshAllElementStates(e);for(var i=0,n=this._components.length;i<n;i++)this._components[i].onSectionWillAppear(e,t)},h.onSectionWillDisappearWithPadding=function(e,t){this.cachedScrollPosition=e,this.isVisibleWithPadding=!1;for(var i=0,n=this._components.length;i<n;i++)this._components[i].onSectionWillDisappearWithPadding(e,t);
},h.onSectionWillDisappear=function(e,t){this.cachedScrollPosition=e,this.isVisible=!1;for(var i=0,n=this._components.length;i<n;i++)this._components[i].onSectionWillDisappear(e,t)},h.getComponentOfType=function(e){if(!c.hasOwnProperty(e))throw"BaseSection::getComponentOfType no component type '"+e+"' exist in ComponentMap!";for(var t=0,i=this._components.length;t<i;t++)if(this._components[t].componentName===e)return this._components[t];return null},h.getAllComponentsOfType=function(e){if(!c.hasOwnProperty(e))throw"BaseSection::getAllComponentsOfType no component type '"+e+"' exist in ComponentMap!";for(var t=[],i=0,n=this._components.length;i<n;i++)this._components[i].componentName===e&&t.push(this._components[i]);return t},h.updateScrollToPosition=function(){return this.scrollToPosition=o.getPagePosition(this.element).top},h.setIsFixedHero=function(){if(0!==this.index)this.isFixedHero=!1;else{var e=window.getComputedStyle(this.element);this.isFixedHero="fixed"===e.position}},n.prototype.componentIsSupported=function(e,t){var i=e.IS_SUPPORTED;if(void 0===i)return!0;if("function"!=typeof i)return console.error('BaseSection::setupComponents error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var n=e.IS_SUPPORTED();return void 0===n?(console.error('BaseSection::setupComponents error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):n},t.exports=n},{"./../model/ComponentMap":148,"./../model/DataAttributes":149,"./BaseComponent":145,"@marcom/ac-dom-metrics/getPagePosition":42,"@marcom/ac-element-engagement":91,"@marcom/ac-event-emitter-micro":96,"@marcom/ac-polyfills/Object/create":void 0,"@marcom/ac-polyfills/console.log":void 0}],148:[function(e,t,i){"use strict";t.exports={BaseComponent:e("../core/BaseComponent")}},{"../core/BaseComponent":145}],149:[function(e,t,i){"use strict";t.exports={PAGE_TYPE:"data-page-type",SECTION_TYPE:"data-section-type",JUMP_SECTION_NAME:"data-page-jump-name",COMPONENT_LIST:"data-component-list"}},{}],150:[function(e,t,i){"use strict";var n={isDesktop:e("@marcom/ac-feature/isDesktop"),isRetina:e("@marcom/ac-feature/isRetina"),threeDTransformsAvailable:e("@marcom/ac-feature/threeDTransformsAvailable"),prefersReducedMotion:e("@marcom/ac-feature/prefersReducedMotion")};t.exports={TOUCH:void 0,SVG:void 0,PAGE_JUMP:void 0,IS_DESKTOP:void 0,IS_RETINA:void 0,THREE_D_TRANSFORMS:void 0,REDUCED_MOTION:void 0,IS_AOW:void 0,init:function(){var e=document.getElementsByTagName("html")[0];this.TOUCH=e.classList.contains("touch"),this.SVG=e.classList.contains("svg"),this.PAGE_JUMP=e.classList.contains("pageJump"),this.IS_DESKTOP=n.isDesktop(),this.IS_RETINA=n.isRetina(),this.THREE_D_TRANSFORMS=n.threeDTransformsAvailable(),this.REDUCED_MOTION=n.prefersReducedMotion(),this.IS_AOW=e.classList.contains("aow")},extend:function(e){if(!e.hasOwnProperty("init")||"function"!=typeof e.init)throw new TypeError("The object extended Jetpack.model.EnabledFeatures must contain an init function");var t=this.init,i=e.init,n=Object.assign(this,e);return n.init=function(){this.HAS_INITIALIZED||(this.HAS_INITIALIZED=!0,t.call(n),i.call(n))},n},HAS_INITIALIZED:!1}},{"@marcom/ac-feature/isDesktop":108,"@marcom/ac-feature/isRetina":110,"@marcom/ac-feature/prefersReducedMotion":115,"@marcom/ac-feature/threeDTransformsAvailable":118}],151:[function(e,t,i){"use strict";t.exports={BaseSection:e("../core/BaseSection")}},{"../core/BaseSection":147}],152:[function(e,t,i){"use strict";function n(){r.call(this),this._page=null,this.viewportPaddingRatio=1}var r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=n.prototype=Object.create(r.prototype);n.prototype.constructor=n,o.getPage=function(){return this._page},o.setPage=function(e){this._page=e},o.removePage=function(e){e===this._page&&(this._page=null)},o.getViewportPadding=function(){return this.getPage().getWindowHeight()*this.viewportPaddingRatio},o.deepRefreshAllElementMetrics=function(){this.trigger(n.prototype.DEEP_REFRESH_ALL_METRICS)},o.onPageHeightSettled=function(e,t){var i=document.documentElement.scrollHeight,n=0,t=t||30;window.requestAnimationFrame(function r(){var o=document.documentElement.scrollHeight;if(i!==o)n=0;else if(n++,n>=t)return void e();i=o,window.requestAnimationFrame(r)})},o.DEEP_REFRESH_ALL_METRICS="page.deep_refresh_all_metrics",t.exports=new n},{"@marcom/ac-event-emitter-micro":96}],153:[function(e,t,i){"use strict";t.exports=function(){var e;return window.ViewportEmitterTestProxy?e=window.ViewportEmitterTestProxy:(e={},e.viewport="large",e.on=e.off=function(){}),e}},{}],154:[function(e,t,i){"use strict";t.exports=function(e,t,i){return e+(t-e)*i}},{}],155:[function(e,t,i){arguments[4][121][0].apply(i,arguments)},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":206,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":160,dup:121}],156:[function(e,t,i){"use strict";function n(e,t){a.call(this),t=t||{},this._fps=e||0,this._delta=0,this._currentFps=0,this._rafEmitter=t.rafEmitter||new o,this._lastThrottledTime=0,this._didEmitFrameData=!1,this._rafEmitterEvent=null,this._shouldDraw=!1,this._boundOnRAFEmitterUpdate=this._onRAFEmitterUpdate.bind(this),this._boundOnRAFEmitterDraw=this._onRAFEmitterDraw.bind(this),this._boundOnRAFEmitterStop=this._onRAFEmitterStop.bind(this),this._rafEmitter.on("update",this._boundOnRAFEmitterUpdate),this._rafEmitter.on("draw",this._boundOnRAFEmitterDraw),this._rafEmitter.on("stop",this._boundOnRAFEmitterStop)}var r,o=e("./RAFEmitter"),s=e("@marcom/ac-object/clone"),a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro;r=n.prototype=Object.create(a.prototype),r.setFps=function(e){return e!==this._fps&&(this._fps=e,!0)},r.getFps=function(){return this._fps},r.run=function(){return this._rafEmitter.run()},r.cancel=function(){return this._rafEmitter.cancel()},r.willRun=function(){return this._rafEmitter.willRun()},r.isRunning=function(){return this._rafEmitter.isRunning()},r.destroy=function(){var e=this._rafEmitter.destroy();return a.prototype.destroy.call(this),this._rafEmitter=null,this._boundOnRAFEmitterUpdate=null,this._boundOnRAFEmitterDraw=null,this._boundOnRAFEmitterStop=null,this._rafEmitterEvent=null,e},r._onRAFEmitterUpdate=function(e){if(0===this._lastThrottledTime&&(this._lastThrottledTime=this._rafEmitter.executor.lastFrameTime),this._delta=e.time-this._lastThrottledTime,!this._fps)throw new TypeError("FPS is not defined.");return this._currentFps=1e3/this._delta,this._currentFps>this._fps?void this._rafEmitter.run():(this._rafEmitterEvent=s(e),this._rafEmitterEvent.delta=this._delta,this._rafEmitterEvent.fps=this._currentFps,this._lastThrottledTime=this._rafEmitterEvent.time,this._shouldDraw=!0,this._didEmitFrameData||(this.trigger("start",this._rafEmitterEvent),this._didEmitFrameData=!0),void this.trigger("update",this._rafEmitterEvent))},r._onRAFEmitterDraw=function(){this._shouldDraw&&(this._shouldDraw=!1,this.trigger("draw",this._rafEmitterEvent))},r._onRAFEmitterStop=function(){this._lastThrottledTime=0,this._didEmitFrameData=!1,this.trigger("stop",this._rafEmitterEvent)},t.exports=n},{"./RAFEmitter":155,"@marcom/ac-event-emitter-micro":96,"@marcom/ac-object/clone":177}],157:[function(e,t,i){"use strict";var n=e("./singleCall");t.exports=n("draw")},{"./singleCall":158}],158:[function(e,t,i){"use strict";var n=e("./RAFEmitter"),r=e("./ThrottledRAFEmitter");t.exports=function(e){return function(t,i){var o;o=i?new r(i):new n,o.once(e,function(e){t(e),o.destroy(),t=o=null}),o.run()}}},{"./RAFEmitter":155,"./ThrottledRAFEmitter":156}],159:[function(e,t,i){arguments[4][122][0].apply(i,arguments)},{"@marcom/ac-polyfills/performance/now":void 0,dup:122}],160:[function(e,t,i){arguments[4][123][0].apply(i,arguments)},{"./RAFExecutor":159,"@marcom/ac-shared-instance":218,dup:123}],161:[function(e,t,i){"use strict";var n=e("./ac-media-object/factories/createVideo"),r=e("./ac-media-object/factories/createFlow");t.exports={createFlow:r,createVideo:n}},{"./ac-media-object/factories/createFlow":162,"./ac-media-object/factories/createVideo":163}],162:[function(e,t,i){var n=e("./../views/FlowView"),r=e("@marcom/ac-object/clone");t.exports=function(e,t,i){function o(e){throw new Error(e)}var s,a=r(i||{},!0);return a.type="flow",t?t.basePath||o("Please provide a valid mediaSrc object with a basePath property."):o("Please provide both a valid container element and a valid mediaSrc object as arguments."),a.mediaObjectView?s=a.mediaObjectView:(s=new n(e,t,a),s.options.mediaObjectView=s),s}},{"./../views/FlowView":166,"@marcom/ac-object/clone":177}],163:[function(e,t,i){var n=e("./../views/VideoView"),r=e("./../views/InlinePolyfillVideoView"),o=e("@marcom/ac-feature").isHandheld,s=e("@marcom/ac-feature").isTablet,a=e("@marcom/ac-object/clone");t.exports=function(e,t,i){function c(e){throw new Error(e)}var l,u=a(i||{},!0);return u.type="video",t?t.basePath||c("Please provide a valid mediaSrc object with a basePath property."):c("Please provide both a valid container element and a valid mediaSrc object as arguments."),u.mediaObjectView?l=u.mediaObjectView:(l=u.iosInline&&!window.matchMedia("(-webkit-video-playable-inline)").matches&&(o()||s())?new r(e,t,u):new n(e,t,u),l.options.mediaObjectView=l),l}},{"./../views/InlinePolyfillVideoView":167,"./../views/VideoView":168,"@marcom/ac-feature":98,"@marcom/ac-object/clone":177}],164:[function(e,t,i){"use strict";function n(e){r.apply(this,arguments)}var r=e("@marcom/ac-mvc-model").Model,o=e("@marcom/ac-object"),s=n.prototype=o.create(r.prototype);s.defaultAttributes={type:"video",paused:!0,ended:!1,ready:!1,loadStart:!1,loaded:!1,error:!1,destroyed:!1,currentTime:0,playbackRate:1,duration:0,preload:!1,autoplay:!1,frameRate:24,enhanced:!1,looping:!1},s.getType=function(){return this.get("type")},s.getPaused=function(){return this.get("paused")},s.getEnded=function(){return this.get("ended")},s.getReady=function(){return this.get("ready")},s.getDestroyed=function(){return this.get("destroyed")},s.getLoadStart=function(){return this.get("loadedStart")},s.getLoaded=function(){return this.get("loaded")},s.getError=function(){return this.get("error")},s.getCurrentTime=function(){return this.get("currentTime")},s.getPlaybackRate=function(){return this.get("playbackRate")},s.getDuration=function(){return this.get("duration")},s.getPreload=function(){return this.get("preload")},s.getAutoplay=function(){return this.get("autoplay")},s.getFrameRate=function(){return this.get("frameRate")},s.getEnhanced=function(){return this.get("enhanced")},s.getLooping=function(){return this.get("looping")},s.setPaused=function(e){this.set({paused:e})},s.setEnded=function(e){this.set({ended:e})},s.setReady=function(e){this.set({ready:e})},s.setDestroyed=function(e){this.set({destroyed:e})},s.setDuration=function(e){this.set({duration:e})},s.setLoadStart=function(e){this.set({loadStart:e})},s.setLoaded=function(e){this.set({loaded:e})},s.setError=function(e){this.set({error:e})},s.setCurrentTime=function(e){this.set({currentTime:e})},s.setPlaybackRate=function(e){this.set({playbackRate:e})},s.setPreload=function(e){this.set({preload:e})},s.setAutoplay=function(e){this.set({autoplay:e})},s.setFrameRate=function(e){this.set({frameRate:e})},s.setEnhanced=function(e){this.set({enhanced:e})},s.setLooping=function(e){this.set({looping:e})},t.exports=n},{"@marcom/ac-mvc-model":172,"@marcom/ac-object":176}],165:[function(e,t,i){"use strict";var n=e("./../models/MediaModel"),r=e("@marcom/ac-mvc-view").View,o=e("@marcom/ac-object"),s=function(e,t,i){r.call(this,{element:e}),this.options=o.clone(i||{},!0),this.mediaSrc=t||"",this.model=this.options.model||new n(this.options),this._onLoadStartChange=this._onLoadStartChange.bind(this),this._onLoadedChange=this._onLoadedChange.bind(this),this._onPausedChange=this._onPausedChange.bind(this),this._onReadyChange=this._onReadyChange.bind(this),this._onErrorChange=this._onErrorChange.bind(this),this._onEnhancedChange=this._onEnhancedChange.bind(this),this._onCurrentTimeChange=this._onCurrentTimeChange.bind(this),this._onPlaybackRateChange=this._onPlaybackRateChange.bind(this),this._onDestroyedChange=this._onDestroyedChange.bind(this),this._onEndedChange=this._onEndedChange.bind(this),this._respondToPlay=this._respondToPlay.bind(this),this._respondToPause=this._respondToPause.bind(this),this._respondToTimeUpdate=this._respondToTimeUpdate.bind(this),this._respondToEnded=this._respondToEnded.bind(this),this._respondToDurationChange=this._respondToDurationChange.bind(this),this._respondToRateChange=this._respondToRateChange.bind(this),this._init()},a=s.prototype=o.create(r.prototype);a._init=function(){this._createMediaElement(),this._createMediaEmitter(),this._createMediaLoader(),this._bindEvents(),this._config()},a._createMediaElement=function(){},a._createMediaEmitter=function(){},a._createMediaLoader=function(){},a._config=function(){this.options.preload===!0&&(this._setPreload(!0),this.load()),this.options.autoplay===!0&&this._setAutoplay(!0),this.options.looping===!0&&this._setLooping(!0),this.options.frameRate&&this._setFrameRate(this.options.frameRate)},a._bindEvents=function(){this._bindViewEvents(),this._bindModelEvents()},a.destroy=function(){if(!this.getDestroyed()){this._destroy(),this._setDestroyed(!0),this.model.off(),this.off();for(var e in this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=null)}},a._bindModelEvents=function(){this.model.on("change:loadStart",this._onLoadStartChange),this.model.on("change:loaded",this._onLoadedChange),this.model.on("change:paused",this._onPausedChange),this.model.on("change:ready",this._onReadyChange),this.model.on("change:error",this._onErrorChange),this.model.on("change:enhanced",this._onEnhancedChange),this.model.on("change:currentTime",this._onCurrentTimeChange),this.model.on("change:playbackRate",this._onPlaybackRateChange),this.model.on("change:destroyed",this._onDestroyedChange),this.model.on("change:ended",this._onEndedChange)},a._onLoadStartChange=function(){this.trigger("loadstart")},a._onLoadedChange=function(){this.trigger("loaded")},a._onPausedChange=function(e){e.value===!0?(this.trigger("pause"),this.el.classList.remove("mediaobject-playing")):(this.trigger("play"),this.el.classList.remove("mediaobject-ended"),this.el.classList.add("mediaobject-playing"))},a._onReadyChange=function(){this.trigger("ready")},a._onErrorChange=function(){this.trigger("error")},a._onEnhancedChange=function(){this.el.classList.add("mediaobject-enhanced"),this.mediaElement.classList.add("mediaobject-element"),this.trigger("enhanced")},a._onCurrentTimeChange=function(){this.trigger("timeupdate")},a._onPlaybackRateChange=function(){this.trigger("ratechange")},a._onDestroyedChange=function(){this.el.classList.remove("mediaobject-playing"),this.el.classList.remove("mediaobject-ended"),this.el.classList.remove("mediaobject-enhanced"),this.el.classList.add("mediaobject-destroyed"),this.trigger("destroyed")},a._onEndedChange=function(e){e.value===!0&&this.trigger("ended")},a._bindViewEvents=function(){this.mediaEmitter&&(this.mediaEmitter.on("play",this._respondToPlay),this.mediaEmitter.on("pause",this._respondToPause),this.mediaEmitter.on("timeupdate",this._respondToTimeUpdate),this.mediaEmitter.on("ended",this._respondToEnded),this.mediaEmitter.on("durationchange",this._respondToDurationChange),this.mediaEmitter.on("ratechange",this._respondToRateChange))},a._respondToPlay=function(){this.model.set({ended:!1,paused:!1})},a._respondToPause=function(){this.model.setPaused(!0)},a._respondToTimeUpdate=function(){var e=0;if(this.mediaElement.currentTime)e=this.mediaElement.currentTime;else{if(!this.mediaEmitter.currentTime)return;e=this.mediaEmitter.currentTime}this.getCurrentTime()!==e&&this.model.set({currentTime:e})},a._respondToEnded=function(){this.model.set({ended:!0,paused:!0}),this.el.classList.remove("mediaobject-playing"),this.el.classList.add("mediaobject-ended")},a._respondToDurationChange=function(){var e=0;if(this.mediaElement.duration)e=this.mediaElement.duration;else{if(!this.mediaEmitter.duration)return;e=this.mediaEmitter.duration}this.model.set({duration:e})},a._respondToRateChange=function(){var e=0;if(this.mediaElement.playbackRate)e=this.mediaElement.playbackRate;else{if(!this.mediaEmitter.playbackRate)return;e=this.mediaEmitter.playbackRate}this.model.set({playbackRate:e})},a.enhance=function(){},a.play=function(){},a.pause=function(){},a.reset=function(){},a.setCurrentTime=function(e){},a.setPlaybackRate=function(e){},a.goToFrame=function(e){var t=e/this.model.frameRate;return this.setCurrentTime(t)},a.goToPercent=function(e){var t=e*this.getDuration();return this.setCurrentTime(t)},a._setReady=function(e){this.model.setReady(e)},a._setLoadStart=function(e){this.model.setLoadStart(e)},a._setLoaded=function(e){this.model.setLoaded(e)},a._setError=function(e){this.model.setError(e)},a._setDuration=function(e){this.model.setDuration(e)},a._setPreload=function(e){this.model.setPreload(e)},a._setAutoplay=function(e){this.model.setAutoplay(e)},a._setFrameRate=function(e){this.model.setFrameRate(e)},a._setEnhanced=function(e){this.model.setEnhanced(e)},a._setDestroyed=function(e){this.model.setDestroyed(e)},a._setLooping=function(e){},a._destroy=function(){},a.getType=function(){return this.model.getType()},a.getPaused=function(){return this.model.getPaused()},a.getEnded=function(){return this.model.getEnded()},a.getReady=function(){return this.model.getReady()},a.getLoadStart=function(){return this.model.getLoadStart()},a.getLoaded=function(){return this.model.getLoaded()},a.getError=function(){return this.model.getError()},a.getDuration=function(){return this.model.getDuration()},a.getEnhanced=function(){return this.model.getEnhanced()},a.getCurrentTime=function(){return this.model.getCurrentTime()},a.getCurrentFrame=function(){return Math.floor(this.getCurrentTime()*this.options.frameRate)},a.getCurrentPercent=function(){return this.model.getCurrentTime()/this.getDuration()||0},a.getPlaybackRate=function(){return this.model.getPlaybackRate()},a.getFrameRate=function(){return this.model.getFrameRate()},a.getPreload=function(){return this.model.getPreload()},a.getAutoplay=function(){return this.model.getAutoplay()},a.getLooping=function(){return this.model.getLooping()},a.getDestroyed=function(){return!this.model||this.model.getDestroyed()},t.exports=s},{"./../models/MediaModel":164,"@marcom/ac-mvc-view":174,"@marcom/ac-object":176}],166:[function(e,t,i){"use strict";var n=e("./BaseView"),r=e("@marcom/ac-dom-nodes"),o=e("@marcom/ac-flow").createFlow,s=e("@marcom/ac-raf-emitter/draw"),a=function(e,t,i){n.call(this,e,t,i),this._onLoad=this._onLoad.bind(this),this._onError=this._onError.bind(this),this._onReady=this._onReady.bind(this)},c=a.prototype=Object.create(n.prototype);c._createMediaElement=function(){this.mediaElement=document.createElement("canvas")},c._createMediaEmitter=function(){this.flowOptions={element:this.mediaElement,preload:!1,keyframeCache:this.options.keyframeCache||!1},this.mediaEmitter=o(this.flowOptions,this.mediaSrc)},c._createMediaLoader=function(){this.mediaLoader=this.mediaEmitter},c.load=function(){this._setLoadStart(!0),this.mediaLoader.once("loaded",this._onLoad),this.mediaLoader.once("error",this._onError),this.mediaEmitter.once("canplaythrough",this._onReady),this.loaded||this.mediaLoader.load()["catch"](this._onError)},c._onLoad=function(){this._setLoaded(!0)},c._onError=function(){this.model&&this._setError(!0)},c._onReady=function(){this._setReady(!0),this._setDuration(this.mediaEmitter.duration),this.setPlaybackRate(this.getPlaybackRate()),this._totalFrames=this._getTotalFrames(),this.getAutoplay()&&(this.getEnhanced===!1&&this.enhance(),this.play())},c._getTotalFrames=function(){return this.getDuration()*this.getFrameRate()},c.enhance=function(){this._setEnhanced(!0),s(function(){this.mediaElement&&this._inject()}.bind(this))},c._inject=function(){r.insertFirstChild(this.mediaElement,this.el)},c._destroy=function(){this._remove(),this.mediaEmitter&&this.mediaEmitter.destroy()},c._remove=function(){r.remove(this.mediaElement)},c.play=function(){this.model.getPaused()!==!1&&(this.mediaEmitter.currentTime>=this.getDuration()&&this.setCurrentTime(0),this.getReady()&&null!==this.mediaEmitter&&this.mediaEmitter.play())},c.pause=function(){this.model.getPaused()!==!0&&this.mediaEmitter.pause()},c.reset=function(){0!==this.model.getCurrentTime()&&(this.setCurrentTime(0),this.pause())},c.setCurrentTime=function(e){e<0&&(e=0),e>this.getDuration()&&(e=this.getDuration()),this.mediaEmitter.currentTime=e},c.setPlaybackRate=function(e){this.mediaEmitter.playbackRate=e},c._setLooping=function(e){this.mediaEmitter.loop=e,this.model.setLooping(e)},t.exports=a},{"./BaseView":165,"@marcom/ac-dom-nodes":52,"@marcom/ac-flow":124,"@marcom/ac-raf-emitter/draw":157}],167:[function(e,t,i){"use strict";var n=e("./VideoView"),r=n.prototype,o=e("@marcom/ac-raf-emitter/RAFEmitter"),s=function(e,t,i){n.call(this,e,t,i),this._polyfillRAFEmitter=i.polyfillRAFEmitter||new o,this._boundHandlePolyfillRAFEmitterDraw=this._handlePolyfillRAFEmitterDraw.bind(this),this._polyfillRAFEmitter.on("draw",this._boundHandlePolyfillRAFEmitterDraw)},a=s.prototype=Object.create(n.prototype);a._initInlineVideo=function(){r._initInlineVideo.apply(this,arguments),this._shouldLoop=!1},a._destroy=function(){r._destroy.apply(this,arguments),this._polyfillRAFEmitter&&(this._polyfillRAFEmitter.destroy(),this._polyfillRAFEmitter=null)},a.play=function(){this.model.getPaused()!==!1&&(this.model.setPaused(!1),this._polyfillRAFEmitter.run())},a.pause=function(){this.model.getPaused()!==!0&&(this.model.setPaused(!0),this._polyfillRAFEmitter.cancel())},a.setCurrentTime=function(e){r.setCurrentTime.apply(this,arguments),this._polyfillRAFEmitter.run()},a._handlePolyfillRAFEmitterDraw=function(e){var t=this.model.getCurrentTime(),i=this.model.getPlaybackRate(),n=this.mediaElement.duration,r=e.delta/1e3*i;if(!this.model.getPaused()){t+=r;var o=t<=0,s=t>=n,a=i>=0,c=i<0;if(o&&(t=0),s&&(t=n),this._shouldLoop)return this._shouldLoop=!1,void(a?this.setCurrentTime(r):this.setCurrentTime(n-r));this.setCurrentTime(t),(o&&c||s&&a)&&(this.model.getLooping()?this._shouldLoop=!0:(this.pause(),this.model.setEnded(!0)))}},t.exports=s},{"./VideoView":168,"@marcom/ac-raf-emitter/RAFEmitter":155}],168:[function(e,t,i){"use strict";var n=e("./BaseView"),r=n.prototype,o=e("@marcom/ac-raf-emitter/draw"),s=e("@marcom/ac-dom-nodes"),a=e("@marcom/ac-dom-emitter").DOMEmitter,c=e("@marcom/ac-dom-styles"),l=e("@marcom/ac-asset-loader").assetLoader,u=e("@marcom/ac-useragent"),h=e("@marcom/ac-feature").isHandheld,m=e("@marcom/ac-feature").isTablet,d=function(e,t,i){this.srcForVideoEl=null,this._cannotPlayInlineVideo=null,this._onLoaded=this._onLoaded.bind(this),this._onReady=this._onReady.bind(this),n.call(this,e,t,i),i.iosInline&&this._initInlineVideo()},p=d.prototype=Object.create(n.prototype);p.inlineClassName="mediaobject-ios-inline-video",p.inlineAttribute="playsinline",p._cannotPlayInlineVideo=null,p._initInlineVideo=function(){this.mediaElement.hasAttribute("controls")&&this.mediaElement.removeAttribute("controls"),this.mediaElement.setAttribute(this.inlineAttribute,""),this.mediaElement.classList.add(this.inlineClassName)},p._createMediaElement=function(){this.mediaElement=document.createElement("video")},p._createMediaEmitter=function(){this.mediaEmitter=new a(this.mediaElement)},p._createMediaLoader=function(){var e;if(this.mediaSrc.basePath=this._forceTrailingSlash(this.mediaSrc.basePath),this.mediaSrc.splitFileLoading){e=this.mediaSrc.basePath;var t={src:e,type:"splitfile"};this.mediaLoader=l.createAssetGroup(t)}else this.mediaSrc.fileFormat=this._checkFileFormat(this.mediaSrc.fileFormat),e=this.mediaSrc.basePath+this.mediaSrc.filename+this.mediaSrc.fileFormat,this.srcForVideoEl=e},p._forceTrailingSlash=function(e){return e&&e.lastIndexOf("https://www.apple.com/")!==e.length-1&&(e+="https://www.apple.com/"),e},p._checkFileFormat=function(e){return e&&0!==e.lastIndexOf(".")&&(e="."+e),e},p.load=function(){if(this._setLoadStart(!0),this.mediaSrc.splitFileLoading){var e=function(e){var t=window.URL.createObjectURL(e.latest.data);this.mediaEmitter&&(this.mediaEmitter.once("loadeddata",this._onLoaded),this.mediaEmitter.once("canplaythrough",this._onReady)),this.mediaElement.src=t,this.mediaElement.load(),this.mediaLoader.destroy()}.bind(this);this.mediaLoader.load().then(e)["catch"](this._setError.bind(this,!0))}else this.cannotPlayInlineVideo()||(this.mediaEmitter.once("loadeddata",this._onLoaded),this.mediaEmitter.once("canplaythrough",this._onReady)),this.mediaElement.src=this.srcForVideoEl,this.cannotPlayInlineVideo()?this._onLoaded():this.mediaElement.load()},p._onLoaded=function(){this._setLoaded(!0)},p.cannotPlayInlineVideo=function(){if(null!==this._cannotPlayInlineVideo)return this._cannotPlayInlineVideo;var e="iOS"===u.os&&h(),t="iOS"===u.os&&m()&&u.version<8;return this._cannotPlayInlineVideo=e||t,this._cannotPlayInlineVideo},p._onReady=function(){this._setReady(!0),this.getAutoplay()&&(this.getEnhanced()||this.enhance(),this.play())},p.enhance=function(){this._setEnhanced(!0),o(function(){"VIDEO"===this.mediaElement.tagName&&(s.insertLastChild(this.mediaElement,this.el),c.setStyle(this.mediaElement,{visibility:"hidden"}),o(function(){this.mediaElement&&(this.setPlaybackRate(this.getPlaybackRate()),c.setStyle(this.mediaElement,{visibility:"visible"}))}.bind(this)))}.bind(this))},p._destroy=function(){this._remove(),this.mediaEmitter&&this.mediaEmitter.off(),this.mediaLoader&&this.mediaLoader.destroy()},p._remove=function(){s.remove(this.mediaElement)},p._onEndedChange=function(e){r._onEndedChange.call(this,e),"iOS"===u.os&&h()&&e.value===!0&&this.mediaElement.webkitExitFullScreen()},p.play=function(){this.model.getPaused()!==!1&&this.mediaElement.play()},p.pause=function(){this.model.getPaused()!==!0&&this.mediaElement.pause()},p.reset=function(){0!==this.model.getCurrentTime()&&(this.setCurrentTime(0),this.pause())},p.setCurrentTime=function(e){this.mediaElement.duration&&(this.model.setCurrentTime(e),this.mediaElement.currentTime=e)},p.setPlaybackRate=function(e){this.mediaElement.playbackRate=e},p._setLooping=function(e){this.mediaElement.loop=e,this.model.setLooping(e)},t.exports=d},{"./BaseView":165,"@marcom/ac-asset-loader":14,"@marcom/ac-dom-emitter":28,"@marcom/ac-dom-nodes":52,"@marcom/ac-dom-styles":73,"@marcom/ac-feature":98,"@marcom/ac-raf-emitter/draw":157,"@marcom/ac-useragent":221}],169:[function(e,t,i){"use strict";function n(e){r.call(this),this.options=e||{},"number"==typeof this.options.min&&(this.min=this.options.min),"number"==typeof this.options.max&&(this.max=this.options.max),"number"==typeof this.options.normalizedFPS&&(this.normalizedFPS=this.options.normalizedFPS),"boolean"==typeof this.options.handleVariedFPS&&(this.handleVariedFPS=this.options.handleVariedFPS),"function"==typeof this.options.easingFunction&&(this.easingFunction=this.options.easingFunction),this._boundHandleRAFEmitterUpdate=this._handleRAFEmitterUpdate.bind(this),this._boundHandleRAFEmitterDraw=this._handleRAFEmitterDraw.bind(this),this._boundHandleRAFEmitterStop=this._handleRAFEmitterStop.bind(this),this.rafEmitter=this.options.rafEmitter||new o,this.specificity=this.options.specificity||4,this.friction=this.options.friction||10,this._targetValue=null,this._currentValue=null,this._shouldUpdate=!1,this._shouldEmitChange=!1,this._didEmitFrameData=!1,this._bindEvents()}e("@marcom/ac-polyfills/Object/create");var r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-raf-emitter/RAFEmitter"),s=n.prototype=Object.create(r.prototype);s.handleVariedFPS=!0,s.normalizedFPS=60,s.min=0,s.max=1,s.destroy=function(){this.trigger("destroy"),this.off(),this.rafEmitter.destroy();var e;for(e in this)this.hasOwnProperty(e)&&(this[e]=null)},s.isRunning=function(){return this.rafEmitter.isRunning()},s.setProgress=function(e){this._targetValue!==e&&(this._targetValue=e,this._shouldUpdate=!0,this.rafEmitter.run())},s.updateValue=function(e){null===this._currentValue&&(this._currentValue=this._targetValue);var t=1;if(this.easingFunction){var i=this.max-this.min,n=this.max-(this.max-this._targetValue)/i,r=this.max-(this.max-this._currentValue)/i,o=1-Math.abs(n-r),s=this.easingFunction(o,0,1,1);t=1+(s-o)}var a=1;if(this.handleVariedFPS){var c=e.fps;c<1&&(c=1),a=this.normalizedFPS/c}var l=this._targetValue-this._currentValue,u=l*t*a*(1/this.friction),h=parseFloat((this._currentValue+u).toFixed(this.specificity));(l>0&&h>this._targetValue||l<0&&h<this._targetValue)&&(h=this._targetValue),h===this._currentValue?this._currentValue=this._targetValue:this._currentValue=h,this._shouldEmitChange=!0},s._bindEvents=function(){this.rafEmitter.on("update",this._boundHandleRAFEmitterUpdate),this.rafEmitter.on("draw",this._boundHandleRAFEmitterDraw),this.rafEmitter.on("stop",this._boundHandleRAFEmitterStop)},s._unbindEvents=function(){this.rafEmitter.off("update",this._boundHandleRAFEmitterUpdate),this.rafEmitter.off("draw",this._boundHandleRAFEmitterDraw),this.rafEmitter.off("stop",this._boundHandleRAFEmitterStop)},s._handleRAFEmitterUpdate=function(e){this._shouldUpdate&&this.updateValue(e),this._shouldEmitChange&&(e.progress=this._currentValue,this._didEmitFrameData||(this.trigger("start",e),this._didEmitFrameData=!0),this.trigger("update",e))},s._handleRAFEmitterDraw=function(e){if(this._shouldEmitChange){if(e.progress=this._currentValue,this.trigger("draw",e),this._targetValue===this._currentValue)return this._shouldUpdate=!1,void(this._shouldEmitChange=!1);this._shouldUpdate=!0,this.rafEmitter.run()}},s._handleRAFEmitterStop=function(e){e.progress=this._currentValue,this.trigger("stop",e),this._didEmitFrameData=!1},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-polyfills/Object/create":void 0,"@marcom/ac-raf-emitter/RAFEmitter":207}],170:[function(e,t,i){"use strict";t.exports={CID:e("./ac-mvc-cid/CID")}},{"./ac-mvc-cid/CID":171}],171:[function(e,t,i){"use strict";function n(){this._idCount=0}var r=e("@marcom/ac-shared-instance").SharedInstance,o="ac-mvc-cid:CID",s="1.0.0",a=n.prototype;a._cidPrefix="cid",a.getNewCID=function(){var e=this._cidPrefix+"-"+this._idCount;return this._idCount++,e},t.exports=r.share(o,s,n)},{"@marcom/ac-shared-instance":218}],172:[function(e,t,i){"use strict";t.exports={Model:e("./ac-mvc-model/Model")}},{"./ac-mvc-model/Model":173}],173:[function(e,t,i){"use strict";function n(e){r.call(this),this.attributes=o(this.defaultAttributes,e||{}),this.cid=a.getNewCID(),this.attributes[this.idAttribute]&&(this.id=this.attributes[this.idAttribute])}var r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-object/defaults"),s=e("@marcom/ac-object/create"),a=e("@marcom/ac-mvc-cid").CID,c=r.prototype,l=n.prototype=s(c);l.defaultAttributes={},l.idAttribute="id",l.get=function(e){if(this.attributes)return this.attributes[e]},l.set=function(e,t){if(this.attributes){var i,n,r,o={},s=!1;for(i in e)if(e.hasOwnProperty(i)){if(r=this.get(i),r===e[i]||"object"==typeof r&&"object"==typeof e[i]&&JSON.stringify(r)===JSON.stringify(e[i]))continue;s=!0,this.attributes[i]=e[i],n={value:e[i],previous:r},o[i]=n,this._triggerChange(i,n,t)}s&&this._trigger("change",o,t)}},l.hasAttribute=function(e){return!!this.attributes&&void 0!==this.attributes[e]},l.eachAttribute=function(e,t){if(this.attributes){var i;for(i in this.attributes)this.attributes.hasOwnProperty(i)&&e.call(t,{attribute:i,value:this.attributes[i]})}},l.destroy=function(){this.trigger("destroy"),c.destroy.call(this);var e;for(e in this)this.hasOwnProperty(e)&&(this[e]=null)},l._trigger=function(e,t,i){i=i||{},i.silent!==!0&&this.trigger(e,t)},l._triggerChange=function(e,t,i){return this._trigger("change:"+e,t,i)},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-mvc-cid":170,"@marcom/ac-object/create":178,"@marcom/ac-object/defaults":179}],174:[function(e,t,i){
"use strict";t.exports={View:e("./ac-mvc-view/View")}},{"./ac-mvc-view/View":175}],175:[function(e,t,i){"use strict";function n(e){var t,i,n;this.options=s.defaults(this.defaultOptions,e||{}),this.cid=o.getNewCID(),this.model=this.options.model,this.options.template&&(this.template=this.options.template),t=this.options.tagName||this.tagName,i=this.options.element,n=this.options.className||this.className,i||(i=document.createElement(t)),r.call(this,i),n&&this.addClassName(n),this.options.events&&this.delegateEvents(this.options.events)}var r=e("@marcom/ac-dom-emitter").DOMEmitter,o=e("@marcom/ac-mvc-cid").CID,s={create:e("@marcom/ac-object/create"),defaults:e("@marcom/ac-object/defaults")},a={insertLastChild:e("@marcom/ac-dom-nodes/insertLastChild"),remove:e("@marcom/ac-dom-nodes/remove")},c=e("@marcom/ac-classlist/add"),l=e("@marcom/ac-classlist/remove"),u=n.prototype=s.create(r.prototype);u.tagName="div",u.defaultOptions={},u.getTagName=function(){return this.el.tagName.toLowerCase()},u.appendTo=function(e){return a.insertLastChild(this.el,e),this},u.render=function(){},u.addClassName=function(e){return this._manipulateClassName(e,c)},u.removeClassName=function(e){return this._manipulateClassName(e,l)},u.destroy=function(){this.emitterTrigger("destroy"),this.off(),a.remove(this.el);var e;for(e in this)this.hasOwnProperty(e)&&(this[e]=null)},u.delegateEvents=function(e,t){t=t||this;var i,n;for(i in e)e.hasOwnProperty(i)&&(n=e[i],"string"==typeof n&&(e[i]=this[e[i]]));return this.on(e,t),this},u._manipulateClassName=function(e,t){var i;if("string"==typeof e)i=e.split(" ");else{if("object"!=typeof e||!Array.isArray(e))return this;i=e.slice()}return i.unshift(this.el),t.apply(this.el,i),this},t.exports=n},{"@marcom/ac-classlist/add":22,"@marcom/ac-classlist/remove":27,"@marcom/ac-dom-emitter":28,"@marcom/ac-dom-nodes/insertLastChild":60,"@marcom/ac-dom-nodes/remove":71,"@marcom/ac-mvc-cid":170,"@marcom/ac-object/create":178,"@marcom/ac-object/defaults":179}],176:[function(e,t,i){"use strict";t.exports={clone:e("./clone"),create:e("./create"),defaults:e("./defaults"),extend:e("./extend"),getPrototypeOf:e("./getPrototypeOf"),isDate:e("./isDate"),isEmpty:e("./isEmpty"),isRegExp:e("./isRegExp"),toQueryParameters:e("./toQueryParameters")}},{"./clone":177,"./create":178,"./defaults":179,"./extend":180,"./getPrototypeOf":181,"./isDate":182,"./isEmpty":183,"./isRegExp":184,"./toQueryParameters":185}],177:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/isArray");var n=e("./extend"),r=Object.prototype.hasOwnProperty,o=function(e,t){var i;for(i in t)r.call(t,i)&&(null===t[i]?e[i]=null:"object"==typeof t[i]?(e[i]=Array.isArray(t[i])?[]:{},o(e[i],t[i])):e[i]=t[i]);return e};t.exports=function(e,t){return t?o({},e):n({},e)}},{"./extend":180,"@marcom/ac-polyfills/Array/isArray":void 0}],178:[function(e,t,i){"use strict";var n=function(){};t.exports=function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(null===e||"object"!=typeof e)throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(e):(n.prototype=e,new n)}},{}],179:[function(e,t,i){"use strict";var n=e("./extend");t.exports=function(e,t){if("object"!=typeof e)throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!=typeof t)throw new TypeError("defaults: options must be a typeof object");return n({},e,t)}},{"./extend":180}],180:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var n=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach(function(e){if(null!=e)for(var i in e)n.call(e,i)&&(t[i]=e[i])}),t}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],181:[function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty;t.exports=function(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if("object"!=typeof e)throw new Error("Requested prototype of a value that is not an object.");if("object"==typeof this.__proto__)return e.__proto__;var t,i=e.constructor;if(n.call(e,"constructor")){if(t=i,!delete e.constructor)return null;i=e.constructor,e.constructor=t}return i?i.prototype:null}},{}],182:[function(e,t,i){"use strict";t.exports=function(e){return"[object Date]"===Object.prototype.toString.call(e)}},{}],183:[function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty;t.exports=function(e){var t;if("object"!=typeof e)throw new TypeError("ac-base.Object.isEmpty : Invalid parameter - expected object");for(t in e)if(n.call(e,t))return!1;return!0}},{}],184:[function(e,t,i){"use strict";t.exports=function(e){return!!window.RegExp&&e instanceof RegExp}},{}],185:[function(e,t,i){"use strict";var n=e("@marcom/ac-url/joinSearchParams");t.exports=function(e){if("object"!=typeof e)throw new TypeError("toQueryParameters error: argument is not an object");return n(e,!1)}},{"@marcom/ac-url/joinSearchParams":220}],186:[function(e,t,i){"use strict";var n=e("./utils/eventTypeAvailable"),r=e("./shared/camelCasedEventTypes"),o=e("./shared/windowFallbackEventTypes"),s=e("./shared/prefixHelper"),a={};t.exports=function c(e,t){var i,l,u;if(t=t||"div",e=e.toLowerCase(),t in a||(a[t]={}),l=a[t],e in l)return l[e];if(n(e,t))return l[e]=e;if(e in r)for(u=0;u<r[e].length;u++)if(i=r[e][u],n(i.toLowerCase(),t))return l[e]=i;for(u=0;u<s.evt.length;u++)if(i=s.evt[u]+e,n(i,t))return s.reduce(u),l[e]=i;return"window"!==t&&o.indexOf(e)?l[e]=c(e,"window"):l[e]=!1}},{"./shared/camelCasedEventTypes":190,"./shared/prefixHelper":192,"./shared/windowFallbackEventTypes":195,"./utils/eventTypeAvailable":197}],187:[function(e,t,i){"use strict";var n=e("./shared/stylePropertyCache"),r=e("./getStyleProperty"),o=e("./getStyleValue");t.exports=function(e,t){var i;if(e=r(e),!e)return!1;if(i=n[e].css,"undefined"!=typeof t){if(t=o(e,t),t===!1)return!1;i+=":"+t+";"}return i}},{"./getStyleProperty":188,"./getStyleValue":189,"./shared/stylePropertyCache":193}],188:[function(e,t,i){"use strict";var n=e("./shared/stylePropertyCache"),r=e("./shared/getStyleTestElement"),o=e("./utils/toCSS"),s=e("./utils/toDOM"),a=e("./shared/prefixHelper"),c=function(e,t){var i=o(e),r=t!==!1&&o(t);return n[e]=n[t]=n[i]=n[r]={dom:t,css:r},t};t.exports=function(e){var t,i,o,l;if(e+="",e in n)return n[e].dom;for(o=r(),e=s(e),i=e.charAt(0).toUpperCase()+e.substring(1),t="filter"===e?["WebkitFilter","filter"]:(e+" "+a.dom.join(i+" ")+i).split(" "),l=0;l<t.length;l++)if("undefined"!=typeof o.style[t[l]])return 0!==l&&a.reduce(l-1),c(e,t[l]);return c(e,!1)}},{"./shared/getStyleTestElement":191,"./shared/prefixHelper":192,"./shared/stylePropertyCache":193,"./utils/toCSS":198,"./utils/toDOM":199}],189:[function(e,t,i){"use strict";var n=e("./getStyleProperty"),r=e("./shared/styleValueAvailable"),o=e("./shared/prefixHelper"),s=e("./shared/stylePropertyCache"),a={},c=/(\([^\)]+\))/gi,l=/([^ ,;\(]+(\([^\)]+\))?)/gi;t.exports=function(e,t){var i;return t+="",!!(e=n(e))&&(r(e,t)?t:(i=s[e].css,t=t.replace(l,function(t){var n,s,l,u;if("#"===t[0]||!isNaN(t[0]))return t;if(s=t.replace(c,""),l=i+":"+s,l in a)return a[l]===!1?"":t.replace(s,a[l]);for(n=o.css.map(function(e){return e+t}),n=[t].concat(n),u=0;u<n.length;u++)if(r(e,n[u]))return 0!==u&&o.reduce(u-1),a[l]=n[u].replace(c,""),n[u];return a[l]=!1,""}),t=t.trim(),""!==t&&t))}},{"./getStyleProperty":188,"./shared/prefixHelper":192,"./shared/stylePropertyCache":193,"./shared/styleValueAvailable":194}],190:[function(e,t,i){"use strict";t.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],191:[function(e,t,i){"use strict";var n;t.exports=function(){return n?(n.style.cssText="",n.removeAttribute("style")):n=document.createElement("_"),n},t.exports.resetElement=function(){n=null}},{}],192:[function(e,t,i){"use strict";var n=["-webkit-","-moz-","-ms-"],r=["Webkit","Moz","ms"],o=["webkit","moz","ms"],s=function(){this.initialize()},a=s.prototype;a.initialize=function(){this.reduced=!1,this.css=n,this.dom=r,this.evt=o},a.reduce=function(e){this.reduced||(this.reduced=!0,this.css=[this.css[e]],this.dom=[this.dom[e]],this.evt=[this.evt[e]])},t.exports=new s},{}],193:[function(e,t,i){"use strict";t.exports={}},{}],194:[function(e,t,i){"use strict";var n,r,o=e("./stylePropertyCache"),s=e("./getStyleTestElement"),a=!1,c=function(){var e;if(!a){a=!0,n="CSS"in window&&"supports"in window.CSS,r=!1,e=s();try{e.style.width="invalid"}catch(t){r=!0}}};t.exports=function(e,t){var i,a;if(c(),n)return e=o[e].css,CSS.supports(e,t);if(a=s(),i=a.style[e],r)try{a.style[e]=t}catch(l){return!1}else a.style[e]=t;return a.style[e]&&a.style[e]!==i},t.exports.resetFlags=function(){a=!1}},{"./getStyleTestElement":191,"./stylePropertyCache":193}],195:[function(e,t,i){"use strict";t.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],196:[function(e,t,i){"use strict";var n=/(-webkit-|-moz-|-ms-)|^(webkit|moz|ms)/gi;t.exports=function(e){return e=String.prototype.replace.call(e,n,""),e.charAt(0).toLowerCase()+e.substring(1)}},{}],197:[function(e,t,i){"use strict";var n={window:window,document:document};t.exports=function(e,t){var i;return e="on"+e,t in n||(n[t]=document.createElement(t)),i=n[t],e in i||"setAttribute"in i&&(i.setAttribute(e,"return;"),"function"==typeof i[e])}},{}],198:[function(e,t,i){"use strict";var n=/^(webkit|moz|ms)/gi;t.exports=function(e){return"cssfloat"===e.toLowerCase()?"float":(n.test(e)&&(e="-"+e),e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase())}},{}],199:[function(e,t,i){"use strict";var n=/-([a-z])/g;t.exports=function(e){return"float"===e.toLowerCase()?"cssFloat":(e=e.replace(n,function(e,t){return t.toUpperCase()}),"Ms"===e.substr(0,2)&&(e="ms"+e.substring(2)),e)}},{}],200:[function(e,t,i){"use strict";function n(e,t,i,n,s,a,c){if(this.name=i+"_"+c,r.apply(this,arguments),this.section.getComponentOfType(this.componentName))throw new Error("Each Jetpack Section can only contain one ProgressiveImageComponent. Mark progressive images with the [data-progressive-image] attribute, or use [data-progressive-image-group] to distinctly load multiple groups of images in a section");try{this._loadOptions=JSON.parse(this.element.getAttribute("data-progressive-image-options"))}catch(l){this._loadOptions=null}this.imageLoader=new o({container:this.element,includeContainer:!0})}var r=(e("@marcom/ac-object/defaults"),e("@marcom/ac-jetpack-lib/core/BaseComponent")),o=e("./ProgressiveImageLoader");n.Events={ImageLoad:"progressive-image-load",Complete:"progressive-image-complete"};var s=n.prototype=Object.create(r.prototype),a=r.prototype;n.IS_SUPPORTED=function(){var e=document.getElementsByTagName("html")[0];return e.classList.contains("progressive-image")},s.setupEvents=function(){a.setupEvents.apply(this,arguments),this._onImageLoad=this._onImageLoad.bind(this),this._onComplete=this._onComplete.bind(this),this.imageLoader.on(o.Events.ImageLoad,this._onImageLoad),this.imageLoader.on(o.Events.Complete,this._onComplete)},s.onSectionWillAppearWithPadding=function(){a.onSectionWillAppearWithPadding.apply(this,arguments),this.imageLoader.load(this._loadOptions)},s.destroy=function(){this.imageLoader.destroy(),this.imageLoader=null,a.destroy.apply(this,arguments)},s._onImageLoad=function(e){this.section.trigger(n.Events.ImageLoad,e)},s._onComplete=function(){this.section.trigger(n.Events.Complete)},t.exports=n},{"./ProgressiveImageLoader":201,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-object/defaults":179}],201:[function(e,t,i){"use strict";function n(e){s.call(this),this.options=r(l,e),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}var r=e("@marcom/ac-object/defaults"),o=e("@marcom/ac-queue").LiveQueue,s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("@marcom/ac-raf-emitter/update"),c=e("@marcom/ac-raf-emitter/draw"),l={container:document.body,includeContainer:!1},u={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};n.Events={ImageLoad:"image-load",Complete:"complete"};var h=n.prototype=Object.create(s.prototype);h.load=function(e){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=r(u,e),this.loadingQueue=new o(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),c(function(){var e,t,i=this.els.length;for(e=0;e<i;e++)t={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,e),e),el:this.els[e],id:e},this._queueItems.push(t),this._queueItemsObj[e]=t,this.loadingOptions.imageAnimate&&this.els[e].classList.add(this.loadingOptions.imageAnimateClass);a(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(e){return new Promise(function(t,i){c(function(){e.removeAttribute(this._getProgressiveImageDataAttribute()),t(),e=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var e,t=this.els.length;for(e=0;e<t;e++)this.setVisible(this.els[e]),this.loadingOptions.imageAnimate&&c(function(){this.els[e].setAttribute("data-progressive-image-loaded","")}.bind(this,e))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),s.prototype.destroy.call(this)},h._loadNextItem=function(e){return new Promise(function(e,t,i){var n=this._queueItemsObj[e];this._loadAndSetVisible(n.el).then(function(){var e=this._queueItems.indexOf(n);this._queueItems.splice(e,1),this._queueItemsObj[n.id]=null,t(),this._handleImageLoad(n.el),n=t=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,e))},h._loadAndSetVisible=function(e){return new Promise(function(t,i){this.setVisible(e).then(function(){this._getBackgroundImageSrc(e).then(function(i){this._loadImage(i).then(t),e=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(e){return new Promise(function(t,i){a(function(){var i=e.currentStyle;return i||(i=window.getComputedStyle(e,!1)),e=null,0===i.backgroundImage.indexOf("url(")?void t(i.backgroundImage.slice(4,-1).replace(/"/g,"")):void t(null)}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))},h._loadImagePromiseFunc=function(e,t,i){function n(){this.removeEventListener("load",n),t(this),t=null}if(!e)return void t(null);var r=new Image;r.addEventListener("load",n),r.src=e},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(e){c(function(){this.trigger(n.Events.ImageLoad,e),this.loadingOptions.imageAnimate&&e.setAttribute("data-progressive-image-loaded",""),e=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(n.Events.Complete)},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-object/defaults":179,"@marcom/ac-queue":202,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-raf-emitter/update":212}],202:[function(e,t,i){"use strict";t.exports={Queue:e("./ac-queue/Queue"),QueueItem:e("./ac-queue/QueueItem"),LiveQueue:e("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":203,"./ac-queue/Queue":204,"./ac-queue/QueueItem":205}],203:[function(e,t,i){"use strict";function n(e){this._queue=new r,this._maxProcesses=e||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}e("@marcom/ac-polyfills/Promise"),e("@marcom/ac-polyfills/requestAnimationFrame"),e("@marcom/ac-polyfills/Function/prototype.bind");var r=e("./Queue"),o=e("./QueueItem"),s=n.prototype;s.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},s.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},s.stop=function(){this.pause(),this.clear()},s.enqueue=function(e,t){if("function"!=typeof e)throw new Error("LiveQueue can only enqueue functions");void 0===t&&(t=r.PRIORITY_DEFAULT);var i=new o(e,t);return this.enqueueQueueItem(i)},s.enqueueQueueItem=function(e){return this._queue.enqueueQueueItem(e),this._isRunning&&0===this._rafId&&this.start(),e},s.dequeueQueueItem=function(e){return this._queue.dequeueQueueItem(e)},s.clear=function(){this._queue=new r},s.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},s.count=function(){return this._queue.count()+this.pending()},s.pending=function(){return this._maxProcesses-this._availableSlots},s.isEmpty=function(){return 0===this.count()},s._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var e=this._queue.dequeue(),t=e.data();this._isPromise(t)&&(this._retainSlot(),t.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},s._retainSlot=function(){this._availableSlots--},s._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},s._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},s._isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.exports=n},{"./Queue":204,"./QueueItem":205,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Promise":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],204:[function(e,t,i){"use strict";function n(){this._items=[]}var r=e("./QueueItem"),o=n.prototype;o.enqueue=function(e,t){void 0===t&&(t=n.PRIORITY_DEFAULT);var i=new r(e,t);return this.enqueueQueueItem(i)},o.enqueueQueueItem=function(e){return this._items.indexOf(e)===-1&&this._items.push(e),e},o.dequeue=function(){this._heapSort();var e=this._items.length-1,t=this._items[0];return this._items[0]=this._items[e],this._items.pop(),t},o.dequeueQueueItem=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1),e},o.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},o.isEmpty=function(){return 0===this._items.length},o.count=function(){return this._items.length},o.toString=function(){for(var e=["Queue total items: "+this.count()+"\n"],t=0;t<this.count();++t)e.push(this._items[t].toString()+"\n");return e.join("")},o._heapSort=function(){for(var e=0,t=this._items.length-1;t>=0;t--)for(var i=t;i>0;){e++;var n=Math.floor((i-1)/2);if(this._items[i].compareTo(this._items[n])>=0)break;var r=this._items[i];this._items[i]=this._items[n],this._items[n]=r,i=n}},n.PRIORITY_LOW=10,n.PRIORITY_DEFAULT=5,n.PRIORITY_HIGH=1,t.exports=n},{"./QueueItem":205}],205:[function(e,t,i){"use strict";function n(e,t){this.priority=t,this.data=e,this.insertionOrder=r++}var r=0,o=n.prototype;o.compareTo=function(e){return this.priority<e.priority?-1:this.priority>e.priority?1:this.insertionOrder<e.insertionOrder?-1:1},o.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},t.exports=n},{}],206:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",o="1.0.3",s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share(r,o,s)},{"@marcom/ac-shared-instance":218}],207:[function(e,t,i){"use strict";function n(e){e=e||{},o.call(this),this.id=a.getNewID(),this.executor=e.executor||s,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),a=e("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");r=n.prototype=Object.create(o.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,e},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},r._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"@marcom/ac-event-emitter-micro":96,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":206,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":214}],208:[function(e,t,i){"use strict";var n=e("./SingleCallRAFEmitter"),r=function(e){this.rafEmitter=new n,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=r.prototype;o.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},o.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},o._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=r},{"./SingleCallRAFEmitter":210}],209:[function(e,t,i){"use strict";var n=e("./RAFInterface"),r=function(){this.events={}},o=r.prototype;o.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},o.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new r},{"./RAFInterface":208}],210:[function(e,t,i){"use strict";var n=e("./RAFEmitter"),r=function(e){n.call(this,e)},o=r.prototype=Object.create(n.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=r},{"./RAFEmitter":207}],211:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":209}],212:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":209}],213:[function(e,t,i){"use strict";function n(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var r;r=n.prototype,r.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.trigger=function(e,t){var i;for(i=0;i<this._subscriberArrayLength;i++)null!==this._subscribers[this._subscribersOrder[i]]&&this._subscribers[this._subscribersOrder[i]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[i]].trigger(e,t)},r.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},r.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},r._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},r._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},r._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},r._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},r._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},r._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=n},{"@marcom/ac-polyfills/performance/now":void 0}],214:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-executor:sharedRAFExecutorInstance",o="2.0.1",s=e("./RAFExecutor");t.exports=n.share(r,o,s)},{"./RAFExecutor":213,"@marcom/ac-shared-instance":218}],215:[function(e,t,i){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageYOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollTop}},{}],216:[function(e,t,i){"use strict";function n(e,t){return t=t||{},e instanceof HTMLElement?(this.el=e,this.options=t,this.options.offsetTop&&(this.offsetTop=this.options.offsetTop),this.options.offsetBottom&&(this.offsetBottom=this.options.offsetBottom),this.setEmitterBounds(),this._boundHandleResize=this._handleResize.bind(this),this._bindResizeEvents(),void a.call(this,t)):null}e("@marcom/ac-polyfills/Function/prototype.bind"),e("@marcom/ac-polyfills/Object/create");var r=e("@marcom/ac-dom-events/addEventListener"),o=e("@marcom/ac-dom-events/removeEventListener"),s=e("@marcom/ac-dom-metrics/getScrollY"),a=e("./ScrollMotionEmitter"),c=a.prototype,l=n.prototype=Object.create(c);l.setEmitterBounds=function(){this._elementBounds=this.el.getBoundingClientRect();var e=s(),t=this._elementBounds.top+e,i=this._elementBounds.bottom+e,n=this.offsetTop||0,r=this.offsetBottom||0;"function"==typeof this.offsetTop&&(n=this.offsetTop()),"function"==typeof this.offsetBottom&&(r=this.offsetBottom()),this.min=this.options.min=t+n,this.max=this.options.max=i+r},l.destroy=function(){o(window,"resize",this._boundHandleResize),o(window,"orientationchange",this._boundHandleResize),a.prototype.destroy.call(this)},l._bindResizeEvents=function(){r(window,"resize",this._boundHandleResize),r(window,"orientationchange",this._boundHandleResize)},l._handleRAFEmitterUpdate=function(e){this._shouldUpdateOnResize&&(this.setEmitterBounds(),this.handleScroll(),this._shouldUpdateOnResize=!1),a.prototype._handleRAFEmitterUpdate.call(this,e)},l._handleResize=function(){this._shouldUpdateOnResize=!0,this.rafEmitter.run()},t.exports=n},{"./ScrollMotionEmitter":217,"@marcom/ac-dom-events/addEventListener":31,"@marcom/ac-dom-events/removeEventListener":34,"@marcom/ac-dom-metrics/getScrollY":215,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Object/create":void 0}],217:[function(e,t,i){"use strict";function n(e){return e=e||{},"number"!=typeof e.min||"number"!=typeof e.max?null:(a.call(this,e),this.smooth=this.options.smooth||!1,this.unsmoothedStopTimeout=this.options.unsmoothedStopTimeout||1250,this.options.overrideScroll||this._bindScrollEvents(),void(this._rafEmitterStopTimeout=null))}e("@marcom/ac-polyfills/Function/prototype.bind"),e("@marcom/ac-polyfills/Object/create");var r=e("@marcom/ac-dom-events/utils/addEventListener"),o=e("@marcom/ac-dom-events/utils/removeEventListener"),s=e("@marcom/ac-dom-metrics/getScrollY"),a=e("@marcom/ac-motion-emitter/MotionEmitter"),c=a.prototype,l=n.prototype=Object.create(c);l.updateValue=function(e){return this.smooth?c.updateValue.call(this,e):this._currentValue===this._targetValue?void(this._shouldEmitChange=!1):(this._currentValue=this._targetValue,
void(this._shouldEmitChange=!0))},l.handleScroll=function(e){"number"!=typeof e&&(e=s());var t;t=e<this.min?this.min:e>this.max?this.max:e,t=(t-this.min)/(this.max-this.min),this.setProgress(t)},l.destroy=function(){return this._boundHandleScroll&&o(window,"scroll",this._boundHandleScroll),c.destroy.call(this)},l._bindScrollEvents=function(){this._boundHandleScroll=this.handleScroll.bind(this),r(window,"scroll",this._boundHandleScroll)},l._handleRAFEmitterUpdate=function(e){this._rafEmitterStopTimeout&&this.rafEmitter.run(),a.prototype._handleRAFEmitterUpdate.call(this,e)},l._handleRAFEmitterStop=function(e){return this.smooth?void a.prototype._handleRAFEmitterStop.call(this,e):void this._bindRAFEmitterUnsmoothedStopTimeout(e)},l._bindRAFEmitterUnsmoothedStopTimeout=function(e){this._rafEmitterStopTimeout&&clearTimeout(this._rafEmitterStopTimeout),this._rafEmitterStopTimeout=setTimeout(this._onRAFEmitterUnsmoothedStop.bind(this,e),this.unsmoothedStopTimeout)},l._onRAFEmitterUnsmoothedStop=function(e){this._rafEmitterStopTimeout=null,a.prototype._handleRAFEmitterStop.call(this,e)},t.exports=n},{"@marcom/ac-dom-events/utils/addEventListener":38,"@marcom/ac-dom-events/utils/removeEventListener":40,"@marcom/ac-dom-metrics/getScrollY":215,"@marcom/ac-motion-emitter/MotionEmitter":169,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Object/create":void 0}],218:[function(e,t,i){"use strict";t.exports={SharedInstance:e("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":219}],219:[function(e,t,i){"use strict";var n=window,r="AC",o="SharedInstance",s=n[r],a=function(){var e={};return{get:function(t,i){var n=null;return e[t]&&e[t][i]&&(n=e[t][i]),n},set:function(t,i,n){return e[t]||(e[t]={}),"function"==typeof n?e[t][i]=new n:e[t][i]=n,e[t][i]},share:function(e,t,i){var n=this.get(e,t);return n||(n=this.set(e,t,i)),n},remove:function(t,i){var n=typeof i;if("string"===n||"number"===n){if(!e[t]||!e[t][i])return;return void(e[t][i]=null)}e[t]&&(e[t]=null)}}}();s||(s=n[r]={}),s[o]||(s[o]=a),t.exports=s[o]},{}],220:[function(e,t,i){"use strict";t.exports=function(e,t){var i="&",n="";if(e){var r=Object.keys(e),o=r.length-1;r.forEach(function(t,r){var s=e[t];t=t.trim(),s=s&&"string"==typeof s?s.trim():s,s=null===s?"":"="+s;var a=t+s+(r===o?"":i);n=n?n.concat(a):a})}return n&&t!==!1?"?"+n:n}},{}],221:[function(e,t,i){"use strict";var n={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};t.exports=e("./parseUserAgent")(n)},{"./parseUserAgent":224}],222:[function(e,t,i){"use strict";t.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{name:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{name:"",major:0,minor:0,patch:0}}}},{}],223:[function(e,t,i){"use strict";t.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.platform.indexOf("Win")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.platform.indexOf("Mac")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return e.platform.indexOf("Linux")>-1&&e.ua.indexOf("Android")===-1}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android"},{name:"chromeos",userAgent:"CrOS"}]}},{}],224:[function(e,t,i){"use strict";function n(e){return new RegExp(e+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function r(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var i=e.version||e.userAgent;"string"==typeof i&&(i=[i]);for(var r,o=i.length,s=0;s<o;s++)if(r=t.match(n(i[s])),r&&r.length>1)return r[1].replace(/_/g,".")}function o(e,t,i){for(var n,o,s=e.length,a=0;a<s;a++)if("function"==typeof e[a].test?e[a].test(i)===!0&&(n=e[a].name):i.ua.indexOf(e[a].userAgent)>-1&&(n=e[a].name),n){if(t[n]=!0,o=r(e[a],i.ua),"string"==typeof o){var c=o.split(".");t.version.name=o,c&&c.length>0&&(t.version.major=parseInt(c[0]||0),t.version.minor=parseInt(c[1]||0),t.version.patch=parseInt(c[2]||0))}else"edge"===n&&(t.version.name="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[a].parseDocumentMode&&(t.version.documentMode=e[a].parseDocumentMode()),t}return t}function s(e){var t={};return t.browser=o(c.browser,a.browser,e),t.os=o(c.os,a.os,e),t}var a=e("./defaults"),c=e("./dictionary");t.exports=s},{"./defaults":222,"./dictionary":223}],225:[function(e,t,i){"use strict";function n(e){r.call(this),this._initializeElement(e),s()&&(this._updateViewport=this._updateViewport.bind(this),o(window,"resize",this._updateViewport),o(window,"orientationchange",this._updateViewport),this._retinaQuery=window.matchMedia(l),this._updateRetina(),this._retinaQuery.addListener&&(this._updateRetina=this._updateRetina.bind(this),this._retinaQuery.addListener(this._updateRetina))),this._updateViewport()}e("@marcom/ac-polyfills/Function/prototype.bind"),e("@marcom/ac-polyfills/Object/keys"),e("@marcom/ac-polyfills/Object/create");var r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-dom-events/utils/addEventListener"),s=e("@marcom/ac-feature/mediaQueriesAvailable"),a="viewport-emitter",c="::before",l="only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",u=n.prototype=Object.create(r.prototype);u.viewport=!1,u.retina=!1,u._initializeElement=function(e){var t;e=e||a,t=document.getElementById(e),t||(t=document.createElement("div"),t.id=e,t=document.body.appendChild(t)),this._el=t},u._getElementContent=function(){var e;return"currentStyle"in this._el?e=this._el.currentStyle["x-content"]:(this._invalidateStyles(),e=window.getComputedStyle(this._el,c).content),e&&(e=e.replace(/["']/g,"")),!!e&&e},u._updateViewport=function(){var e,t=this.viewport;this.viewport=this._getElementContent(),this.viewport&&(this.viewport=this.viewport.split(":").pop()),t&&this.viewport!==t&&(e={from:t,to:this.viewport},this.trigger("change",e),this.trigger("from:"+t,e),this.trigger("to:"+this.viewport,e))},u._updateRetina=function(e){var t=this.retina;this.retina=this._retinaQuery.matches,t!==this.retina&&this.trigger("retinachange",{from:t,to:this.retina})},u._invalidateStyles=function(){document.documentElement.clientWidth,this._el.innerHTML=" "===this._el.innerHTML?"":" ",document.documentElement.clientWidth},t.exports=n},{"@marcom/ac-dom-events/utils/addEventListener":38,"@marcom/ac-event-emitter-micro":96,"@marcom/ac-feature/mediaQueriesAvailable":114,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Object/create":void 0,"@marcom/ac-polyfills/Object/keys":void 0}],226:[function(e,t,i){"use strict";var n=e("./ViewportEmitter");t.exports=new n},{"./ViewportEmitter":225}],227:[function(e,t,i){t.exports.EventEmitter=e("./ac-event-emitter/EventEmitter")},{"./ac-event-emitter/EventEmitter":228}],228:[function(e,t,i){"use strict";var n="EventEmitter:propagation",r=function(e){e&&(this.context=e)},o=r.prototype,s=function(){return this.hasOwnProperty("_events")||"object"==typeof this._events||(this._events={}),this._events},a=function(e,t){var i=e[0],n=e[1],r=e[2];if("string"!=typeof i&&"object"!=typeof i||null===i||Array.isArray(i))throw new TypeError("Expecting event name to be a string or object.");if("string"==typeof i&&!n)throw new Error("Expecting a callback function to be provided.");if(n&&"function"!=typeof n){if("object"!=typeof i||"object"!=typeof n)throw new TypeError("Expecting callback to be a function.");r=n}if("object"==typeof i)for(var o in i)t.call(this,o,i[o],r);"string"==typeof i&&(i=i.split(" "),i.forEach(function(e){t.call(this,e,n,r)},this))},c=function(e,t){var i,n,r;if(i=s.call(this)[e],i&&0!==i.length)for(i=i.slice(),this._stoppedImmediatePropagation=!1,n=0,r=i.length;n<r&&(!this._stoppedImmediatePropagation&&!t(i[n],n));n++);},l=function(e,t,i){var n=-1;c.call(this,t,function(e,t){if(e.callback===i)return n=t,!0}),n!==-1&&e[t].splice(n,1)};o.on=function(){var e=s.call(this);return a.call(this,arguments,function(t,i,n){e[t]=e[t]||(e[t]=[]),e[t].push({callback:i,context:n})}),this},o.once=function(){return a.call(this,arguments,function(e,t,i){var n=function(r){t.call(i||this,r),this.off(e,n)};this.on(e,n,this)}),this},o.off=function(e,t){var i=s.call(this);if(0===arguments.length)this._events={};else if(!e||"string"!=typeof e&&"object"!=typeof e||Array.isArray(e))throw new TypeError("Expecting event name to be a string or object.");if("object"==typeof e)for(var n in e)l.call(this,i,n,e[n]);if("string"==typeof e){var r=e.split(" ");1===r.length?t?l.call(this,i,e,t):i[e]=[]:r.forEach(function(e){i[e]=[]})}return this},o.trigger=function(e,t,i){if(!e)throw new Error("trigger method requires an event name");if("string"!=typeof e)throw new TypeError("Expecting event names to be a string.");if(i&&"boolean"!=typeof i)throw new TypeError("Expecting doNotPropagate to be a boolean.");return e=e.split(" "),e.forEach(function(e){c.call(this,e,function(e){e.callback.call(e.context||this.context||this,t)}.bind(this)),i||c.call(this,n,function(i){var n=e;i.prefix&&(n=i.prefix+n),i.emitter.trigger(n,t)})},this),this},o.propagateTo=function(e,t){var i=s.call(this);i[n]||(this._events[n]=[]),i[n].push({emitter:e,prefix:t})},o.stopPropagatingTo=function(e){var t=s.call(this);if(!e)return void(t[n]=[]);var i,r=t[n],o=r.length;for(i=0;i<o;i++)if(r[i].emitter===e){r.splice(i,1);break}},o.stopImmediatePropagation=function(){this._stoppedImmediatePropagation=!0},o.has=function(e,t,i){var n=s.call(this),r=n[e];if(0===arguments.length)return Object.keys(n);if(!r)return!1;if(!t)return r.length>0;for(var o=0,a=r.length;o<a;o++){var c=r[o];if(i&&t&&c.context===i&&c.callback===t)return!0;if(t&&!i&&c.callback===t)return!0}return!1},t.exports=r},{}],229:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function f(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=e("@marcom/ac-jetpack-lib/core/BaseComponent"),l=e("@marcom/ac-raf-emitter/update"),u=e("@marcom/ac-raf-emitter/draw"),h=e("./Albums/Twinkle"),m={ALBUM_SIDE:{LEFT:"albums-left",RIGHT:"albums-right"},ARTWORK:"artwork",START:"start",IMAGE:{ARTWORK:"artwork-image",HARDWARE:"hardware-image",SHADOW:"hardware-shadow"}},d={TIME:1,THRESHOLD:-1},p=function(e){function t(e,i,o,s,a,c,l){n(this,t);var u=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments)),h={timeToEngage:d.TIME,inViewThreshold:d.THRESHOLD};return u._element={hardware:u.section.element.querySelector("."+m.IMAGE.HARDWARE),shadow:u.section.element.querySelector("."+m.IMAGE.SHADOW),tracked:u.section.elementEngagement.addElement(u.element,h),albums:{left:{container:u.element.querySelector("."+m.ALBUM_SIDE.LEFT),lastChild:{artwork:null,image:null}},right:{container:u.element.querySelector("."+m.ALBUM_SIDE.RIGHT),lastChild:{artwork:null,image:null}}}},u._element.albums.left.lastChild.artwork=u._element.albums.left.container.querySelector("."+m.ARTWORK+":last-child"),u._element.albums.left.lastChild.image=u._element.albums.left.lastChild.artwork.querySelector("."+m.IMAGE.ARTWORK),u._element.albums.right.lastChild.artwork=u._element.albums.right.container.querySelector("."+m.ARTWORK+":last-child"),u._element.albums.right.lastChild.image=u._element.albums.right.lastChild.artwork.querySelector("."+m.IMAGE.ARTWORK),u._animation={twinkle:null},u._state={active:!1,loaded:{hardware:!1,shadow:!1,artworkLeft:!1,artworkRight:!1},ready:!1},u._keys={loadedState:Object.keys(u._state.loaded)},u}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return!0}}]),a(t,[{key:"_everyImageLoaded",value:function(e){return this._state.loaded[e]}},{key:"_start",value:function(){this._element.albums.left.lastChild.artwork.addEventListener("transitionend",this._onAlbumExpansionEnd),this.element.classList.remove(m.START),this._state.active=!0}},{key:"_startWhenReady",value:function(){var e=this;l(function(){e._keys.loadedState.every(e._everyImageLoaded)&&(e._state.ready=!0),u(function(){e._state.ready?e._start():e._startWhenReady()})})}},{key:"_onHarwareImageLoad",value:function(){this._state.loaded.hardware=!0,this._element.hardware.removeEventListener("transitionend",this._onHarwareImageLoad)}},{key:"_onShadowImageLoad",value:function(){this._state.loaded.shadow=!0,this._element.shadow.removeEventListener("transitionend",this._onShadowImageLoad)}},{key:"_onProgressiveImageLoad",value:function(e){e===this._element.albums.left.lastChild.image?this._state.loaded.artworkLeft=!0:e===this._element.albums.right.lastChild.image&&(this._state.loaded.artworkRight=!0),this._state.loaded.artworkLeft&&this._state.loaded.artworkRight&&this.section.off("progressive-image-load",this._onProgressiveImageLoad)}},{key:"_onEngaged",value:function(){this._state.active||(this._everyImageLoaded=this._everyImageLoaded.bind(this),this._start=this._start.bind(this),this._startWhenReady())}},{key:"_onEnterView",value:function(){this._animation.twinkle&&this._state.active&&this._animation.twinkle.play()}},{key:"_onExitView",value:function(){this._animation.twinkle&&this._state.active&&this._animation.twinkle.stop()}},{key:"_onAlbumExpansionEnd",value:function(){this._animation.twinkle&&(this._state.active&&this._animation.twinkle.play(),this._element.albums.left.lastChild.artwork.removeEventListener("transitionend",this._onAlbumExpansionEnd))}},{key:"_setupListeners",value:function(){this._onEngaged=this._onEngaged.bind(this),this._onEnterView=this._onEnterView.bind(this),this._onExitView=this._onExitView.bind(this),this._onAlbumExpansionEnd=this._onAlbumExpansionEnd.bind(this),this._onHarwareImageLoad=this._onHarwareImageLoad.bind(this),this._onShadowImageLoad=this._onShadowImageLoad.bind(this),this._element.hardware.addEventListener("transitionend",this._onHarwareImageLoad),this._element.shadow.addEventListener("transitionend",this._onShadowImageLoad),this._onProgressiveImageLoad=this._onProgressiveImageLoad.bind(this),this.section.on("progressive-image-load",this._onProgressiveImageLoad),this._element.tracked.once("engaged",this._onEngaged),this._element.tracked.on("enterview",this._onEnterView),this._element.tracked.on("exitview",this._onExitView)}},{key:"_initialize",value:function(){h.supported()&&(this._animation.twinkle=new h(this.element)),this._setupListeners()}},{key:"setupEvents",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupEvents",this).apply(this,arguments),this._initialize()}},{key:"onResizeImmediate",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeImmediate",this).apply(this,arguments),this._animation.twinkle&&this._state.active&&this._animation.twinkle.stop()}},{key:"onResizeDebounced",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeDebounced",this).apply(this,arguments),this._animation.twinkle&&this._state.active&&(this._animation.twinkle.onResizeDebounced(),this._animation.twinkle.play())}}]),t}(c);t.exports=p},{"./Albums/Twinkle":230,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-raf-emitter/update":212}],230:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=(e("@marcom/ac-useragent"),e("@marcom/ac-dom-metrics/getViewportPosition")),s=e("../../shared/model/prefersReducedMotion"),a=e("@marcom/ac-raf-emitter/draw"),c=e("@marcom/ac-raf-emitter/update"),l=e("./extraArtworkData"),u={ARTWORK:{SIZE:"data-artwork-size",SPRITE:"data-artwork-sprite"}},h={ARTWORK:"artwork",IMAGE:"artwork-image",ALT_IMAGE:"artwork-image-alt",ACTIVE:"active"},m={TOTAL_DURATION:6e5,MIN_SUCCESSIVE_FADE_DELAY:2500,MAX_PARALLEL_FADES:5},d=s,p=function(){function e(t){n(this,e),this._element={container:t,artworkArr:Array.from(t.querySelectorAll("."+h.ARTWORK))},this._timeout={twinkle:{stop:null,delays:[]}},this._metrics={artwork:{},queue:{available:{1:Array.from(l[1]),2:Array.from(l[2])},active:[]}},this._state={running:!1,hasPlayed:!1},this._initialize()}return r(e,null,[{key:"supported",value:function(){return!d}}]),r(e,[{key:"_inView",value:function(e,t){var i=o(e);return!(i.left&&i.right<0||i.left&&i.right>t)}},{key:"_initializeMetrics",value:function(){var e=this,t=window.innerWidth;this._element.artworkArr.forEach(function(i,n){c(function(){var r=i.hasAttribute(u.ARTWORK.SIZE)?parseInt(i.getAttribute(u.ARTWORK.SIZE)):1,o=i.querySelector("."+h.IMAGE),s=(o.hasAttribute(u.ARTWORK.SPRITE)?o.getAttribute(u.ARTWORK.SPRITE):"0,0").split(",").map(function(e){return parseInt(e)});e._metrics.artwork[n]={index:n,el:i,img:o,altImg:i.querySelector("."+h.ALT_IMAGE),size:r,sprite:s,lastActive:m.MIN_SUCCESSIVE_FADE_DELAY,inView:e._inView(i,t),active:!1}})})}},{key:"_bindCallbacks",value:function(){this._onTwinkleAltCrossFadeEnd=this._onTwinkleAltCrossFadeEnd.bind(this),this._twinkle=this._twinkle.bind(this),this.stop=this.stop.bind(this)}},{key:"_initialize",value:function(){this._bindCallbacks(),this._initializeMetrics()}},{key:"_getRandomIntMaxExclusive",value:function(e){var t=0;return e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}},{key:"_selectTargetArtworkMetrics",value:function(){var e=this._element.artworkArr.length,t=this._getRandomIntMaxExclusive(e),i=this._metrics.artwork[t];return i.inView&&!i.active&&i.lastActive>=m.MIN_SUCCESSIVE_FADE_DELAY?i:null}},{key:"_selectNewArtwork",value:function(e){var t=this._metrics.queue.available[e].length,i=this._getRandomIntMaxExclusive(t),n=this._metrics.queue.available[e].splice(i,1);return n[0]}},{key:"_updateTargetMetricsAndQueues",value:function(e){this._metrics.queue.available[e.size].push(e.sprite),e.sprite=this._selectNewArtwork(e.size),e.lastActive=Date.now(),e.active=!0}},{key:"_swapTargetPrimaryDOMArtwork",value:function(e){e.img.setAttribute(u.ARTWORK.SPRITE,e.sprite),e.altImg.classList.remove(h.ACTIVE)}},{key:"_onTwinkleAltCrossFadeEnd",value:function(e){var t=this;e.altImg.removeEventListener("transitionend",this._onTwinkleAltCrossFadeEnd),a(function(){t._swapTargetPrimaryDOMArtwork(e),e.active=!1})}},{key:"_swapTargetAltDOMArtwork",value:function(e){e.altImg.setAttribute(u.ARTWORK.SPRITE,e.sprite),e.altImg.classList.add(h.ACTIVE)}},{key:"_continueTwinkle",value:function(){var e=this;this._state.running&&a(function(){var t=1e3;e._timeout.twinkle.delays.push(setTimeout(e._twinkle,t/m.MAX_PARALLEL_FADES))})}},{key:"_twinkle",value:function(){var e=this;if(this._state.running){var t=this._selectTargetArtworkMetrics();if(t){var i=function(){this._onTwinkleAltCrossFadeEnd(t)};this._updateTargetMetricsAndQueues(t),i=i.bind(this),t.altImg.addEventListener("transitionend",i),a(function(){e._swapTargetAltDOMArtwork(t)})}this._continueTwinkle()}}},{key:"updateMetrics",value:function(){var e=this;if(!this._state.hasPlayed){var t=window.innerWidth;this._element.artworkArr.forEach(function(i,n){c(function(){e._metrics.artwork[n].inView=e._inView(i,t)})})}}},{key:"play",value:function(){this._state.running||(this._state.running=!0,this._twinkle(),this._timeout.twinkle.stop=setTimeout(this.stop,m.TOTAL_DURATION))}},{key:"stop",value:function(){this._state.running&&(this._state.running=!1,0!==this._timeout.twinkle.delays.length&&this._timeout.twinkle.delays.forEach(function(e){clearTimeout(e)}),this._timeout.twinkle.stop&&clearTimeout(this._timeout.twinkle.stop))}},{key:"onResizeDebounced",value:function(){this.updateMetrics()}},{key:"getStateRunning",get:function(){return this._state.running}},{key:"getStateHasPlayed",get:function(){return this._state.hasPlayed}}]),e}();t.exports=p},{"../../shared/model/prefersReducedMotion":257,"./extraArtworkData":231,"@marcom/ac-dom-metrics/getViewportPosition":45,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-raf-emitter/update":212,"@marcom/ac-useragent":221}],231:[function(e,t,i){"use strict";t.exports=Object.freeze({1:[[16,8],[14,0],[7,11],[17,8],[12,6],[8,11],[17,7],[14,6],[15,4],[16,7],[15,6],[9,11],[15,7],[16,6],[9,10],[14,7],[17,6],[8,10],[13,7],[17,5],[7,10],[12,7],[6,11],[6,10]],2:[[6,2],[10,2],[6,6],[10,8],[10,6],[8,6],[6,8],[8,2],[10,4],[8,8],[8,4],[6,4]]})},{}],232:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function E(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:E(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("@marcom/ac-jetpack-lib/core/BaseComponent"),u=e("@marcom/ac-jetpack-lib/utils/Page"),h=e("@marcom/ac-dom-metrics/getDimensions"),m=e("@marcom/ac-object/defaults"),d=e("@marcom/ac-viewport-emitter"),p=e("../shared/helpers/clampViewport"),f=e("../shared/helpers/cascadeViewportValues"),_=e("../shared/model/prefersReducedMotion"),g="data-offset-top",v="data-offset-bottom",y=Object.freeze({top:f({large:.1}),bottom:f({large:.1})}),b=function(e){function t(e,i,o,s,a,c,l){n(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return h.name=o+"_"+l,h.viewport=p(s),h.isBelowTop=!1,h.isAboveBottom=!1,h.needsUpdatedMetrics=!0,h._prevWindowHeight=h.section.cachedWindowHeight,h.willEngage=!1,h.didEngage=!1,h.transitionComplete=!1,h.timeoutDuration=1e3,h.transitionEndTimeout=null,h.onTransitionEnd=h.onTransitionEnd.bind(h),h.onTransitionEndTimeout=h.onTransitionEndTimeout.bind(h),h.element.addEventListener("transitionend",h.onTransitionEnd),u.on(u.DEEP_REFRESH_ALL_METRICS,function(){h.needsUpdatedMetrics=!0,h.requestDOMChange()}),h}return o(t,e),c(t,null,[{key:"IS_SUPPORTED",value:function(){return!_&&"small"!==d.viewport}}]),c(t,[{key:"setupEvents",value:function(){this.requestDOMChange()}},{key:"cacheElementMetrics",value:function(){this.scrollY=this.section.cachedScrollPosition,this.elementHeight=h(this.element).height,this.localnavHeight=this.localnav?h(this.localnav).height:0;var e=this.section.cachedWindowHeight;this.offsetTop=Math.floor(this._offsetsForViewports.top[this.viewport]*e)||0,this.offsetBottom=Math.floor(this._offsetsForViewports.bottom[this.viewport]*e)||0,this.scrollBottomY=this.elementTop+this.offsetBottom,this.scrollTopY=this.scrollBottomY+this.elementHeight-this.localnavHeight-this.offsetTop-this.offsetBottom}},{key:"parseOffsetAttribute",value:function(e){if(!e)return e;try{e=JSON.parse(e)}catch(t){e=parseFloat(e)}return"object"!==("undefined"==typeof e?"undefined":s(e))&&(e={large:e}),e}},{key:"onBreakpoint",value:function(e){this.viewport=p(e),this.needsUpdatedMetrics=!0,this.requestDOMChange()}},{key:"onResizeDebounced",value:function(e){this.section.cachedWindowHeight!==this._prevWindowHeight&&(this._prevWindowHeight=this.section.cachedWindowHeight,this.needsUpdatedMetrics=!0,this.requestDOMChange())}},{key:"onScroll",value:function(e,t){this.willEngage||(this.scrollY=t,this.requestDOMChange())}},{key:"onDOMRead",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDOMRead",this).apply(this,arguments),this.localnav||(this.localnav=document.querySelector("#ac-localnav")),this._offsetsForViewports||(this._offsetsForViewports={top:this.parseOffsetAttribute(this.element.getAttribute(g)),bottom:this.parseOffsetAttribute(this.element.getAttribute(v))},this._offsetsForViewports.top=m(y.top,this._offsetsForViewports.top),this._offsetsForViewports.bottom=m(y.bottom,this._offsetsForViewports.bottom)),this.needsUpdatedMetrics&&(this.cacheElementMetrics(),this.needsUpdatedMetrics=!1),this.willEngage||(this.isBelowTop=this.scrollY<=this.scrollTopY,this.isAboveBottom=this.scrollY>this.scrollBottomY-this.section.cachedWindowHeight,this.isBelowTop&&this.isAboveBottom&&(this.willEngage=!0))}},{key:"onDOMWrite",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDOMWrite",this).apply(this,arguments),this.willEngage&&!this.didEngage&&(this.element.classList.add("will-engage"),this.didEngage=!0,this.requestDOMChange()),this.didEngage&&this.element.classList.add("did-engage"),this.transitionComplete&&this.element.classList.add("transition-complete")}},{key:"onTransitionEnd",value:function(){this.transitionEndTimeout&&clearTimeout(this.transitionEndTimeout),this.transitionEndTimeout=setTimeout(this.onTransitionEndTimeout,this.timeoutDuration)}},{key:"onTransitionEndTimeout",value:function(){this.transitionComplete=!0,this.requestDOMChange()}},{key:"elementTop",get:function(){var e=this.element.offsetTop,t=this.element.offsetParent;do e+=t.offsetTop;while(t=t.offsetParent);return e}}]),t}(l);t.exports=b},{"../shared/helpers/cascadeViewportValues":249,"../shared/helpers/clampViewport":250,"../shared/model/prefersReducedMotion":257,"@marcom/ac-dom-metrics/getDimensions":41,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-object/defaults":179,"@marcom/ac-viewport-emitter":226}],233:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("@marcom/ac-jetpack-lib/core/BaseComponent"),c=e("@marcom/ac-jetpack-lib/utils/Page"),l=e("@marcom/ac-scroll-motion-emitter/ElementScrollMotionEmitter"),u=e("@marcom/ac-easing"),h=e("@marcom/ac-dom-metrics/getDimensions"),m=e("@marcom/ac-dom-styles/setStyle"),d=e("@marcom/ac-math/lerp"),p=e("../shared/helpers/clampViewport"),f=document.documentElement.classList.contains("copy-parallax"),_=e("@marcom/ac-useragent"),g=55,v=-15,y=function(e){function t(e,i,o,s,a,l,u){n(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return h.page=c.getPage(),h.name=o+"_"+u,h.viewport=p(s),h.translateY=0,h.memoizeMetrics(),h._prevWindowHeight=h.section.cachedWindowHeight,h}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){return!_.browser.edge&&f}}]),s(t,[{key:"setupEvents",value:function(){var e=this,t=u.createPredefined("easeOut").easingFunction;this.scrollMotion=new l(this.element,{smooth:!0,friction:5,overrideScroll:!0,easingFunction:t,offsetTop:function(){return-e.section.cachedWindowHeight}}),this.onScrollMotionUpdate=this.onScrollMotionUpdate.bind(this),this.onScrollMotionDraw=this.onScrollMotionDraw.bind(this),this.scrollMotion.on("update",this.onScrollMotionUpdate),this.scrollMotion.on("draw",this.onScrollMotionDraw),c.on(c.DEEP_REFRESH_ALL_METRICS,function(){e.scrollMotion.setEmitterBounds(),e.scrollMotion.handleScroll()})}},{key:"teardownEvents",value:function(){this.scrollMotion.off("update",this.onScrollMotionUpdate),this.scrollMotion.off("draw",this.onScrollMotionDraw)}},{key:"memoizeMetrics",value:function(){this.localnav=this.localnav||document.querySelector("#ac-localnav"),this.localnavHeight=this.localnav?h(this.localnav).height:0}},{key:"onBreakpoint",value:function(e){this.viewport=p(e),this.memoizeMetrics(),this.scrollMotion.setEmitterBounds()}},{key:"onResizeDebounced",value:function(e){this.section.cachedWindowHeight!==this._prevWindowHeight&&(this._prevWindowHeight=this.section.cachedWindowHeight,this.scrollMotion.setEmitterBounds())}},{key:"onScroll",value:function(e,t){this.page.isModalOpen||this.scrollMotion.handleScroll(t)}},{key:"onScrollMotionUpdate",value:function(e){this.progress=e.progress,this._prevTranslateY=this.translateY,this.translateY=0,"small"!==this.viewport&&(this.translateY=d(g,v,this.progress))}},{key:"onScrollMotionDraw",value:function(e){this.translateY!==this._prevTranslateY&&m(this.element,{transform:{translate3d:[0,this.translateY+"px",0]}})}}]),t}(a);t.exports=y},{"../shared/helpers/clampViewport":250,"@marcom/ac-dom-metrics/getDimensions":41,"@marcom/ac-dom-styles/setStyle":76,"@marcom/ac-easing":83,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-math/lerp":154,"@marcom/ac-scroll-motion-emitter/ElementScrollMotionEmitter":216,"@marcom/ac-useragent":221}],234:[function(e,t,i){"use strict";function n(e,t,i,n,o,a,c){this.name=i+"_"+c,r.call(this,e,t,i,n,o,a,c),this.inViewThreshold=this.inViewThreshold||0,this.trackedElement=this.section.elementEngagement.addElement(this.element,{timeToEngage:50,inViewThreshold:this.inViewThreshold,stopOnEngaged:!1});var l=s(this.element);l.top<0&&this.element.classList.add("after-engaged");
}var r=e("@marcom/ac-jetpack-lib/core/BaseComponent"),o=r.prototype,s=e("@marcom/ac-dom-metrics/getViewportPosition"),a=n.prototype=Object.create(r.prototype);n.prototype.constructor=n,a.destroy=function(){o.destroy.call(this)},a.setupEvents=function(){o.setupEvents.call(this),this._onElementEngaged=this._onElementEngaged.bind(this),this._onElementExitView=this._onElementExitView.bind(this),this.trackedElement.on("engaged",this._onElementEngaged),this.trackedElement.on("exitview",this._onElementExitView)},a.teardownEvents=function(){o.teardownEvents.call(this),this.trackedElement.off()},a.onScroll=function(e,t,i){o.onScroll.call(this,e,t,i)},a._onElementEngaged=function(){this.element.classList.add("engaged")},a._onElementExitView=function(){this.element.classList.remove("engaged");var e=s(this.element);e.top<0?this.element.classList.add("after-engaged"):this.element.classList.remove("after-engaged")},t.exports=n},{"@marcom/ac-dom-metrics/getViewportPosition":45,"@marcom/ac-jetpack-lib/core/BaseComponent":145}],235:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function u(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:u(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},c=e("@marcom/ac-jetpack-fuel/components/engaged-element/EngagedElementComponent"),l=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.willEngageClass="will-engage",e.didEngageClass="did-engage",e.transitionCompleteClass="transition-complete",e.transitionEndTimeout=null,e.willEngage=!1,e.didEngage=!1,e.transitionComplete=!1,e.timeoutDuration=1e3,e.onTransitionEnd=e.onTransitionEnd.bind(e),e.onTransitionEndTimeout=e.onTransitionEndTimeout.bind(e),e.trackedElement.element.addEventListener("transitionend",e.onTransitionEnd),e}return o(t,e),s(t,[{key:"onTransitionEnd",value:function(){this.transitionEndTimeout&&clearTimeout(this.transitionEndTimeout),this.transitionEndTimeout=setTimeout(this.onTransitionEndTimeout,this.timeoutDuration)}},{key:"onTransitionEndTimeout",value:function(){this.transitionComplete=!0,this.requestDOMChange()}},{key:"onScroll",value:function(){!this.willEngage&&this.trackedElement.pixelsInView>300&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onElementEngaged",this).apply(this,arguments),this.willEngage=!0,this.requestDOMChange())}},{key:"onDOMWrite",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDOMWrite",this).apply(this,arguments),this.willEngage&&(this.trackedElement.element.classList.add(this.willEngageClass),this.willEngage=!1,this.didEngage=!0,this.requestDOMChange()),this.didEngage&&this.trackedElement.element.classList.add(this.didEngageClass),this.transitionComplete&&this.trackedElement.element.classList.add(this.transitionCompleteClass)}},{key:"_onElementEngaged",value:function(){this.onScroll()}}]),t}(c);t.exports=l},{"@marcom/ac-jetpack-fuel/components/engaged-element/EngagedElementComponent":143}],236:[function(e,t,i){"use strict";function n(e,t,i,n,o,s,a){this.name="HardwareReveal_"+a,r.call(this,e,t,i,n,o,s,a),this.wrapper=t,this.viewport=n,this.engageEl=this.wrapper.querySelector("[data-reveal-engage]"),this.trackedElement=this.section.elementEngagement.addElement(this.engageEl,{timeToEngage:25,inViewThreshold:.4})}var r=e("@marcom/ac-jetpack-lib/core/BaseComponent"),o=r.prototype,s=e("@marcom/ac-useragent"),a=e("../shared/model/prefersReducedMotion"),c=n.prototype=Object.create(r.prototype);n.prototype.constructor=n,n.IS_SUPPORTED=function(){return!a},c.setupEvents=function(){o.setupEvents.call(this),this._playTimeline=this._playTimeline.bind(this),this.trackedElement.once("engaged",this._playTimeline),this._initialize(),this._initTimeline()},c.onBreakpoint=function(e,t,i,n){this.viewport=e,this.timelinePlayed||this._initTimeline()},c._initialize=function(){this.timelinePlayed=!1,this.supportsTransition=s.browser.safari||s.browser.chrome,this.gradient=this.wrapper.querySelector(".hardware-gradient"),this.copyPins=this.wrapper.querySelectorAll(".pin"),this.copyPinsTop=this.wrapper.querySelectorAll(".pin-top"),this.copyPinsBottom=this.wrapper.querySelectorAll(".pin-bottom"),this.copyPinsTop=this._reorderArray(this.copyPinsTop,"data-reveal-order-top"),this.copyPinsBottom=this._reorderArray(this.copyPinsBottom,"data-reveal-order-bot")},c._initTimeline=function(){this.timeline=new TimelineMax({paused:!0});var e=.2;this.supportsTransition?this.timeline.to(this.gradient,1.3,{className:"+=animate-transition"}):this.timeline.to(this.gradient,.7,{className:"+=animate-fadeout"}),"small"===this.viewport?(this.timeline.staggerTo(this.copyPinsTop,e,{className:"+=animate-showpin"},e),this.timeline.staggerTo(this.copyPinsBottom,1,{className:"+=animate-showpin"},e)):this.timeline.staggerTo(this.copyPins,1,{className:"+=animate-showpin"},e)},c._playTimeline=function(){!this.timelinePlayed&&this.timeline&&(this.timeline.play(),this.timelinePlayed=!0)},c._reorderArray=function(e,t){var i=[],n=0;for(n;n<e.length;n++){var r=e[n].getAttribute(t)-1;i[r]=e[n]}return i},t.exports=n},{"../shared/model/prefersReducedMotion":257,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-useragent":221}],237:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("@marcom/ac-jetpack-lib/utils/Page"),c=e("@marcom/ac-jetpack-lib/core/BaseComponent"),l=e("@marcom/ac-scroll-motion-emitter/ElementScrollMotionEmitter"),u=(e("@marcom/ac-progressive-image-loader/ProgressiveImageComponent"),e("@marcom/ac-prefixer/getEventType")),h=e("@marcom/ac-easing").createPredefined,m=h("easeIn"),d=e("../../shared/HardwareRoll"),p=e("./Siri"),f=e("../../shared/helpers/clampViewport"),_=e("../../shared/model/animatedHeroAvailable"),g=e("@marcom/ac-math/lerp"),v=e("@marcom/ac-dom-styles/setStyle"),y=e("@marcom/ac-raf-emitter/update"),b=e("@marcom/ac-raf-emitter/draw"),E=e("@marcom/ac-useragent"),w=e("@marcom/ac-feature/isTablet"),S=e("@marcom/ac-feature/isDesktop"),O=4e3,T=u("animationend","div"),k="hero-image-loaded",A="hero-video-loaded",x="hero-show-headline",F="hero-autoplay",C=(document.documentElement.classList.contains("edge"),{large:1e4,medium:564,small:352}),R={large:100,medium:100,small:30},P={large:0,medium:0,small:0},M=function(e){function t(e,i,o,s,c,l,u){n(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return h.page=a.getPage(),h.viewport=f(s),h.stickyContainer=h.element.querySelector(".hero-sticky-container"),h.hardwareContainer=h.element.querySelector(".hero-hardware-container"),h.hardwareElement=h.element.querySelector(".hero-hardware"),h.hardwareRollElement=h.element.querySelector(".hero-hardware-video"),h.copyContainer=h.element.querySelector(".hero-copy-container"),h.siriElement=h.element.querySelector(".hero-siri"),h.isSiriLoaded=!1,h.isHardwareFullyVisible=!1,h.isSiriPlayed=!1,h.isHeadlineShown=!1,h}return o(t,e),s(t,[{key:"isAutoplay",get:function(){return!this.isCanvasAfterAutoplay&&(!E.browser.safari||!(!E.browser.safari||!w()))}},{key:"isCanvasAfterAutoplay",get:function(){return!(!E.browser.chrome&&!E.browser.firefox||!S())}}],[{key:"IS_SUPPORTED",value:function(){return _()}}]),s(t,[{key:"setupEvents",value:function(){this.timeout=setTimeout(this.switchToStaticFallback.bind(this),O),this.memoizeMetrics(),this.onStartFrameImageLoaded=this.onStartFrameImageLoaded.bind(this),this.onScrollMotionUpdate=this.onScrollMotionUpdate.bind(this),this.onScrollMotionDraw=this.onScrollMotionDraw.bind(this),this.hardwareElement.addEventListener(T,this.onStartFrameImageLoaded),this.isAutoplay&&this.element.classList.add(F),this.initializeVideos(),this.isAutoplay||this.initializeScrollMotion(),this.setStickyContainerBottomOffset()}},{key:"memoizeMetrics",value:function(){this.copyHeight=this.copyContainer.offsetHeight,this.translateThreshold=C[this.viewport],this.translateOffset=R[this.viewport],this.translateOffsetDefault=P[this.viewport]}},{key:"onBreakpoint",value:function(e,t,i,n){this.viewport=f(e),this.memoizeMetrics(),this.showHeadline()}},{key:"onResizeDebounced",value:function(){var e=this;if(this.setStickyContainerBottomOffset(),this.isAutoplay)this.runTranslateOffset(!0);else if(this.scrollY>this.elementScrollMotionEmitter.max){var t={progress:1};y(function(){e.onScrollMotionUpdate(t),b(function(){e.onScrollMotionDraw(t)})})}}},{key:"initializeVideos",value:function(){var e=this;this.hardwareRoll=new d(this.hardwareRollElement,{heroController:this,playbackRate:this.isAutoplay?1.5:1}),this.siri=new p(this.siriElement,{delegate:this}),b(function(){e.hardwareRoll.load().then(function(){e.isAnimationCancelled||b(function(){clearTimeout(e.timeout),e.hardwareRoll.progress=0,e.element.classList.add(A),e.hardwareRollElement.style.display="block",e.isHardwareVideoReady=!0,e.isHardwareFullyVisible=!0,e.isSiriPlayed||e.playSiriIfHardwareVisible(),e.isAutoplay?!e.hasAutoplayed&&e.scrollY>0&&e.playAutoplayIntro():e.elementScrollMotionEmitter.handleScroll()})}),e.siri.load().then(function(){e.isAnimationCancelled||(e.isSiriLoaded=!0,e.playSiriIfHardwareVisible())})})}},{key:"playAutoplayIntro",value:function(){this.hasAutoplayed=!0,this.hardwareRoll.play(),this.runTranslateOffset()}},{key:"initializeScrollMotion",value:function(){this.elementScrollMotionEmitter=new l(this.element,{smooth:!0,overrideScroll:!0,offsetBottom:this.offsetBottom.bind(this)}),this.elementScrollMotionEmitter.setEmitterBounds(),this.elementScrollMotionEmitter.on("update",this.onScrollMotionUpdate),this.elementScrollMotionEmitter.on("draw",this.onScrollMotionDraw),this.elementScrollMotionEmitter.handleScroll()}},{key:"setStickyContainerBottomOffset",value:function(){var e=this;this.stickyContainerOffset=0,b(function(){e.isAnimationCancelled?v(e.stickyContainer,{"margin-bottom":null,"padding-bottom":null}):(e.section.cachedWindowHeight<=e.translateThreshold+e.translateOffset?e.stickyContainerOffset=e.translateOffset:e.stickyContainerOffset=e.translateOffsetDefault,e.stickyContainerOffset<0?v(e.stickyContainer,{"margin-bottom":e.stickyContainerOffset+"px","padding-bottom":null}):v(e.stickyContainer,{"margin-bottom":null,"padding-bottom":e.stickyContainerOffset+"px"})),y(function(){a.deepRefreshAllElementMetrics()})})}},{key:"playSiriIfHardwareVisible",value:function(){this.isAnimationCancelled||this.isSiriPlayed||this.isSiriLoaded&&this.isHardwareFullyVisible&&(this.isSiriPlayed=!0,this.siri.play(),clearTimeout(this.timeout))}},{key:"onStartFrameImageLoaded",value:function(){var e=this;this.isHardwareFullyVisible=!0,b(function(){e.element.classList.add(k),e.playSiriIfHardwareVisible()})}},{key:"showHeadline",value:function(){var e=this;this.isHeadlineShown||(this.isHeadlineShown=!0,b(function(){e.section.element.classList.add(x)}))}},{key:"onSiriEnded",value:function(){this.showHeadline(),this.isHardwareVideoReady||this.switchToStaticFallback()}},{key:"offsetBottom",value:function(){return-(this.section.cachedWindowHeight+this.copyHeight)}},{key:"playHardwareRoll",value:function(){var e=this.isHardwareVideoReady&&!this.hardwareRoll.mediaManager.mediaObject.getEnded()&&this.scrollY>0;e&&(this.hardwareRoll.play(),this.runTranslateOffset())}},{key:"updateTranslateOffset",value:function(e){this.translateY=0,this.section.cachedWindowHeight<=this.translateThreshold+this.translateOffset?this.translateY=g(0,this.translateOffset,e):this.translateY=g(0,this.translateOffsetDefault,e)}},{key:"drawTranslateOffset",value:function(){this.translateY!==this._previouslyDrawnTranslateY&&v(this.hardwareContainer,{transform:{translate3d:[0,Math.round(this.translateY)+"px",0]}}),this._previouslyDrawnTranslateY=this.translateY}},{key:"runTranslateOffset",value:function(e){var t=this;!e&&this.hardwareRoll.mediaManager.mediaObject.getEnded()||y(function(){var e=t.hardwareRoll.mediaManager.mediaObject.mediaElement,i=e.currentTime/e.duration,n=m.getValue(i);t.updateTranslateOffset(n),t.runTranslateOffset(),b(function(){t.drawTranslateOffset()})})}},{key:"onScroll",value:function(e,t,i){if(this.scrollY=t,!this.isAnimationCancelled)return!this.isHeadlineShown&&this.scrollY>0&&(this.showHeadline(),!this.isHardwareVideoReady)?void this.switchToStaticFallback():this.isAutoplay?void this.playHardwareRoll():void(this.page.isModalOpen||this.elementScrollMotionEmitter.handleScroll(t))}},{key:"onSectionWillAppear",value:function(){this.trigger("willappear")}},{key:"onSectionWillDisappear",value:function(){this.trigger("willdisappear")}},{key:"onScrollMotionUpdate",value:function(e){var t=void 0===this.progress&&e.progress>0;this.progress=e.progress,this.updateTranslateOffset(this.progress),t&&(this.showHeadline(),this.isHardwareVideoReady||this.switchToStaticFallback())}},{key:"onScrollMotionDraw",value:function(e){this.page.isModalOpen||this.hardwareRoll.progress===this.elementScrollMotionEmitter._targetValue||(this.drawTranslateOffset(),this.hardwareRoll.progress=this.progress)}},{key:"switchToStaticFallback",value:function(){var e=this;this.isAnimationCancelled||(this.isAnimationCancelled=!0,b(function(){document.documentElement.classList.remove("hero-animated"),e.showHeadline(),e.translateY=0,e.drawTranslateOffset(),e.setStickyContainerBottomOffset()}))}}]),t}(c);t.exports=M},{"../../shared/HardwareRoll":245,"../../shared/helpers/clampViewport":250,"../../shared/model/animatedHeroAvailable":255,"./Siri":238,"@marcom/ac-dom-styles/setStyle":76,"@marcom/ac-easing":83,"@marcom/ac-feature/isDesktop":108,"@marcom/ac-feature/isTablet":111,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-math/lerp":154,"@marcom/ac-prefixer/getEventType":186,"@marcom/ac-progressive-image-loader/ProgressiveImageComponent":200,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-raf-emitter/update":212,"@marcom/ac-scroll-motion-emitter/ElementScrollMotionEmitter":216,"@marcom/ac-useragent":221}],238:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("@marcom/ac-jetpack-lib/utils/Page"),s=e("@marcom/ac-viewport-emitter"),a=e("../../shared/MediaObjectManager"),c="overview/siri-power-on",l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),this.element=t,this.locale=i.locale||t.getAttribute("data-video-locale"),this.delegate=i.delegate||{},!this.locale)throw new e.Error('"data-video-locale" attribute must be set.');this._onMediaReset=this._onMediaReset.bind(this),this._onMediaLoaded=this._onMediaLoaded.bind(this),this._onMediaEnhanced=this._onMediaEnhanced.bind(this),this._onMediaEnded=this._onMediaEnded.bind(this),this._onViewportOrRetinaChange=this._onViewportOrRetinaChange.bind(this),s.on("change",this._onViewportOrRetinaChange),s.on("retinachange",this._onViewportOrRetinaChange),this._initializeMediaObject()}return r(e,null,[{key:"Error",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return new Error("[Siri] "+e)})},{key:"isSupported",get:function(){return!0}}]),r(e,[{key:"_initializeMediaObject",value:function(){this.mediaManager=new a(this.element,{name:c,locale:this.locale,disableRetina:!0,useSplitFiles:!1,mediaObject:{iosInline:!0}}),this.mediaManager.on("reset",this._onMediaReset),this._onMediaReset()}},{key:"_onMediaReset",value:function(){this.mediaManager.mediaObject.once("loaded",this._onMediaLoaded),this.mediaManager.mediaObject.once("enhanced",this._onMediaEnhanced),this.mediaManager.mediaObject.once("ended",this._onMediaEnded),this._wasPreviouslyLoaded&&this.load()}},{key:"_onMediaLoaded",value:function(){this.mediaManager.mediaObject.enhance(),this.mediaManager.mediaObject.mediaElement.tabIndex="-1"}},{key:"_onMediaEnhanced",value:function(){o.deepRefreshAllElementMetrics()}},{key:"_onMediaEnded",value:function(){"function"==typeof this.delegate.onSiriEnded&&this.delegate.onSiriEnded.call(this.delegate)}},{key:"_onViewportOrRetinaChange",value:function(){this.mediaManager.handleViewportChange()}},{key:"load",value:function(){return this._wasPreviouslyLoaded=!0,new Promise(function(e,t){this.mediaManager.mediaObject.once("enhanced",e),this.mediaManager.load()}.bind(this))}},{key:"play",value:function(){this.didPlay=!0,this.mediaManager.play()}},{key:"pause",value:function(){this.mediaManager.pause()}},{key:"destroy",value:function(){this.mediaManager.destroy(),s.off("change",this._onViewportOrRetinaChange),s.off("retinachange",this._onViewportOrRetinaChange)}},{key:"isReady",get:function(){return this.mediaManager.mediaObject.getLoaded()&&this.mediaManager.mediaObject.getEnhanced()}},{key:"progress",set:function(e){this.mediaManager.progress=e},get:function(){return this.mediaManager.progress}}]),e}();t.exports=l},{"../../shared/MediaObjectManager":247,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-viewport-emitter":226}],239:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("@marcom/ac-jetpack-lib/core/BaseComponent"),c=(e("@marcom/ac-raf-emitter/draw"),e("@marcom/ac-viewport-emitter"),e("../shared/model/prefersReducedMotion"),e("@marcom/ac-raf-emitter/draw")),l=e("./HeySiri/SiriWave"),u=e("../shared/model/animatedHeroAvailable"),h=function(e){function t(e,i,o,s,a,c,l){n(this,t);var u=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return u.onEngaged=u.onEngaged.bind(u),u.onExit=u.onExit.bind(u),u.onLoaded=u.onLoaded.bind(u),u.switchToStaticFallback=u.switchToStaticFallback.bind(u),u.siriElement=u.element.querySelector(".siri"),u.trackedElement=u.section.elementEngagement.addElement(u.element.querySelector(".device"),{timeToEngage:25,inViewThreshold:.1}),u.loaded=!1,u.played=!1,u.inView=null,u}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){return u()}}]),s(t,[{key:"setupEvents",value:function(){this.trackedElement.on("exitview",this.onExit),this.trackedElement.on("engaged",this.onEngaged,{stopOnEngaged:!1}),this.initializeVideos()}},{key:"onBreakpoint",value:function(){this.switchToStaticFallback()}},{key:"initializeVideos",value:function(){var e=this;this.siri=new l(this.siriElement,{delegate:this}),this.timeout=setTimeout(this.switchToStaticFallback,3e3),c(function(){e.siri.load().then(e.onLoaded)})}},{key:"onEngaged",value:function(){this.inView=!0,this.engaged=!0,this.tryToPlay()}},{key:"onExit",value:function(){this.inView=!1}},{key:"onLoaded",value:function(){this.loaded=!0,clearTimeout(this.timeout),this.tryToPlay()}},{key:"tryToPlay",value:function(){this.loaded&&this.engaged&&!this.played&&this.inView&&(this.played=!0,this.trackedElement.off("engaged"),this.siri.play())}},{key:"switchToStaticFallback",value:function(){this.trackedElement.off("engaged"),this.element.classList.add("fallback")}}]),t}(a);t.exports=h},{"../shared/model/animatedHeroAvailable":255,"../shared/model/prefersReducedMotion":257,"./HeySiri/SiriWave":240,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-viewport-emitter":226}],240:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("@marcom/ac-jetpack-lib/utils/Page"),s=e("@marcom/ac-viewport-emitter"),a=e("../../shared/MediaObjectManager"),c="overview/hey-siri",l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),this.element=t,this.locale=i.locale||t.getAttribute("data-video-locale"),this.delegate=i.delegate||{},!this.locale)throw new e.Error('"data-video-locale" attribute must be set.');this._onMediaReset=this._onMediaReset.bind(this),this._onMediaLoaded=this._onMediaLoaded.bind(this),this._onMediaEnhanced=this._onMediaEnhanced.bind(this),this._onMediaEnded=this._onMediaEnded.bind(this),this._onViewportOrRetinaChange=this._onViewportOrRetinaChange.bind(this),s.on("change",this._onViewportOrRetinaChange),s.on("retinachange",this._onViewportOrRetinaChange),this._initializeMediaObject()}return r(e,null,[{key:"Error",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return new Error("[Siri] "+e)})},{key:"isSupported",get:function(){return!0}}]),r(e,[{key:"_initializeMediaObject",value:function(){this.mediaManager=new a(this.element,{name:c,locale:this.locale,disableRetina:!0,useSplitFiles:!1,mediaObject:{iosInline:!0}}),this.mediaManager.on("reset",this._onMediaReset),this._onMediaReset()}},{key:"_onMediaReset",value:function(){this.mediaManager.mediaObject.once("loaded",this._onMediaLoaded),this.mediaManager.mediaObject.once("enhanced",this._onMediaEnhanced),this.mediaManager.mediaObject.once("ended",this._onMediaEnded),this._wasPreviouslyLoaded&&this.load()}},{key:"_onMediaLoaded",value:function(){this.mediaManager.mediaObject.enhance(),this.mediaManager.mediaObject.mediaElement.tabIndex="-1"}},{key:"_onMediaEnhanced",value:function(){o.deepRefreshAllElementMetrics()}},{key:"_onMediaEnded",value:function(){"function"==typeof this.delegate.onSiriEnded&&this.delegate.onSiriEnded.call(this.delegate)}},{key:"_onViewportOrRetinaChange",value:function(){this.mediaManager.handleViewportChange()}},{key:"load",value:function(){return this._wasPreviouslyLoaded=!0,new Promise(function(e,t){this.mediaManager.mediaObject.once("enhanced",e),this.mediaManager.load()}.bind(this))}},{key:"play",value:function(){this.didPlay=!0,this.mediaManager.play()}},{key:"pause",value:function(){this.mediaManager.pause()}},{key:"destroy",value:function(){this.mediaManager.destroy(),s.off("change",this._onViewportOrRetinaChange),s.off("retinachange",this._onViewportOrRetinaChange)}},{key:"isReady",get:function(){return this.mediaManager.mediaObject.getLoaded()&&this.mediaManager.mediaObject.getEnhanced()}},{key:"progress",set:function(e){this.mediaManager.progress=e},get:function(){return this.mediaManager.progress}}]),e}();t.exports=l},{"../../shared/MediaObjectManager":247,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-viewport-emitter":226}],241:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("@marcom/ac-jetpack-lib/core/BaseComponent"),c=e("./RoomVideo"),l=e("../../shared/model/roomVideoSupported"),u=e("../../shared/model/prefersReducedMotion"),h=500,m=.5,d=function(e){function t(e,i,o,s,a,c,l){n(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return h.element=i,h._videoShouldPlay=!u,h}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){return l()}}]),s(t,[{key:"setupEvents",value:function(){this._initialize()}},{key:"onSectionWillAppearWithPadding",value:function(e,t){this._initializeVideo()}},{key:"_initialize",value:function(){this._initializeLoader(),this._initializePlayPauseButton(),this._initializeTracker()}},{key:"_initializeVideo",value:function(){this.mediaName=this.element.getAttribute("data-media-name"),this.videoElement=this.element.querySelector(".stacked-video"),0===this.videoElement.childNodes.length&&(this.video=new c(this.mediaName,this.videoElement),this._initializeMediaObject())}},{key:"_initializeMediaObject",value:function(){this.mediaManager=this.video.mediaManager,this.mediaManager.on("reset",this._onMediaManagerReset.bind(this)),this.mediaObject=this.mediaManager.mediaObject,this.mediaObject.on("ready",this._onVideoReady.bind(this)),this.mediaObject.on("play",this._onVideoPlay.bind(this)),this.mediaObject.on("pause",this._onVideoPause.bind(this)),this.mediaObject.on("ended",this._onVideoEnded.bind(this)),this._updateButtonAndLoaderState()}},{key:"_onVideoReady",value:function(e){this._updateButtonAndLoaderState(),this.trackedElement.engaged&&this._videoShouldPlay&&this._playVideo()}},{key:"_onVideoPlay",value:function(e){this._videoShouldPlay=!0,this._updateButtonAndLoaderState()}},{key:"_onVideoPause",value:function(e){this._updateButtonAndLoaderState()}},{key:"_onVideoEnded",value:function(e){this._pauseVideo(!1),this.mediaObject.goToPercent(0)}},{key:"_onMediaManagerReset",value:function(e){this._initializeMediaObject()}},{key:"_playVideo",value:function(){this._videoShouldPlay=!0,this.video.play()}},{key:"_pauseVideo",value:function(e){this.video.pause(),this._videoShouldPlay=e}},{key:"_onPlayPauseClick",value:function(){this.mediaObject.getReady()&&(this.mediaObject.getPaused()?this._playVideo():this._pauseVideo(!1))}},{key:"_initializePlayPauseButton",value:function(){this.playPauseButton=this.element.querySelector(".play-pause-button"),this.playPauseButton.addEventListener("click",this._onPlayPauseClick.bind(this)),this.playPauseIcon=this.playPauseButton.querySelector(".play-pause-icon")}},{key:"_updateButtonAndLoaderState",value:function(){var e=this.mediaObject.getReady();e?(this._showVideo(),this._showPlayPauseButton(this.mediaObject.getPaused()),this._hideLoader()):(this._hidePlayPauseButton(),this._showLoader())}},{key:"_showVideo",value:function(){this.videoElement.classList.add("show")}},{key:"_showPlayPauseButton",value:function(e){var t=e?"data-play-label":"data-pause-label",i=this.playPauseButton.getAttribute(t);this.playPauseButton.setAttribute("aria-label",i);var n=e?"play":"pause",r=e?"pause":"play";this.playPauseIcon.classList.add(n),this.playPauseIcon.classList.remove(r),this.playPauseButton.classList.add("show"),this.playPauseIcon.classList.add("show")}},{key:"_hidePlayPauseButton",value:function(){this.playPauseButton.classList.remove("show"),this.playPauseIcon.classList.remove("show")}},{key:"_initializeLoader",value:function(){this.loader=this.element.querySelector(".loader")}},{key:"_showLoader",value:function(){this.loader.classList.add("show")}},{key:"_hideLoader",value:function(){this.loader.classList.remove("show")}},{key:"_initializeTracker",value:function(){this.trackedElement=this.section.elementEngagement.addElement(this.element,{timeToEngage:h,inViewThreshold:m}),this.trackedElement.on("engaged",this._onEngaged.bind(this)),this.trackedElement.on("exitview",this._onExitView.bind(this))}},{key:"_onEngaged",value:function(e){this._checkVideoPlay()}},{key:"_onExitView",value:function(e){this.mediaObject&&this.mediaObject.getLoaded()&&!this.mediaObject.getPaused()&&this._pauseVideo(!0)}},{key:"_checkVideoPlay",value:function(){this.mediaObject&&this._videoShouldPlay&&this.mediaObject.getReady()&&this._playVideo()}}]),t}(a);t.exports=d},{"../../shared/model/prefersReducedMotion":257,"../../shared/model/roomVideoSupported":258,"./RoomVideo":242,"@marcom/ac-jetpack-lib/core/BaseComponent":145}],242:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("@marcom/ac-jetpack-lib/utils/Page"),s=e("@marcom/ac-viewport-emitter"),a=e("../../shared/MediaObjectManager"),c=function(){function e(t,i){arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.videoElement=i,this.mediaName=t,this._onMediaReset=this._onMediaReset.bind(this),this._onMediaLoaded=this._onMediaLoaded.bind(this),this._onMediaEnhanced=this._onMediaEnhanced.bind(this),this._onViewportChange=this._onViewportChange.bind(this),s.on("change",this._onViewportChange),this._initializeMediaObject()}return r(e,[{key:"_initializeMediaObject",value:function(){this.mediaManager=new a(this.videoElement,{name:this.mediaName,locale:this.videoElement.getAttribute("data-video-locale"),disableRetina:!0,ignoreViewportShrink:!0,autoplay:!1,autoload:!0,useSplitFiles:!1,mediaObject:{iosInline:!0}}),this.mediaManager.on("reset",this._onMediaReset.bind(this)),this._onMediaReset()}},{key:"_onMediaReset",value:function(){this.mediaManager.mediaObject.once("loaded",this._onMediaLoaded.bind(this)),this.mediaManager.mediaObject.once("enhanced",this._onMediaEnhanced.bind(this)),this.mediaManager.mediaObject.on("timeupdate",this._onTimeUpdate.bind(this)),this.load()}},{key:"_onMediaLoaded",value:function(){this.mediaManager.mediaObject.enhance()}},{key:"_onMediaEnhanced",value:function(){o.deepRefreshAllElementMetrics()}},{key:"_onTimeUpdate",value:function(){this.mediaManager.mediaObject.getCurrentTime()===this.mediaManager.mediaObject.getDuration()&&this.mediaManager.mediaObject.trigger("ended");
}},{key:"_onViewportChange",value:function(){this.mediaManager.handleViewportChange()}},{key:"load",value:function(){return new Promise(function(e,t){this.mediaManager.mediaObject.once("loaded",e),this.mediaManager.load()}.bind(this))}},{key:"play",value:function(){this.mediaManager.play()}},{key:"pause",value:function(){this.mediaManager.pause()}},{key:"isReady",get:function(){return this.mediaManager.mediaObject.getLoaded()&&this.mediaManager.mediaObject.getEnhanced()}},{key:"progress",set:function(e){this.mediaManager.progress=e},get:function(){return this.mediaManager.progress}}]),e}();t.exports=c},{"../../shared/MediaObjectManager":247,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-viewport-emitter":226}],243:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function v(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=e("@marcom/ac-jetpack-lib/core/BaseComponent"),l=e("@marcom/ac-jetpack-lib/utils/page"),u=e("@marcom/ac-scroll-motion-emitter/ScrollMotionEmitter"),h=e("@marcom/ac-browser-prefixed"),m=e("@marcom/ac-dom-metrics/getPagePosition"),d=e("@marcom/ac-dom-metrics/getDimensions"),p=e("@marcom/ac-mvc-model").Model,f=e("@marcom/ac-math/lerp"),_=100,g=function(e){function t(e,i,o,s,a,u,h){n(this,t);var m=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return m.name="StickySpeaker_"+h,c.call(m,e,i,o,s,a,u,h),m.windowHeight=null,m.parallaxAmt=null,m.onMeshFadeUpdate=m.onMeshFadeUpdate.bind(m),m.onMeshFadeDraw=m.onMeshFadeDraw.bind(m),m.onParallaxUpdate=m.onParallaxUpdate.bind(m),m.onParallaxDraw=m.onParallaxDraw.bind(m),m.showComponent=m.showComponent.bind(m),m.cards=null,m.scrollY=null,m.nextSectionEl=document.querySelector(".section-room"),m.stickyWrapperEl=m.element.querySelector(".sticky-wrapper"),m.speakerComponentsWrapperEl=m.element.querySelector(".speaker-components-wrapper"),m.speakerComponentEls=Array.from(m.speakerComponentsWrapperEl.querySelectorAll(".speaker-component")),m.localNavEl=document.querySelector("#ac-localnav"),m.cardWrapperEl=m.element.querySelector(".card-wrapper"),m.numberOfComponents=m.speakerComponentEls.length,m.speakerSide=m.speakerComponentsWrapperEl.querySelector(".homepod-speaker-side"),m.model=new p,m.model.on("change:component",m.showComponent),m.calculateMetrics(u),m.setStyles(),l.onPageHeightSettled(function(){m.init()}),m}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("sticky-speaker")}}]),a(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).apply(this,arguments)}},{key:"init",value:function(){this.cards=this.createCardsCollection(),this.getCurrentComponent(this.scrollY),this.meshFade=this.createMeshFade(),this.parallax=this.createParallax(),this.customSetupEvents(),this.onMeshFadeUpdate(),this.onMeshFadeDraw(),this.onParallaxUpdate(),this.onParallaxDraw()}},{key:"createCardsCollection",value:function(){return Array.from(this.element.querySelectorAll(".design-card")).map(function(e){var t=e.getAttribute("data-fade-offset")||0;return{el:e,top:m(e).top,offset:t}})}},{key:"customSetupEvents",value:function(){this.meshFade.on("update",this.onMeshFadeUpdate),this.meshFade.on("draw",this.onMeshFadeDraw),this.parallax.on("update",this.onParallaxUpdate),this.parallax.on("draw",this.onParallaxDraw)}},{key:"teardownEvents",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"teardownEvents",this).apply(this,arguments),this.meshFade.off("update",this.onMeshFadeUpdate),this.meshFade.off("draw",this.onMeshFadeDraw)}},{key:"calculateMetrics",value:function(e){this.deviceHeight=this.speakerComponentsWrapperEl.offsetHeight,this.localNavHeight=this.localNavEl.offsetHeight,this.windowHeight=Math.min(e,document.documentElement.clientHeight),this.parallaxAmt=document.documentElement.clientHeight-2*_-this.deviceHeight,this.parallaxAmt=Math.min(0,this.parallaxAmt),this.parallax&&(this.parallax.min=m(this.stickyWrapperEl).top,this.parallax.max=this.parallax.min+d(this.stickyWrapperEl).height-this.windowHeight),this.cards&&this.cards.forEach(function(e){e.top=m(e.el).top}),this.windowHeight-this.deviceHeight-this.localNavHeight>_?this.top=(this.windowHeight-this.localNavHeight)/2-this.deviceHeight/2+this.localNavHeight:this.top=_}},{key:"setStyles",value:function(){this.speakerComponentsWrapperEl.style.top=this.top+"px",this.nextSectionEl.style.marginTop=this.parallaxAmt+"px"}},{key:"createParallax",value:function(){var e=m(this.stickyWrapperEl).top,t=e+d(this.stickyWrapperEl).height-this.windowHeight;return new u({min:e,max:t,overrideScroll:!0})}},{key:"onParallaxUpdate",value:function(e){this.parallaxProgress=e?e.progress:this.scrollY}},{key:"onParallaxDraw",value:function(e){var t=f(0,this.parallaxAmt,this.parallaxProgress);this.speakerComponentsWrapperEl.style[h.transform]="translate3d(0,"+t+"px,0)"}},{key:"createMeshFade",value:function(){var e=m(this.stickyWrapperEl).top-.6*this.windowHeight,t=e+.6*this.windowHeight;return new u({min:e,max:t,overrideScroll:!0})}},{key:"onMeshFadeUpdate",value:function(e){this.meshFadeProgress=e?e.progress:this.scrollY}},{key:"onMeshFadeDraw",value:function(e){this.speakerSide.style.opacity=f(.999,.001,this.meshFadeProgress)}},{key:"showComponent",value:function(e){var t=e.value;this.speakerComponentEls.forEach(function(e,i){i<=t?e.style.opacity=.999:e.style.opacity=.001})}},{key:"getCurrentComponent",value:function(e){var t=this,i=-1;this.cards.forEach(function(n,r){r>i&&e>n.top-t.windowHeight-n.offset*t.windowHeight&&(i=r)}),this.model.set({component:i})}},{key:"onScroll",value:function(e,i,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).apply(this,arguments),this.scrollY=i,this.meshFade&&this.meshFade.handleScroll(i),this.parallax&&this.parallax.handleScroll(i),this.cards&&this.getCurrentComponent(i)}},{key:"onResizeDebounced",value:function(e,i,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeDebounced",this).apply(this,arguments),this.calculateMetrics(n),this.setStyles()}},{key:"onBreakpoint",value:function(e,i,n,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onBreakpoint",this).apply(this,arguments)}}]),t}(c);t.exports=g},{"@marcom/ac-browser-prefixed":21,"@marcom/ac-dom-metrics/getDimensions":41,"@marcom/ac-dom-metrics/getPagePosition":42,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-jetpack-lib/utils/page":152,"@marcom/ac-math/lerp":154,"@marcom/ac-mvc-model":172,"@marcom/ac-scroll-motion-emitter/ScrollMotionEmitter":217}],244:[function(e,t,i){"use strict";function n(e){null===this._currentValue&&(this._currentValue=this._targetValue);var t=1;if(this.easingFunction){var i=this.max-this.min,n=this.max-(this.max-this._targetValue)/i,r=this.max-(this.max-this._currentValue)/i,o=1-Math.abs(n-r),s=this.easingFunction(o,0,1,1);t=1+(s-o)}var a=1,c=this._targetValue-this._currentValue,l=c*t*a*(1/this.friction),u=parseFloat((this._currentValue+l).toFixed(this.specificity));u===this._currentValue?this._currentValue=this._targetValue:this._currentValue=u,this._shouldEmitChange=!0}var r=e("@marcom/ac-films/AutoFilms")(),o=(e("@marcom/ac-raf-emitter/draw"),e("@marcom/ac-useragent")),s=e("@marcom/ac-scroll-motion-emitter/ElementScrollMotionEmitter"),a=e("@marcom/ac-jetpack-lib/core/BasePage"),c=e("@marcom/ac-jetpack-lib/model/ComponentMap"),l=(e("@marcom/ac-jetpack-lib/utils/page"),e("@marcom/ac-jetpack-lib/model/EnabledFeatures")),u=e("./shared/model/EnabledFeatures"),h=e("./shared/model/ComponentMap");o.os.ios&&(s.prototype.updateValue=n);var m=function(){return{initialize:function(){var e=this;c=Object.assign(c,h),l=l.extend(u),l.init(),document.addEventListener("readystatechange",function(){"complete"===document.readyState&&(e.instantiatePageController(),e.initializeModal())})},instantiatePageController:function(){this.page=new a},initializeModal:function(){var e=this;this.page.isModalOpen=!1,r&&r.modalVideo&&(r.modalVideo.on("willopen",function(){e.page.isModalOpen=!0}),r.modalVideo.on("close",function(){return setTimeout(function(){e.page.isModalOpen=!1},1)}))}}}();t.exports=m.initialize()},{"./shared/model/ComponentMap":253,"./shared/model/EnabledFeatures":254,"@marcom/ac-films/AutoFilms":void 0,"@marcom/ac-jetpack-lib/core/BasePage":146,"@marcom/ac-jetpack-lib/model/ComponentMap":148,"@marcom/ac-jetpack-lib/model/EnabledFeatures":150,"@marcom/ac-jetpack-lib/utils/page":152,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-scroll-motion-emitter/ElementScrollMotionEmitter":216,"@marcom/ac-useragent":221}],245:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("@marcom/ac-jetpack-lib/utils/Page"),s=e("@marcom/ac-viewport-emitter"),a=e("./MediaObjectManager"),c=e("@marcom/ac-raf-emitter/draw"),l=(e("@marcom/ac-useragent"),e("./VideoFrameDecompressor")),u="overview/hero-hardware",h=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),this.element=t,this.locale=i.locale||t.getAttribute("data-video-locale"),this.autoplay=!!i.autoplay,this.autoload=!!i.autoload,this.playbackRate=i.playbackRate,this.heroController=i.heroController,this._progress=0,this._compositing=!1,this._inView=!1,this._shouldHideVideoOnComplete=!1,this.shouldUseVideoFrameDecompressor&&(this.heroController.on("willappear",this._onHeroSectionWillAppear.bind(this)),this.heroController.on("willdisappear",this._onHeroSectionWillDisappear.bind(this)),this.videoFrameDecompressor=new l),!this.locale)throw new e.Error('"data-video-locale" attribute must be set.');this._onMediaReset=this._onMediaReset.bind(this),this._onMediaWillReset=this._onMediaWillReset.bind(this),this._onMediaLoaded=this._onMediaLoaded.bind(this),this._onMediaEnhanced=this._onMediaEnhanced.bind(this),this._onViewportOrRetinaChange=this._onViewportOrRetinaChange.bind(this),s.on("change",this._onViewportOrRetinaChange),s.on("retinachange",this._onViewportOrRetinaChange),this._initializeMediaObject()}return r(e,[{key:"shouldUseVideoFrameDecompressor",get:function(){return!!this.heroController.isCanvasAfterAutoplay}}],[{key:"Error",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return new Error("[HardwareRoll] "+e)})},{key:"isSupported",get:function(){return!0}}]),r(e,[{key:"_initializeMediaObject",value:function(){this.mediaManager=new a(this.element,{name:u,locale:this.locale,disableRetina:!0,mediaObject:{iosInline:!0,playbackRate:this.playbackRate,frameRate:30}}),this.mediaManager.on("will-reset",this._onMediaWillReset),this.mediaManager.on("reset",this._onMediaReset),this._onMediaReset()}},{key:"_onMediaReset",value:function(){this.mediaManager.mediaObject.once("loaded",this._onMediaLoaded),this.mediaManager.mediaObject.once("enhanced",this._onMediaEnhanced),(this.autoload||this._wasPreviouslyLoaded)&&this.load()}},{key:"_onMediaLoaded",value:function(){this.mediaManager.mediaObject.enhance(),this.mediaManager.progress!=this._progress&&(this.mediaManager.progress=this._progress)}},{key:"_onHeroSectionWillAppear",value:function(){this._inView=!0}},{key:"_onHeroSectionWillDisappear",value:function(){this._inView=!1,this._shouldHideVideoOnComplete&&this._hideMediaElement()}},{key:"_onMediaWillReset",value:function(){this.shouldUseVideoFrameDecompressor&&this.videoFrameDecompressor.handleReset()}},{key:"_onMediaEnhanced",value:function(){var e=this;if(this.shouldUseVideoFrameDecompressor){this.videoFrameDecompressor.willReset=!1,this.videoFrameDecompressor.off("composite-complete"),this._didHideMediaElement=!1,this._compositing=!0,this.videoClone=document.createElement("video"),this.videoClone.src=this.mediaManager.mediaObject.mediaElement.src;var t={width:this.mediaManager.mediaObject.mediaElement.videoWidth,height:this.mediaManager.mediaObject.mediaElement.videoHeight};this.videoFrameDecompressor.initialize({video:this.videoClone,frameCount:150,width:t.width,height:t.height,duration:this.mediaManager.mediaObject.getDuration(),validation:{invalidColors:[[0,0,0],[255,255,255]],location:[t.width/2,t.height/2]}}),this.videoFrameDecompressor.once("composite-complete",function(){e._compositing=!1,e.mediaManager.mediaObject.model.get("paused")||!e._inView?e._hideMediaElement():(e._shouldHideVideoOnComplete=!0,e.mediaManager.mediaObject.once("pause",function(){e.videoFrameDecompressor.isCurrentlyEndFrame()&&e._hideMediaElement()}))}),this.mediaManager.mediaObject.el.appendChild(this.videoFrameDecompressor.el)}o.deepRefreshAllElementMetrics()}},{key:"_hideMediaElement",value:function(){var e=this;this._hidingMediaElement||(this._hidingMediaElement=!0,this.mediaManager.mediaObject.pause(),this._didHideMediaElement=!0,this._shouldHideVideoOnComplete=!1,c(function(){e.videoFrameDecompressor.setProgress(e._progress),c(function(){e.videoFrameDecompressor.show(),e.mediaManager.mediaObject.mediaElement.style.display="none",e._hidingMediaElement=!1})}))}},{key:"_onViewportOrRetinaChange",value:function(){this.mediaManager.handleViewportChange()}},{key:"load",value:function(){return this._wasPreviouslyLoaded=!0,new Promise(function(e,t){this.mediaManager.mediaObject.once("enhanced",e),this.mediaManager.load()}.bind(this))}},{key:"play",value:function(){this.mediaManager.play()}},{key:"pause",value:function(){this.mediaManager.pause()}},{key:"destroy",value:function(){this.mediaManager.destroy(),s.off("change",this._onViewportOrRetinaChange),s.off("retinachange",this._onViewportOrRetinaChange)}},{key:"isReady",get:function(){return this.mediaManager.mediaObject.getLoaded()&&this.mediaManager.mediaObject.getEnhanced()}},{key:"progress",set:function(e){if(this._progress=e,this.shouldUseVideoFrameDecompressor){var t=this.mediaManager.mediaObject.model.get("paused");this._progress>0&&this._compositing&&t&&!this.videoFrameDecompressor.willReset?this.mediaManager.play():this.videoFrameDecompressor.isCurrentlyEndFrame()&&this._shouldHideVideoOnComplete&&t&&this._hideMediaElement(),this.videoFrameDecompressor.setProgress(this._progress)}else this.mediaManager.progress=this._progress},get:function(){return this.shouldUseVideoFrameDecompressor?this.videoFrameDecompressor.progress||0:this.mediaManager.progress}}]),e}();t.exports=h},{"./MediaObjectManager":247,"./VideoFrameDecompressor":248,"@marcom/ac-jetpack-lib/utils/Page":152,"@marcom/ac-raf-emitter/draw":211,"@marcom/ac-useragent":221,"@marcom/ac-viewport-emitter":226}],246:[function(e,t,i){"use strict";t.exports={lerp:function(e,t,i){return t+(i-t)*e},map:function(e,t,i,n,r){return this.lerp(this.norm(e,t,i),n,r)},mapClamp:function(e,t,i,n,r){var e=this.lerp(this.norm(e,t,i),n,r);return Math.max(n,Math.min(r,e))},norm:function(e,t,i){return(e-t)/(i-t)},clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],247:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=s(["/105/media/","https://www.apple.com/","https://www.apple.com/",""],["/105/media/","https://www.apple.com/","https://www.apple.com/",""]),l=e("@marcom/ac-object/clone"),u=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,h=e("@marcom/ac-media-object"),m=e("@marcom/ac-viewport-emitter"),d=e("./helpers/clampViewport"),p=e("./helpers/template"),f=e("./helpers/parseViewportSizes"),_="us",g="homepod/2018/dc73c1ef_eae9_4146_b080_5fbb3684b99e",v=p(c,"locale","directory","name"),y=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.container=e,o.name=i.name,o.locale=i.locale||_,o.dimensions=i.dimensions,o.disableRetina=!!i.disableRetina,o.ignoreViewportShrink=!!i.ignoreViewportShrink,o.mediaObjectOptions=i.mediaObject,o.useSplitFiles=void 0===i.useSplitFiles||i.useSplitFiles,"string"==typeof o.dimensions&&(o.dimensions=f(o.dimensions)),window.addEventListener("beforeunload",function(){o.mediaElement.style.display="none"}),window.addEventListener("pageshow",function(){o.mediaElement.style.display=null}),o.handleViewportChange(),o}return o(t,e),a(t,[{key:"handleViewportChange",value:function(){var e=d(m.viewport),t=m.retina,i="large"===this.viewport||"medium"===this.viewport&&"small"===e;i&&this.ignoreViewportShrink||e===this.viewport&&t===this.isRetinaDisplay||(this.viewport=e,this.isRetinaDisplay=t,this.reset())}},{key:"load",value:function(){return this.mediaObject.load()}},{key:"play",value:function(){return this.mediaObject.play()}},{key:"pause",value:function(){return this.mediaObject.pause()}},{key:"reset",value:function(){this.trigger("will-reset"),this.mediaObject&&(this._destroyMediaObject(),this._replaceMediaContainer()),this._initializeMediaObject(),this.trigger("reset")}},{key:"destroy",value:function(){this._destroyMediaObject();for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)}},{key:"_initializeMediaObject",value:function(){var e=l(this.mediaSource),t=l(this.mediaObjectOptions);this.mediaObject=h.createVideo(this.container,e,t),this.mediaElement=this.mediaObject.mediaElement,this.mediaElement.setAttribute("muted",""),this.mediaElement.muted=!0,this.width&&this.height&&(this.mediaElement.style.width=this.width+"px",this.mediaElement.style.height=this.height+"px")}},{key:"_destroyMediaObject",value:function(){this.container.classList.remove("mediaobject-enhanced","mediaobject-destroyed"),this.mediaObject.off()}},{key:"_replaceMediaContainer",value:function(){var e=this.container.cloneNode(!1);this.container.parentNode.replaceChild(e,this.container),this.container=e}},{key:"mediaBasePath",get:function(){return v({directory:g,name:this.name,locale:this.locale})}},{key:"mediaSource",get:function(){var e={basePath:this.mediaBasePath},t=this.viewport;return this.isRetinaDisplay&&!this.disableRetina&&(t+="_2x"),this.useSplitFiles?e.basePath+="/video/split_files/"+t:(e.basePath+="/video",e.filename=t,e.fileFormat="mp4"),e.splitFileLoading=this.useSplitFiles,e}},{key:"progress",set:function(e){this.mediaObject.goToPercent(e)},get:function(){return this.mediaObject.getCurrentPercent()}},{key:"width",get:function(){return this.dimensions?this.dimensions[this.viewport].width:null}},{key:"height",get:function(){return this.dimensions?this.dimensions[this.viewport].height:null}}]),t}(u);t.exports=y},{"./helpers/clampViewport":250,"./helpers/parseViewportSizes":251,"./helpers/template":252,"@marcom/ac-event-emitter-micro":96,"@marcom/ac-media-object":161,"@marcom/ac-object/clone":177,"@marcom/ac-viewport-emitter":226}],248:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("@marcom/ac-raf-emitter/RAFEmitter"),c=e("@marcom/ac-raf-emitter/draw"),l=e("./MathUtils"),u=e("@marcom/ac-event-emitter-micro/EventEmitterMicro"),h=60,m=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fps=0,e.useRAF=!1,e.timeout=null,e._shouldRun=!1,e._rafEmitter=new a,e._onTimeout=e._onTimeout.bind(e),e._rafEmitter.on("draw",e._onTimeout),e}return o(t,e),s(t,[{key:"run",value:function(){return this.useRAF?void this._rafEmitter.run():(this._shouldRun=!0,void(this.timeout||(this.timeout=setTimeout(this._onTimeout,1e3/this.fps))))}},{key:"cancel",value:function(){this.useRAF||(this._shouldRun=!1,this.timeout&&clearTimeout(this.timeout),this.timeout=null)}},{key:"_onTimeout",value:function(){this.cancel(),this.trigger("composite")}}]),t}(u),d=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.el=e._createElement(),e.currentFrameKey="0",e._lastFrame="0",e._maxRecordedFrame=null,e._rerenderingFrame=!1,e.progress=0,e.willReset=!1,e._shouldReplaceFrames=!1,e.shouldReplaceFramesOnReset=!1,e.frames={},e.orderedFrameKeys=[],e._pendingFrames={},e._pendingOrderedFrameKeys=[],e.compositor=new m,e.compositor.on("composite",e._onComposite.bind(e)),e.renderRAFEmitter=new a,e.renderRAFEmitter.on("draw",e._onRenderRAFDraw.bind(e)),e.hide(),e}return o(t,e),s(t,[{key:"initialize",value:function(e){var t=this;this.shouldReplaceFramesOnReset=!1,this.validation=null,this.width=e.width,this.height=e.height,this.duration=e.duration,this.frameCount=e.frameCount,this.video=e.video,this.video.setAttribute("muted",""),this.video.muted=!0,this._shouldReplaceFrames=!0,this.compositor.useRAF=!0,this._clearFrames().then(this.compositeFrames.bind(this,h)).then(function(){t._shouldReplaceFrames=!1,c(function(){t._replaceFrames(),t._onRenderRAFDraw(),t.trigger("composite-complete")})})}},{key:"compositeFrames",value:function(e){var t=this;return new Promise(function(i,n){t.resolve=i,t.currentFrameCount=0,t.compositor.fps=e,t._isPlaying()&&t.video.pause(),t.video.currentTime=0,t._lastCurrentTime=0,t.video.playbackRate=e/t.frameCount*t.duration,t.compositor.run()})}},{key:"setProgress",value:function(e,t){"number"==typeof e&&(this.progress=e),this.currentFrameKey=this.getNearestAvailableFrameKey(this.progress),t||this.currentFrameKey===this._lastFrameKey||this.renderRAFEmitter.run()}},{key:"show",value:function(){this.el.style.display="block"}},{key:"hide",value:function(){this.el.style.display="none"}},{key:"_validateFrameIntegrity",value:function(e){var t=this.validation.invalidColors||[[0,0,0]],i=this.validation.location||[0,0],n=[i[0],i[1],1,1],r=e.getContext("2d"),o=r.getImageData.apply(r,n).data,s=void 0,a=t.length;for(s=0;s<a;s++)if(o[0]===t[s][0]&&o[1]===t[s][1]&&o[2]===t[s][2])return!1;return!0}},{key:"getNearestAvailableFrameKey",value:function(e){if(null===this._maxRecordedFrame)return null;var t=Math.round(l.map(this.progress,0,1,0,this._maxRecordedFrame)),i=this._getClosestNumberFromArr(t,this.orderedFrameKeys);return this._getFrameKey(i)}},{key:"handleReset",value:function(){this.willReset=!0,this.compositor.cancel(),this.video&&this._isPlaying()&&this.video.pause()}},{key:"_getClosestNumberFromArr",value:function(e,t){var i=t[0],n=void 0,r=t.length;for(n=0;n<r;n++)Math.abs(e-t[n])<Math.abs(e-i)&&(i=t[n]);return i}},{key:"_createElement",value:function(){var e=document.createElement("div");return e.classList.add("video-frame-container"),e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-1,e}},{key:"_getFrameKey",value:function(e){return"frame-"+e}},{key:"_addFramesToDOM",value:function(){var e=this;return new Promise(function(t,i){c(function(){e.el.innerHTML="";var i;for(i in e.frames)e.frames.hasOwnProperty(i)&&e.el.appendChild(e.frames[i]);t()})})}},{key:"_clearFrames",value:function(){var e=this;return new Promise(function(t,i){c(function(){e.el.innerHTML="",e.frames={},e.orderedFrameKeys=[],e._pendingFrames={},e._pendingOrderedFrameKeys=[],t()})})}},{key:"_replaceFrames",value:function(){var e=this;return new Promise(function(t,i){e.el.innerHTML="";var n;for(n in e._pendingFrames)e._pendingFrames.hasOwnProperty(n)&&e.el.appendChild(e._pendingFrames[n]);e.frames=e._pendingFrames,e.orderedFrameKeys=e._pendingOrderedFrameKeys,e._maxRecordedFrame=Math.max.apply(Math,e.orderedFrameKeys),t()})}},{key:"_getVideoFrame",value:function(e,t){var i=document.createElement("canvas");i.width=this.width,i.height=this.height,i.style.width=this.width+"px",i.style.height=this.height+"px",i.style.position="absolute",i.style.zIndex=e,t!==this.currentFrameKey&&(i.style.display="none"),i.style.top=0,i.style.left=0;var n=i.getContext("2d");return n.drawImage(this.video,0,0,this.width,this.height),i}},{key:"_onComposite",value:function(){var e=this,t=l.map(this.video.currentTime,0,this.duration,0,1),i=Math.round(l.map(t,0,1,0,this.frameCount)),n=this._getFrameKey(i),r=this._getVideoFrame(i,n);return this.validation&&!this._validateFrameIntegrity(r)?(this.video.pause(),this.video.currentTime=this._lastCurrentTime,this._rerenderingFrame=!0,void this.compositor.run()):(this._lastCurrentTime=this.video.currentTime,this._shouldReplaceFrames?(this._pendingFrames[n]=r,this._pendingOrderedFrameKeys.push(i)):(this.frames[n]=r,this.orderedFrameKeys.push(i),(null===this._maxRecordedFrame||i>this._maxRecordedFrame)&&(this._maxRecordedFrame=i),c(function(e){this.el.appendChild(e)}.bind(this,r))),this.trigger("composite",{frameNumber:i,frameKey:n,frame:r}),(this._rerenderingFrame||0===t&&!this._isPlaying())&&this.video.play(),this.setProgress(null,!0),this._onRenderRAFDraw(),void(t<1?(this.currentFrameCount++,this.compositor.run()):(this._isPlaying()&&this.video.pause(),this.video.currentTime=0,c(function(){e.resolve(),e.resolve=null}))))}},{key:"_isPlaying",value:function(){return this.video.currentTime>0&&!this.video.paused&&!this.video.ended&&this.video.readyState>2}},{key:"isCurrentlyStartOrEndFrame",value:function(){return this.currentFrameKey===this._getFrameKey(0)||this.currentFrameKey===this._getFrameKey(this.frameCount)}},{key:"isCurrentlyEndFrame",value:function(){return this.currentFrameKey===this._getFrameKey(this.frameCount)}},{key:"_onRenderRAFDraw",value:function(){var e=this.currentFrameKey;if(this.shouldReplaceFramesOnReset&&this.isCurrentlyStartOrEndFrame()&&(this._replaceFrames(),this.shouldReplaceFramesOnReset=!1),this.frames[e]){var t;for(t in this.frames)this.frames.hasOwnProperty(t)&&(t===e?this.frames[t].style.display="block":this.frames[t].style.display="none");this.trigger("render",{frameKey:e,frame:this.frames[e],lastFrameKey:this._lastFrameKey}),this._lastFrameKey=e}}}]),t}(u);t.exports=d},{"./MathUtils":246,"@marcom/ac-event-emitter-micro/EventEmitterMicro":97,"@marcom/ac-raf-emitter/RAFEmitter":207,"@marcom/ac-raf-emitter/draw":211}],249:[function(e,t,i){"use strict";t.exports=function(e){return void 0===e.large?null:(void 0===e.medium&&(e.medium=e.large),void 0===e.small&&(e.small=e.medium),e)}},{}],250:[function(e,t,i){"use strict";t.exports=function(e){return"xlarge"===e&&(e="large"),"xsmall"===e&&(e="small"),e}},{}],251:[function(e,t,i){"use strict";function n(e){return e.large?(e.medium||(e.medium=e.large),e.small||(e.small=e.medium),e):null}function r(e){for(var t=e.split(/,[\s]*/),i={},r=0,o=t.length;r<o;r++){var s=t[r].match(/([^:]+):[\s]*(\d+)x(\d+)/);s&&(i[s[1]]={width:parseInt(s[2],10),height:parseInt(s[3],10)})}return i=n(i)}t.exports=r},{}],252:[function(e,t,i){"use strict";t.exports=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return function(t){var n=e.slice();return i.forEach(function(e,i){n[i]+=t[e]}),n.join("")}}},{}],253:[function(e,t,i){"use strict";t.exports={Base:e("@marcom/ac-jetpack-lib/core/BaseComponent"),EngagedElement:e("@marcom/ac-jetpack-fuel/components/engaged-element/EngagedElementComponent"),LocalnavThemeChanger:e("@marcom/ac-jetpack-fuel/components/localnav-theme-changer/LocalnavThemeChangerComponent"),ProgressiveImage:e("@marcom/ac-progressive-image-loader/ProgressiveImageComponent"),Albums:e("../../components/Albums"),Engaged:e("../../components/Engaged"),EngagedTransition:e("../../components/EngagedTransitionComponent"),HardwareReveal:e("../../components/HardwareReveal"),Hero:e("../../components/Hero/Hero"),HeySiri:e("../../components/HeySiri"),CopyParallax:e("../../components/CopyParallax"),CopyEngagement:e("../../components/CopyEngagement"),RoomStackedLayout:e("../../components/Room/RoomStackedLayout"),SiriWave:e("../../components/HeySiri/SiriWave"),StickySpeaker:e("../../components/Speaker/StickySpeaker")}},{"../../components/Albums":229,"../../components/CopyEngagement":232,"../../components/CopyParallax":233,"../../components/Engaged":234,"../../components/EngagedTransitionComponent":235,"../../components/HardwareReveal":236,"../../components/Hero/Hero":237,"../../components/HeySiri":239,"../../components/HeySiri/SiriWave":240,"../../components/Room/RoomStackedLayout":241,"../../components/Speaker/StickySpeaker":243,"@marcom/ac-jetpack-fuel/components/engaged-element/EngagedElementComponent":143,"@marcom/ac-jetpack-fuel/components/localnav-theme-changer/LocalnavThemeChangerComponent":144,"@marcom/ac-jetpack-lib/core/BaseComponent":145,"@marcom/ac-progressive-image-loader/ProgressiveImageComponent":200}],254:[function(e,t,i){"use strict";t.exports={init:function(){}}},{}],255:[function(e,t,i){"use strict";t.exports=function(){var t=e("@marcom/ac-useragent"),i=e("./positionStickyAvailable"),n=e("./prefersReducedMotion"),r=document.documentElement.classList.contains("aow"),o=[!t.os.android,!t.browser.edge,i,!n,!r];return o.indexOf(!1)===-1}},{"./positionStickyAvailable":256,"./prefersReducedMotion":257,"@marcom/ac-useragent":221}],256:[function(e,t,i){"use strict";var n=e("@marcom/ac-feature/cssPropertyAvailable");t.exports=n("position","sticky")},{"@marcom/ac-feature/cssPropertyAvailable":103}],257:[function(e,t,i){"use strict";t.exports=window.matchMedia("(prefers-reduced-motion)").matches},{}],258:[function(e,t,i){"use strict";t.exports=function(){var t=e("@marcom/ac-useragent"),i=e("@marcom/ac-feature/isDesktop"),n=document.documentElement.classList.contains("aow"),r=t.os.ios&&t.os.version.major>=9,o=[i()||r,!n];return o.indexOf(!1)===-1}},{"@marcom/ac-feature/isDesktop":108,"@marcom/ac-useragent":221}]},{},[244]);