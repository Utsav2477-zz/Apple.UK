!function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){"use strict";var r=e("./helpers/TabManager"),i=e("./helpers/hideSiblingElements"),o=e("./helpers/showSiblingElements"),a=function(e,t){t=t||{},this._tabbables=null,this._excludeHidden=t.excludeHidden,this._firstTabbableElement=t.firstFocusElement,this._lastTabbableElement=null,this._relatedTarget=null,this.el=e,this._handleOnFocus=this._handleOnFocus.bind(this)},s=a.prototype;s.start=function(){this.updateTabbables(),i(this.el,null,this._excludeHidden),this._firstTabbableElement?this.el.contains(document.activeElement)||this._firstTabbableElement.focus():console.warn("this._firstTabbableElement is null, CircularTab needs at least one tabbable element."),this._relatedTarget=document.activeElement,document.addEventListener("focus",this._handleOnFocus,!0)},s.stop=function(){o(this.el),document.removeEventListener("focus",this._handleOnFocus,!0)},s.updateTabbables=function(){this._tabbables=r.getTabbableElements(this.el,this._excludeHidden),this._firstTabbableElement=this._firstTabbableElement||this._tabbables[0],this._lastTabbableElement=this._tabbables[this._tabbables.length-1]},s._handleOnFocus=function(e){if(this.el.contains(e.target))this._relatedTarget=e.target;else{if(e.preventDefault(),this.updateTabbables(),this._relatedTarget===this._lastTabbableElement||null===this._relatedTarget)return this._firstTabbableElement.focus(),void(this._relatedTarget=this._firstTabbableElement);if(this._relatedTarget===this._firstTabbableElement)return this._lastTabbableElement.focus(),void(this._relatedTarget=this._lastTabbableElement)}},s.destroy=function(){this.stop(),this.el=null,this._tabbables=null,this._firstTabbableElement=null,this._lastTabbableElement=null,this._relatedTarget=null,this._handleOnFocus=null},t.exports=a},{"./helpers/TabManager":3,"./helpers/hideSiblingElements":5,"./helpers/showSiblingElements":9}],2:[function(e,t,n){"use strict";function r(){this._createElemnts(),this._bindEvents()}var i=r.prototype;i._bindEvents=function(){this._onResize=this._resize.bind(this)},i._createElemnts=function(){this.span=document.createElement("span");var e=this.span.style;e.visibility="hidden",e.position="absolute",e.top="0",e.bottom="0",e.zIndex="-1",this.span.innerHTML="&nbsp;",this.iframe=document.createElement("iframe");var t=this.iframe.style;t.position="absolute",t.top="0",t.left="0",t.width="100%",t.height="100%",this.span.appendChild(this.iframe),document.body.appendChild(this.span)},i.detect=function(e){this.originalSize=e||17,this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.currentSize>this.originalSize&&this._onResize(),this.isDetecting||(this.iframe.contentWindow.addEventListener("resize",this._onResize),this.isDetecting=!0)},i._resize=function(e){this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.originalSize<this.currentSize?document.documentElement.classList.add("text-zoom"):document.documentElement.classList.remove("text-zoom"),window.dispatchEvent(new Event("resize"))},i.remove=function(){this.isDetecting&&(this.iframe.contentWindow.removeEventListener("resize",this._onResize),this.isDetecting=!1)},i.destroy=function(){this.remove(),this.span&&this.span.parentElement&&this.span.parentElement.removeChild(this.span),this.span=null,this.iframe=null},t.exports=new r},{}],3:[function(e,t,n){"use strict";var r=e("./../maps/focusableElement"),i=function(){this.focusableSelectors=r.join(",")},o=i.prototype;o.isFocusableElement=function(e,t,n){if(t&&!this._isDisplayed(e))return!1;var i=e.nodeName.toLowerCase(),o=r.indexOf(i)>-1;return"a"===i||(o?!e.disabled:!e.contentEditable||(n=n||parseFloat(e.getAttribute("tabindex")),!isNaN(n)))},o.isTabbableElement=function(e,t){if(t&&!this._isDisplayed(e))return!1;var n=e.getAttribute("tabindex");return n=parseFloat(n),isNaN(n)?this.isFocusableElement(e,t,n):n>=0},o._isDisplayed=function(e){var t=e.getBoundingClientRect();return(0!==t.top||0!==t.left||0!==t.width||0!==t.height)&&"hidden"!==window.getComputedStyle(e).visibility},o.getTabbableElements=function(e,t){for(var n=e.querySelectorAll(this.focusableSelectors),r=n.length,i=[],o=0;o<r;o++)this.isTabbableElement(n[o],t)&&i.push(n[o]);return i},o.getFocusableElements=function(e,t){for(var n=e.querySelectorAll(this.focusableSelectors),r=n.length,i=[],o=0;o<r;o++)this.isFocusableElement(n[o],t)&&i.push(n[o]);return i},t.exports=new i},{"./../maps/focusableElement":11}],4:[function(e,t,n){"use strict";var r=e("./setAttributes"),i=e("./../maps/ariaMap"),o=e("./TabManager"),a="data-original-",s="tabindex",l=function(e,t){var n=e.getAttribute(a+t);n||(n=e.getAttribute(t)||"",r(e,a+t,n))};t.exports=function(e,t){if(o.isFocusableElement(e,t))l(e,s),r(e,s,-1);else for(var n=o.getTabbableElements(e,t),a=n.length;a--;)l(n[a],s),r(n[a],s,-1);l(e,i.HIDDEN),r(e,i.HIDDEN,!0)}},{"./../maps/ariaMap":10,"./TabManager":3,"./setAttributes":7}],5:[function(e,t,n){"use strict";var r=e("./hide");t.exports=function i(e,t,n){t=t||document.body;for(var o=e,a=e;o=o.previousElementSibling;)r(o,n);for(;a=a.nextElementSibling;)r(a,n);e.parentElement&&e.parentElement!==t&&i(e.parentElement)}},{"./hide":4}],6:[function(e,t,n){"use strict";var r=function(e,t){if("string"==typeof t)for(var n=t.split(/\s+/),r=0;r<n.length;r++)e.getAttribute(n[r])&&e.removeAttribute(n[r])},i=function(e,t){if(e.length)for(var n=0;n<e.length;n++)r(e[n],t);else r(e,t)};t.exports=i},{}],7:[function(e,t,n){"use strict";var r=function(e,t,n){e&&1===e.nodeType&&e.setAttribute(t,n)},i=function(e,t,n){if("string"!=typeof n&&(n=n.toString()),e)if(e.length)for(var i=0;i<e.length;i++)r(e[i],t,n);else r(e,t,n)};t.exports=i},{}],8:[function(e,t,n){"use strict";var r=e("./removeAttributes"),i=e("./setAttributes"),o=e("./../maps/ariaMap"),a="data-original-",s="tabindex",l=function(e,t){var n=e.getAttribute(a+t);"string"==typeof n&&(n.length?i(e,t,n):r(e,t),r(e,a+t))};t.exports=function(e){r(e,s+" "+o.HIDDEN),l(e,s),l(e,o.HIDDEN);for(var t=e.querySelectorAll("["+a+s+"]"),n=t.length;n--;)l(t[n],s)}},{"./../maps/ariaMap":10,"./removeAttributes":6,"./setAttributes":7}],9:[function(e,t,n){"use strict";var r=e("./show");t.exports=function i(e,t){t=t||document.body;for(var n=e,o=e;n=n.previousElementSibling;)r(n);for(;o=o.nextElementSibling;)r(o);e.parentElement&&e.parentElement!==t&&i(e.parentElement)}},{"./show":8}],10:[function(e,t,n){"use strict";t.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},{}],11:[function(e,t,n){"use strict";t.exports=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","*[tabindex]","*[contenteditable]"]},{}],12:[function(e,t,n){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var r=e("./className/add");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=t.shift(t);if(n.classList&&n.classList.add)return void n.classList.add.apply(n.classList,t);for(e=0;e<t.length;e++)r(n,t[e])}},{"./className/add":13,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],13:[function(e,t,n){"use strict";var r=e("./contains");t.exports=function(e,t){r(e,t)||(e.className+=" "+t)}},{"./contains":14}],14:[function(e,t,n){"use strict";var r=e("./getTokenRegExp");t.exports=function(e,t){return r(t).test(e.className)}},{"./getTokenRegExp":15}],15:[function(e,t,n){"use strict";t.exports=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")}},{}],16:[function(e,t,n){"use strict";var r=e("./contains"),i=e("./getTokenRegExp");t.exports=function(e,t){r(e,t)&&(e.className=e.className.replace(i(t),"$1").trim())}},{"./contains":14,"./getTokenRegExp":15}],17:[function(e,t,n){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var r=e("./className/remove");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=t.shift(t);if(n.classList&&n.classList.remove)return void n.classList.remove.apply(n.classList,t);for(e=0;e<t.length;e++)r(n,t[e])}},{"./className/remove":16,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],18:[function(e,t,n){"use strict";t.exports={cname:e("./ac-cname/cname")}},{"./ac-cname/cname":19}],19:[function(e,t,n){"use strict";function r(e){return r.addPrefix(e)}var i=e("ac-path").path;r._prefix=function(){var e="https://www.apple.com/global/elements/blank.gif";return e.replace(/global\/.*/,"")}(),r.addPrefix=function(e){return i.isAbsolute(e)?e:(r._assertRootRelative(e),e=r._prefix+e.replace(/^\//,""),e=e.replace(/(^.+)(\/105\/)/,"$1/"))},r.formatUrl=function(e,t,n,o){var a=i.format({dirname:e,filename:t,extname:n},o);if(i.isAbsolute(a))return a;r._assertRootRelative(e);var s=r.addPrefix(a);return s},r._assertRootRelative=function(e){if(!i.isRootRelative(e))throw new URIError("Only root-relative paths are currently supported")},t.exports=r},{"ac-path":125}],20:[function(e,t,n){"use strict";t.exports=e("./internal/expose")("error")},{"./internal/expose":21}],21:[function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="f7c9180f-5c45-47b4-8de4-428015f096c0",a=window||self;try{r=!!a.localStorage.getItem(o)}catch(s){}t.exports=function(e){return function(){if(r&&"object"===i(window.console))return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},{}],22:[function(e,t,n){"use strict";t.exports=e("./internal/expose")("log")},{"./internal/expose":21}],23:[function(e,t,n){"use strict";t.exports=e("./internal/expose")("warn")},{"./internal/expose":21}],24:[function(e,t,n){"use strict";var r=e("./utils/addEventListener"),i=e("./shared/getEventType");t.exports=function(e,t,n,o){return t=i(e,t),r(e,t,n,o)}},{"./shared/getEventType":26,"./utils/addEventListener":28}],25:[function(e,t,n){"use strict";var r=e("./utils/removeEventListener"),i=e("./shared/getEventType");t.exports=function(e,t,n,o){return t=i(e,t),r(e,t,n,o)}},{"./shared/getEventType":26,"./utils/removeEventListener":29}],26:[function(e,t,n){"use strict";var r=e("@marcom/ac-prefixer/getEventType");t.exports=function(e,t){var n,i;return n="tagName"in e?e.tagName:e===window?"window":"document",i=r(t,n),i?i:t}},{"@marcom/ac-prefixer/getEventType":59}],27:[function(e,t,n){"use strict";t.exports=function(e){return e=e||window.event,"undefined"!=typeof e.target?e.target:e.srcElement}},{}],28:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent("on"+t,n),e}},{}],29:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,!!r):e.detachEvent("on"+t,n),e}},{}],30:[function(e,t,n){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageXOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollLeft}},{}],31:[function(e,t,n){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageYOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollTop}},{}],32:[function(e,t,n){"use strict";t.exports=8},{}],33:[function(e,t,n){"use strict";t.exports=11},{}],34:[function(e,t,n){"use strict";t.exports=1},{}],35:[function(e,t,n){"use strict";t.exports=3},{}],36:[function(e,t,n){"use strict";var r=e("../isNode");t.exports=function(e,t){return!!r(e)&&("number"==typeof t?e.nodeType===t:t.indexOf(e.nodeType)!==-1)}},{"../isNode":39}],37:[function(e,t,n){"use strict";var r=e("./isNodeType"),i=e("../COMMENT_NODE"),o=e("../DOCUMENT_FRAGMENT_NODE"),a=e("../ELEMENT_NODE"),s=e("../TEXT_NODE"),l=[a,s,i,o],c=" must be an Element, TextNode, Comment, or Document Fragment",u=[a,s,i],h=" must be an Element, TextNode, or Comment",m=[a,o],f=" must be an Element, or Document Fragment",d=" must have a parentNode";t.exports={parentNode:function(e,t,n,i){if(i=i||"target",(e||t)&&!r(e,m))throw new TypeError(n+": "+i+f)},childNode:function(e,t,n,i){if(i=i||"target",(e||t)&&!r(e,u))throw new TypeError(n+": "+i+h)},insertNode:function(e,t,n,i){if(i=i||"node",(e||t)&&!r(e,l))throw new TypeError(n+": "+i+c)},hasParentNode:function(e,t,n){if(n=n||"target",!e.parentNode)throw new TypeError(t+": "+n+d)}}},{"../COMMENT_NODE":32,"../DOCUMENT_FRAGMENT_NODE":33,"../ELEMENT_NODE":34,"../TEXT_NODE":35,"./isNodeType":36}],38:[function(e,t,n){"use strict";var r=e("./internal/isNodeType"),i=e("./ELEMENT_NODE");t.exports=function(e){return r(e,i)}},{"./ELEMENT_NODE":34,"./internal/isNodeType":36}],39:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.nodeType)}},{}],40:[function(e,t,n){"use strict";var r=e("./internal/validate");t.exports=function(e){return r.childNode(e,!0,"remove"),e.parentNode?e.parentNode.removeChild(e):e}},{"./internal/validate":37}],41:[function(e,t,n){"use strict";t.exports={EventEmitterMicro:e("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":42}],42:[function(e,t,n){"use strict";function r(){this._events={}}var i=r.prototype;i.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},i.once=function(e,t){function n(i){r.off(e,n),void 0!==i?t(i):t()}var r=this;this.on(e,n)},i.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var n=this._events[e].indexOf(t);n!==-1&&this._events[e].splice(n,1)}},i.trigger=function(e,t){if(this.has(e))for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()},i.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},i.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=r},{}],43:[function(e,t,n){"use strict";function r(e){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=e||document,o(this._context,c,this._DOMKeyDown,!0),o(this._context,u,this._DOMKeyUp,!0),i.call(this)}var i=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-dom-events/utils/addEventListener"),a=e("@marcom/ac-dom-events/utils/removeEventListener"),s=e("@marcom/ac-object/create"),l=e("./internal/KeyEvent"),c="keydown",u="keyup",h=r.prototype=s(i.prototype);h.onDown=function(e,t){return this.on(c+":"+e,t)},h.onceDown=function(e,t){return this.once(c+":"+e,t)},h.offDown=function(e,t){return this.off(c+":"+e,t)},h.onUp=function(e,t){return this.on(u+":"+e,t)},h.onceUp=function(e,t){return this.once(u+":"+e,t)},h.offUp=function(e,t){return this.off(u+":"+e,t)},h.isDown=function(e){return e+="",this._keysDown[e]||!1},h.isUp=function(e){return!this.isDown(e)},h.destroy=function(){return a(this._context,c,this._DOMKeyDown,!0),a(this._context,u,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,i.prototype.destroy.call(this),this},h._DOMKeyDown=function(e){var t=this._normalizeKeyboardEvent(e),n=t.keyCode+="";this._trackKeyDown(n),this.trigger(c+":"+n,t)},h._DOMKeyUp=function(e){var t=this._normalizeKeyboardEvent(e),n=t.keyCode+="";this._trackKeyUp(n),this.trigger(u+":"+n,t)},h._normalizeKeyboardEvent=function(e){return new l(e)},h._trackKeyUp=function(e){this._keysDown[e]&&(this._keysDown[e]=!1)},h._trackKeyDown=function(e){this._keysDown[e]||(this._keysDown[e]=!0)},t.exports=r},{"./internal/KeyEvent":45,"@marcom/ac-dom-events/utils/addEventListener":28,"@marcom/ac-dom-events/utils/removeEventListener":29,"@marcom/ac-event-emitter-micro":41,"@marcom/ac-object/create":56}],44:[function(e,t,n){"use strict";var r=e("./Keyboard");t.exports=new r},{"./Keyboard":43}],45:[function(e,t,n){"use strict";function r(e){this.originalEvent=e;var t;for(t in e)i.indexOf(t)===-1&&"function"!=typeof e[t]&&(this[t]=e[t]);this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}var i=["keyLocation"];r.prototype={preventDefault:function(){return"function"!=typeof this.originalEvent.preventDefault?void(this.originalEvent.returnValue=!1):this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}},t.exports=r},{}],46:[function(e,t,n){"use strict";t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],47:[function(e,t,n){"use strict";t.exports={Modal:e("./ac-modal-basic/Modal"),Renderer:e("./ac-modal-basic/Renderer"),classNames:e("./ac-modal-basic/classNames"),dataAttributes:e("./ac-modal-basic/dataAttributes")}},{"./ac-modal-basic/Modal":48,"./ac-modal-basic/Renderer":49,"./ac-modal-basic/classNames":50,"./ac-modal-basic/dataAttributes":51}],48:[function(e,t,n){"use strict";function r(e,t){c.call(this),this.options=a.defaults(h,e),this.renderer=new u(t),this.opened=!1,this._keysToClose=[l.ESCAPE],this._attachedKeysToClose=[],this.close=this.close.bind(this)}var i={addEventListener:e("@marcom/ac-dom-events/addEventListener"),removeEventListener:e("@marcom/ac-dom-events/removeEventListener"),target:e("@marcom/ac-dom-events/target")},o={getScrollX:e("@marcom/ac-dom-metrics/getScrollX"),getScrollY:e("@marcom/ac-dom-metrics/getScrollY")},a={create:e("@marcom/ac-object/create"),defaults:e("@marcom/ac-object/defaults")},s=e("@marcom/ac-keyboard"),l=e("@marcom/ac-keyboard/keyMap"),c=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=e("./Renderer"),h={retainScrollPosition:!1},m=r.prototype=a.create(c.prototype);m.open=function(){this.options.retainScrollPosition&&this._saveScrollPosition(),this.opened||(this._attachEvents(),this.trigger("willopen"),this.renderer.open(),this.opened=!0,this.trigger("open"))},m.close=function(e){var t,n;if(this.opened){if(e&&"click"===e.type&&(t=i.target(e),n=this.renderer.options.dataAttributes.close,!t.hasAttribute(n)))return;this.trigger("willclose"),this._removeEvents(),this.renderer.close(),this.options.retainScrollPosition&&this._restoreScrollPosition(),this.opened=!1,this.trigger("close")}},m.render=function(){this.renderer.render()},m.appendContent=function(e,t){this.renderer.appendContent(e,t)},m.removeContent=function(e){this.renderer.removeContent(e)},m.destroy=function(){this._removeEvents(),this.renderer.destroy();for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},m.addKeyToClose=function(e){var t=this._keysToClose.indexOf(e);t===-1&&(this._keysToClose.push(e),this._bindKeyToClose(e))},m.removeKeyToClose=function(e){var t=this._keysToClose.indexOf(e);t!==-1&&this._keysToClose.splice(t,1),this._releaseKeyToClose(e)},m._bindKeyToClose=function(e){var t=this._attachedKeysToClose.indexOf(e);t===-1&&(s.onUp(e,this.close),this._attachedKeysToClose.push(e))},m._releaseKeyToClose=function(e){var t=this._attachedKeysToClose.indexOf(e);t!==-1&&(s.offUp(e,this.close),this._attachedKeysToClose.splice(t,1))},m._removeEvents=function(){this.renderer.modalElement&&i.removeEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._releaseKeyToClose,this)},m._attachEvents=function(){this.renderer.modalElement&&i.addEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._bindKeyToClose,this)},m._restoreScrollPosition=function(){window.scrollTo(this._scrollX||0,this._scrollY||0)},m._saveScrollPosition=function(){this._scrollX=o.getScrollX(),this._scrollY=o.getScrollY()},t.exports=r},{"./Renderer":49,"@marcom/ac-dom-events/addEventListener":24,"@marcom/ac-dom-events/removeEventListener":25,"@marcom/ac-dom-events/target":27,"@marcom/ac-dom-metrics/getScrollX":30,"@marcom/ac-dom-metrics/getScrollY":31,"@marcom/ac-event-emitter-micro":41,"@marcom/ac-keyboard":44,"@marcom/ac-keyboard/keyMap":46,"@marcom/ac-object/create":56,"@marcom/ac-object/defaults":57}],49:[function(e,t,n){"use strict";var r={add:e("@marcom/ac-classlist/add"),remove:e("@marcom/ac-classlist/remove")},i={defaults:e("@marcom/ac-object/defaults")},o={remove:e("@marcom/ac-dom-nodes/remove"),isElement:e("@marcom/ac-dom-nodes/isElement")},a=e("./classNames"),s=e("./dataAttributes"),l={modalElement:null,contentElement:null,closeButton:null,classNames:a,dataAttributes:s},c=function(e){e=e||{},this.options=i.defaults(l,e),this.options.classNames=i.defaults(l.classNames,e.classNames),this.options.dataAttributes=i.defaults(l.dataAttributes,e.dataAttributes),this.modalElement=this.options.modalElement,this.contentElement=this.options.contentElement,this.closeButton=this.options.closeButton},u=c.prototype;u.render=function(){return o.isElement(this.modalElement)||(this.modalElement=this.renderModalElement(this.options.classNames.modalElement)),o.isElement(this.contentElement)||(this.contentElement=this.renderContentElement(this.options.classNames.contentElement)),this.closeButton!==!1&&(o.isElement(this.closeButton)||(this.closeButton=this.renderCloseButton(this.options.classNames.closeButton)),this.modalElement.appendChild(this.closeButton)),this.modalElement.appendChild(this.contentElement),document.body.appendChild(this.modalElement),this.modalElement},u.renderCloseButton=function(e){var t;return e=e||this.options.classNames.closeButton,t=this._renderElement("button",e),t.setAttribute(this.options.dataAttributes.close,""),t},u.renderModalElement=function(e){return e=e||this.options.classNames.modalElement,this._renderElement("div",e)},u.renderContentElement=function(e){return e=e||this.options.classNames.contentElement,this._renderElement("div",e)},u.appendContent=function(e,t){o.isElement(e)&&(void 0===arguments[1]?this.contentElement.appendChild(e):o.isElement(t)&&t.appendChild(e))},u.removeContent=function(e){e?this.modalElement.contains(e)&&o.remove(e):this._emptyContent()},u.open=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement),t=[this.modalElement].concat(this.options.classNames.modalOpen);r.add.apply(null,e),r.add.apply(null,t)},u.close=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement),t=[this.modalElement].concat(this.options.classNames.modalOpen);r.remove.apply(null,e),r.remove.apply(null,t)},u.destroy=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement);this.modalElement&&document.body.contains(this.modalElement)&&(this.close(),document.body.removeChild(this.modalElement)),r.remove.apply(null,e);for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},u._renderElement=function(e,t){var n=document.createElement(e),i=[n];return t&&(i=i.concat(t)),r.add.apply(null,i),n},u._emptyContent=function(){this.contentElement.innerHTML=""},t.exports=c},{"./classNames":50,"./dataAttributes":51,"@marcom/ac-classlist/add":12,"@marcom/ac-classlist/remove":17,"@marcom/ac-dom-nodes/isElement":38,"@marcom/ac-dom-nodes/remove":40,"@marcom/ac-object/defaults":57}],50:[function(e,t,n){"use strict";t.exports={modalElement:"modal",modalOpen:"modal-open",documentElement:"has-modal",contentElement:"modal-content",closeButton:"modal-close"}},{}],51:[function(e,t,n){"use strict";t.exports={close:"data-modal-close"}},{}],52:[function(e,t,n){"use strict";t.exports={Modal:e("./ac-modal/Modal"),createStandardModal:e("./ac-modal/factory/createStandardModal"),createFullViewportModal:e("./ac-modal/factory/createFullViewportModal")}},{"./ac-modal/Modal":53,"./ac-modal/factory/createFullViewportModal":54,"./ac-modal/factory/createStandardModal":55}],53:[function(e,t,n){"use strict";function r(e){o.call(this),this.options=e||{},this._modal=new i(e,this.options.renderer),this.opened=!1,this._render(),this.closeButton=this._modal.renderer.closeButton,this.modalElement=this._modal.renderer.modalElement,this.contentElement=this._modal.renderer.contentElement,this.modalElement.setAttribute("role","dialog"),this.closeButton.setAttribute("aria-label","Close"),this._circularTab=new a(this.modalElement),this._onWillOpen=this._onWillOpen.bind(this),this._onOpen=this._onOpen.bind(this),this._onWillClose=this._onWillClose.bind(this),this._onClose=this._onClose.bind(this),this._bindEvents()}var i=e("@marcom/ac-modal-basic").Modal,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("@marcom/ac-accessibility/CircularTab"),s=r.prototype=Object.create(o.prototype);s.open=function(){this._modal.open(),this.opened=this._modal.opened},s.close=function(){this._modal.close()},s.appendContent=function(e){this._modal.appendContent(e)},s.removeContent=function(e){this._modal.removeContent(e)},s.destroy=function(){this._releaseEvents(),this._modal.destroy(),this._removeModalFocus(),this._circularTab.destroy(),this._focusObj=null;for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},s.addKeyToClose=function(e){this._modal.addKeyToClose(e)},s.removeKeyToClose=function(e){this._modal.removeKeyToClose(e)},s._render=function(){this._modal.render(),this._modal.renderer.modalElement.setAttribute("aria-hidden","true")},s._bindEvents=function(){this._modal.on("willopen",this._onWillOpen),this._modal.on("open",this._onOpen),this._modal.on("willclose",this._onWillClose),this._modal.on("close",this._onClose)},s._releaseEvents=function(){this._modal.off("willopen",this._onWillOpen),this._modal.off("open",this._onOpen),this._modal.off("willclose",this._onWillClose),this._modal.off("close",this._onClose)},s._onWillOpen=function(){this.trigger("willopen")},s._onOpen=function(){this.opened=this._modal.opened,this._giveModalFocus(),this.trigger("open")},s._onWillClose=function(){this.trigger("willclose"),this._removeModalFocus()},s._onClose=function(){this.opened=this._modal.opened,this.trigger("close")},s._giveModalFocus=function(){this.modalElement.removeAttribute("aria-hidden"),this._activeElement=document.activeElement,this.closeButton.focus(),this._circularTab.start()},s._removeModalFocus=function(){this._circularTab.stop(),this.modalElement.setAttribute("aria-hidden","true"),this._activeElement&&(this._activeElement.focus(),this._activeElement=null)},t.exports=r},{"@marcom/ac-accessibility/CircularTab":1,"@marcom/ac-event-emitter-micro":41,"@marcom/ac-modal-basic":47}],54:[function(e,t,n){"use strict";function r(e){var t=new i(a);return e&&t.appendContent(e),t}var i=e("../Modal"),o=e("@marcom/ac-modal-basic").classNames,a={retainScrollPosition:!0,renderer:{classNames:{documentElement:[o.documentElement].concat("has-modal-full-viewport"),modalElement:[o.modalElement].concat("modal-full-viewport")}}};t.exports=r},{"../Modal":53,"@marcom/ac-modal-basic":47}],55:[function(e,t,n){"use strict";function r(e){var t=new i(l);e&&t.appendContent(e);var n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),c=document.createElement("div");return s.add(n,"content-table"),s.add(r,"content-cell"),s.add(o,"content-wrapper"),s.add(c,"content-padding","large-8","medium-10"),t.modalElement.setAttribute(a.close,""),o.setAttribute(a.close,""),r.setAttribute(a.close,""),n.appendChild(r),r.appendChild(o),o.appendChild(c),t.modalElement.appendChild(n),c.appendChild(t.contentElement),c.appendChild(t.closeButton),t}var i=e("../Modal"),o=e("@marcom/ac-modal-basic").classNames,a=e("@marcom/ac-modal-basic").dataAttributes,s={add:e("@marcom/ac-classlist/add")},l={renderer:{classNames:{documentElement:[o.documentElement].concat("has-modal-standard"),modalElement:[o.modalElement].concat("modal-standard")}}};t.exports=r},{"../Modal":53,"@marcom/ac-classlist/add":12,"@marcom/ac-modal-basic":47}],56:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){};t.exports=function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(null===e||"object"!==("undefined"==typeof e?"undefined":r(e)))throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(e):(i.prototype=e,new i)}},{}],57:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./extend");t.exports=function(e,t){if("object"!==("undefined"==typeof e?"undefined":r(e)))throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!==("undefined"==typeof t?"undefined":r(t)))throw new TypeError("defaults: options must be a typeof object");return i({},e,t)}},{"./extend":58}],58:[function(e,t,n){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var r=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach(function(e){if(null!=e)for(var n in e)r.call(e,n)&&(t[n]=e[n])}),t}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],59:[function(e,t,n){"use strict";var r=e("./utils/eventTypeAvailable"),i=e("./shared/camelCasedEventTypes"),o=e("./shared/windowFallbackEventTypes"),a=e("./shared/prefixHelper"),s={};t.exports=function l(e,t){var n,c,u;if(t=t||"div",e=e.toLowerCase(),t in s||(s[t]={}),c=s[t],e in c)return c[e];if(r(e,t))return c[e]=e;if(e in i)for(u=0;u<i[e].length;u++)if(n=i[e][u],r(n.toLowerCase(),t))return c[e]=n;for(u=0;u<a.evt.length;u++)if(n=a.evt[u]+e,r(n,t))return a.reduce(u),c[e]=n;return"window"!==t&&o.indexOf(e)?c[e]=l(e,"window"):c[e]=!1}},{"./shared/camelCasedEventTypes":60,"./shared/prefixHelper":61,"./shared/windowFallbackEventTypes":62,"./utils/eventTypeAvailable":63}],60:[function(e,t,n){"use strict";t.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]
}},{}],61:[function(e,t,n){"use strict";var r=["-webkit-","-moz-","-ms-"],i=["Webkit","Moz","ms"],o=["webkit","moz","ms"],a=function(){this.initialize()},s=a.prototype;s.initialize=function(){this.reduced=!1,this.css=r,this.dom=i,this.evt=o},s.reduce=function(e){this.reduced||(this.reduced=!0,this.css=[this.css[e]],this.dom=[this.dom[e]],this.evt=[this.evt[e]])},t.exports=new a},{}],62:[function(e,t,n){"use strict";t.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],63:[function(e,t,n){"use strict";var r={window:window,document:document};t.exports=function(e,t){var n;return e="on"+e,t in r||(r[t]=document.createElement(t)),n=r[t],e in n||"setAttribute"in n&&(n.setAttribute(e,"return;"),"function"==typeof n[e])}},{}],64:[function(e,t,n){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],65:[function(e,t,n){"use strict";function r(e){e=e||{},o.call(this),this.id=s.getNewID(),this.executor=e.executor||a,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("./sharedRAFExecutorInstance"),s=e("./sharedRAFEmitterIDGeneratorInstance");i=r.prototype=Object.create(o.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,o.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=r},{"./sharedRAFEmitterIDGeneratorInstance":74,"./sharedRAFExecutorInstance":75,"@marcom/ac-event-emitter-micro":41}],66:[function(e,t,n){"use strict";function r(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new o,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}var i,o=e("@marcom/ac-event-emitter-micro/EventEmitterMicro");i=r.prototype,i.frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=r},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":42}],67:[function(e,t,n){"use strict";var r=e("./SingleCallRAFEmitter"),i=function(e){this.phase=e,this.rafEmitter=new r,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},o=i.prototype;o.requestAnimationFrame=function(e,t){return t===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},o.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},o._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},o._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},o._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},o._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},o._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},o._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},o._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},o._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=i},{"./SingleCallRAFEmitter":69}],68:[function(e,t,n){"use strict";var r=e("./RAFInterface"),i=function(){this.events={}},o=i.prototype;o.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].requestAnimationFrame},o.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":67}],69:[function(e,t,n){"use strict";var r=e("./RAFEmitter"),i=function(e){r.call(this,e)},o=i.prototype=Object.create(r.prototype);o._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":65}],70:[function(e,t,n){"use strict";function r(e,t){a.call(this),t=t||{},this._fps=e||0,this._delta=0,this._currentFps=0,this._rafEmitter=t.rafEmitter||new o,this._lastThrottledTime=0,this._didEmitFrameData=!1,this._rafEmitterEvent=null,this._shouldDraw=!1,this._boundOnRAFEmitterUpdate=this._onRAFEmitterUpdate.bind(this),this._boundOnRAFEmitterDraw=this._onRAFEmitterDraw.bind(this),this._boundOnRAFEmitterStop=this._onRAFEmitterStop.bind(this),this._rafEmitter.on("update",this._boundOnRAFEmitterUpdate),this._rafEmitter.on("draw",this._boundOnRAFEmitterDraw),this._rafEmitter.on("stop",this._boundOnRAFEmitterStop)}var i,o=e("./RAFEmitter"),a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro;i=r.prototype=Object.create(a.prototype),i.setFps=function(e){return e!==this._fps&&(this._fps=e,!0)},i.getFps=function(){return this._fps},i.run=function(){return this._rafEmitter.run()},i.cancel=function(){return this._rafEmitter.cancel()},i.willRun=function(){return this._rafEmitter.willRun()},i.isRunning=function(){return this._rafEmitter.isRunning()},i.destroy=function(){var e=this._rafEmitter.destroy();return a.prototype.destroy.call(this),this._rafEmitter=null,this._boundOnRAFEmitterUpdate=null,this._boundOnRAFEmitterDraw=null,this._boundOnRAFEmitterStop=null,this._rafEmitterEvent=null,e},i._onRAFEmitterUpdate=function(e){if(0===this._lastThrottledTime&&(this._lastThrottledTime=this._rafEmitter.executor.lastFrameTime),this._delta=e.time-this._lastThrottledTime,!this._fps)throw new TypeError("FPS is not defined.");return this._currentFps=1e3/this._delta,this._currentFps>this._fps?void this._rafEmitter.run():(this._rafEmitterEvent=Object.assign({},e),this._rafEmitterEvent.delta=this._delta,this._rafEmitterEvent.fps=this._currentFps,this._lastThrottledTime=this._rafEmitterEvent.time,this._shouldDraw=!0,this._didEmitFrameData||(this.trigger("start",this._rafEmitterEvent),this._didEmitFrameData=!0),void this.trigger("update",this._rafEmitterEvent))},i._onRAFEmitterDraw=function(){this._shouldDraw&&(this._shouldDraw=!1,this.trigger("draw",this._rafEmitterEvent))},i._onRAFEmitterStop=function(){this._lastThrottledTime=0,this._didEmitFrameData=!1,this.trigger("stop",this._rafEmitterEvent)},t.exports=r},{"./RAFEmitter":65,"@marcom/ac-event-emitter-micro":41}],71:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.cancelAnimationFrame("update")},{"./RAFInterfaceController":68}],72:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("draw")},{"./RAFInterfaceController":68}],73:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("external")},{"./RAFInterfaceController":68}],74:[function(e,t,n){"use strict";var r=e("@marcom/ac-shared-instance").SharedInstance,i=e("https://www.apple.com/.release-info.js").majorVersionNumber,o=function(){this._currentID=0};o.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=r.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",i,o)},{"../.release-info.js":64,"@marcom/ac-shared-instance":77}],75:[function(e,t,n){"use strict";var r=e("@marcom/ac-shared-instance").SharedInstance,i=e("https://www.apple.com/.release-info.js").majorVersionNumber,o=e("./RAFExecutor");t.exports=r.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",i,o)},{"../.release-info.js":64,"./RAFExecutor":66,"@marcom/ac-shared-instance":77}],76:[function(e,t,n){"use strict";var r=e("./RAFInterfaceController");t.exports=r.requestAnimationFrame("update")},{"./RAFInterfaceController":68}],77:[function(e,t,n){"use strict";t.exports={SharedInstance:e("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":78}],78:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=window,o="AC",a="SharedInstance",s=i[o],l=function(){var e={};return{get:function(t,n){var r=null;return e[t]&&e[t][n]&&(r=e[t][n]),r},set:function(t,n,r){return e[t]||(e[t]={}),"function"==typeof r?e[t][n]=new r:e[t][n]=r,e[t][n]},share:function(e,t,n){var r=this.get(e,t);return r||(r=this.set(e,t,n)),r},remove:function(t,n){var i="undefined"==typeof n?"undefined":r(n);if("string"===i||"number"===i){if(!e[t]||!e[t][n])return;return void(e[t][n]=null)}e[t]&&(e[t]=null)}}}();s||(s=i[o]={}),s[a]||(s[a]=l),t.exports=s[a]},{}],79:[function(e,t,n){"use strict";var r=e("./ac-threejs-loader/ThreeJSLoader");t.exports=new r},{"./ac-threejs-loader/ThreeJSLoader":80}],80:[function(e,t,n){"use strict";function r(e){this._boundPromiseLoad=this._promiseLoad.bind(this)}var i=e("@marcom/ac-cname").cname,o=r.prototype;o.versionNumber=71,o.didCreateScriptTag=!1,o.THREE_GLOBAL_VARIABLE_NAME="THREE",o.BASE_PATH="/ac/three",o.FILE_NAME="three",o.FILE_EXTENSION="js",o.load=function(e){return e=e||{},"number"==typeof e.versionNumber&&(this.versionNumber=e.versionNumber),new Promise(this._boundPromiseLoad)},o.isLoaded=function(){return!!window[this.THREE_GLOBAL_VARIABLE_NAME]},o.getFilePath=function(){return i(this.BASE_PATH+"/"+this.versionNumber+"/"+this.FILE_NAME+"."+this.FILE_EXTENSION)},o._promiseLoad=function(e,t){function n(){this._handleResolve(e),this.script.removeEventListener("load",r),r=e=null}if(this.isLoaded())return void this._handleResolve(e);var r=n.bind(this);if(this.didCreateScriptTag)this.script.addEventListener("load",r);else{var i=document.createElement("script");i.src=this.getFilePath(),i.async=!0,i.addEventListener("load",r),document.body.appendChild(i),this.didCreateScriptTag=!0,this.script=i}},o._handleResolve=function(e){e(window[this.THREE_GLOBAL_VARIABLE_NAME])},t.exports=r},{"@marcom/ac-cname":18}],81:[function(e,t,n){"use strict";t.exports=function(e){e=e||window.location.search,e=e.replace(/^[^?]*\?/,"");var t="&",n=e?e.split(t):[],r={},i="=",o=new RegExp(i);return n.forEach(function(e){var t,n;if(o.test(e)){var a=e.split(i,2);t=a[0],n=a[1]}else t=e,n=null;r[t]=n}),r}},{}],82:[function(e,t,n){"use strict";function r(e){var t=e.port,n=new RegExp(":"+t);return t&&!n.test(e.href)&&n.test(e.host)}var i=e("./parseSearchParams");t.exports=function(e){var t,n="",o=!1;return e?window.URL&&"function"==typeof window.URL?t=new URL(https://www.apple.com/apple-card/e,window.location):(t=document.createElement("a"),t.href=e,t.href=t.href,r(t)&&(n=t.host.replace(new RegExp(":"+t.port),""),o=!0)):t=window.location,{hash:t.hash,host:n||t.host,hostname:t.hostname,href:t.href,origin:t.origin||t.protocol+"//"+(n||t.host),pathname:t.pathname,port:o?"":t.port,protocol:t.protocol,search:t.search,searchParams:i(t.search)}}},{"./parseSearchParams":81}],83:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("./Model/AnimSystemModel"),c=e("./Keyframes/Keyframe"),u=e("./Keyframes/KeyframeCSSClass"),h=e("./Keyframes/KeyframeDiscreteEvent"),m=e("./ScrollGroup"),f=e("./TimeGroup"),d=e("./utils/arrayToObject"),p={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),cancelUpdate:e("@marcom/ac-raf-emitter/cancelUpdate"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},v=null,y=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(v)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return v=e,e.groups=[],e.scrollSystems=[],e.timeSystems=[],e._forceUpdateRAFId=-1,e.setupEvents(),e}return o(t,e),a(t,[{key:"initialize",value:function(){this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes()}},{key:"destroy",value:function(){this.groups.forEach(function(e){return e.destroy()}),this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(l.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate)}},{key:"createTimeGroup",value:function(e){var t=new f(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new m(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"removeGroup",value:function(e){var t=this;e.keyframeControllers.forEach(function(t){return e.removeKeyframeController(t)}),p.update(function(){var n=t.groups.indexOf(e);n!==-1&&t.groups.splice(n,1),n=t.scrollSystems.indexOf(e),n!==-1&&t.scrollSystems.splice(n,1),n=t.timeSystems.indexOf(e),n!==-1&&t.timeSystems.splice(n,1),p.update(function(){return e.destroy()})})}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(t){return e.createScrollGroup(t)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(t){return e.createTimeGroup(t)}),this.trigger(l.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"createDOMKeyframes",value:function(){var e=this,t=[];[c.DATA_ATTRIBUTE,u.DATA_ATTRIBUTE,h.DATA_ATTRIBUTE].forEach(function(e){for(var n=0;n<12;n++)t.push(e+(0===n?"":"-"+(n-1)))});for(var n=0;n<t.length;n++)for(var r=t[n],i=document.querySelectorAll("["+r+"]"),o=0;o<i.length;o++){var a=i[o],s=JSON.parse(a.getAttribute(r));this.addKeyframe(a,s)}p.update(function(){return e.groups.forEach(function(e){return e.onKeyframesDirty({preventOnScroll:!0})})},!0),p.update(function(){e.groups.forEach(function(e){return e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)}),e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),e.groups.forEach(function(e){return e.reconcile()}),e.onScroll()},!0)}},{key:"initializeModel",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset,l.pageMetrics.breakpoint=l.getBreakpoint();var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY}},{key:"setupEvents",value:function(){this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeImmediate)}},{key:"determineActiveKeyframes",value:function(){for(var e=d(Array.from(document.documentElement.classList)),t=0,n=this.groups.length;t<n;t++)this.groups[t].determineActiveKeyframes(e)}},{key:"onScroll",value:function(){l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll();this.trigger(l.PageEvents.ON_SCROLL,l.pageMetrics)}},{key:"onResizeImmediate",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY,window.clearTimeout(l.RESIZE_TIMEOUT),l.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(l.PageEvents.ON_RESIZE_IMMEDIATE,l.pageMetrics)}},{key:"onResizedDebounced",value:function(){var e=this;p.update(function(){var t=l.pageMetrics.breakpoint,n=l.getBreakpoint(),r=n!==t;if(r){l.pageMetrics.previousBreakpoint=t,l.pageMetrics.breakpoint=n;for(var i=0,o=e.groups.length;i<o;i++)e.groups[i]._onBreakpointChange();e.trigger(l.PageEvents.ON_BREAKPOINT_CHANGE,l.pageMetrics)}for(var a=0,s=e.groups.length;a<s;a++)e.groups[a].forceUpdate({recalculateActiveKeyframes:r,waitForNextUpdate:!1});e.trigger(l.PageEvents.ON_RESIZE_DEBOUNCED,l.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.recalculateActiveKeyframes,r=void 0!==n&&n,i=t.waitForNextUpdate,o=void 0===i||i;this._forceUpdateRAFId!==-1&&p.cancelUpdate(this._forceUpdateRAFId);var a=function(){for(var t=0,n=e.groups.length;t<n;t++){var i=e.groups[t];i.forceUpdate({recalculateActiveKeyframes:r,waitForNextUpdate:!1})}return-1};this._forceUpdateRAFId=o?p.update(a,!0):a()}},{key:"addKeyframe",value:function(e,t){var n=this.getGroupForTarget(e);return n.addKeyframe(e,t)}},{key:"getGroupForTarget",value:function(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;for(var t=e;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}}]),t}(s);t.exports=new y},{"./Keyframes/Keyframe":85,"./Keyframes/KeyframeCSSClass":86,"./Keyframes/KeyframeDiscreteEvent":87,"./Model/AnimSystemModel":88,"./ScrollGroup":97,"./TimeGroup":98,"./utils/arrayToObject":99,"@marcom/ac-event-emitter-micro":41,"@marcom/ac-raf-emitter/RAFEmitter":65,"@marcom/ac-raf-emitter/cancelUpdate":71,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/external":73,"@marcom/ac-raf-emitter/update":76}],84:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./Model/AnimSystemModel"),c=(e("./Keyframes/Keyframe"),e("./Keyframes/KeyframeCSSClass")),u=e("./Model/InferKeyframeFromProps"),h=e("./utils/arrayToObject"),m=e("./Model/UUID"),f=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,d=e("@marcom/decompose-css-transform"),p={update:e("@marcom/ac-raf-emitter/update"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},v=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.uuid=m(),o.group=e,o.element=n,o._ownerIsElement=o.element instanceof Element,o._ownerIsElement?o.friendlyName=o.element.tagName+"."+Array.from(o.element.classList).join("."):o.friendlyName=o.element.friendlyName||o.uuid,o.element._animInfo=o.element._animInfo||new l.AnimInfo(e,o),o.element._animInfo.controller=o,o.tweenProps={},o.eventObject=new l.EventObject(o),o.needsStyleUpdate=!1,o.needsClassUpdate=!1,o.elementMetrics=o.group.metrics.add(o.element),o._parentElementMetrics=null,o.attributes=[],o.keyframes={},o._allKeyframes=[],o._activeKeyframes=[],o.keyframesRequiringDispatch=[],o.updateCachedValuesFromElement(),o.boundsMin=0,o.boundsMax=0,o}return o(t,e),a(t,[{key:"destroy",value:function(){this.element._animInfo&&this.element._animInfo.controller===this&&(this.element._animInfo.controller=null,this.element._animInfo=null),this._parentElementMetrics=null,this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var e=0;e<this._allKeyframes.length;e++)this._allKeyframes[e].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){if(this._ownerIsElement){var e=getComputedStyle(this.element),t=d(this.element,!0),n=l.KeyframeDefaults.epsilon,r=!1;this.tweenProps.x=new l.TargetValue(t.translation[0],n,r),this.tweenProps.y=new l.TargetValue(t.translation[1],n,r),this.tweenProps.z=new l.TargetValue(t.translation[2],n,r),this.tweenProps.rotation=new l.TargetValue(t.eulerRotation[2],n,r),this.tweenProps.rotationX=new l.TargetValue(t.eulerRotation[0],n,r),this.tweenProps.rotationY=new l.TargetValue(t.eulerRotation[1],n,r),this.tweenProps.rotationZ=new l.TargetValue(t.eulerRotation[2],n,r),this.tweenProps.scale=new l.TargetValue(t.scale[0],n,r),this.tweenProps.scaleX=new l.TargetValue(t.scale[0],n,r),this.tweenProps.scaleY=new l.TargetValue(t.scale[1],n,r),this.tweenProps.opacity=new l.TargetValue(parseFloat(e.opacity),n,r)}}},{key:"addKeyframe",value:function(e){var t=u(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var n=new t(this,e);return n.parseOptions(e),n.id=this._allKeyframes.length,this._allKeyframes.push(n),n}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.tweenProps[n],i=Math.abs(r.current-r.target);
if(i>r.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t],i=this.keyframes[this.attributes[t]];if(1!==i.length){var o=this.getNearestKeyframeForAttribute(e,r);o&&o.updateLocalProgress(e)}else i[0].updateLocalProgress(e)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.getNearestKeyframeForAttribute(this.group.timelines.local,n);r.updateLocalProgress(this.group.timelines.local),r.snapAtCreation&&r.reconcile(n)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||h(Array.from(document.documentElement.classList));var n=this._activeKeyframes,r=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var i=0;i<this._allKeyframes.length;i++){var o=this._allKeyframes[i];if(o.setEnabled(e)){this._activeKeyframes.push(o);for(var a in o.animValues)this.keyframes[a]=this.keyframes[a]||[],this.keyframes[a].push(o),this.attributes.indexOf(a)===-1&&this.attributes.push(a)}}var s=n.filter(function(e){return t._activeKeyframes.indexOf(e)===-1});if(0!==s.length){var l=r.filter(function(e){return t.attributes.indexOf(e)===-1});0!==l.length&&this._ownerIsElement&&p.external(function(){var e=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],n=l.filter(function(t){return e.indexOf(t)!==-1});n.length>0&&t.element.style.removeProperty("transform");for(var r=0,i=l.length;r<i;++r){var o=l[r],a=t.tweenProps[o];a.current=a.target=a.initialValue,"opacity"===o&&t.element.style.removeProperty("opacity")}for(var u=0,h=s.length;u<h;++u){var m=s[u];m instanceof c&&m._unapply()}},!0)}}},{key:"onDOMRead",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t],i=this.getNearestKeyframeForAttribute(e.local,r);i&&i.onDOMRead(r)}}},{key:"onDOMWrite",value:function(){this._ownerIsElement?this.onDOMWriteForElement():this.onDOMWriteForObject(),this.handleEventDispatch()}},{key:"onDOMWriteForObject",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e];this.element[n]=this.tweenProps[n].current}}},{key:"onDOMWriteForElement",value:function(){var e=this.tweenProps,t="";if("undefined"!=typeof this.keyframes.z?t+="translate3d("+e.x.current+"px,"+e.y.current+"px, "+e.z.current+"px)":"undefined"==typeof this.keyframes.x&&"undefined"==typeof this.keyframes.y||(t+="translate("+e.x.current+"px,"+e.y.current+"px)"),"undefined"!=typeof this.keyframes.rotation?t+="rotate("+e.rotation.current+"deg) ":("undefined"!=typeof this.keyframes.rotationX&&(t+="rotateX("+e.rotationX.current+"deg) "),"undefined"!=typeof this.keyframes.rotationY&&(t+="rotateY("+e.rotationY.current+"deg) "),"undefined"!=typeof this.keyframes.rotationZ&&(t+="rotateZ("+e.rotationZ.current+"deg) ")),"undefined"!=typeof this.keyframes.scale)t+="scale("+e.scale.current+","+e.scale.current+") ";else{var n="undefined"!=typeof this.keyframes.scaleX,r="undefined"!=typeof this.keyframes.scaleY;(n||r)&&(t+="scale("+e.scaleX.current+","+e.scaleY.current+") ")}if(""!==t&&(this.element.style.transform=t),"undefined"!=typeof this.keyframes.opacity&&(this.element.style.opacity=e.opacity.current),this.needsStyleUpdate){for(var i in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[i]&&(this.element.style[i]=this.tweenProps.targetStyles[i]),this.tweenProps.targetStyles[i]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var n=this.keyframesRequiringDispatch[e];n.needsEventDispatch=!1,this.eventObject.keyframe=n,this.eventObject.pageMetrics=l.pageMetrics,this.eventObject.event=n.event,this.trigger(n.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,n=this._activeKeyframes.length;t<n;t++)this._activeKeyframes[t].updateAnimationConstraints();this.attributes.forEach(function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(l.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=this,t=this._activeKeyframes.map(function(e){return e.relativeTo}),n=new Set(t);n.add(this.element),n.forEach(function(t){return e.group.metrics.refreshMetrics(t)}),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.keyframes[n],i=r[0];if(!(i.keyframeType>l.KeyframeTypes.InterpolationForward))for(var o=0,a=r.length;o<a;o++){var s=r[o];if(null===s.jsonProps[n][0]){if(0===o)throw new RangeError("AnimSystem - earliest keyframe cannot defer it's beginning value! "+n+":[null,"+s.jsonProps[n][1]+"]");s.animValues[n][0]=r[o-1].animValues[n][1]}if(null===s.jsonProps[n][1]){if(o===a-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! "+n+":["+s.jsonProps[n][0]+",null]");s.animValues[n][1]=r[o+1].animValues[n][0]}}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,n=this.attributes.length;t<n;t++)for(var r=this.keyframes[this.attributes[t]],i=0;i<r.length;i++){var o=r[i];this.boundsMin=Math.min(o.start,this.boundsMin),this.boundsMax=Math.max(o.end,this.boundsMax),e.min=Math.min(o.start,e.min),e.max=Math.max(o.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){var n=null,r=Number.POSITIVE_INFINITY,i=this.keyframes[t];if(void 0===i)return null;var o=i.length;if(0===o)return null;if(1===o)return i[0];for(var a=0;a<o;a++){var s=i[a];if(s.isInRange(e)){n=s;break}var l=Math.min(Math.abs(e-s.start),Math.abs(e-s.end));l<r&&(r=l,n=s)}return n}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateKeyframe",value:function(e,t){var n=this;e.parseOptions(t),e.updateAnimationConstraints(),this.group.keyframesDirty=!0,p.update(function(){n.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,e),n.group.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}},{key:"removeKeyframe",value:function(e){var t=this._allKeyframes.indexOf(e);t!==-1&&(this._allKeyframes.splice(t,1),this.group.keyframesDirty=!0)}},{key:"updateAnimation",value:function(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}]),t}(f);Object.defineProperty(v.prototype,"parentElementMetrics",{get:function(){return null===this._parentElementMetrics&&(this._parentElementMetrics=this.group.metrics.add(this.element.parentElement)),this._parentElementMetrics}}),t.exports=v},{"./Keyframes/Keyframe":85,"./Keyframes/KeyframeCSSClass":86,"./Model/AnimSystemModel":88,"./Model/InferKeyframeFromProps":91,"./Model/UUID":92,"./utils/arrayToObject":99,"@marcom/ac-event-emitter-micro":41,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/external":73,"@marcom/ac-raf-emitter/update":76,"@marcom/decompose-css-transform":106}],85:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../Model/AnimSystemModel"),a=e("@marcom/sm-math-utils"),s=e("../Model/EasingFunctions"),l=e("../Model/UnitBezier"),c=e("../utils/arrayToObject"),u=function(){function e(t,n){r(this,e),this.controller=t,this.relativeTo=t.element,this.jsonProps=n,this.ease=o.KeyframeDefaults.ease,this.easeFunctionString=o.KeyframeDefaults.easeFunctionString,this.easeFunction=s[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=o.KeyframeTypes.Interpolation,this.hold=!1}return i(e,[{key:"destroy",value:function(){this.controller=null,this.relativeTo=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(e){if(this.jsonProps=e,""!==e.relativeTo&&e.relativeTo?e.relativeTo&&(this.relativeTo=this.controller.group.element.querySelector(e.relativeTo)||document.querySelector(e.relativeTo),null===this.relativeTo&&(console.warn("Keyframe for",this.controller.element.className," .relativeTo failed to find "+e.relativeTo+"' via querySelector"),this.relativeTo=this.controller.element),this.controller.group.metrics.add(this.relativeTo)):this.relativeTo=this.controller.element,e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunction=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,this.easeFunction=s[e.easeFunction],!s.hasOwnProperty(e.easeFunction)){var t=l.fromCSSString(e.easeFunction);t?this.easeFunction=t:console.error("Keyframe parseOptions cannot find EasingFunction named '"+e.easingFunction+"'")}for(var n in e)if(o.KeyframeJSONReservedWords.indexOf(n)===-1){var r=e[n];if(Array.isArray(r)){if(this.animValues[n]=this.controller.group.expressionParser.parse(this,r),void 0===this.controller.tweenProps[n]||!this.controller._ownerIsElement){var i=0;this.controller._ownerIsElement||(i=this.controller.element[n]);var a=new o.TargetValue(i,o.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[n]=a}var c=this.controller.tweenProps[n];if(e.epsilon)c.epsilon=e.epsilon;else{var u=Math.abs(this.animValues[n][0]-this.animValues[n][1]),h=Math.min(.001*u,c.epsilon,o.KeyframeDefaults.epsilon);c.epsilon=Math.max(h,1e-4)}}}this.keyframeType=this.hold?o.KeyframeTypes.InterpolationForward:o.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e>this.end)return this.localT=1,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),n=this.hold?this.localT:0;this.localT=a.clamp(t,n,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],n=this.controller.tweenProps[e];n.initialValue=t[0],n.target=t[0]+this.curvedT*(t[1]-t[0]),n.current!==n.target&&(n.current=n.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;this.ease=1;for(var n in this.animValues)this.reconcile(n);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],n=this.controller.tweenProps[e];n.target=t[0]+this.curvedT*(t[1]-t[0]);var r=n.current;n.current+=(n.target-n.current)*this.ease;var i=n.current-n.target;i<n.epsilon&&i>-n.epsilon&&(n.current=n.target,i=0),""===this.event||this.needsEventDispatch||(i>n.epsilon||i<-n.epsilon||0===i&&r!==n.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||c(Array.from(document.documentElement.classList));var t=this.breakpointMask.indexOf(o.pageMetrics.breakpoint)!==-1,n=!1;return this.disabledWhen.length>0&&(n=this.disabledWhen.some(function(t){return"undefined"!=typeof e[t]})),this.isEnabled=t&&!n,this.isEnabled}},{key:"updateAnimationConstraints",value:function(){this.start=this.controller.group.timeParser.parse(this,this.jsonProps.start),this.end=this.controller.group.timeParser.parse(this,this.jsonProps.end),this.updateAnimatedValueConstraints()}},{key:"updateAnimatedValueConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parse(this,t)}}}]),e}();u.DATA_ATTRIBUTE="data-anim-tween",t.exports=u},{"../Model/AnimSystemModel":88,"../Model/EasingFunctions":89,"../Model/UnitBezier":93,"../utils/arrayToObject":99,"@marcom/sm-math-utils":121}],86:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./Keyframe"),c=e("https://www.apple.com/Model/AnimSystemModel.js"),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.keyframeType=c.KeyframeTypes.CSSClass,o._triggerType=t.TRIGGER_TYPE_CSS_CLASS,o.cssClass="",o.friendlyName="",o.style={on:null,off:null},o.toggle=!1,o.isApplied=!1,o}return o(t,e),s(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var n in this.style.on)this.style.off[n]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var r=getComputedStyle(this.controller.element);this.isApplied=!0;for(var i in this.style.on)if(r[i]!==this.style.on[i]){this.isApplied=!1;break}}l.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new c.TargetValue(0,1,(!1))),this.keyframeType=c.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==a(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==a(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(e,t){}},{key:"onDOMRead",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(l);u.TRIGGER_TYPE_CSS_CLASS=0,u.TRIGGER_TYPE_STYLE_PROPERTY=1,u.DATA_ATTRIBUTE="data-anim-classname",t.exports=u},{"../Model/AnimSystemModel.js":88,"./Keyframe":85}],87:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:h(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./Keyframe"),c=e("https://www.apple.com/Model/AnimSystemModel.js"),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.keyframeType=c.KeyframeTypes.Event,o.isApplied=!1,o.hasDuration=!1,o.isCurrentlyInRange=!1,o}return o(t,e),a(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new c.TargetValue(0,1,(!1))),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=c.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,n=e>=this.start&&e<=this.end;if(t===n)return;return n&&!t?this._trigger(this.event+":enter"):t&&!n&&this._trigger(this.event+":exit"),void(this.isCurrentlyInRange=n)}!this.isApplied&&e>=this.start?(this._trigger(this.event),this.isApplied=!0):this.isApplied&&e<this.start&&(this._trigger(this.event+":reverse"),this.isApplied=!1)}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"updateAnimationConstraints",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateAnimationConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"reset",value:function(e){this.isApplied=!1,this.isCurrentlyInRange=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e)}},{key:"onDOMRead",value:function(e,t){}},{key:"reconcile",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(l);u.DATA_ATTRIBUTE="data-anim-event",t.exports=u},{"../Model/AnimSystemModel.js":88,"./Keyframe":85}],88:[function(e,t,n){"use strict";var r={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"GuiPosition-0"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",longName:"small",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",longName:"medium",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",longName:"xlarge",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",longName:"large",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<r.BREAKPOINTS.length;e++){var t=r.BREAKPOINTS[e],n=window.matchMedia(t.mediaQuery);if(n.matches)return t.name}},KeyframeDefaults:{ease:.1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","relativeTo","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TargetValue:function(e,t,n){this.epsilon=parseFloat(t),this.snapAtCreation=n,this.initialValue=e,this.target=e,this.current=e},Timeline:function(){this.local=0,this.localUnclamped=0},ViewableRange:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0},AnimInfo:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGroup=n,this.group=e,this.controller=t}};t.exports=r},{}],89:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function o(){r(this,o),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return e-=1,e*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.exports=new i},{}],90:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./AnimSystemModel"),a=function(e,t){return void 0===e||null===e?t:e},s=function(){function e(){r(this,e),this._metrics=new WeakMap}return i(e,[{key:"destroy",value:function(){this._metrics=null}},{key:"add",value:function(e){var t=this._metrics.get(e);if(t)return t;var n=new l(e);return this._metrics.set(e,n),this._refreshMetrics(e,n)}},{key:"get",value:function(e){return this._metrics.get(e)}},{key:"refreshCollection",value:function(e){var t=this;e.forEach(function(e){return t._refreshMetrics(e,null)})}},{key:"refreshMetrics",value:function(e){return this._refreshMetrics(e)}},{key:"_refreshMetrics",value:function(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=a(e.width,0),t.height=a(e.height,0),t.top=a(e.top,0),t.left=a(e.left,0),t.right=t.left+t.width,void(t.bottom=t.top+t.height);if(void 0===e.offsetWidth){var n=e.getBoundingClientRect();return t.width=n.width,t.height=n.height,t.top=o.pageMetrics.scrollY+n.top,t.left=o.pageMetrics.scrollX+n.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=o.pageMetrics.documentOffsetY,t.left=o.pageMetrics.documentOffsetX;for(var r=e;r;)t.top+=r.offsetTop,t.left+=r.offsetLeft,r=r.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),e}(),l=function(){function e(t){r(this,e),this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return i(e,[{key:"toString",value:function(){return"top:"+this.top+", bottom:"+this.bottom+", left:"+this.left+", right:"+this.right+", height:"+this.height+", width:"+this.width}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=s},{"./AnimSystemModel":88}],91:[function(e,t,n){"use strict";var r=e("./AnimSystemModel"),i=e("../Keyframes/Keyframe"),o=e("../Keyframes/KeyframeDiscreteEvent"),a=e("../Keyframes/KeyframeCSSClass"),s=function(e){for(var t in e){var n=e[t];if(r.KeyframeJSONReservedWords.indexOf(t)===-1&&Array.isArray(n))return!0}return!1};t.exports=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(s(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return a}if(s(e))return i;if(e.event)return o;throw"Could not determine tween type based on "+JSON.stringify(e)}},{"../Keyframes/Keyframe":85,"../Keyframes/KeyframeCSSClass":86,"../Keyframes/KeyframeDiscreteEvent":87,"./AnimSystemModel":88}],92:[function(e,t,n){"use strict";t.exports=function(){for(var e="",t=0;t<8;t++){var n=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&n|8:n).toString(16)}return e}},{}],93:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=1e-5,a=Math.abs,s=5,l=function(){function e(t,n,i,o){r(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(i-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*n,this.cp[4]=3*(o-n)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return i(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,n,r,i,l,c;for(r=e,c=0;c<s;c++){if(i=this.sampleCurveX(r)-e,a(i)<o)return r;if(l=this.sampleCurveDerivativeX(r),a(l)<o)break;r-=i/l}if(t=0,n=1,r=e,r<t)return t;if(r>n)return n;for(;t<n;){if(i=this.sampleCurveX(r),a(i-e)<o)return r;e>i?t=r:n=r,r=.5*(n-t)+t}return r}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),c=/\d*\.?\d+/g;l.fromCSSString=function(e){var t=e.match(c);if(4!==t.length)throw"UnitBezier could not convert "+e+" to cubic-bezier";var n=t.map(Number),r=new l(n[0],n[1],n[2],n[3]);return r.solve.bind(r)},t.exports=l},{}],94:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../Model/AnimSystemModel"),a=e("./Operations"),s=/([-|\+])?(\d+\.?\d*)(px|vh|vw|pw|ph|\%w|\%h|rw|rh|\%)?|(-|\+|\*|\/)/g,l=/^[-+]?(?:[0-9]{0,30}\.)?[0-9]{1,30}(?:[Ee][-+]?[1-2]?[0-9])?$/g,c=function(){function e(t){r(this,e),this.group=t}return i(e,[{key:"parse",value:function(e,t){if(Array.isArray(t))return this.parseArray(e,t);throw new Error("Keyframe value `"+t+"` is not supported. Only arrays in the form of [start,end] are currently supported")}},{key:"parseArray",value:function(e,t){var n=this.parseExpression(e,t[0]),r=this.parseExpression(e,t[1]);return[n,r]}},{key:"parseExpression",value:function(e,t){if(null===t)return 0;if("number"==typeof t)return t;for(var n=5,r=void 0;(r=t.indexOf("("))!==-1&&--n>0;){var i=this.captureParenthesis(t,r),o=this.parseExpression(e,i);t=t.replace("("+i+")",o)}for(var l=void 0,c=[];null!==(l=s.exec(t));)if(l.index===s.lastIndex&&s.lastIndex++,l[4])c.push(a.GetOpCode(l[4]));else{var u=l[1],h=parseFloat(l[2]),m=l[3];"-"===u&&(h*=-1);var f=this.parseSplitUnit(e,h,m);c.push(f)}var d=c.length;if(3===d&&"function"==typeof c[1])return c[1](c[0],c[2]);for(var p=0;p<d;p++)if("function"==typeof c[p]&&1===c[p].priority){var v=c[p-1],y=c[p+1],_=c[p](v,y);c[p-1]=null,c[p+0]=null,c[p+1]=_,p+=1}for(var b=0;null==c[b]&&b<d;)b+=1;var g=c[b],E=null,w=null;for(b+=1;b<d;b++)null!==c[b]?c[b]instanceof Function?E=c[b]:(null===w&&(w=c[b]),null!==w&&(E=E||a.add,g=E(g,w),E=null,w=null)):b+=1;return g}},{key:"parseSplitUnit",value:function(e,t,n){if("undefined"==typeof n)return parseFloat(t);switch(n){case"vh":return.01*t*o.pageMetrics.windowHeight;case"%":return.01*t*e.controller.elementMetrics.height;case"px":return t;case"rh":return.01*t*this.group.metrics.get(e.relativeTo).height;case"vw":return.01*t*o.pageMetrics.windowWidth;case"rw":return.01*t*this.group.metrics.get(e.relativeTo).width;case"%w":return.01*t*e.controller.elementMetrics.width;case"%h":return.01*t*e.controller.elementMetrics.height;case"pw":return.01*t*e.controller.parentElementMetrics.width;case"ph":return.01*t*e.controller.parentElementMetrics.height;default:throw new Error("ExpressionParser: no strategy found for unit `"+n+"` only `vh, vw, %, ph, pw` are supported");
}}},{key:"captureParenthesis",value:function(e,t){for(var n="",r=0,i=!1,o=e.length,a=t;a<o;a++)if("("===e[a]?(r+=1,i&&(n+=e[a]),i=!0):")"===e[a]?(r-=1,0!==r&&(n+=e[a])):i&&(n+=e[a]),i&&0===r)return n}},{key:"isUnitlessNumber",value:function(e){return String(e).match(l)}},{key:"destroy",value:function(){this.group=null}},{key:"logParts",value:function(e){console.log(e.reduce(function(e,t){return"function"==typeof t?e+t.friendlyName+" ":e+(t+" ")},""))}}]),e}();t.exports=c},{"../Model/AnimSystemModel":88,"./Operations":95}],95:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function o(){r(this,o),this.add=function(e,t){return e+t},this.sub=function(e,t){return e-t},this.mul=function(e,t){return e*t},this.div=function(e,t){return e/t},this.add.friendlyName="add",this.sub.friendlyName="sub",this.mul.friendlyName="mul",this.div.friendlyName="div",this.add.priority=0,this.sub.priority=0,this.mul.priority=1,this.div.priority=1,this.GetOpCode=function(e){switch(e){case"-":return this.sub;case"+":return this.add;case"*":return this.mul;case"/":return this.div;default:throw new Error('AnimSystem.parsing.Operations - op code "'+e+"\" was found. Only '+ - * /' are supported. Check expression for typos/spacing issues")}}};t.exports=new i},{}],96:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,e),this.group=t,this.groupIsTimeBased=n}return i(e,[{key:"parse",value:function(e,t){if("number"==typeof t)return t;var n=this.groupIsTimeBased?0:this.group.metrics.get(e.relativeTo).top,r=this.group.expressionParser.parseExpression(e,t),i=r+n;return this.group.convertScrollPositionToTValue(i)}},{key:"destroy",value:function(){this.group=null}}]),e}();t.exports=o},{}],97:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function _(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:_(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=e("@marcom/sm-math-utils"),u=e("./utils/arrayToObject"),h=e("./Model/AnimSystemModel"),m=e("./Model/ElementMetricsLookup"),f=e("./Parsing/ExpressionParser"),d=e("./Parsing/TimeParser"),p=e("./KeyframeController"),v={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},y=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.anim=n,o.element=e,o.name=o.name||e.getAttribute("data-anim-scroll-group"),o.isEnabled=!0,o.timelines=new h.Timeline,o.metrics=new m,o.metrics.add(o.element),o.expressionParser=new f(o),o.timeParser=new d(o),o.boundsMin=0,o.boundsMax=0,o.lastPosition=0,o.timelineUpdateRequired=!1,o._keyframesDirty=!1,o.viewableRange=o.createViewableRange(),o.keyframeControllers=[],o.updateProgress(o.getPosition()),o.onDOMRead=o.onDOMRead.bind(o),o.onDOMWrite=o.onDOMWrite.bind(o),o.gui=null,o.finalizeInit(),o}return o(t,e),a(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new h.AnimInfo(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null,this.timeParser.destroy(),this.timeParser=null;for(var e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].destroy();this.timelines=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(e){var t=this;if(this.keyframeControllers.includes(e)){var n=e._allKeyframes;e._allKeyframes=[],this.keyframesDirty=!0,v.draw(function(){var r=t.keyframeControllers.indexOf(e);r!==-1&&(t.keyframeControllers.splice(r,1),e.onDOMWrite(),n.forEach(function(e){return e.destroy()}),e.destroy(),t.gui&&t.gui.create())},!0)}}},{key:"remove",value:function(){this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(e){this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new v.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite)}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.timelines)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite(this.timelines);this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(e,t){var n=this.anim.getControllerForTarget(e);return null===n&&(n=new p(this,e),this.keyframeControllers.push(n)),this.keyframesDirty=!0,n.addKeyframe(t)}},{key:"forceUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.recalculateActiveKeyframes,n=void 0!==t&&t,r=e.waitForNextUpdate,i=void 0===r||r;this.isEnabled&&(n&&this.determineActiveKeyframes(null),this.refreshActiveMetrics(),this.viewableRange=this.createViewableRange(),this.hasDuration()&&(this.timelineUpdateRequired=!0,i?this.keyframesDirty=!0:this.onKeyframesDirty()))}},{key:"onKeyframesDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preventOnScroll,n=void 0!==t&&t;this.determineActiveKeyframes(),this.keyframesDirty=!1;for(var r=0,i=this.keyframeControllers.length;r<i;r++)this.keyframeControllers[r].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),n||this._onScroll(),this.gui&&this.gui.create()}},{key:"refreshActiveMetrics",value:function(){var e=new Set;e.add(this.element),this.keyframeControllers.forEach(function(t){e.add(t.element),t._parentElementMetrics&&e.add(t.element.parentElement),t._activeKeyframes.forEach(function(t){return e.add(t.relativeTo)})}),this.metrics.refreshCollection(e)}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||u(Array.from(document.documentElement.classList));for(var t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].getBounds(e);var r=this.convertTValueToScrollPosition(e.min),i=this.convertTValueToScrollPosition(e.max);i-r<h.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(r-.5*h.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(i+.5*h.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}},{key:"createViewableRange",value:function(){return new h.ViewableRange(this.metrics.get(this.element),h.pageMetrics.windowHeight)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a)):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.timelines.local);this.trigger(h.EVENTS.ON_TIMELINE_UPDATE,this.timelines.local),this.timelineUpdateRequired=!1,this.lastPosition!==this.timelines.local&&(this.lastPosition<=this.boundsMin&&this.timelines.localUnclamped>this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START,this):this.lastPosition>=this.boundsMin&&this.timelines.localUnclamped<this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START+":reverse",this):this.lastPosition<=this.boundsMax&&this.timelines.localUnclamped>=this.boundsMax?this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE,this):this.lastPosition>=this.boundsMax&&this.timelines.localUnclamped<this.boundsMax&&this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.timelines)}},{key:"_onScroll",value:function(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);var t=this.lastPosition===this.boundsMin||this.lastPosition===this.boundsMax,n=this.timelines.localUnclamped===this.boundsMin||this.timelines.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&n)return void(this.timelines.local=this.timelines.localUnclamped);if(this.timelineUpdateRequired||this.timelines.localUnclamped>this.boundsMin&&this.timelines.localUnclamped<this.boundsMax)return this.timelines.local=c.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped);var r=this.lastPosition>this.boundsMin&&this.lastPosition<this.boundsMax,i=this.timelines.localUnclamped<=this.boundsMin||this.timelines.localUnclamped>=this.boundsMax;return r&&i?(this.timelines.local=c.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped)):void(null!==this.gui&&this.gui.onScrollUpdate(this.timelines))}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?c.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?c.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return h.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){return this.anim.getControllerForTarget(e)}},{key:"trigger",value:function(e,t){if("undefined"!=typeof this._events[e])for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()}},{key:"keyframesDirty",set:function(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}},{key:"keyFrames",get:function(){return this.viewableRange}}]),t}(l);t.exports=y},{"./KeyframeController":84,"./Model/AnimSystemModel":88,"./Model/ElementMetricsLookup":90,"./Parsing/ExpressionParser":94,"./Parsing/TimeParser":96,"./utils/arrayToObject":99,"@marcom/ac-event-emitter-micro":41,"@marcom/ac-raf-emitter/RAFEmitter":65,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/sm-math-utils":121}],98:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:f(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./ScrollGroup"),c=e("@marcom/sm-math-utils"),u=0,h={create:e("@marcom/ac-raf-emitter/RAFEmitter")},m=function(e){function t(e,n){r(this,t),e||(e=document.createElement("div"),e.className="TimeGroup-"+u++);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.name=o.name||e.getAttribute("data-anim-time-group"),o.timeParser.groupIsTimeBased=!0,o._isPaused=!0,o._repeats=0,o._isReversed=!1,o._timeScale=1,o}return o(t,e),a(t,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(e){if(void 0===e)return 0===this.boundsMax?0:this.timelines.local/this.boundsMax;var t=e*this.boundsMax;this._onScroll(t)}},{key:"time",value:function(e){return void 0===e?this.timelines.local:(e=c.clamp(e,this.boundsMin,this.boundsMax),void this._onScroll(e))}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse()):(this.progress(0),this.play())}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(e){if(!this._isPaused){var n=c.clamp(e.delta/1e3,0,.5);this._isReversed&&(n=-n);var r=this.time(),i=r+n*this._timeScale;if(this._repeats===t.REPEAT_FOREVER||this._repeats>0){var o=!1;!this._isReversed&&i>this.boundsMax?(i-=this.boundsMax,o=!0):this._isReversed&&i<0&&(i=this.boundsMax+i,o=!0),o&&(this._repeats=this._repeats===t.REPEAT_FOREVER?t.REPEAT_FOREVER:this._repeats-1)}this.time(i),this._playheadEmitter.run()}}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=e):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(e){this._playheadEmitter=new h.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){return void 0===e?this._repeats:(this._repeats=e,this)}},{key:"reversed",value:function(e){return void 0===e?this._isReversed:(this._isReversed=e,this)}},{key:"getPosition",value:function(){return this.timelines.local}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.boundsMax>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.boundsMax}}]),t}(l);m.REPEAT_FOREVER=-1,t.exports=m},{"./ScrollGroup":97,"@marcom/ac-raf-emitter/RAFEmitter":65,"@marcom/sm-math-utils":121}],99:[function(e,t,n){"use strict";var r=function(e){return e.reduce(function(e,t){return e[t]=t,e},{})};t.exports=r},{}],100:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("https://www.apple.com/apple-card/SourceTemplate.js"),a=e("@marcom/xhr-request"),s=Object.freeze({responseType:"blob"}),l=function(){function e(t){r(this,e),t=Object.assign({},t),this._requestOptions=Object.assign({},s,t.xhr),this._template=new o(t),this._evtObserver=null,this._state={viewport:t.viewport,resolution:t.resolution,request:null,objectUrl:""},this._requestCache=new Map,this._history=[],this._initialize()}return i(e,null,[{key:"convertToResolution",value:function(e){return"boolean"!=typeof e?null:e?"2x":"1x"}},{key:"convertViewportName",value:function(e,t){return"L"===e||t!==!0&&"xlarge"===e?"large":"M"===e?"medium":"S"===e?"small":e}}]),i(e,[{key:"load",value:function(){var e=this,t=this._state.request,n=t.xhr.response,r=!n,i=void 0;return i=r?t.send():200===t.xhr.status?Promise.resolve({response:n}):Promise.reject({error:this._state.requestErr}),i.then(function(t){var n=t.response;return"blob"===e._requestOptions.responseType&&(e._state.objectUrl=n=window.URL.createObjectURL(t.response),e._updateHistory()),Promise.resolve(n)},function(t){var n=e._state.requestErr=t.error;return Promise.reject(n)})}},{key:"change",value:function(t,n){t=t.toLowerCase(),"viewport"!==t&&"resolution"!==t||("viewport"===t?n=e.convertViewportName(n):"boolean"==typeof n&&(n=e.convertToResolution(n)),this._state[t]=n,this._createOpenRequest())}},{key:"abortLoad",value:function(){this._state.request.xhr.abort()}},{key:"revokeLastObjectUrl",value:function(){if("blob"===this._requestOptions.responseType){var e=this._history.length,t=2,n=e-t;if(n<0)return;var r=this._history[n];window.URL.revokeObjectURL(r.objectUrl)}}},{key:"_createOpenRequest",value:function(){var e=this._state,t=e.viewport+"_"+e.resolution,n=this._requestCache.get(t);if(!n){var r=this._template.createPath(e.viewport,e.resolution);n=new a(r,this._requestOptions),this._requestCache.set(t,n),n.open()}e.request=n}},{key:"_initialize",value:function(){this._createOpenRequest()}},{key:"_updateHistory",value:function(){this._history.push(Object.assign({},this._state))}},{key:"_revokeAllObjectUrls",value:function(){"blob"===this._requestOptions.responseType&&this._history.forEach(function(e){window.URL.revokeObjectURL(e.objectUrl)})}},{key:"request",get:function(){return this._state.request}},{key:"assetUrl",get:function(){return this._state.request.requestUrl}},{key:"objectUrl",get:function(){return this._state.objectUrl}},{key:"viewport",get:function(){return this._state.viewport}},{key:"resolution",get:function(){return this._state.resolution}},{key:"requestCache",get:function(){return this._requestCache}},{key:"history",get:function(){return this._history}}]),e}();t.exports=l},{"./SourceTemplate.js":101,"@marcom/xhr-request":124}],101:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=new Map;return e.forEach(function(e,n){t.set(n,e)}),t}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./model"),s=function(){function e(t){r(this,e),t=Object.assign({},t),this._template="",this._model=t.model||a,this._state={viewport:"",resolution:""},this._initialize(t)}return o(e,null,[{key:"formatPathSegment",value:function(e){var t=/^\s*\/*\s*|\s*\/*\s*$/g;return"/"+e.replace(t,"")}}]),o(e,[{key:"createPath",value:function(e,t){this._updateState(e,t);var n=this._model.TEMPLATE_PLACEHOLDERS;return t="1x"===t?"":"_"+t,this._template.replace(n.viewport,e).replace(n.resolution,t)}},{key:"changeViewport",value:function(e){return this.createPath(e,this._state.resolution)}},{key:"changeResolution",value:function(e){return this.createPath(this._state.viewport,e)}},{key:"_initialize",value:function(e){var t=this._setSegmentValues(e);this._template=this._createTemplate(t)}},{key:"_setSegmentValues",value:function(e){var t=e.el,n=this._model,r=i(n.SEGMENT_MAP);return r.forEach(function(r,i,o){var a=e[i];r=a?a:r;var s=n.ATTRIB[i];r=s&&t&&t.hasAttribute(s)?t.getAttribute(s):r,o.set(i,r)}),r}},{key:"_createTemplate",value:function(t){var n="",r=this._model.TEMPLATE_PLACEHOLDERS;return t.forEach(function(t,i){n+="viewport"===i?e.formatPathSegment(r.viewport):"resolution"===i?r.resolution:"format"===i?"."+t:e.formatPathSegment(t)}),n}},{key:"_updateState",value:function(e,t){this._state.viewport=e,this._state.resolution=t}},{key:"viewport",get:function(){return this._state.viewport}},{key:"resolution",get:function(){return this._state.resolution}}]),e}();t.exports=s},{"./model":102}],102:[function(e,t,n){"use strict";function r(){var e=new Map;return e.set("basePath","https://www.apple.com/105/media/"),e.set("locale","us"),e.set("path",""),e.set("name",""),e.set("viewport",""),e.set("resolution",""),e.set("format","mp4"),e}t.exports={ATTRIB:{resolution:"data-source-resolution",viewport:"data-source-viewport",basePath:"data-source-basePath",locale:"data-source-locale",path:"data-source-path",name:"data-source-name"},TEMPLATE_PLACEHOLDERS:{viewport:"{{viewport}}",resolution:"{{resolution}}"},SEGMENT_MAP:r()}},{}],103:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:f(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,c={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},u=function(){},h=0,m=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e.el,n.gum=e.gum,n._keyframeController=null,n}return o(t,e),a(t,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(e){var t=e.el||this.el;return this.anim.addKeyframe(t,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+h++;var t=void 0!==e.end&&e.end!==e.start,n=this.addKeyframe(e);return t?(this._addCallbackIfNotNull(n,e.event+":enter",e.onEnter),this._addCallbackIfNotNull(n,e.event+":exit",e.onExit)):(this._addCallbackIfNotNull(n,e.event,e.onEvent),this._addCallbackIfNotNull(n,e.event+":reverse",e.onEventReverse)),n}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(!t.every(function(t){return e.hasOwnProperty(t)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));var n=new c.create;n.on("update",e.onUpdate||u),n.on("draw",e.onDraw||u),n.on("draw",function(){return n.run()});var r=e.onEnter,i=e.onExit;return e.onEnter=function(){n.run(),r?r():0},e.onExit=function(){n.cancel(),i?i():0},this.addDiscreteEvent(e)}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+h++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){if(this.onComponentWillAppear||this.onComponentWillDisappear){this.onComponentWillAppear=this.onComponentWillAppear?this.onComponentWillAppear.bind(this):void 0,this.onComponentWillDisappear=this.onComponentWillDisappear?this.onComponentWillDisappear.bind(this):void 0;var e={start:"-100vh - 1px",end:"100% + 1px",event:"_appear"+h++};e.onEnter=this.onComponentWillAppear,e.onExit=this.onComponentWillDisappear,this.addDiscreteEvent(e)}}},{key:"_addCallbackIfNotNull",value:function(e,t,n){return!!n&&(e.controller.on(t,n),!0)}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}}]),t}(l);t.exports=m},{"@marcom/ac-event-emitter-micro":41,"@marcom/ac-raf-emitter/RAFEmitter":65,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76}],104:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("@marcom/delayed-initializer"),c=e("@marcom/anim-system"),u=e("@marcom/anim-system/Model/AnimSystemModel"),h=e("./ComponentMap"),m={},f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e,n.anim=c,n.components=[],n.el.getAttribute("data-anim-scroll-group")||n.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),c.on(u.EVENTS.ON_DOM_GROUPS_CREATED,function(e){n.componentsInitialized=!1,n.initComponents(),n.setupEvents()}),c.on(u.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){n.components.forEach(function(e){return e.mounted()}),n.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)}),l.add(function(){return c.initialize()}),n}return o(t,e),a(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("[data-component-list]")&&e.push(this.el);for(var t=0;t<e.length;t++)for(var n=e[t],r=n.getAttribute("data-component-list"),i=r.split(" "),o=0,a=i.length;o<a;o++){var s=i[o];""!==s&&" "!==s&&this.addComponent({el:n,componentName:s})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),c.on(u.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),c.on(u.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),c.on(u.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var n=e.el,r=e.componentName,i=e.data;if(!h.hasOwnProperty(r))throw"BubbleGum::addComponent could not add component to"+n.className+" no component type '"+r+"'found!";var o=h[r];if(!t.componentIsSupported(o,r))return void 0===m[r]&&(console.log("BubbleGum::addComponent unsupported component '"+r+"'. Reason: '"+r+".IS_SUPPORTED' returned false"),m[r]=!0),null;var a=n.dataset.componentList||"";a.includes(r)||(n.dataset.componentList=a.split(" ").concat(r).join(" "));var s=new o({el:n,data:i,gum:this,pageMetrics:u.pageMetrics});return this.components.push(s),this.componentsInitialized&&s.mounted(),s}},{key:"removeComponent",value:function(e){var t=this.components.indexOf(e);t!==-1&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.replace(e.constructor.name,""),e.destroy())}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+e+"]",r=t.matches(n)?t:t.querySelector(n);return r?this.components.find(function(t){return t instanceof h[e]&&t.el===r}):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+e+"]",r=t.matches(n)?[t]:Array.from(t.querySelectorAll(n));return this.components.filter(function(t){return t instanceof h[e]&&r.includes(t.el)})}},{key:"getComponentsForElement",value:function(e){return this.components.filter(function(t){return t.el===e})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(e){return e.onResizeImmediate(u.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(e){return e.onResizeDebounced(u.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(e){return e.onBreakpointChange(u.pageMetrics)})}}],[{key:"componentIsSupported",value:function(e,t){var n=e.IS_SUPPORTED;if(void 0===n)return!0;if("function"!=typeof n)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var r=e.IS_SUPPORTED();return void 0===r?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):r}}]),t}(s);f.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=f},{"./ComponentMap":105,
"@marcom/ac-event-emitter-micro":41,"@marcom/anim-system":83,"@marcom/anim-system/Model/AnimSystemModel":88,"@marcom/delayed-initializer":107}],105:[function(e,t,n){"use strict";t.exports={BaseComponent:e("./BaseComponent")}},{"./BaseComponent":103}],106:[function(e,t,n){"use strict";var r={create:e("gl-mat4/create"),invert:e("gl-mat4/invert"),clone:e("gl-mat4/clone"),transpose:e("gl-mat4/transpose")},i={create:e("gl-vec3/create"),dot:e("gl-vec3/dot"),normalize:e("gl-vec3/normalize"),length:e("gl-vec3/length"),cross:e("gl-vec3/cross"),fromValues:e("gl-vec3/fromValues")},o={create:e("gl-vec4/create"),transformMat4:e("gl-vec4/transformMat4"),fromValues:e("gl-vec4/fromValues")},a=(Math.PI/180,180/Math.PI),s=0,l=1,c=3,u=4,h=5,m=7,f=11,d=12,p=13,v=15,y=function(e,t){t=t||!1;for(var n=r.clone(e),s=i.create(),l=i.create(),u=i.create(),h=o.create(),d=o.create(),p=(i.create(),0);p<16;p++)n[p]/=n[v];var y=r.clone(n);y[c]=0,y[m]=0,y[f]=0,y[v]=1;var E=(n[3],n[7],n[11],n[12]),w=n[13],S=n[14],T=(n[15],o.create());if(g(n[c])&&g(n[m])&&g(n[f]))h=o.fromValues(0,0,0,1);else{T[0]=n[c],T[1]=n[m],T[2]=n[f],T[3]=n[v];var O=r.invert(r.create(),y),P=r.transpose(r.create(),O);h=o.transformMat4(h,T,P)}s[0]=E,s[1]=w,s[2]=S;var k=[i.create(),i.create(),i.create()];k[0][0]=n[0],k[0][1]=n[1],k[0][2]=n[2],k[1][0]=n[4],k[1][1]=n[5],k[1][2]=n[6],k[2][0]=n[8],k[2][1]=n[9],k[2][2]=n[10],l[0]=i.length(k[0]),i.normalize(k[0],k[0]),u[0]=i.dot(k[0],k[1]),k[1]=_(k[1],k[0],1,-u[0]),l[1]=i.length(k[1]),i.normalize(k[1],k[1]),u[0]/=l[1],u[1]=i.dot(k[0],k[2]),k[2]=_(k[2],k[0],1,-u[1]),u[2]=i.dot(k[1],k[2]),k[2]=_(k[2],k[1],1,-u[2]),l[2]=i.length(k[2]),i.normalize(k[2],k[2]),u[1]/=l[2],u[2]/=l[2];var x=i.cross(i.create(),k[1],k[2]);if(i.dot(k[0],x)<0)for(p=0;p<3;p++)l[p]*=-1,k[p][0]*=-1,k[p][1]*=-1,k[p][2]*=-1;d[0]=.5*Math.sqrt(Math.max(1+k[0][0]-k[1][1]-k[2][2],0)),d[1]=.5*Math.sqrt(Math.max(1-k[0][0]+k[1][1]-k[2][2],0)),d[2]=.5*Math.sqrt(Math.max(1-k[0][0]-k[1][1]+k[2][2],0)),d[3]=.5*Math.sqrt(Math.max(1+k[0][0]+k[1][1]+k[2][2],0)),k[2][1]>k[1][2]&&(d[0]=-d[0]),k[0][2]>k[2][0]&&(d[1]=-d[1]),k[1][0]>k[0][1]&&(d[2]=-d[2]);var C=o.fromValues(d[0],d[1],d[2],2*Math.acos(d[3])),A=b(d);return t&&(u[0]=Math.round(u[0]*a*100)/100,u[1]=Math.round(u[1]*a*100)/100,u[2]=Math.round(u[2]*a*100)/100,A[0]=Math.round(A[0]*a*100)/100,A[1]=Math.round(A[1]*a*100)/100,A[2]=Math.round(A[2]*a*100)/100,C[3]=Math.round(C[3]*a*100)/100),{translation:s,scale:l,skew:u,perspective:h,quaternion:d,eulerRotation:A,axisAngle:C}},_=function(e,t,n,r){var o=i.create();return o[0]=n*e[0]+r*t[0],o[1]=n*e[1]+r*t[1],o[2]=n*e[2]+r*t[2],o},b=function(e){var t,n,r,o=e[3]*e[3],a=e[0]*e[0],s=e[1]*e[1],l=e[2]*e[2],c=a+s+l+o,u=e[0]*e[1]+e[2]*e[3];return u>.499*c?(n=2*Math.atan2(e[0],e[3]),r=Math.PI/2,t=0,i.fromValues(t,n,r)):u<-.499*c?(n=-2*Math.atan2(e[0],e[3]),r=-Math.PI/2,t=0,i.fromValues(t,n,r)):(n=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],a-s-l+o),r=Math.asin(2*u/c),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-a+s-l+o),i.fromValues(t,n,r))},g=function(e){return Math.abs(e)<1e-4},E=function(e){var t=String(getComputedStyle(e).transform).trim(),n=r.create();if("none"===t||""===t)return n;var i,o,a=t.slice(0,t.indexOf("("));if("matrix3d"===a)for(i=t.slice(9,-1).split(","),o=0;o<i.length;o++)n[o]=parseFloat(i[o]);else{if("matrix"!==a)throw new TypeError("Invalid Matrix Value");for(i=t.slice(7,-1).split(","),o=i.length;o--;)i[o]=parseFloat(i[o]);n[s]=i[0],n[l]=i[1],n[d]=i[4],n[u]=i[2],n[h]=i[3],n[p]=i[5]}return n};t.exports=function(e,t){var n=E(e);return y(n,t)}},{"gl-mat4/clone":127,"gl-mat4/create":128,"gl-mat4/invert":129,"gl-mat4/transpose":130,"gl-vec3/create":131,"gl-vec3/cross":132,"gl-vec3/dot":133,"gl-vec3/fromValues":134,"gl-vec3/length":135,"gl-vec3/normalize":136,"gl-vec4/create":137,"gl-vec4/fromValues":138,"gl-vec4/transformMat4":139}],107:[function(e,t,n){"use strict";var r=!1,i=!1,o=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(i&&e(),o.push(e),!r){r=!0;var n=document.documentElement.scrollHeight,a=0,s=function l(){var e=document.documentElement.scrollHeight;if(n!==e)a=0;else if(a++,a>=t.NUMBER_OF_FRAMES_TO_WAIT)return void o.forEach(function(e){return e()});n=e,requestAnimationFrame(l)};requestAnimationFrame(s)}}}},{}],108:[function(e,t,n){"use strict";t.exports=function(e,t){var n;return t?(n=e.getBoundingClientRect(),{width:n.width,height:n.height}):{width:e.offsetWidth,height:e.offsetHeight}}},{}],109:[function(e,t,n){"use strict";var r=e("./getDimensions"),i=e("./getScrollPosition");t.exports=function(e,t){var n;if(t){var o=i(),a=e.getBoundingClientRect();n={top:a.top+o.y,right:a.right+o.x,bottom:a.bottom+o.y,left:a.left+o.x}}else{var s=r(e);for(n={top:e.offsetTop,right:s.width,bottom:s.height,left:e.offsetLeft};e=e.offsetParent;)n.top+=e.offsetTop,n.left+=e.offsetLeft;n.right+=n.left,n.bottom+=n.top}var l=document.documentElement.offsetTop,c=document.documentElement.offsetLeft;return{top:n.top+l,right:n.right+c,bottom:n.bottom+l,left:n.left+c}}},{"./getDimensions":108,"./getScrollPosition":110}],110:[function(e,t,n){"use strict";function r(e){return"x"===e?window.scrollX||window.pageXOffset:window.scrollY||window.pageYOffset}function i(e,t,n){return"x"===t?n?r("x"):e.scrollLeft:n?r("y"):e.scrollTop}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e,t){var n="undefined"==typeof e?"undefined":o(e);t="string"===n?e:t,e=e&&"string"!==n?e:window;var r=e===window;return t&&/^[xy]$/i.test(t)?i(e,t,r):{x:i(e,"x",r),y:i(e,"y",r)}}},{}],111:[function(e,t,n){"use strict";var r=e("./helpers/globals"),i=e("@marcom/function-utils/once"),o=function(){var e=r.getDocument(),t=e.createElement("canvas");return!("function"!=typeof t.getContext||!t.getContext("2d"))};t.exports=i(o),t.exports.original=o},{"./helpers/globals":112,"@marcom/function-utils/once":114}],112:[function(e,t,n){"use strict";t.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],113:[function(e,t,n){"use strict";function r(){var e=i.getWindow(),t=e.matchMedia("(prefers-reduced-motion)");return!(!t||!t.matches)}var i=e("./helpers/globals");t.exports=r},{"./helpers/globals":112}],114:[function(e,t,n){"use strict";t.exports=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}}},{}],115:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./model").controls,a=e("@marcom/ac-console/warn"),s=function(){function e(t,n){r(this,e),n=Object.assign({},n),this._model=n.model||o,this._container=t,this._ctrls=new Map,this._state={arePresent:!1}}return i(e,[{key:"initialize",value:function(){var e=this,t=this._container;if(t){var n=this._model.SELECTOR_MAP;n.forEach(function(n,r){if("container"!==r){var i=t.querySelector(n);i&&(e._ctrls.set(r,i),e._state.arePresent=!0)}})}}},{key:"isPresent",value:function(e){return!!this._ctrls.get(e)}},{key:"getElement",value:function(e){var t=this._ctrls.get(e);return t||null}},{key:"enable",value:function(e){this._setDisabled(e,!1)}},{key:"disable",value:function(e){this._setDisabled(e,!0)}},{key:"_setDisabled",value:function(e,t){var n=this._ctrls,r=function(r,i){var o=n.get(r);o?o.disabled=i:a("Unable to "+(t?"disable":"enable")+" the "+e+" control. The element does not exist.")};"string"==typeof e?r(e,t):Array.isArray(e)&&e.forEach(function(e){r(e,t)})}},{key:"disableAll",value:function(){var e=this;this._ctrls.forEach(function(t,n){e.disable(n)})}},{key:"attach",value:function(e,t){var n=this._ctrls.get(e);return n&&"function"==typeof t?void n.addEventListener("click",t):void a("Unable to attach "+e+" control.")}},{key:"remove",value:function(e,t){var n=this._ctrls.get(e);return"string"!=typeof e&&"function"!=typeof t||!this._ctrls.get(e)?void a("Unable to remove "+e+" control."):void n.removeEventListener("click",t)}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"allElements",get:function(){return this._ctrls}}]),e}();t.exports=s},{"./model":120,"@marcom/ac-console/warn":23}],116:[function(e,t,n){"use strict";"use stric";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./model").frames,a=e("@marcom/ac-console/warn"),s=function(){function e(t,n){r(this,e),n=Object.assign({},n),this._model=n.model||o,this._container=t,this._frames=new Map,this._promise={},this._state={arePresent:!1}}return i(e,[{key:"isPresent",value:function(e){return!!this._frames.get(e)}},{key:"isActive",value:function(e){return this._state[e].active}},{key:"getElement",value:function(e){var t=this._frames.get(e);return t?t:(a("The "+e+"Frame does not appear to exist."),null)}},{key:"initialize",value:function(){var e=this,t=this._container;if(t){var n=this._model.SELECTOR_MAP;n.forEach(function(n,r){if("container"!==r){var i=t.querySelector(n);i&&(e._frames.set(r,i),e._state.arePresent=!0,e._state[r]={},e._state[r].active=i.classList.contains(e._model.CLASS.active),e._state[r].hasCSSTransition=e._checkForCSSTransition(i,r),e._promise[r]={},e._promise[r].activate=null,e._promise[r].deactivate=null)}})}}},{key:"activate",value:function(e){return this._setActivity(e,!0)}},{key:"deactivate",value:function(e){return this._setActivity(e,!1)}},{key:"deactivateAll",value:function(){var e=this,t=[];return this._frames.forEach(function(n,r){t.push(e.deactivate(r))}),Promise.all(t)}},{key:"_checkForCSSTransition",value:function(e,t){var n=window.getComputedStyle(e)["transition-duration"],r=n&&"0s"!==n;return r||a("InlineVideo : Frames : "+(t?t+"Frame":e)+" does not have a valid CSS transition for (de)activation"),r}},{key:"_toggleActivity",value:function(e,t){t||(t=this.getElement(e)),t.classList.toggle(this._model.CLASS.active),this._state[e].active=!this._state[e].active}},{key:"_setActivity",value:function(e,t){var n=this,r=this._frames.get(e);if(!r)return Promise.reject("The "+e+"Frame element does not exist");var i=t?"activate":"deactivate",o=t?"deactivate":"activate",a=this._promise[e][i];if(a)return a;var s=this._promise[e][o]||Promise.resolve();return s.then(function(){return n._promise[e][o]=null,n._promise[e][i]=new Promise(function(o,a){var s=n._state[e].active;if(!(t&&!s||!t&&s))return n._promise[e][i]=null,void o();var l=!!r.offsetHeight;if(n._state[e].hasCSSTransition&&l){var c=function u(){r.removeEventListener("transitionend",u),n._promise[e][i]=null,o()};r.addEventListener("transitionend",c),n._toggleActivity(e,r)}else n._toggleActivity(e,r),n._promise[e][i]=null,o()})})}},{key:"arePresent",get:function(){return this._state.arePresent}}]),e}();t.exports=s},{"./model":120,"@marcom/ac-console/warn":23}],117:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./model").indicators,a=e("@marcom/ac-console/warn"),s=function(){function e(t,n){r(this,e),n=Object.assign({},n),this._model=n.model||o,this._container=t,this._indicators=new Map,this._state={arePresent:!1}}return i(e,[{key:"initialize",value:function(){var e=this,t=this._container;if(t){var n=this._model.SELECTOR_MAP;n.forEach(function(n,r){if("container"!==r){var i=t.querySelector(n);i&&(e._indicators.set(r,i),e._state.arePresent=!0,e._state[r]={},e._state[r].active=i.classList.contains(e._model.CLASS.active))}})}}},{key:"isPresent",value:function(e){return!!this._indicators.get(e)}},{key:"isActive",value:function(e){return this._state[e].active}},{key:"getElement",value:function(e){var t=this._indicators.get(e);return t||null}},{key:"activate",value:function(e){this._setActivity(e,!1)}},{key:"deactivate",value:function(e){this._setActivity(e,!0)}},{key:"_setActivity",value:function(e,t){var n=this._indicators.get(e);if(!n)return void a("Unable to "+(t?"deactivate":"activate")+" the "+e+" indicator. The element does not exist.");var r=t?"remove":"add";this._state[e].active=!t,n.classList[r](this._model.CLASS.active)}},{key:"arePresent",get:function(){return this._state.arePresent}},{key:"allElements",get:function(){return this._indicators}}]),e}();t.exports=s},{"./model":120,"@marcom/ac-console/warn":23}],118:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function v(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:v(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=e("./Video"),c=e("./Controls"),u=e("./Frames"),h=e("./Indicators"),m=e("./model"),f=e("@marcom/ac-console/warn"),d=e("@marcom/ac-console/Error"),p=function(e){function t(e,n){r(this,t),n=Object.assign({},n),n.model=n.model||m,n.model=Object.assign({},n.model,n.model.video),delete n.model.video;var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o._controls={},o._frames={},o._indicators={},o.replay=o.replay.bind(o),o}return o(t,e),a(t,[{key:"initialize",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this);var e=this._container;if(!e)return void d("InlineVideo Error : A video element was passed as the containing element. InlineVideo class expects a container element holding the video, optional frames, and optional controls.");var n=e.querySelector(this._model.controls.SELECTOR_MAP.get("container")),r=e.querySelector(this._model.frames.SELECTOR_MAP.get("container"))||e,i=e.querySelector(this._model.indicators.SELECTOR_MAP.get("container")),o=this._model;n&&(this._controls=new c(n,{model:o.controls}),this._controls.initialize(),this._controls.arePresent&&this._attachControls()),r&&(this._frames=new u(r,{model:o.frames}),this._frames.initialize(),this._frames.arePresent||f("No inline-video frames appear to be present. At minimum, a static frame should be present for fallback.")),i&&(this._indicators=new h(i,{model:o.indicators}),this._indicators.initialize())}},{key:"load",value:function(){var e=this._state,n=this._indicators,r="loading";return e.loaded||e.loaded||!n.arePresent||n.activate(r),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"play",value:function(){var e=this,n=this._frames,r=this._controls,i="playing",o=n.isPresent("end")&&n.isActive("end")?n.deactivate("end"):Promise.resolve(),a=function l(){e._el.removeEventListener(i,l),r.arePresent&&(r.disable(["play","replay"]),r.enable("pause"))};return this._el.addEventListener(i,a),o.then(function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",e).call(e)},function(e){f(e)})}},{key:"pause",value:function(){var e=this._controls;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this).then(function(){e.arePresent&&(e.disable("pause"),e.enable("play"))},function(e){f(e)})}},{key:"reset",value:function(){var e=this._controls;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this).then(function(){e.arePresent&&(e.disable("pause"),e.enable("play"))},function(e){f(e)})}},{key:"replay",value:function(){var e=this,t=this._controls,n=t.arePresent;return n&&(t.disable("replay"),t.enable("pause")),this.reset().then(function(){return e.play()})["catch"](function(e){f(e)})}},{key:"_attachControls",value:function(){var e=this,t=this._controls,n=t.allElements;n.forEach(function(n,r){var i=e[r];i?t.attach(r,i):f("Unable to attach "+r+" control. No equivalent video method.")})}},{key:"_onLoadSuccess",value:function(e){var n=this._controls,r=this._frames,i=this._indicators,o="loading";return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onLoadSuccess",this).call(this,e).then(function(){return i.arePresent&&i.deactivate(o),n.arePresent&&n.enable("play"),r.arePresent?r.deactivateAll():Promise.resolve()})["catch"](function(e){f(e)}).then(function(){return Promise.resolve()})}},{key:"_onLoadFailure",value:function(e){var n=this,r=this._controls,i=this._frames,o=this._indicators,a="loading";return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onLoadFailure",this).call(this,e)["catch"](function(e){}).then(function(){return o.arePresent&&o.deactivate(a),r.arePresent&&r.disableAll(),i.arePresent?i.activate("static"):Promise.resolve()}).then(function(){var e=i.deactivate("end"),t=i.deactivate("start");return Promise.all([e,t])})["catch"](function(e){f(e)}).then(function(){var t=n._el;return t.getAttribute("src")&&(t.setAttribute("src",""),n._video.source.revokeLastObjectUrl()),Promise.reject(e)})}},{key:"_onEnded",value:function(e){var n=this,r=this._controls,i=this._frames;r.arePresent&&(r.disable("pause"),r.isPresent("replay")?r.enable("replay"):r.isPresent("play")&&r.enable("play"));var o=i.isPresent("end")&&!i.isActive("end")?i.activate("end"):Promise.resolve();return o["catch"](function(e){f(e)}).then(function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onEnded",n).call(n,e)})}},{key:"frames",get:function(){return this._frames}},{key:"controls",get:function(){return this._controls}},{key:"indicators",get:function(){return this._indicators}}]),t}(l);t.exports=p},{"./Controls":115,"./Frames":116,"./Indicators":117,"./Video":119,"./model":120,"@marcom/ac-console/Error":20,"@marcom/ac-console/warn":23}],119:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./model").video,a=e("@marcom/asset-source/AssetSource"),s=e("@marcom/ac-console/error"),l=function(){function e(t,n){r(this,e),n=Object.assign({},n),this._model=n.model||o,delete n.model,this._options=n;var i="VIDEO"===t.tagName;this._container=i?null:t,this._el=i?t:null,this._source=null,this._promise={load:null,nativePlay:null},this._state={loading:!1,loaded:!1,hasPlayed:!1,assetUrl:""},this.load=this.load.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.reset=this.reset.bind(this)}return i(e,null,[{key:"convertToResolution",value:function(e){return a.convertToResolution(e)}},{key:"convertViewportName",value:function(e,t){return a.convertViewportName(e,t)}}]),i(e,[{key:"initialize",value:function(){var e=this._container;e&&(this._el=this._container.querySelector(this._model.SELECTOR.video)),this._options.el=this._el,this._source=new a(this._options)}},{key:"load",value:function(){var e=this;return this._promise.load&&this._state.assetUrl===this._source.assetUrl?this._promise.load:(this._state.loaded=!1,this._state.loading=!0,this._promise.load=this._source.load().then(function(t){return e._onLoadSuccess(t)},function(t){return e._onLoadFailure(t)}))}},{key:"play",value:function(){var e=this,t=this._promise.load;return!t||this._promise.nativePlay||this.isPlaying?Promise.reject("Unable to play."):t.then(function(){return new Promise(function(t,n){e._el.onended=function(){return e._onEnded(t)};var r=e._el.play();e._promise.nativePlay=r=r?r:Promise.resolve(),r.then(function(){e._state.hasPlayed=!0,e._promise.nativePlay=null},function(e){n(e)})})},function(e){return Promise.reject(e)})}},{key:"pause",value:function(){var e=this,t=this._promise.nativePlay;return t=t?t:Promise.resolve(),t.then(function(){return!e._el.paused&&e._state.loaded&&e._el.pause(),Promise.resolve()},function(e){return Promise.reject(e)})}},{key:"reset",value:function(){var e=this,t=this._promise.nativePlay;return t=t?t:Promise.resolve(),t.then(function(){return e._state.loaded&&(e._el.paused||e._el.pause(),e._el.currentTime=0),Promise.resolve()},function(e){return Promise.reject(e)})}},{key:"_onLoadSuccess",value:function(e){var t=this;return new Promise(function(n,r){var i=function o(){return t._el.removeEventListener("loadeddata",o),t._onFirstFrameLoaded(n)};t._el.addEventListener("loadeddata",i),t._el.setAttribute("src",e),t._el.load()})}},{key:"_onFirstFrameLoaded",value:function(e){return this._state.assetUrl=this._source.assetUrl,this._state.loaded=!0,this._state.loading=!1,this._source.revokeLastObjectUrl(),e()}},{key:"_onLoadFailure",value:function(e){return s("inline-video load error:",e),this._state.loaded=!1,this._state.loading=!1,Promise.reject(e)}},{key:"_onEnded",value:function(e){return e()}},{key:"el",get:function(){return this._el}},{key:"source",get:function(){return this._source}},{key:"state",get:function(){return this._state}},{key:"isPlaying",get:function(){var e=this._el;return!(!e||e.paused||e.ended||!(e.readyState>2))}}]),e}();t.exports=l},{"./model":120,"@marcom/ac-console/error":20,"@marcom/asset-source/AssetSource":100}],120:[function(e,t,n){"use strict";var r={video:{SELECTOR:{video:"video",mediaContainer:".inline-video-media"}},frames:{SELECTOR_MAP:new Map,CLASS:{active:"frame-active"}},controls:{SELECTOR_MAP:new Map},indicators:{SELECTOR_MAP:new Map,CLASS:{active:"indicator-active"}}},i=r.frames,o=r.controls,a=r.indicators;i.SELECTOR_MAP.set("container",".inline-video-media"),i.SELECTOR_MAP.set("static",".inline-video-frame-static"),i.SELECTOR_MAP.set("start",".inline-video-frame-start"),i.SELECTOR_MAP.set("end",".inline-video-frame-end"),o.SELECTOR_MAP.set("container",".inline-video-controls-panel"),o.SELECTOR_MAP.set("play",".inline-video-controls-play"),o.SELECTOR_MAP.set("replay",".inline-video-controls-replay"),o.SELECTOR_MAP.set("pause",".inline-video-controls-pause"),o.SELECTOR_MAP.set("reset",".inline-video-controls-reset"),a.SELECTOR_MAP.set("container",".inline-video-indicators"),a.SELECTOR_MAP.set("loading",".inline-video-indicators-loading"),t.exports=r},{}],121:[function(e,t,n){"use strict";t.exports={lerp:function(e,t,n){return t+(n-t)*e},map:function(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)},mapClamp:function(e,t,n,r,i){var o=r+(i-r)*(e-t)/(n-t);return Math.max(r,Math.min(i,o))},norm:function(e,t,n){return(e-t)/(n-t)},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],122:[function(e,t,n){"use strict";function r(e,t){i.call(this),this._id=e||a.ID,this._options=Object.assign({},a.OPTIONS,t),this._allowDOMEventDispatch=!1,this._allowElementStateData=!1,this._options.removeNamespace="boolean"!=typeof this._options.removeNamespace||this._options.removeNamespace,this._el=this._initViewportEl(this._id),this._resizing=!1,this._mediaQueryLists={resolution:{retina:window.matchMedia(c.RETINA)},orientation:{portrait:window.matchMedia(c.PORTRAIT),landscape:window.matchMedia(c.LANDSCAPE)}},this._viewport=this._getViewport(this._options.removeNamespace),this._retina=this._getRetina(this._mediaQueryLists.resolution.retina),this._orientation=this._initOrientation(),this._addListeners(),this._updateElementStateData()}var i=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-raf-emitter/update"),a={ID:"viewport-emitter",OPTIONS:{removeNamespace:!0}},s={DOM_DISPATCH:"data-viewport-emitter-dispatch",STATE:"data-viewport-emitter-state"},l="::before",c={RETINA:"only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",PORTRAIT:"only screen and (orientation: portrait)",LANDSCAPE:"only screen and (orientation: landscape)"},u={any:"change:any",orientation:"change:orientation",retina:"change:retina",viewport:"change:viewport"};Object.defineProperty(r,"DOM_DISPATCH_ATTRIBUTE",{get:function(){return s.DOM_DISPATCH}}),Object.defineProperty(r,"DOM_STATE_ATTRIBUTE",{get:function(){return s.STATE}});var h=r.prototype=Object.create(i.prototype);Object.defineProperty(h,"id",{get:function(){return this._id}}),Object.defineProperty(h,"element",{get:function(){return this._el}}),Object.defineProperty(h,"mediaQueryLists",{get:function(){return this._mediaQueryLists}}),Object.defineProperty(h,"viewport",{get:function(){return this._viewport}}),Object.defineProperty(h,"retina",{get:function(){return this._retina}}),Object.defineProperty(h,"orientation",{get:function(){return this._orientation}}),Object.defineProperty(h,"hasDomDispatch",{get:function(){return this._allowDOMEventDispatch}}),h.destroy=function(){this._removeListeners();for(var e in this._options)this._options[e]=null;for(var t in this._mediaQueryLists){var n=this._mediaQueryLists[t];for(var r in n)n[r]=null}this._id=null,this._el=null,this._viewport=null,this._retina=null,this._orientation=null,i.prototype.destroy.call(this)},h._initViewportEl=function(e){var t=document.getElementById(e);return t||(t=document.createElement("div"),t.id=e,t=document.body.appendChild(t)),t.hasAttribute(s.DOM_DISPATCH)||(t.setAttribute(s.DOM_DISPATCH,""),this._allowDOMEventDispatch=!0),t.hasAttribute(s.STATE)||(this._allowElementStateData=!0),t},h._dispatch=function(e,t){var n={viewport:this._viewport,orientation:this._orientation,retina:this._retina};if(this._allowDOMEventDispatch){var r=new CustomEvent(e,{detail:t}),i=new CustomEvent(u.any,{detail:n});this._el.dispatchEvent(r),this._el.dispatchEvent(i)}this.trigger(e,t),this.trigger(u.any,n)},h._addListeners=function(){this._onOrientationChange=this._onOrientationChange.bind(this),this._onRetinaChange=this._onRetinaChange.bind(this),this._onViewportChange=this._onViewportChange.bind(this),this._onViewportChangeUpdate=this._onViewportChangeUpdate.bind(this),this._mediaQueryLists.orientation.portrait.addListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.addListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.addListener(this._onRetinaChange),window.addEventListener("resize",this._onViewportChange)},h._removeListeners=function(){this._mediaQueryLists.orientation.portrait.removeListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.removeListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.removeListener(this._onRetinaChange),window.removeEventListener("resize",this._onViewportChange)},h._updateElementStateData=function(){if(this._allowElementStateData){var e=JSON.stringify({viewport:this._viewport,orientation:this._orientation,retina:this._retina});this._el.setAttribute(s.STATE,e)}},h._getViewport=function(e){var t=window.getComputedStyle(this._el,l).content;return t?(t=t.replace(/["']/g,""),e?t.split(":").pop():t):null},h._getRetina=function(e){return e.matches},h._getOrientation=function(e){var t=this._orientation;if(e.matches){var n=/portrait|landscape/;return e.media.match(n)[0]}return t},h._initOrientation=function(){var e=this._getOrientation(this._mediaQueryLists.orientation.portrait);return e?e:this._getOrientation(this._mediaQueryLists.orientation.landscape)},h._onViewportChange=function(){this._resizing||(this._resizing=!0,o(this._onViewportChangeUpdate))},h._onViewportChangeUpdate=function(){var e=this._viewport;if(this._viewport=this._getViewport(this._options.removeNamespace),e!==this._viewport){var t={from:e,to:this._viewport};this._updateElementStateData(),this._dispatch(u.viewport,t)}this._resizing=!1},h._onRetinaChange=function(e){var t=this._retina;if(this._retina=this._getRetina(e),t!==this._retina){var n={from:t,to:this._retina};this._updateElementStateData(),this._dispatch(u.retina,n)}},h._onOrientationChange=function(e){var t=this._orientation;if(this._orientation=this._getOrientation(e),t!==this._orientation){var n={from:t,to:this._orientation};this._updateElementStateData(),this._dispatch(u.orientation,n)}},t.exports=r},{"@marcom/ac-event-emitter-micro":41,"@marcom/ac-raf-emitter/update":76}],123:[function(e,t,n){"use strict";var r=e("./ViewportEmitter");t.exports=new r},{"./ViewportEmitter":122}],124:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("@marcom/ac-url/parseURL"),a=e("@marcom/ac-console/error"),s=e("@marcom/ac-console/log"),l={requestMethod:"GET",timeout:3e4};Object.freeze(l);var c={response:null,xhr:null};Object.freeze(c);var u={evt:null,xhr:null};Object.freeze(u);var h="href",m=function(){function e(t,n){return r(this,e),t||"string"==typeof t?(this._src=o(t)[h],this._opts=Object.assign({},l,n),this._xhr=new XMLHttpRequest,this._promise=null,this._metrics={progress:0,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,total:null}}},this._onLoadStart=this._onLoadStart.bind(this),this._onProgress=this._onProgress.bind(this),void(this._rejectData=this._rejectData.bind(this))):void a("createXhr(src, opts), a src is required to create an XMLHttpRequest")}return i(e,null,[{key:"isCORSRequest",value:function(e){return window.location.hostname!==o(e).hostname}},{key:"IS_SUPPORTED",get:function(){var e=window.XMLHttpRequest,t=window.Promise,n=e&&"function"==typeof e,r=t&&"function"==typeof t;return n&&r}}]),i(e,[{key:"open",value:function(){0===this._xhr.readyState&&(this._xhr.open(this._opts.requestMethod,this._src,!0,this._opts.user,this._opts.password),this._setXhrProps(),s("XmlHttpRequest opened and properties set"))}},{key:"send",value:function(e){var t=this;return e=void 0===e?null:e,this._promise?this._promise:this._promise=new Promise(function(n,r){t._xhr.onprogress=t._onProgress,t._xhr.onloadstart=t._onLoadStart,t._xhr.onload=function(e){return t._onLoad(n,r,e)},t._xhr.ontimeout=function(e){return t._rejectData(r,e)},t._xhr.onerror=function(e){return t._rejectData(r,e)},t._xhr.onabort=function(e){return t._rejectData(r,e)},t._metrics.time.requested=Date.now(),t._xhr.send(e),s("XmlHttpRequest sent")})}},{key:"destroy",value:function(){var e=this;return 4!==this._xhr.readyState&&this._xhr.abort(),this._promise=this._promise||Promise.resolve(),this._promise.then(function(){e._nullifyConstructorProps()},function(){e._nullifyConstructorProps()}).then(function(){return Promise.resolve()})}},{key:"_nullifyConstructorProps",value:function(){this._src=null,this._metrics={progress:null,totalAssetSize:null,time:{requested:null,load:{start:null,end:null,
total:null}}}}},{key:"_calcTotalLoadTime",value:function(){this._metrics.time.load.end=Date.now(),this._metrics.time.load.total=this._metrics.time.load.end-this._metrics.time.load.start}},{key:"_setXhrProps",value:function(){var e=this;Object.keys(this._opts).forEach(function(t){t in e._xhr&&"function"!=typeof e._xhr[t]&&(e._xhr[t]=e._opts[t])})}},{key:"_onLoadStart",value:function(){this._metrics.time.load.start=Date.now(),this._metrics.progress=0,s("XmlHttpRequest loading")}},{key:"_onLoad",value:function(e,t,n){var r=this._xhr.status;if(200!==r)return this._rejectData(t,n);this._calcTotalLoadTime();var i=Object.assign({},c,{response:this._xhr.response,xhr:this._xhr});return s("XmlHttpRequest loaded"),e(i)}},{key:"_onProgress",value:function(e){this._metrics.totalAssetSize||(this._metrics.totalAssetSize=e.total),this._metrics.progress=e.total?e.loaded/e.total:0}},{key:"_rejectData",value:function(e,t){var n=Object.assign({},u,{evt:t,xhr:this._xhr});return a("XhrRequest failed due to",n),e(n)}},{key:"xhr",get:function(){return this._xhr}},{key:"requestUrl",get:function(){return this._src}},{key:"progress",get:function(){return this._metrics.progress}},{key:"totalAssetSize",get:function(){return this._metrics.totalAssetSize}},{key:"requestedAtTime",get:function(){return this._metrics.time.requested}},{key:"loadStartTime",get:function(){return this._metrics.time.load.start}},{key:"loadEndTime",get:function(){return this._metrics.time.load.end}},{key:"totalLoadTime",get:function(){return this._metrics.time.load.total}}]),e}();t.exports=m},{"@marcom/ac-console/error":20,"@marcom/ac-console/log":22,"@marcom/ac-url/parseURL":82}],125:[function(e,t,n){"use strict";t.exports={path:e("./ac-path/path")}},{"./ac-path/path":126}],126:[function(e,t,n){"use strict";function r(e){return r.parse(e)}r.basename=function(e,t){r._assertStr(e);var n,i=e.match(/[^\/]*$/)[0];return t&&(n=i.match(new RegExp("(.*)"+t+"$")),n&&(i=n[1])),i},r.dirname=function(e){r._assertStr(e);var t=e.match(/^(.*)\b\/|.*/);return t[1]||e},r.extname=function(e){r._assertStr(e);var t=e.match(/\.[^.]*$/);return t?t[0]:""},r.filename=function(e){return r._assertStr(e),r.basename(e,r.extname(e))},r.format=function(e,t){r._assertObj(e);var n=e.dirname?e.dirname+"/":"";return e.basename?n+=e.basename:e.filename&&(n+=e.filename,e.extname&&(n+=e.extname)),t&&("string"==typeof t?n+="?"+t:Object.prototype.toString.call(t)===Object.prototype.toString.call([])&&(n+="?"+t.join("&"))),n},r.isAbsolute=function(e){return r._assertStr(e),!!e.match(/(^http(s?))/)},r.isRootRelative=function(e){return r._assertStr(e),!!e.match(/^\/(?!\/)/)},r.parse=function(e){return r._assertStr(e),{dirname:r.dirname(e),basename:r.basename(e),filename:r.filename(e),extname:r.extname(e)}},r._assertStr=function(e){r._assertType(e,"string")},r._assertObj=function(e){r._assertType(e,"object")},r._assertType=function(e,t){var n=typeof e;if("undefined"===n||n!==t)throw new TypeError("path param must be of type "+t)},t.exports=r},{}],127:[function(e,t,n){function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],128:[function(e,t,n){function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],129:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],m=t[10],f=t[11],d=t[12],p=t[13],v=t[14],y=t[15],_=n*s-r*a,b=n*l-i*a,g=n*c-o*a,E=r*l-i*s,w=r*c-o*s,S=i*c-o*l,T=u*p-h*d,O=u*v-m*d,P=u*y-f*d,k=h*v-m*p,x=h*y-f*p,C=m*y-f*v,A=_*C-b*x+g*k+E*P-w*O+S*T;return A?(A=1/A,e[0]=(s*C-l*x+c*k)*A,e[1]=(i*x-r*C-o*k)*A,e[2]=(p*S-v*w+y*E)*A,e[3]=(m*w-h*S-f*E)*A,e[4]=(l*P-a*C-c*O)*A,e[5]=(n*C-i*P+o*O)*A,e[6]=(v*g-d*S-y*b)*A,e[7]=(u*S-m*g+f*b)*A,e[8]=(a*x-s*P+c*T)*A,e[9]=(r*P-n*x-o*T)*A,e[10]=(d*w-p*g+y*_)*A,e[11]=(h*g-u*w-f*_)*A,e[12]=(s*O-a*k-l*T)*A,e[13]=(n*k-r*O+i*T)*A,e[14]=(p*b-d*E-v*_)*A,e[15]=(u*E-h*b+m*_)*A,e):null}t.exports=r},{}],130:[function(e,t,n){function r(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],131:[function(e,t,n){function r(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=r},{}],132:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}t.exports=r},{}],133:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],134:[function(e,t,n){function r(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}t.exports=r},{}],135:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],136:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=r},{}],137:[function(e,t,n){function r(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=r},{}],138:[function(e,t,n){function r(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}t.exports=r},{}],139:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}t.exports=r},{}],140:[function(e,t,n){"use strict";function r(){a=window.document.createElement("span"),a.textContent="Text Zoom Tester",a.setAttribute("aria-hidden","true"),a.style.fontSize="100px",a.style.display="none",window.document.body.appendChild(a)}function i(){a||r();var e=parseFloat(getComputedStyle(a).fontSize),t=e/100;return t}function o(e){a||r(),"undefined"==typeof e&&(e=document);var t=i();Array.from(e.querySelectorAll("[data-text-zoom-max]")).forEach(function(e){var n=e.dataset.textZoomMax;if(t>n){e.style.fontSize="",console.log("testing");var r=n,i=parseFloat(getComputedStyle(e).fontSize),o=i/t,a=(o/t*r).toFixed(2);e.style.fontSize=a+"px"}else e.style.fontSize=""})}var a=null;t.exports={getTextZoomRatio:i,adjustForTextZoom:o}},{}],141:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"mounted",value:function(){var e=this;this.addDiscreteEvent({start:"-65vh",end:"65%",event:"range",onEnter:function(){e.animationHasRun||e.el.classList.contains("run-notifications")||(e.el.classList.add("run-notifications"),e.animationHasRun=!0)}})}},{key:"onBreakpointChange",value:function(){(this.animationHasRun||this.el.classList.contains("run-notifications"))&&(this.el.classList.add("show-static"),this.el.classList.remove("run-notifications"))}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(s);t.exports=l},{"@marcom/bubble-gum/BaseComponent":103}],142:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function O(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:O(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("@marcom/ac-raf-emitter/RAFEmitter"),c=e("@marcom/ac-raf-emitter/update"),u=e("@marcom/ac-raf-emitter/draw"),h=e("./Decode/CanvasManager"),m=e("./Decode/Cartesian2dCoordSystemRH"),f=e("./Decode/NumberedPoint"),d=e("@marcom/feature-detect/prefersReducedMotion"),p=e("./Decode/utilities"),v=p.getRandomIntInclusive,y=e("@marcom/dom-metrics/getPagePosition"),_={large:{xIntervalSize:32,yIntervalSize:35},medium:{xIntervalSize:32,yIntervalSize:35},small:{xIntervalSize:21,yIntervalSize:23}},b=3e3,g=2e3,E=27,w=5,S=function(e,t){return"L"===e||t!==!0&&"xlarge"===e?"large":"M"===e?"medium":"S"===e?"small":e},T=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._coordSys=new m(0,0),n._rafEmitter=new l,n._decodeBoundaryComponents={globalnav:{el:document.getElementById("ac-globalnav"),rect:null},localnav:{el:document.getElementById("ac-localnav"),rect:null},heroHeadline:{el:document.getElementById("hero-headline"),rect:null},heroIntro:{el:document.getElementById("hero-intro"),rect:null},bgImg:{el:document.getElementById("bg-gradient")},nextSection:{el:document.getElementById("section-built-in"),rect:null}},n._decodeBoundaries={perimeter:null,copyBlock:null},n._numberedPoints={rowsArr:[],cloudArr:[]},n._decodedPoints=[],n._gridIntervals={x:0,y:0},n._state.drawStatic=d(),n._viewport=S(e.pageMetrics.breakpoint),n.draw=n.draw.bind(n),n}return o(t,e),s(t,null,[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("decode")}}]),s(t,[{key:"mounted",value:function(){var e=this;this._getKeyElementMetrics().then(function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",e).call(e),e._createPointCloud(),e.draw()})["catch"](function(){})}},{key:"draw",value:function(){this._state.drawStatic?this.drawStatic():this.drawAnimated()}},{key:"drawAnimated",value:function(){var e=this;this._encodeAnimate().then(function(){e._state.drawStatic||e._decodeAnimate()})["catch"](function(){})}},{key:"drawStatic",value:function(){var e=this;this._encodeStatic().then(function(){e._decodeStatic()})["catch"](function(){})}},{key:"onResizeDebounced",value:function(e){var n=this;this._getKeyElementMetrics().then(function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onResizeDebounced",n).call(n,e),n._viewport=S(e.breakpoint),n._state.drawStatic=!0,n._clearPtCloud(),n.drawStatic()})}},{key:"_getKeyElementMetrics",value:function(){var e=this,t=this._decodeBoundaryComponents,n=t.globalnav,r=t.localnav,i=t.heroHeadline,o=t.heroIntro,a=t.bgImg,s=t.nextSection,l=r.el,u=i.el,h=o.el,m=a.el,f=s.el;return new Promise(function(t,a){c(function(){n.rect=y(n.el);var a=r.rect=y(l);a.height=l.clientHeight;var c=i.rect=y(u);c.width=u.clientWidth,c.height=u.clientHeight;var d=o.rect=y(h);d.width=u.clientWidth,d.height=u.clientHeight,s.rect=y(f);var p=m.clientWidth,v=m.clientHeight;e._opts.width=innerWidth<=p?innerWidth:p,e._opts.height=v,e._calcDecodeBoundaries(),t()})})}},{key:"_calcDecodeBoundaries",value:function(){var e=_[this._viewport],t=e.xIntervalSize,n=e.yIntervalSize,r=this._decodeBoundaryComponents,i=r.globalnav.rect,o=r.localnav.rect,a=r.nextSection.rect,s={},l="small"===this._viewport?0:n;s.top=Math.ceil(i.bottom+o.height+l),s.bottom=Math.floor(a.top-n);var c=1440,u=innerWidth,h=u>c,m=h?c:u,f=innerWidth/2,d=h?f-m/2+t:t,p=h?f+m/2-t:u-t;s.left=Math.ceil(d),s.right=Math.floor(p);var v={},y=r.heroHeadline.rect,b=y.right,g=r.heroIntro.rect,E=g.right,w=b>E?b:E;v.top=Math.floor(y.top),v.bottom=Math.ceil(g.bottom+n),v.left=Math.floor(g.left-t),v.right=Math.ceil(w+t),this._decodeBoundaries={pageOffsetTop:document.documentElement.offsetTop,perimeter:s,copyBlock:v}}},{key:"_createPointCloud",value:function(){for(var e=this._ctx,t=this._coordSys,n=_[this._viewport],r=n.xIntervalSize,i=n.yIntervalSize,o=this._gridIntervals,a=this.nonRetinaWidth,s=this.nonRetinaHeight,l=o.x=Math.floor(a/r),c=o.y=Math.floor(s/i),u="small"===this._viewport?9:12,h=this._numberedPoints,m=0;m<=c;){for(var d=[],p=0;p<=l;p+=1){var v=p*r,y=m*i,b=t.newPoint(v,y),g={anchorPt:b,encodeAlpha:.3,fontSize:u},E=new f(e,g);d.push(E),h.cloudArr.push(E)}h.rowsArr.push(d),m+=1}}},{key:"_encodeAnimate",value:function(){var e=this,t=this._numberedPoints.cloudArr.slice(0),n=this._rafEmitter,r=1,i=60,o=i*(b/1e3),a=Math.ceil(t.length/o)*r,s=0;return new Promise(function(i,o){var l=function c(o){if(s%r===0)for(var l=t.length,u=l>a?a:l;u>0;){var h=t.length-1,m=v(0,h),f=t.splice(m,1)[0];f.draw(),u-=1}t.length>0&&!e._state.drawStatic?(s+=1,n.run()):(n.off("draw",c),i())};n.on("draw",l),n.run()})}},{key:"_canDecode",value:function(e){var t=this._decodeBoundaries,n=t.perimeter,r=t.copyBlock,i=e.nonRetinaX,o=e.nonRetinaY+t.pageOffsetTop,a=n.top<o&&o<n.bottom,s=n.left<i&&i<n.right,l=r.top<o&&o<r.bottom,c=r.left<i&&i<r.right,u=a&&s,h=l&&c;return u&&!h}},{key:"_getDecodePointQueue",value:function(){for(var e=this,t=[],n=this._gridIntervals,r=this._numberedPoints.rowsArr,i=n.y,o=n.x,a=function(){for(var n=v(0,i),a=v(0,o),s=E-t.length,l=s<w?s:w,c=v(1,l),u=v(0,1)?"row":"column",h="row"===u?a:n,m=h+c-1,f=function(e){return r[n][e]},d=function(e){return e<=i?r[e][a]:null},p="row"===u?f:d,y=h;y<=m;y+=1){var _=p(y);_&&!_.decoded&&e._canDecode(_)&&(_.decoded=!0,t.push(_))}};t.length<E;)a();return t}},{key:"_decodeAnimate",value:function(){var e=this,t=this._rafEmitter,n=this._decodedPoints=this._getDecodePointQueue(),r=60,i=r*(g/1e3),o=Math.floor(i/E),a=0,s=function l(r){if(a%o===0){var i=n.shift();i.draw()}n.length>0&&!e._state.drawStatic?(a+=1,t.run()):t.off("draw",l)};t.on("draw",s),t.run()}},{key:"_clearPtCloud",value:function(){this._numberedPoints.rowsArr=[],this._numberedPoints.cloudArr=[],this._decodedPoints=[]}},{key:"_encodeStatic",value:function(){var e=this;return new Promise(function(t,n){c(function(){var n=e._numberedPoints.cloudArr;0===n.length&&e._createPointCloud(),u(function(){e._staticDraw(n),t()})})})}},{key:"_decodeStatic",value:function(){var e=this;return new Promise(function(t,n){c(function(){var n=e._decodedPoints;0===n.length&&(n=e._decodedPoints=e._getDecodePointQueue()),u(function(){e._staticDraw(n),t()})})})}},{key:"_staticDraw",value:function(e){for(var t=e.length,n=0;n<t;n+=1)e[n].draw()}}]),t}(h);t.exports=T},{"./Decode/CanvasManager":143,"./Decode/Cartesian2dCoordSystemRH":144,"./Decode/NumberedPoint":146,"./Decode/utilities":147,"@marcom/ac-raf-emitter/RAFEmitter":65,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/dom-metrics/getPagePosition":109,"@marcom/feature-detect/prefersReducedMotion":113}],143:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/feature-detect/canvasAvailable"),c=e("./utilities").getPixelDensity,u={width:window.innerWidth,height:window.innerHeight,clearColor:"#ffffff"},h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n.el;return n._canvas=o,n._ctx=o.getContext("2d"),n._opts=Object.assign({},u),n._state={pixelDensity:c(),width:0,height:0},n.draw=n.draw.bind(n),n}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return l()}}]),a(t,[{key:"mounted",value:function(){this._updateCanvasSize(this._opts.width,this._opts.height)}},{key:"draw",value:function(){this._clearCanvas()}},{key:"onResizeDebounced",value:function(e){this._updateCanvasSize(this._opts.width,this._opts.height)}},{key:"_updateCanvasSize",value:function(e,t){var n=this._canvas,r=this._state,i=r.pixelDensity;r.width=n.width=e*i,r.height=n.height=t*i,n.style.width=e+"px",n.style.height=t+"px"}},{key:"_clearCanvas",value:function(){var e=this._ctx,t=this._state;e.fillStyle=this._opts.clearColor;var n=t.width,r=t.height;e.fillRect(0,0,n,r)}},{key:"canvas",get:function(){return this._canvas}},{key:"nonRetinaWidth",get:function(){var e=this._state;return e.width/e.pixelDensity}},{key:"nonRetinaHeight",get:function(){var e=this._state;return e.height/e.pixelDensity}}]),t}(s);t.exports=h},{"./utilities":147,"@marcom/bubble-gum/BaseComponent":103,"@marcom/feature-detect/canvasAvailable":111}],144:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./Cartesian2dPoint"),a=function(){function e(t,n,i){r(this,e),this._origin=new o(t,n,i),this._pointCloud=new Map}return i(e,[{key:"translateOrigin",value:function(e,t,n){this._origin.setX(e,n),this._origin.setY(t,n)}},{key:"newPoint",value:function(e,t,n){var r=this._origin,i={id:parseInt(Date.now()*Math.random(),10).toString().slice(-5)};n=Object.assign({},i,n),e+=r.x,t+=r.y;var a=new o(e,t,n.applyPixelDensity);return this._pointCloud.set(n.id,a),a}},{key:"removePoint",value:function(e){return this._pointCloud["delete"](e)}},{key:"retrievePointById",value:function(e){return this._pointCloud.get(e)}},{key:"originPt",get:function(){return this._origin}},{key:"pointCloud",get:function(){return this._pointCloud}}]),e}();t.exports=a},{"./Cartesian2dPoint":145}],145:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./utilities").getPixelDensity,a=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r(this,e);var a=this._pixelDensity=o();i&&(t*=a,n*=a),this.x=t,this.y=n}return i(e,[{key:"setX",value:function(e,t){t=t!==!1||t,t&&(e*=this._pixelDensity),this.x=e}},{key:"setY",value:function(e,t){t=t!==!1||t,t&&(e*=this._pixelDensity),this.y=e}},{key:"stepAxisCoord",value:function(e,t){var n=this[e];this[e]=n+t*this._pixelDensity}},{key:"nonRetinaX",get:function(){return this.x/this._pixelDensity}},{key:"nonRetinaY",get:function(){return this.y/this._pixelDensity}},{key:"arr",get:function(){return[this.x,this.y]}},{key:"nonRetinaArr",get:function(){var e=this._pixelDensity;return[this.x/e,this.y/e]}}]),e}();t.exports=a},{"./utilities":147}],146:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./utilities"),a=o.getPixelDensity,s=o.getRandomIntInclusive,l="rgb(255, 255, 255)",c="rgb(0, 0, 0)",u=1,h={anchorPt:null,color:l,encodeAlpha:1,fontSize:12,fontFamily:"SF Mono, SF Pro Text, Helvetica Neue, Helvetica, Arial, sans-serif",fontWeight:"normal"},m=function(){function e(t,n){r(this,e),this._canvas=t.canvas,this._ctx=t,this._opts=Object.assign({},h,n),this._pixelDensity=a(),this._state={number:s(0,9),decoded:!1}}return i(e,[{key:"draw",value:function(){this._drawNumber()}},{key:"_drawNumber",value:function(){var e=this._ctx,t=this._state,n=this._opts,r=n.anchorPt,i=this._state.decoded?c:n.color,o=this._state.decoded?u:n.encodeAlpha;e.save(),e.globalAlpha=o,e.fillStyle=i,e.beginPath(),e.font=n.fontWeight+" "+n.fontSize*this._pixelDensity+"px "+n.fontFamily,e.fillText(t.number,r.x,r.y),e.restore()}},{key:"x",get:function(){return this._opts.anchorPt.x}},{key:"y",get:function(){return this._opts.anchorPt.y}},{key:"nonRetinaX",get:function(){return this._opts.anchorPt.nonRetinaX}},{key:"nonRetinaY",get:function(){return this._opts.anchorPt.nonRetinaY}},{key:"number",get:function(){return this._state.number}},{key:"decoded",get:function(){return this._state.decoded},set:function(e){this._state.decoded=e}}]),e}();t.exports=m},{"./utilities":147}],147:[function(e,t,n){"use strict";t.exports={getPixelDensity:function(){return window.devicePixelRatio>1?2:1},normalizeValue:function(e,t,n){return(e-t)/(n-t)},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}},{}],148:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=document.querySelector("#ac-localnav"),c=0,u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBreakpointChange(),n.uniqueSelector=n.generateIdenitifyingSelector(),n.initializeKeyframe(),n}return o(t,e),a(t,[{key:"IS_SUPPORTED",value:function(){return!!l}}]),a(t,[{key:"generateIdenitifyingSelector",value:function(){var e="data-ln-section",t=++c;return this.el.setAttribute(e,t),"["+e+'="'+t+'"]'}},{key:"initializeKeyframe",value:function(){this.keyframe&&this.keyframe.remove(),this.keyframe=this.anim.addKeyframe(l,{start:"-200% - "+this.localnavHeight+"px",end:"100rh - 100%",cssClass:"ac-localnav-dark",toggle:!0,relativeTo:this.uniqueSelector})}},{key:"onBreakpointChange",value:function(){this.localnavHeight=l.clientHeight}}]),t}(s);t.exports=u},{"@marcom/bubble-gum/BaseComponent":103}],149:[function(e,t,n){"use strict";/**
 * @preserve-author
 * @author alteredq / http://alteredqualia.com/
 *
 * Full-screen textured quad shader
 */
window.THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},{}],150:[function(e,t,n){"use strict";/**
 * @preserve-author
 * @author alteredq / http://alteredqualia.com/
 */
window.THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:window.THREE.LinearFilter,magFilter:window.THREE.LinearFilter,format:window.THREE.RGBAFormat,stencilBuffer:!1},r=e.getDrawingBufferSize();t=new window.THREE.WebGLRenderTarget(r.width,r.height,n),t.texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===window.THREE.CopyShader,void 0===window.THREE.ShaderPass,this.copyPass=new window.THREE.ShaderPass(window.THREE.CopyShader)},Object.assign(window.THREE.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,n,r=!1,i=this.passes.length;for(n=0;n<i;n++)if(t=this.passes[n],t.enabled!==!1){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==window.THREE.MaskPass&&(t instanceof window.THREE.MaskPass?r=!0:t instanceof window.THREE.ClearMaskPass&&(r=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),window.THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(window.THREE.Pass.prototype,{setSize:function(){},render:function(){}})},{}],151:[function(e,t,n){"use strict";/**
 * @preserve-author
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 * Two pass Gaussian blur filter (horizontal and vertical blur shaders)
 * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/
 *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html
 *
 * - 9 samples per pass
 * - standard deviation 2.7
 * - "h" and "v" parameters should be set to "1 / width" and "1 / height"
 */
window.THREE.HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},{}],152:[function(e,t,n){"use strict";/**
 * @preserve-author
 * @author alteredq / http://alteredqualia.com/
 */
window.THREE.RenderPass=function(e,t,n,r,i){window.THREE.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},window.THREE.RenderPass.prototype=Object.assign(Object.create(window.THREE.Pass.prototype),{constructor:window.THREE.RenderPass,render:function(e,t,n){var r=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var i,o;this.clearColor&&(i=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(i,o),this.scene.overrideMaterial=null,e.autoClear=r}})},{}],153:[function(e,t,n){"use strict";window.THREE.RoundedCornerShader={uniforms:{tDiffuse:{value:null},resolution:{type:"v2",value:new window.THREE.Vector2},roundedCorner:{value:.8}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:"\n\t\t\tuniform sampler2D tDiffuse;\n\t\t    varying vec2 vUv;\n\t\t    uniform vec2 resolution;\n\t\t    uniform float roundedCorner;\n\n\t\t    const float PI = 3.14159265;\n\n\n\t\t\tvoid main( ){\n\n\t\t\t\tfloat radius = 0.04;\n\t\t\t\tvec2 boxSize = vec2(0.5*(resolution.x / resolution.y)- radius,0.5-radius);\n\n    \t\t\tvec2 centered = vUv-0.5;\n\n    \t\t\tvec4 red = texture2D(tDiffuse, vUv);\n    \t\t\tvec4 black = vec4(0.0,0.0,0.0,0.0);\n\n    \t\t\tcentered.x *= resolution.x / resolution.y;\n\n    \t\t\tvec2 offsetPt = abs(centered)-boxSize;\n    \t\t\toffsetPt = max(offsetPt, vec2(0.,0.));\n\n    \t\t\tfloat distance = length(offsetPt);\n    \t\t\tdistance = smoothstep(distance - (1.0/resolution.x), distance + (1.0/resolution.x), radius);\n\n    \t\t\tgl_FragColor = mix (black, red, distance);\n\n\n        \n\t\t\t    \n\t\t\t}\n\t"}},{}],154:[function(e,t,n){"use strict";/**
 * @preserve-author
 * @author alteredq / http://alteredqualia.com/
 */
window.THREE.ShaderPass=function(e,t){window.THREE.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof window.THREE.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=window.THREE.UniformsUtils.clone(e.uniforms),this.material=new window.THREE.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new window.THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new window.THREE.Scene,this.quad=new window.THREE.Mesh(new window.THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},window.THREE.ShaderPass.prototype=Object.assign(Object.create(window.THREE.Pass.prototype),{constructor:window.THREE.ShaderPass,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},{}],155:[function(e,t,n){"use strict";/**
 * @preserve-author
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 * Two pass Gaussian blur filter (horizontal and vertical blur shaders)
 * - described in http://www.gamerendering.com/2008/10/11/gaussian-blur-filter-shader/
 *   and used in http://www.cake23.de/traveling-wavefronts-lit-up.html
 *
 * - 9 samples per pass
 * - standard deviation 2.7
 * - "h" and "v" parameters should be set to "1 / width" and "1 / height"
 */
window.THREE.VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}},{}],156:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/draw"),c=e("@marcom/ac-raf-emitter/update"),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.documentTokenList=document.documentElement.classList,n.reduceMotionEnabled=n.documentTokenList.contains("reduced-motion"),n.fallback=n.reduceMotionEnabled,n.pageMetrics=e.pageMetrics,n.heroCard=n.el.querySelector(".hero-card"),n.heroHeadline=n.el.querySelector(".hero-headline"),n.placeholder=n.el.querySelector(".placeholder"),n.heroHardware=n.el.querySelector(".hero-hardware"),n.heroSubhead=n.el.querySelector(".hero-subheader"),n.heroLogos=n.el.querySelector(".hero-card-logos"),n.heroOverlay=n.el.querySelector(".hero-card-overlay"),n.acLocalNav=document.querySelector("#ac-localnav"),n.gum.on("STICKY_SETTLED",function(e){n.setElementDimensions(e)}),n.setResizeKeyframe(),n}return o(t,e),a(t,[{key:"setResizeKeyframe",value:function(){var e=this,t={el:this.heroCard,start:"0",end:"100%h",event:"view",disabledWhen:"no-sticky-enhanced",relativeTo:".hero-card-container"};this.viewKeyframe=this.addKeyframe(t),this.viewKeyframe.controller.on("view:enter",function(){e.inView=!0}),this.viewKeyframe.controller.on("view:exit",function(){e.inView=!1})}},{key:"calculateFinalYPosition",value:function(e){var t=e.windowHeight,n=window.getComputedStyle(this.placeholder),r=t/2-(parseInt(n.bottom,10)+parseInt(n.height,10)/2),i=100*(t/2+r)/t-50;return i+"vh"}},{key:"calculateSubheadFinalYPosition",value:function(e){var t=this.acLocalNav.getBoundingClientRect().height,n=e.windowHeight,r=this.heroHardware.getBoundingClientRect(),i=this.heroSubhead.getBoundingClientRect(),o=(n-r.height-i.height+t)/2;return o}},{key:"mounted",value:function(){this.setElementDimensions(this.pageMetrics)}},{key:"setSubheadKeyframes",value:function(){var e=this.calculateSubheadFinalYPosition(this.pageMetrics);if(this.gum.anim.getControllerForTarget(this.heroSubhead).keyframes.y){var t=this.gum.anim.getControllerForTarget(this.heroSubhead).keyframes.y[0];t&&t.overwriteProps({y:["0%","-50vh + 50%h +"+e]})}}},{key:"setCardKeyframes",value:function(){var e=this,t=.999*this.pageMetrics.windowHeight,n=this.heroCard.clientHeight,r=this.heroCard.clientWidth,i=this.placeholder.getClientRects()[0];if(this.heroCardFinalWidth=i.width,this.heroCard.finalScale=this.heroCardFinalWidth/r,n<t){var o=t*r/n,a=o/r;this.heroCard.initialScale=a}else this.heroCard.initialScale=1;var s={el:this.heroCard,start:"60vh",end:"240vh",ease:"0.5",easeFunction:"easeOutCubic",relativeTo:".hero-card-container",disabledWhen:"no-sticky-enhanced",scale:[this.heroCard.initialScale,this.heroCard.finalScale]},c={el:this.heroCard,start:"100vh",end:"240vh",ease:"0.5",easeFunction:"easeOutCubic",relativeTo:".hero-card-container",disabledWhen:"no-sticky-enhanced",y:[0,this.calculateFinalYPosition(this.pageMetrics)]},u={el:this.heroCard,start:"0vh",end:"320vh",cssClass:"will-change",toggle:!0,disabledWhen:"no-sticky-enhanced",relativeTo:".hero-card-container"},h=Object.assign({},s,{el:this.heroLogos}),m=Object.assign({},c,{el:this.heroLogos}),f=Object.assign({},u,{el:this.heroLogos}),d=Object.assign({},s,{el:this.heroOverlay}),p=Object.assign({},c,{el:this.heroOverlay}),v=Object.assign({},u,{el:this.heroOverlay});return this.cardKeyframe?(this.cardKeyframe.overwriteProps(s),this.keyframeYmovement.overwriteProps(c),this.logosKeyframe.overwriteProps(h),this.logosYMovKeyframe.overwriteProps(m),this.overlayKeyframe.overwriteProps(d),void this.overlayYMovKeyframe.overwriteProps(p)):(this.cardKeyframe=this.addKeyframe(s),this.keyframeYmovement=this.addKeyframe(c),this.keyframeWillChange=this.addKeyframe(u),this.logosKeyframe=this.addKeyframe(h),this.logosYMovKeyframe=this.addKeyframe(m),this.logosWillChangeKeyFrame=this.addKeyframe(f),this.overlayKeyframe=this.addKeyframe(d),this.overlayYMovKeyframe=this.addKeyframe(p),this.overlayWillChangeKeyFrame=this.addKeyframe(v),void l(function(){e.heroHeadline.style.opacity="1",e.heroCard.style.opacity=1}))}},{key:"callAnimationUpdate",value:function(){var e=this;c(function(){e.documentTokenList.contains("no-sticky-enhanced")||(e.setCardKeyframes(),e.setSubheadKeyframes())})}},{key:"setElementDimensions",value:function(e){this.documentTokenList.contains("no-sticky-enhanced")||(this.pageMetrics=e,this.callAnimationUpdate())}},{key:"onResizeImmediate",value:function(e){this.inView&&this.setElementDimensions(e)}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(s);t.exports=u},{"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/bubble-gum/BaseComponent":103}],157:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/anim-system/Model/EasingFunctions"),c=e("@marcom/ac-threejs-loader"),u=e("@marcom/ac-raf-emitter/ThrottledRAFEmitter"),h=function(t){function n(t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return o.documentTokenList=document.documentElement.classList,o.reduceMotionEnabled=o.documentTokenList.contains("reduced-motion"),o.glAvailable=o.documentTokenList.contains("webGl"),o.fallback=!o.glAvailable&&o.reduceMotionEnabled,o.fallback?o.el.classList.add("background-fallback"):c.load({versionNumber:87}).then(function(){e("./OverviewGradientLib/EffectComposer"),e("./OverviewGradientLib/HorizontalBlurShader"),e("./OverviewGradientLib/VerticalBlurShader"),e("./OverviewGradientLib/ShaderPass"),e("./OverviewGradientLib/RenderPass"),e("./OverviewGradientLib/CopyShader"),e("./OverviewGradientLib/RoundedCornerShader"),o.init(t)})["catch"](function(){o.el.classList.add("background-fallback")}),o}return o(n,t),a(n,[{key:"init",value:function(e){var t=this;this.initVars(e),this.initThree(),this.initBalls().then(function(){t.initClassicComposer(),t.initAnimation(),t.startKeyframes(),t.bringBallsToTop(),t.triggerFallback(),t.gum.on("STICKY_SETTLED",function(){t.triggerFallback()})})}},{key:"triggerFallback",value:function(){var e=this;this.documentTokenList.contains("no-sticky-enhanced")?requestAnimationFrame(function(){return e.ThrottledRAFEmitter.cancel()}):this.ThrottledRAFEmitter.run()}},{key:"initAnimation",value:function(){var e=this;this.maxFrameRate=60,this.frameRateReducer=.8,this.frameRate=this.maxFrameRate*this.frameRateReducer,this.frameRateMultiplier=this.maxFrameRate/this.frameRate,this.ThrottledRAFEmitter=new u(this.frameRate),this.ThrottledRAFEmitter.on("update",function(t){e.update(t),e.ThrottledRAFEmitter.run()}),this.ThrottledRAFEmitter.run()}},{key:"changeFrameRate",value:function(e){this.frameRateReducer=e,this.frameRate=this.maxFrameRate*this.frameRateReducer,this.ThrottledRAFEmitter.setFps(this.frameRate)}},{key:"initVars",value:function(e){var t=this;this.timeStart=0,e.grow=this.el.getAttribute("data-gradient-grow")||e.grow,"false"===e.grow?this.makeBallsStaticGrow():this.makeBallsGrowShrink(),this.BOUNDARY_RADIUS=10,this.shrinkingGrowingRatio=.08,this.growShrinkRatio=[1.5,.66666],setTimeout(function(){t.shrinkingGrowingRatio=.01},1e3),this.YPullforce=.1,this.YPullforceSpeed=.01,this.balls=[],this.color1=[7,186,39],this.color2=[248,173,0],this.color3=[249,149,64],this.color4=[230,109,215],this.color5=[174,101,249]}},{key:"initThree",value:function(){this.ratioArray=[],this.scene=new window.THREE.Scene,this.renderer=new window.THREE.WebGLRenderer({antialias:!1,alpha:!0,autoClear:!1}),this.renderer.setClearColor(16777215),this.renderer.setSize(320,200),this.el.appendChild(this.renderer.domElement),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.camera=new window.THREE.PerspectiveCamera(45,1,.1,1e3),this.camera.position.z=-26,this.camera.lookAt(new window.THREE.Vector3),this.camera.position.y=1.6}},{key:"initBalls",value:function(){function e(e,t){for(var n=e;n.length<t;)n="0"+n;return n}this.numGroups=0,this.colorHexes=[this.color1,this.color2,this.color3,this.color4,this.color5],this.colorCSS=this.colorHexes.map(function(t){return"#"+e(t.toString(16),6)}),this.colors=this.colorHexes.map(function(e){return new window.THREE.MeshBasicMaterial({color:new window.THREE.Color("rgb("+e[0]+", "+e[1]+", "+e[2]+")"),transparent:!1,depthWrite:!1,wireframe:!1})}),this.geo=new window.THREE.SphereBufferGeometry(.5,32,32),this.balls=[];var t=[this.addGroup(0,1,3*Math.random()+.4),this.addGroup(1,6),this.addGroup(2,6),this.addGroup(3,4),this.addGroup(4,6)];return Promise.all(t)}},{key:"addBall",value:function(e,t){var n=new window.THREE.Mesh(this.geo,this.colors[e].clone());n.colorIndex=e,n.velocity=new window.THREE.Vector2,n.maxSize=n.originalMaxSize=t||3*Math.random()+.7,n.size=.1,n.position.set(4*e-8+.1*Math.random(),.1*Math.random()+7,0),n.scale.multiplyScalar(n.size),this.balls.push(n),this.scene.add(n)}},{key:"addGroup",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(i){n.numGroups+=1,setTimeout(function(){var o=80,a=n.ratioArray.reduce(function(e,t){return e+=t.amount},0),s=a+t;n.cullBalls(s),n.updateRatioEntry(e,t);var l=Math.floor(t/s*o);n.addBalls(l,e,r),i()},1)})}},{key:"updateRatioEntry",value:function(e,t){var n={colorIndex:e,amount:0,color:this.colorCSS[e]},r=this.ratioArray.findIndex(function(t){return t.colorIndex===e});r>-1?n=this.ratioArray[r]:this.ratioArray.push(n),n.amount+=t}},{key:"getBallsByColor",value:function(){var e=this;return this.ratioArray.map(function(t){return{colorIndex:t.colorIndex,balls:e.balls.filter(function(e){return e.colorIndex===t.colorIndex})}})}},{key:"addBalls",value:function(e,t,n){void 0===e&&(e=Math.floor(10*Math.random()+10)),void 0===t&&(t=Math.floor(Math.random()*this.colors.length));for(var r=0;r<e;r++)this.addBall(t,n)}},{key:"cullBalls",value:function(e){var t=this,n=80,r=this.getBallsByColor();r.forEach(function(r){for(var i=t.ratioArray.find(function(e){return e.colorIndex===r.colorIndex});r.balls.length/n>i.amount/e;){var o=r.balls.pop(),a=t.balls.indexOf(o);t.balls.splice(a,1),o.parent.remove(o)}})}},{key:"dynamicKernel",value:function(e,t){for(var n=function(e){return e=1-2*Math.abs(e-.5),e*e*(3-2*e)},r=[],i=0;i<=e;i++)r.push(n(i/e));var o=r.reduce(function(e,t){return e+=t});r=r.map(function(e){return e/=o});var a=t?"h":"v",s=["uniform sampler2D tDiffuse;","uniform float "+a+";","varying vec2 vUv;","void main() {"];return r.forEach(function(n,r){n>0&&(t?s.push("gl_FragColor += texture2D( tDiffuse, vec2( vUv.x - "+(r-e/2).toFixed(2)+" * h, vUv.y ) ) * "+n+";"):s.push("gl_FragColor += texture2D( tDiffuse, vec2( vUv.x , vUv.y - "+(r-e/2).toFixed(2)+" * v ) ) * "+n+";"))}),s.push("}"),s.join("\n")}},{key:"initClassicComposer",value:function(){this.renderTarget1=new window.THREE.WebGLRenderTarget(320,200,{format:window.THREE.RGBAFormat,stencilBuffer:!1}),this.composer=new window.THREE.EffectComposer(this.renderer,this.renderTarget1),this.composer.setSize(320,200),this.renderPass=new window.THREE.RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass),this.blurStep1=.0594,this.blurStep2=.0247,window.THREE.HorizontalBlurShader.fragmentShader=this.dynamicKernel(11,!0),window.THREE.VerticalBlurShader.fragmentShader=this.dynamicKernel(11,!1),this.hBlur1=new window.THREE.ShaderPass(window.THREE.HorizontalBlurShader),this.hBlur1.uniforms.h.value=this.blurStep1,this.composer.addPass(this.hBlur1),this.vBlur1=new window.THREE.ShaderPass(window.THREE.VerticalBlurShader),this.vBlur1.uniforms.v.value=this.blurStep1,this.composer.addPass(this.vBlur1),this.hBlur2=new window.THREE.ShaderPass(window.THREE.HorizontalBlurShader),this.hBlur2.uniforms.h.value=this.blurStep2,this.composer.addPass(this.hBlur2),this.vBlur2=new window.THREE.ShaderPass(window.THREE.VerticalBlurShader),this.vBlur2.uniforms.v.value=this.blurStep2,this.composer.addPass(this.vBlur2),this.roundedCorner=.9,this.roundnessShader=new window.THREE.ShaderPass(window.THREE.RoundedCornerShader),this.roundnessShader.uniforms.resolution.value.x=320,this.roundnessShader.uniforms.resolution.value.y=200,this.roundnessShader.uniforms.roundedCorner.value=this.roundedCorner,this.composer.addPass(this.roundnessShader),this.roundnessShader.renderToScreen=!0}},{key:"applyForce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 1};this.balls.forEach(function(n){return n.velocity.add(e.clone().multiplyScalar(t()))})}},{key:"update",value:function(e){var t=this;this.timeReset&&(this.timeReset=!1,this.timeStart=e.time);var n=Math.floor((e.time-this.timeStart)/1e3);if(n<10){this.changeFrameRate(1-l.easeInQuad(n/10)),this.cursor=new window.THREE.Vector3,this.target=new window.THREE.Vector3,this.cursor.z=this.target.z=-2.5;var r=this.cursor.clone();r.x=0,r.y=this.YPullforce,this.applyForce(r,function(){return t.YPullforceSpeed});for(var i=this.balls.length,o=0;o<i;o++){var a=this.balls[o],s=a.position.length();s>this.BOUNDARY_RADIUS&&a.velocity.sub(a.position.clone().multiplyScalar(.003*(s-this.BOUNDARY_RADIUS)));for(var c=o+1;c<i;c++){var u=this.balls[c],h=a.position.clone().sub(u.position),m=h.length();h.normalize();var f=a.colorIndex===u.colorIndex?.6:1;m<(a.size+u.size)*f?(h.multiplyScalar(this.bringTogetherValue/m),a.velocity.add(h),u.velocity.sub(h)):a.colorIndex===u.colorIndex&&(h.multiplyScalar(this.spreadOutValue/m),a.velocity.sub(h),u.velocity.add(h))}}this.balls.forEach(function(e){e.velocity.multiplyScalar(.95),e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.size<e.maxSize?e.size+=t.shrinkingGrowingRatio:e.size-=t.shrinkingGrowingRatio,e.scale.x=e.size,e.scale.y=e.size}),this.composer.render()}}},{key:"changeBallsColor",value:function(e,t,n,r){this.balls.forEach(function(i){i.colorIndex===e&&i.material.color.setRGB(t/255,n/255,r/255)})}},{key:"changeBallsMaxSize",value:function(e,t){this.balls.forEach(function(n){n.colorIndex===e&&(n.maxSize=n.maxSize*t)})}},{key:"bringBallsToTop",value:function(){var e=this;this.timeReset=!0,this.hasBeenOnTop=!0,this.bringTogetherValue=9e-4,this.spreadOutValue=.02,this.BOUNDARY_RADIUS=10,this.shrinkingGrowingRatio=.07,this.growShrinkRatio=[1.5,.66666],this.YPullforce=.1,this.YPullforceSpeed=.1,this.balls.forEach(function(e){e.maxSize=e.originalMaxSize}),setTimeout(function(){e.YPullforceSpeed=.01,e.shrinkingGrowingRatio=.01},1e3)}},{key:"bringBallsToCenter",value:function(){var e=this;this.timeReset=!0,this.balls.forEach(function(e){e.maxSize=1.6*e.originalMaxSize}),this.bringTogetherValue=9e-4,this.spreadOutValue=.008,this.BOUNDARY_RADIUS=9,this.shrinkingGrowingRatio=.08,this.growShrinkRatio=[1.5,.66666],this.YPullforce=-.09,this.YPullforceSpeed=.04,setTimeout(function(){e.YPullforceSpeed=.01,e.YPullforce=0},1e3),setTimeout(function(){e.shrinkingGrowingRatio=.01},1500)}},{key:"makeBallsGrowShrink",value:function(){var e=this,t=!0,n=!0;this.growingInterval=setInterval(function(){Array(e.numGroups).fill(0).map(function(e,t){return t}).forEach(function(n,r){r%2===0?t?e.changeBallsMaxSize(n,e.growShrinkRatio[0]):e.changeBallsMaxSize(n,e.growShrinkRatio[1]):t?e.changeBallsMaxSize(n,e.growShrinkRatio[1]):e.changeBallsMaxSize(n,e.growShrinkRatio[0])}),t||(n=!n),t=!t},3e3)}},{key:"makeBallsStaticGrow",value:function(){this.growingInterval&&clearInterval(this.growingInterval)}},{key:"startKeyframes",value:function(){var e=this,t=this.el.getAttribute("data-onview-keyframe"),n=t?JSON.parse(t):["-50vh","100%"],r={el:this.heroCard,start:n[0],end:n[1],event:"view",disabledWhen:"no-sticky-enhanced",relativeTo:".hero-card-container"};this.viewKeyframe=this.addKeyframe(r),this.viewKeyframe.controller.on("view:enter",function(){e.ThrottledRAFEmitter.run()}),this.viewKeyframe.controller.on("view:exit",function(){e.ThrottledRAFEmitter.cancel()}),this.addDiscreteEvent({start:"-10vh",end:"32rh",event:"top",relativeTo:".hero-card-container",disabledWhen:"no-sticky-enhanced",onEnter:function(){return e.bringBallsToTop()}}),this.addDiscreteEvent({start:"33rh",end:"440vh",event:"center",relativeTo:".hero-card-container",disabledWhen:"no-sticky-enhanced",onEnter:function(){return e.bringBallsToCenter()}})}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),n}(s);t.exports=h},{"./OverviewGradientLib/CopyShader":149,"./OverviewGradientLib/EffectComposer":150,"./OverviewGradientLib/HorizontalBlurShader":151,"./OverviewGradientLib/RenderPass":152,"./OverviewGradientLib/RoundedCornerShader":153,"./OverviewGradientLib/ShaderPass":154,"./OverviewGradientLib/VerticalBlurShader":155,"@marcom/ac-raf-emitter/ThrottledRAFEmitter":70,"@marcom/ac-threejs-loader":79,"@marcom/anim-system/Model/EasingFunctions":89,"@marcom/bubble-gum/BaseComponent":103}],158:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/anim-system"),l=e("@marcom/anim-system/Model/AnimSystemModel"),c=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/ac-accessibility/TextZoom"),h="sticky-enhanced",m=function(e){function t(e){var n=e.pageMetrics;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return o._pollForFontSizeChange=o._pollForFontSizeChange.bind(o),o._minHeightThreshold={L:740,M:500,S:500},o._maxHeightThreshold={L:1367,M:1367,S:940},o._isTextZoomed=!1,o._documentTokenList=document.documentElement.classList,o.reduceMotionEnabled=o._documentTokenList.contains("reduced-motion"),o.noEnhancedHero=o._documentTokenList.contains("no-enhanced-hero"),o._documentTokenList.contains("has-text-zoom")&&(u.detect(),o._isTextZoomed=o._documentTokenList.contains("text-zoom"),setInterval(o._pollForFontSizeChange,2e3)),o.gum.once("DOM_COMPONENTS_MOUNTED",function(){o._detect(n)}),o}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return!0}},{key:"EVENTS",get:function(){return{STICKY_SETTLED:"STICKY_SETTLED"}}}]),a(t,[{key:"_pollForFontSizeChange",value:function(){u.remove(),u.detect(),this._isTextZoomed!==this._documentTokenList.contains("text-zoom")&&(this._isTextZoomed=this._documentTokenList.contains("text-zoom"),this._detect(l.pageMetrics))}},{key:"onResizeDebounced",value:function(e){this._detect(e)}},{key:"_detect",value:function(e){var t=this._minHeightThreshold[e.breakpoint],n=this._maxHeightThreshold[e.breakpoint],r=e.windowHeight<t,i=e.windowHeight>n;this._isTextZoomed||r||i||this.reduceMotionEnabled||this.noEnhancedHero?this._setFallback(e):this._setEnhanced(e)}},{key:"_setFallback",value:function(e){this._documentTokenList.add("no-"+h),this._documentTokenList.remove(h),s.forceUpdate({updateActiveKeyframes:!0,waitForNextUpdate:!1}),this.gum.trigger(t.EVENTS.STICKY_SETTLED,e)}},{key:"_setEnhanced",value:function(e){this._documentTokenList.add(h),this._documentTokenList.remove("no-"+h),s.forceUpdate({updateActiveKeyframes:!0,waitForNextUpdate:!1}),this.gum.trigger(t.EVENTS.STICKY_SETTLED,e)}}]),t}(c);t.exports=m},{"@marcom/ac-accessibility/TextZoom":2,"@marcom/anim-system":83,"@marcom/anim-system/Model/AnimSystemModel":88,"@marcom/bubble-gum/BaseComponent":103}],159:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l="data-focus-options",c={animEl:null,disabledWhen:null,tabindex:null},u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._onFocus=e._onFocus.bind(e),e.options=e._parseOptions(),e._isDisabled=e._checkIfDisabled(),e}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return!0}}]),a(t,[{key:"mounted",value:function(){this.animEl=this.options.animEl?document.querySelector(this.options.animEl):this.el,this.animEl&&(this.options.tabindex&&(this.el.setAttribute("tabindex",-1),this.el.style.outline="none"),this.el.addEventListener("focusin",this._onFocus))}},{key:"onResizeDebounced",value:function(){this._isDisabled=this._checkIfDisabled()}},{key:"_checkIfDisabled",value:function(){if(null===this.options.disabledWhen)return!1;if("string"==typeof this.options.disabledWhen)return document.documentElement.classList.contains(this.options.disabledWhen);if(Array.isArray(this.options.disabledWhen)){var e=!0,t=!1,n=void 0;try{for(var r,i=this.options.disabledWhen[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(document.documentElement.classList.contains(o))return!0}}catch(a){t=!0,n=a}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}return!1}return!0}},{key:"_parseOptions",value:function(){var e=JSON.parse(this.el.getAttribute(l)||"{}");return Object.assign({},c,e)}},{key:"_onFocus",value:function(e){var t=this;if(!this._isDisabled&&"mouse"!==e.target.getAttribute("data-focus-method")){if(this.options.forceScrollTo)return void requestAnimationFrame(function(){return window.scrollTo(0,t.options.forceScrollTo)});var n=this.anim.getControllerForTarget(this.animEl),r=this._findKeyframe(n);if(r){var i=this.anim.getGroupForTarget(this.animEl),o=i.convertTValueToScrollPosition(r.end);requestAnimationFrame(function(){return window.scrollTo(0,o)})}}}},{key:"_findKeyframe",value:function(e){var t=e.getAllKeyframesForAttribute("opacity");if(!t)return null;var n=t.find(function(e){return 1===parseInt(e.animValues.opacity[0])||1===parseInt(e.animValues.opacity[1])});return n===-1?null:n}}]),t}(s);t.exports=u},{"@marcom/bubble-gum/BaseComponent":103}],160:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/update"),c=e("@marcom/ac-raf-emitter/draw"),u="data-progressive-image",h="emit-event",m="progressive-image:loaded",f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._imgArr=Array.from(n.el.querySelectorAll("["+u+"]")),n._loadKeyFrame=null,n._state={loaded:!1,hasStickyInteraction:document.documentElement.classList.contains("no-static-interaction")},n.load=n.load.bind(n),n}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("progressive-image")}}]),a(t,[{key:"mounted",value:function(){this._setupAnimLoad()}},{key:"load",value:function(){var e=this;this._state.loaded||(this._imgArr.forEach(function(t){e._cssImgLoad(t)}),this._loadKeyFrame.controller.off("ProgressiveImageLoad:enter",this.load))}},{key:"_setupAnimLoad",value:function(){var e=this._state.hasStickyInteraction;this._loadKeyFrame=this.animController&&this.animController.getNearestKeyframeForAttribute(0,"progressive-image-load"),this._loadKeyFrame||(this._loadKeyFrame=this.addDiscreteEvent({start:"0% - 100vh",end:"100% + 100vh",event:"ProgressiveImageLoad",breakpointMask:""+(e?"LM":"LMS")}),e&&(this._loadKeyFrame=this.addDiscreteEvent({event:"ProgressiveImageLoad",start:"-150vh",end:"100% + 100vh",breakpointMask:"S"}))),this._loadKeyFrame.controller.on("ProgressiveImageLoad:enter",this.load)}},{key:"_cssImgLoad",value:function(e){var t=this;l(function(){var n=e.getAttribute(u)===h;c(function(){if(e.removeAttribute(u),n){var r={element:e,type:"loaded"},i=new CustomEvent(m,{detail:r});e.dispatchEvent(i),t.trigger(m,r)}})})}}]),t}(s);t.exports=f},{"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/bubble-gum/BaseComponent":103}],161:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/anim-system/Model/AnimSystemModel"),c=e("@marcom/ac-raf-emitter/draw"),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.iPhoneElement=n.el.querySelector(".glass-interest"),n.videoContainer=n.el.querySelector(".video-container"),n.onCanplayThrough=n.onCanplayThrough.bind(n),n.aspectRatio=.64,n}return o(t,e),a(t,[{key:"mounted",value:function(){var e=this;this.video=this.el.querySelector("video"),this.group=this.gum.anim.createScrollGroup(this.el),this.group.name="payment wheel",this.createWillChange(),this.createZoomAnimation();var t=this.group.addKeyframe(this.el,{relativeTo:".sticky-wrapper",start:"0",event:"zoom"}).controller;t.on("zoom",function(){e.zoomTimeline.play()}),t.on("zoom:reverse",function(){e.zoomTimeline.reverse(),e.video.pause(),e.video.currentTime=0,e.video.style.opacity=0})}},{key:"createWillChange",value:function(){var e=Array.from(this.el.querySelectorAll(".glass-frame, .glass-screen, .inline-video-frame-static, .inline-video-frame-start"));e.forEach(function(e){e.setAttribute("data-will-change","")}),this.group.addKeyframe(this.el,{relativeTo:".sticky-wrapper",start:"-200vh",end:"200vh",cssClass:"will-change",toggle:!0})}},{key:"createZoomAnimation",value:function(){var e=this,t={start:0,end:.35,opacity:[1,0],scale:[1,1.8],snapAtCreation:!0,ease:1,easeFunction:"easeInOutCubic"},n={end:.4,scale:[this.aspectRatio,1],opacity:null,breakpointMask:["L","M"]},r={scale:[.58,1],breakpointMask:["S"]},i=Object.assign({},t,n),o=Object.assign({},i,r);this.zoomTimeline=this.gum.anim.createTimeGroup(),this.zoomTimeline.name="payment wheel zoom",this.zoomTimeline.addKeyframe(this.iPhoneElement,t),this.zoomTimeline.addKeyframe(this.videoContainer,i),this.zoomTimeline.addKeyframe(this.videoContainer,o),this.zoomTimeline.on(l.EVENTS.ON_TIMELINE_COMPLETE,function(){e.playVideo()})}},{key:"playVideo",value:function(){var e=this;this.video.src?c(function(){e.video.style.opacity=1,e.video.play()}):this.video.addEventListener("canplaythrough",this.onCanplayThrough)}},{key:"onCanplayThrough",value:function(){var e=this;c(function(){e.video.style.opacity=1,e.video.play()}),this.video.removeEventListener("canplaythrough",this.onCanplayThrough)}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("no-reduced-motion")&&document.documentElement.classList.contains("js")}}]),t}(s);t.exports=u},{"@marcom/ac-raf-emitter/draw":72,"@marcom/anim-system/Model/AnimSystemModel":88,"@marcom/bubble-gum/BaseComponent":103}],162:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../shared/components/InlineVideoBasic"),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return s.IS_SUPPORTED()}}]),a(t,[{key:"mounted",value:function(){this._video.initialize();var e={start:"-250vh + 100%",end:"100% + 150vh"},t={start:"-100vh + 80%",end:"50%"};this._setupAnimLoad(e),this._isAutoPlay&&this._setupAnimPlay(t),this._loadMetrics.bpReloadArr=this._getreloadBreakpoints()}}]),t}(s);t.exports=l},{"../shared/components/InlineVideoBasic":166}],163:[function(e,t,n){"use strict";var r=e("../helpers/textZoom"),i=e("@marcom/anim-system"),o=e("@marcom/anim-system/Model/AnimSystemModel"),a=e("@marcom/bubble-gum"),s=e("@marcom/bubble-gum/ComponentMap"),l=e("./model/SiteComponentMap"),c=e("./shared/ApplyModal"),u=e("@marcom/ac-accessibility/TextZoom"),h=7,m={initialize:function(){Object.assign(s,l),m.filterAnimResizeEvents();var e=document.querySelector("body");new a(e),m.initWalletButton(),u.detect()},initWalletButton:function(){var t=Array.from(document.querySelectorAll(".apply-now-button")),n=null,r=document.documentElement.classList.contains("touch")&&window.ApplePaySession&&window.ApplePaySession.supportsVersion(h)&&window.ApplePaySession.canMakePayments();if(!r)return n=m.initApplyModal(),void t.forEach(function(e){e.classList.add("initialized"),n.addLocalNavButtonEvents(e)});var i=void 0;try{i=e("@marcom/data-relay")}catch(o){}var a=void 0;i&&(a=new i),t.forEach(function(e){e.classList.add("initialized");var t=e.dataset.applyAction,n=e.dataset.referrer;e.addEventListener("click",function(e){var r="";r=a.getRelayData("287",n,!0,!0).data,setTimeout(function(){window.location=t+r},200)})})},initApplyModal:function(){var e=document.querySelector(".ac-ln-button"),t=document.querySelector("[data-apply-modal]");return new c(e,t)},filterAnimResizeEvents:function(){var e=document.createElement("div");e.setAttribute("windowDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e);var t=e.clientWidth,n=e.clientHeight;i.on("ON_DOM_GROUPS_CREATED",function(){return o.pageMetrics.windowHeight=n}),i.on("ON_RESIZE_IMMEDIATE",function(){return o.pageMetrics.windowHeight=n}),window.removeEventListener("resize",i.onResizeImmediate),window.addEventListener("resize",function(o){var a=new Event("text-zoom",{bubbles:!1});document.documentElement.dispatchEvent(a),(0,r.adjustForTextZoom)();var s=e.clientWidth,l=e.clientHeight;s===t&&l===n||(t=s,n=l,i.onResizeImmediate(o))})}};m.initialize()},{"../helpers/textZoom":140,"./model/SiteComponentMap":164,"./shared/ApplyModal":165,"@marcom/ac-accessibility/TextZoom":2,"@marcom/anim-system":83,"@marcom/anim-system/Model/AnimSystemModel":88,"@marcom/bubble-gum":104,"@marcom/bubble-gum/ComponentMap":105,"@marcom/data-relay":void 0}],164:[function(e,t,n){"use strict";t.exports={CashBackNotifications:e("../components/CashBackNotifications"),Decode:e("../components/Decode"),InlineVideoBasic:e("../shared/components/InlineVideoBasic"),LazyIframe:e("../shared/components/LazyIframe"),LocalNavThemeDark:e("../components/LocalNavThemeDark"),OverviewHeroComponent:e("../components/OverviewHeroComponent"),OverviewHeroDynamicGradient:e("../components/OverviewHeroDynamicGradient"),OverviewHeroEnhancementCheck:e("../components/OverviewHeroEnhancementCheck"),OverviewHeroFocusComponent:e("../components/OverviewHeroFocusComponent"),ProgressiveImageLoader:e("../components/ProgressiveImageLoader"),ReduceInterest:e("../components/ReduceInterest"),SupportVideo:e("../components/SupportVideo"),Ribbon:e("../shared/components/Ribbon")}},{"../components/CashBackNotifications":141,"../components/Decode":142,"../components/LocalNavThemeDark":148,"../components/OverviewHeroComponent":156,"../components/OverviewHeroDynamicGradient":157,"../components/OverviewHeroEnhancementCheck":158,"../components/OverviewHeroFocusComponent":159,"../components/ProgressiveImageLoader":160,"../components/ReduceInterest":161,"../components/SupportVideo":162,"../shared/components/InlineVideoBasic":166,"../shared/components/LazyIframe":167,"../shared/components/Ribbon":168}],165:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("@marcom/ac-modal").createStandardModal,a=e("@marcom/ac-raf-emitter/update"),s=e("@marcom/ac-raf-emitter/draw"),l=e("@marcom/ac-video"),c=l.Player,u=e("@marcom/ac-analytics").observer.Video,h="/105/media/us/apple-card/2019/6006d988_d2ba_48fc_89c0_acd104a28a52/films/how-to/apply/apple-card-apply-tpl-cc-us-2019_1280x720h.mp4",m="modal-is-in-pip",f=function(){function e(t,n){var i=this;r(this,e),this.button=t,this._onPipChange=this._onPipChange.bind(this),this._onVideoEnded=this._onVideoEnded.bind(this),this._onModalClose=this._onModalClose.bind(this),a(function(){var e=n.getAttribute("data-modal-close-label");s(function(){i.modal=o(n),i.modal.on("close",i._onModalClose),i.element=i.modal.modalElement;var t=i.element.querySelector("#modal-apply-headline");i.element.classList.add("modal-apply"),e&&i.modal.closeButton.setAttribute("aria-label",e),i.element.setAttribute("aria-labelledby","modal-apply-headline"),i.element.tabIndex=-1,i.modal._giveModalFocus=function(){i.modal.modalElement.removeAttribute("aria-hidden"),i._activeElement=document.activeElement,s(function(){t.focus()}),i.modal._circularTab.start()};var r=n.querySelector("[data-video-container]");r&&i.initVideoPlayer(r)})})}return i(e,[{key:"addLocalNavButtonEvents",value:function(e){this._openModal=this._openModal.bind(this),s(function(){return e.setAttribute("role","button")}),e.addEventListener("click",this._openModal,!0)}},{key:"initVideoPlayer",value:function(e){this.player=c.create({src:h,autoplay:!1,urlOptimizer:!0,responsive:!0}),this.player.appendTo(e);var t=e.getAttribute("data-analytics-id");this.player.el.setAttribute("data-analytics-id",""+t),new u(this.player,{}),this.player.on("pictureinpicture:change",this._onPipChange),this.player.on("ended",this._onVideoEnded)}},{key:"_openModal",value:function(e){e.preventDefault(),this.modal.open(),this.player.refreshSize()}},{key:"_onPipChange",value:function(){var e=this.player.isPictureInPicture();e?(this.modal.modalElement.classList.add(m),this.modal.close()):(this.modal.modalElement.classList.remove(m),this.player.getPaused()||this.modal.open())}},{key:"_onVideoEnded",value:function(){this.player.isPictureInPicture()&&(this.modal.modalElement.classList.remove(m),this.player.setPictureInPicture(!1))}},{key:"_onModalClose",value:function(){this.player.isPictureInPicture()||this.player.getPaused()||this.player.pause()}}]),e}();t.exports=f},{"@marcom/ac-analytics":void 0,"@marcom/ac-modal":52,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/ac-video":void 0}],166:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/inline-video/InlineVideo"),c=e("@marcom/ac-raf-emitter/draw"),u=e("@marcom/feature-detect/prefersReducedMotion")(),h=e("@marcom/viewport-emitter"),m="data-source-shared",f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._el=e.el;var o=n._getPageName("apple-card");n._video=new l(n._el,{path:"/apple-card/2019/c90ec3fe-63dc-4557-b1ea-50d7539c76bd/"+o+"/",viewport:l.convertViewportName(e.pageMetrics.breakpoint),resolution:l.convertToResolution(h.retina)}),n._loadMetrics={event:"",controller:{},bpReloadArr:[]};var a=n.el.getAttribute("data-autoplay");return n._isAutoPlay=null===a||JSON.parse(a),n}return o(t,e),a(t,null,[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("inline-video")}}]),a(t,[{key:"mounted",value:function(){this._video.initialize(),this._setupAnimLoad(),this._isAutoPlay&&this._setupAnimPlay(),this._loadMetrics.bpReloadArr=this._getreloadBreakpoints()}},{key:"onBreakpointChange",value:function(e){var t=l.convertViewportName(e.breakpoint),n=l.convertViewportName(e.previousBreakpoint),r=this._video,i=r.state,o=this._loadMetrics;o.bpReloadArr.forEach(function(e){e!==t&&e!==n||(r.source.change("viewport",t),i.loaded&&(i.loaded=!1,r.frames.activate("start").then(function(){c(function(){var e=o.controller.getNearestKeyframeForAttribute(0,"inline-video-load");e.isCurrentlyInRange?r.load()["catch"](function(){}):o.controller.once(o.event+":enter",function(){r.load()["catch"](function(){})})})},function(e){})))})}},{key:"_getPageName",value:function(e){var t=void 0;if(!this._el.hasAttribute(m)){var n=window.location.pathname;return t=n.match(/[-\w]*\/(?!.[-\w]*\/)/)[0].replace("https://www.apple.com/",""),t===e?"overview":t}return t="shared"}},{key:"_setupAnimLoad",value:function(e){var t=this._video,n=t.state,r={start:"-250vh + 50%",end:"50% + 150vh",event:"inline-video-load"};e=Object.assign({},r,e);var i=this.addDiscreteEvent(e);this._loadMetrics.event=e.event;var o=this._loadMetrics.controller=i.controller;o.once(e.event+":enter",function(){n.loaded||n.loading||t.load().then(function(e){if(u){var n=t.controls;n.arePresent?n.isPresent("play")?n.enable("play"):n.isPresent("replay")&&n.enable("replay"):t.frames.activate("static").then(function(){c(function(){window.URL.revokeObjectURL(t.el.src),t.el.src=""})},function(e){})}},function(e){})})}},{key:"_setupAnimPlay",value:function(e){if(!u){var t=this._video,n={start:"-100vh + 50%",end:"50%",event:"inline-video-play"};e=Object.assign({},n,e);var r=this.addDiscreteEvent(e);r.controller.once(e.event+":enter",function(){t.state.loaded?t.play()["catch"](function(){}):t.load().then(function(){t.play()["catch"](function(){})},function(e){})})}}},{key:"_getreloadBreakpoints",value:function(){var e=this._el.getAttribute("data-reload-on-breakpoints"),t=/\s*,\s*/;return e?e.split(t):[]}}]),t}(s);t.exports=f},{"@marcom/ac-raf-emitter/draw":72,"@marcom/bubble-gum/BaseComponent":103,"@marcom/feature-detect/prefersReducedMotion":113,"@marcom/inline-video/InlineVideo":118,"@marcom/viewport-emitter":123}],167:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/update"),c=e("@marcom/ac-raf-emitter/draw"),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"mounted",value:function(){var e=this,t=this.addKeyframe({start:"-140vh",event:"LazyInit: Notify iframe"});t.controller.once(t.event,function(){var t=void 0;l(function(){return t=e.el.getAttribute("data-lazy-src")}),c(function(){return e.el.src=t})})}}]),t}(s);t.exports=u},{"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/bubble-gum/BaseComponent":103}],168:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/draw"),c=e("@marcom/ac-raf-emitter/update"),u=e("@marcom/viewport-emitter/ViewportEmitter"),h=new u,m=e("@marcom/ac-accessibility/TextZoom"),f=null;try{f=e("@marcom/ac-analytics")}catch(d){}var p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.body=n.gum.el,n}return o(t,e),a(t,[{key:"mounted",value:function(){m.detect(),this.showRibbon()}},{key:"showRibbon",value:function(){var e=this.body.querySelector(".ribbon.ribbon-hide");e&&setTimeout(function(){e.classList.remove("ribbon-hide")},1200)}},{key:"adjustLayoutForRibbonHeight",value:function(){var e=this.body.querySelector(".ribbon"),t=this.body.querySelector(".section-content");e?c(function(){var n=e.offsetHeight;l(function(){"small"===h.viewport?(t.style.marginTop=null,t.style.paddingTop=n+"px"):(t.style.paddingTop=null,t.style.marginTop=n+"px")})}):(t.style.paddingTop=null,t.style.marginTop=null)}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement.classList;return!(e.contains("reduced-motion")||e.contains("aow"))}}]),t}(s);t.exports=p},{"@marcom/ac-accessibility/TextZoom":2,"@marcom/ac-analytics":void 0,"@marcom/ac-raf-emitter/draw":72,"@marcom/ac-raf-emitter/update":76,"@marcom/bubble-gum/BaseComponent":103,"@marcom/viewport-emitter/ViewportEmitter":122}]},{},[163]);