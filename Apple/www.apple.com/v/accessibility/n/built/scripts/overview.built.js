!function(){function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}return e}()({1:[function(e,t,i){"use strict";var n=e("./helpers/TabManager"),r=e("./helpers/hideSiblingElements"),s=e("./helpers/showSiblingElements"),a=function(e,t){t=t||{},this._tabbables=null,this._excludeHidden=t.excludeHidden,this._firstTabbableElement=t.firstFocusElement,this._lastTabbableElement=null,this._relatedTarget=null,this.el=e,this._handleOnFocus=this._handleOnFocus.bind(this)},o=a.prototype;o.start=function(){this.updateTabbables(),r(this.el,null,this._excludeHidden),this._firstTabbableElement?this.el.contains(document.activeElement)||this._firstTabbableElement.focus():console.warn("this._firstTabbableElement is null, CircularTab needs at least one tabbable element."),this._relatedTarget=document.activeElement,document.addEventListener("focus",this._handleOnFocus,!0)},o.stop=function(){s(this.el),document.removeEventListener("focus",this._handleOnFocus,!0)},o.updateTabbables=function(){this._tabbables=n.getTabbableElements(this.el,this._excludeHidden),this._firstTabbableElement=this._firstTabbableElement||this._tabbables[0],this._lastTabbableElement=this._tabbables[this._tabbables.length-1]},o._handleOnFocus=function(e){if(this.el.contains(e.target))this._relatedTarget=e.target;else{if(e.preventDefault(),this.updateTabbables(),this._relatedTarget===this._lastTabbableElement||null===this._relatedTarget)return this._firstTabbableElement.focus(),void(this._relatedTarget=this._firstTabbableElement);if(this._relatedTarget===this._firstTabbableElement)return this._lastTabbableElement.focus(),void(this._relatedTarget=this._lastTabbableElement)}},o.destroy=function(){this.stop(),this.el=null,this._tabbables=null,this._firstTabbableElement=null,this._lastTabbableElement=null,this._relatedTarget=null,this._handleOnFocus=null},t.exports=a},{"./helpers/TabManager":2,"./helpers/hideSiblingElements":4,"./helpers/showSiblingElements":8}],2:[function(e,t,i){"use strict";var n=e("./../maps/focusableElement"),r=function(){this.focusableSelectors=n.join(",")},s=r.prototype;s.isFocusableElement=function(e,t,i){if(t&&!this._isDisplayed(e))return!1;var r=e.nodeName.toLowerCase(),s=n.indexOf(r)>-1;return"a"===r||(s?!e.disabled:!e.contentEditable||(i=i||parseFloat(e.getAttribute("tabindex")),!isNaN(i)))},s.isTabbableElement=function(e,t){if(t&&!this._isDisplayed(e))return!1;var i=e.getAttribute("tabindex");return i=parseFloat(i),isNaN(i)?this.isFocusableElement(e,t,i):i>=0},s._isDisplayed=function(e){var t=e.getBoundingClientRect();return(0!==t.top||0!==t.left||0!==t.width||0!==t.height)&&"hidden"!==window.getComputedStyle(e).visibility},s.getTabbableElements=function(e,t){for(var i=e.querySelectorAll(this.focusableSelectors),n=i.length,r=[],s=0;s<n;s++)this.isTabbableElement(i[s],t)&&r.push(i[s]);return r},s.getFocusableElements=function(e,t){for(var i=e.querySelectorAll(this.focusableSelectors),n=i.length,r=[],s=0;s<n;s++)this.isFocusableElement(i[s],t)&&r.push(i[s]);return r},t.exports=new r},{"./../maps/focusableElement":10}],3:[function(e,t,i){"use strict";var n=e("./setAttributes"),r=e("./../maps/ariaMap"),s=e("./TabManager"),a="data-original-",o="tabindex",l=function(e,t){var i=e.getAttribute(a+t);i||(i=e.getAttribute(t)||"",n(e,a+t,i))};t.exports=function(e,t){if(s.isFocusableElement(e,t))l(e,o),n(e,o,-1);else for(var i=s.getTabbableElements(e,t),a=i.length;a--;)l(i[a],o),n(i[a],o,-1);l(e,r.HIDDEN),n(e,r.HIDDEN,!0)}},{"./../maps/ariaMap":9,"./TabManager":2,"./setAttributes":6}],4:[function(e,t,i){"use strict";var n=e("./hide");t.exports=function r(e,t,i){t=t||document.body;for(var s=e,a=e;s=s.previousElementSibling;)n(s,i);for(;a=a.nextElementSibling;)n(a,i);e.parentElement&&e.parentElement!==t&&r(e.parentElement)}},{"./hide":3}],5:[function(e,t,i){"use strict";var n=function(e,t){if("string"==typeof t)for(var i=t.split(/\s+/),n=0;n<i.length;n++)e.getAttribute(i[n])&&e.removeAttribute(i[n])},r=function(e,t){if(e.length)for(var i=0;i<e.length;i++)n(e[i],t);else n(e,t)};t.exports=r},{}],6:[function(e,t,i){"use strict";var n=function(e,t,i){e&&1===e.nodeType&&e.setAttribute(t,i)},r=function(e,t,i){if("string"!=typeof i&&(i=i.toString()),e)if(e.length)for(var r=0;r<e.length;r++)n(e[r],t,i);else n(e,t,i)};t.exports=r},{}],7:[function(e,t,i){"use strict";var n=e("./removeAttributes"),r=e("./setAttributes"),s=e("./../maps/ariaMap"),a="data-original-",o="tabindex",l=function(e,t){var i=e.getAttribute(a+t);"string"==typeof i&&(i.length?r(e,t,i):n(e,t),n(e,a+t))};t.exports=function(e){n(e,o+" "+s.HIDDEN),l(e,o),l(e,s.HIDDEN);for(var t=e.querySelectorAll("["+a+o+"]"),i=t.length;i--;)l(t[i],o)}},{"./../maps/ariaMap":9,"./removeAttributes":5,"./setAttributes":6}],8:[function(e,t,i){"use strict";var n=e("./show");t.exports=function r(e,t){t=t||document.body;for(var i=e,s=e;i=i.previousElementSibling;)n(i);for(;s=s.nextElementSibling;)n(s);e.parentElement&&e.parentElement!==t&&r(e.parentElement)}},{"./show":7}],9:[function(e,t,i){"use strict";t.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},{}],10:[function(e,t,i){"use strict";t.exports=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","*[tabindex]","*[contenteditable]"]},{}],11:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var n=e("./className/add");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),i=t.shift(t);if(i.classList&&i.classList.add)return void i.classList.add.apply(i.classList,t);for(e=0;e<t.length;e++)n(i,t[e])}},{"./className/add":12,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],12:[function(e,t,i){"use strict";var n=e("./contains");t.exports=function(e,t){n(e,t)||(e.className+=" "+t)}},{"./contains":13}],13:[function(e,t,i){"use strict";var n=e("./getTokenRegExp");t.exports=function(e,t){return n(t).test(e.className)}},{"./getTokenRegExp":14}],14:[function(e,t,i){"use strict";t.exports=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")}},{}],15:[function(e,t,i){"use strict";var n=e("./contains"),r=e("./getTokenRegExp");t.exports=function(e,t){n(e,t)&&(e.className=e.className.replace(r(t),"$1").trim())}},{"./contains":13,"./getTokenRegExp":14}],16:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var n=e("./className/remove");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),i=t.shift(t);if(i.classList&&i.classList.remove)return void i.classList.remove.apply(i.classList,t);for(e=0;e<t.length;e++)n(i,t[e])}},{"./className/remove":15,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],17:[function(e,t,i){"use strict";var n=e("./utils/addEventListener"),r=e("./shared/getEventType");t.exports=function(e,t,i,s){return t=r(e,t),n(e,t,i,s)}},{"./shared/getEventType":19,"./utils/addEventListener":21}],18:[function(e,t,i){"use strict";var n=e("./utils/removeEventListener"),r=e("./shared/getEventType");t.exports=function(e,t,i,s){return t=r(e,t),n(e,t,i,s)}},{"./shared/getEventType":19,"./utils/removeEventListener":22}],19:[function(e,t,i){"use strict";var n=e("@marcom/ac-prefixer/getEventType");t.exports=function(e,t){var i,r;return i="tagName"in e?e.tagName:e===window?"window":"document",r=n(t,i),r?r:t}},{"@marcom/ac-prefixer/getEventType":57}],20:[function(e,t,i){"use strict";t.exports=function(e){return e=e||window.event,"undefined"!=typeof e.target?e.target:e.srcElement}},{}],21:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){return e.addEventListener?e.addEventListener(t,i,!!n):e.attachEvent("on"+t,i),e}},{}],22:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){return e.removeEventListener?e.removeEventListener(t,i,!!n):e.detachEvent("on"+t,i),e}},{}],23:[function(e,t,i){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageXOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollLeft}},{}],24:[function(e,t,i){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageYOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollTop}},{}],25:[function(e,t,i){"use strict";t.exports=8},{}],26:[function(e,t,i){"use strict";t.exports=11},{}],27:[function(e,t,i){"use strict";t.exports=1},{}],28:[function(e,t,i){"use strict";t.exports=3},{}],29:[function(e,t,i){"use strict";var n=e("../isNode");t.exports=function(e,t){return!!n(e)&&("number"==typeof t?e.nodeType===t:t.indexOf(e.nodeType)!==-1)}},{"../isNode":32}],30:[function(e,t,i){"use strict";var n=e("./isNodeType"),r=e("../COMMENT_NODE"),s=e("../DOCUMENT_FRAGMENT_NODE"),a=e("../ELEMENT_NODE"),o=e("../TEXT_NODE"),l=[a,o,r,s],u=" must be an Element, TextNode, Comment, or Document Fragment",c=[a,o,r],h=" must be an Element, TextNode, or Comment",m=[a,s],f=" must be an Element, or Document Fragment",d=" must have a parentNode";t.exports={parentNode:function(e,t,i,r){if(r=r||"target",(e||t)&&!n(e,m))throw new TypeError(i+": "+r+f)},childNode:function(e,t,i,r){if(r=r||"target",(e||t)&&!n(e,c))throw new TypeError(i+": "+r+h)},insertNode:function(e,t,i,r){if(r=r||"node",(e||t)&&!n(e,l))throw new TypeError(i+": "+r+u)},hasParentNode:function(e,t,i){if(i=i||"target",!e.parentNode)throw new TypeError(t+": "+i+d)}}},{"../COMMENT_NODE":25,"../DOCUMENT_FRAGMENT_NODE":26,"../ELEMENT_NODE":27,"../TEXT_NODE":28,"./isNodeType":29}],31:[function(e,t,i){"use strict";var n=e("./internal/isNodeType"),r=e("./ELEMENT_NODE");t.exports=function(e){return n(e,r)}},{"./ELEMENT_NODE":27,"./internal/isNodeType":29}],32:[function(e,t,i){"use strict";t.exports=function(e){return!(!e||!e.nodeType)}},{}],33:[function(e,t,i){"use strict";var n=e("./internal/validate");t.exports=function(e){return n.childNode(e,!0,"remove"),e.parentNode?e.parentNode.removeChild(e):e}},{"./internal/validate":30}],34:[function(e,t,i){"use strict";t.exports={EventEmitterMicro:e("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":35}],35:[function(e,t,i){"use strict";function n(){this._events={}}var r=n.prototype;r.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},r.once=function(e,t){function i(r){n.off(e,i),void 0!==r?t(r):t()}var n=this;this.on(e,i)},r.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var i=this._events[e].indexOf(t);i!==-1&&this._events[e].splice(i,1)}},r.trigger=function(e,t){if(this.has(e))for(var i=this._events[e].length-1;i>=0;i--)void 0!==t?this._events[e][i](t):this._events[e][i]()},r.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},r.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=n},{}],36:[function(e,t,i){"use strict";t.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],37:[function(e,t,i){"use strict";var n=e("./helpers/globals");t.exports=function(){var e=n.getWindow();return"devicePixelRatio"in e&&e.devicePixelRatio>=1.5}},{"./helpers/globals":36}],38:[function(e,t,i){"use strict";var n=e("./initializer");n.setup(),e("gsap/TimelineLite"),n.complete(),t.exports=window.TimelineLite},{"./initializer":40,"gsap/TimelineLite":134}],39:[function(e,t,i){"use strict";var n=e("../initializer");n.setup(),e("gsap/EasePack"),n.complete(),t.exports=window.Ease},{"../initializer":40,"gsap/EasePack":133}],40:[function(e,t,i){"use strict";var n=e("@marcom/ac-raf-emitter/external"),r=e("@marcom/ac-raf-emitter/cancelExternal");t.exports=function(){var e=!0,t=window.requestAnimationFrame,i=window.cancelAnimationFrame;return{useRAFEmitter:function(t){e=t},setup:function(){e&&(window.requestAnimationFrame=n,window.cancelAnimationFrame=r)},complete:function(){window.requestAnimationFrame=t,window.cancelAnimationFrame=i}}}()},{"@marcom/ac-raf-emitter/cancelExternal":80,"@marcom/ac-raf-emitter/external":83}],41:[function(e,t,i){"use strict";function n(e){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=e||document,s(this._context,u,this._DOMKeyDown,!0),s(this._context,c,this._DOMKeyUp,!0),r.call(this)}var r=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-dom-events/utils/addEventListener"),a=e("@marcom/ac-dom-events/utils/removeEventListener"),o=e("@marcom/ac-object/create"),l=e("./internal/KeyEvent"),u="keydown",c="keyup",h=n.prototype=o(r.prototype);h.onDown=function(e,t){return this.on(u+":"+e,t)},h.onceDown=function(e,t){return this.once(u+":"+e,t)},h.offDown=function(e,t){return this.off(u+":"+e,t)},h.onUp=function(e,t){return this.on(c+":"+e,t)},h.onceUp=function(e,t){return this.once(c+":"+e,t)},h.offUp=function(e,t){return this.off(c+":"+e,t)},h.isDown=function(e){return e+="",this._keysDown[e]||!1},h.isUp=function(e){return!this.isDown(e)},h.destroy=function(){return a(this._context,u,this._DOMKeyDown,!0),a(this._context,c,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,r.prototype.destroy.call(this),this},h._DOMKeyDown=function(e){var t=this._normalizeKeyboardEvent(e),i=t.keyCode+="";this._trackKeyDown(i),this.trigger(u+":"+i,t)},h._DOMKeyUp=function(e){var t=this._normalizeKeyboardEvent(e),i=t.keyCode+="";this._trackKeyUp(i),this.trigger(c+":"+i,t)},h._normalizeKeyboardEvent=function(e){return new l(e)},h._trackKeyUp=function(e){this._keysDown[e]&&(this._keysDown[e]=!1)},h._trackKeyDown=function(e){this._keysDown[e]||(this._keysDown[e]=!0)},t.exports=n},{"./internal/KeyEvent":43,"@marcom/ac-dom-events/utils/addEventListener":21,"@marcom/ac-dom-events/utils/removeEventListener":22,"@marcom/ac-event-emitter-micro":34,"@marcom/ac-object/create":54}],42:[function(e,t,i){"use strict";var n=e("./Keyboard");t.exports=new n},{"./Keyboard":41}],43:[function(e,t,i){"use strict";function n(e){this.originalEvent=e;var t;for(t in e)r.indexOf(t)===-1&&"function"!=typeof e[t]&&(this[t]=e[t]);this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}var r=["keyLocation"];n.prototype={preventDefault:function(){return"function"!=typeof this.originalEvent.preventDefault?void(this.originalEvent.returnValue=!1):this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}},t.exports=n},{}],44:[function(e,t,i){"use strict";t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],45:[function(e,t,i){"use strict";t.exports={Modal:e("./ac-modal-basic/Modal"),Renderer:e("./ac-modal-basic/Renderer"),classNames:e("./ac-modal-basic/classNames"),dataAttributes:e("./ac-modal-basic/dataAttributes")}},{"./ac-modal-basic/Modal":46,"./ac-modal-basic/Renderer":47,"./ac-modal-basic/classNames":48,"./ac-modal-basic/dataAttributes":49}],46:[function(e,t,i){"use strict";function n(e,t){u.call(this),this.options=a.defaults(h,e),this.renderer=new c(t),this.opened=!1,this._keysToClose=[l.ESCAPE],this._attachedKeysToClose=[],this.close=this.close.bind(this)}var r={addEventListener:e("@marcom/ac-dom-events/addEventListener"),removeEventListener:e("@marcom/ac-dom-events/removeEventListener"),target:e("@marcom/ac-dom-events/target")},s={getScrollX:e("@marcom/ac-dom-metrics/getScrollX"),getScrollY:e("@marcom/ac-dom-metrics/getScrollY")},a={create:e("@marcom/ac-object/create"),defaults:e("@marcom/ac-object/defaults")},o=e("@marcom/ac-keyboard"),l=e("@marcom/ac-keyboard/keyMap"),u=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=e("./Renderer"),h={retainScrollPosition:!1},m=n.prototype=a.create(u.prototype);m.open=function(){this.options.retainScrollPosition&&this._saveScrollPosition(),this.opened||(this._attachEvents(),this.trigger("willopen"),this.renderer.open(),this.opened=!0,this.trigger("open"))},m.close=function(e){var t,i;if(this.opened){if(e&&"click"===e.type&&(t=r.target(e),i=this.renderer.options.dataAttributes.close,!t.hasAttribute(i)))return;this.trigger("willclose"),this._removeEvents(),this.renderer.close(),this.options.retainScrollPosition&&this._restoreScrollPosition(),this.opened=!1,this.trigger("close")}},m.render=function(){this.renderer.render()},m.appendContent=function(e,t){this.renderer.appendContent(e,t)},m.removeContent=function(e){this.renderer.removeContent(e)},m.destroy=function(){this._removeEvents(),this.renderer.destroy();for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},m.addKeyToClose=function(e){var t=this._keysToClose.indexOf(e);t===-1&&(this._keysToClose.push(e),this._bindKeyToClose(e))},m.removeKeyToClose=function(e){var t=this._keysToClose.indexOf(e);t!==-1&&this._keysToClose.splice(t,1),this._releaseKeyToClose(e)},m._bindKeyToClose=function(e){var t=this._attachedKeysToClose.indexOf(e);t===-1&&(o.onUp(e,this.close),this._attachedKeysToClose.push(e))},m._releaseKeyToClose=function(e){var t=this._attachedKeysToClose.indexOf(e);t!==-1&&(o.offUp(e,this.close),this._attachedKeysToClose.splice(t,1))},m._removeEvents=function(){this.renderer.modalElement&&r.removeEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._releaseKeyToClose,this)},m._attachEvents=function(){this.renderer.modalElement&&r.addEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._bindKeyToClose,this)},m._restoreScrollPosition=function(){window.scrollTo(this._scrollX||0,this._scrollY||0)},m._saveScrollPosition=function(){this._scrollX=s.getScrollX(),this._scrollY=s.getScrollY()},t.exports=n},{"./Renderer":47,"@marcom/ac-dom-events/addEventListener":17,"@marcom/ac-dom-events/removeEventListener":18,"@marcom/ac-dom-events/target":20,"@marcom/ac-dom-metrics/getScrollX":23,"@marcom/ac-dom-metrics/getScrollY":24,"@marcom/ac-event-emitter-micro":34,"@marcom/ac-keyboard":42,"@marcom/ac-keyboard/keyMap":44,"@marcom/ac-object/create":54,"@marcom/ac-object/defaults":55}],47:[function(e,t,i){"use strict";var n={add:e("@marcom/ac-classlist/add"),remove:e("@marcom/ac-classlist/remove")},r={defaults:e("@marcom/ac-object/defaults")},s={remove:e("@marcom/ac-dom-nodes/remove"),isElement:e("@marcom/ac-dom-nodes/isElement")},a=e("./classNames"),o=e("./dataAttributes"),l={modalElement:null,contentElement:null,closeButton:null,classNames:a,dataAttributes:o},u=function(e){e=e||{},this.options=r.defaults(l,e),this.options.classNames=r.defaults(l.classNames,e.classNames),this.options.dataAttributes=r.defaults(l.dataAttributes,e.dataAttributes),this.modalElement=this.options.modalElement,this.contentElement=this.options.contentElement,this.closeButton=this.options.closeButton},c=u.prototype;c.render=function(){return s.isElement(this.modalElement)||(this.modalElement=this.renderModalElement(this.options.classNames.modalElement)),s.isElement(this.contentElement)||(this.contentElement=this.renderContentElement(this.options.classNames.contentElement)),this.closeButton!==!1&&(s.isElement(this.closeButton)||(this.closeButton=this.renderCloseButton(this.options.classNames.closeButton)),this.modalElement.appendChild(this.closeButton)),this.modalElement.appendChild(this.contentElement),document.body.appendChild(this.modalElement),this.modalElement},c.renderCloseButton=function(e){var t;return e=e||this.options.classNames.closeButton,t=this._renderElement("button",e),t.setAttribute(this.options.dataAttributes.close,""),t},c.renderModalElement=function(e){return e=e||this.options.classNames.modalElement,this._renderElement("div",e)},c.renderContentElement=function(e){return e=e||this.options.classNames.contentElement,this._renderElement("div",e)},c.appendContent=function(e,t){s.isElement(e)&&(void 0===arguments[1]?this.contentElement.appendChild(e):s.isElement(t)&&t.appendChild(e))},c.removeContent=function(e){e?this.modalElement.contains(e)&&s.remove(e):this._emptyContent()},c.open=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement),t=[this.modalElement].concat(this.options.classNames.modalOpen);n.add.apply(null,e),n.add.apply(null,t)},c.close=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement),t=[this.modalElement].concat(this.options.classNames.modalOpen);n.remove.apply(null,e),n.remove.apply(null,t)},c.destroy=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement);this.modalElement&&document.body.contains(this.modalElement)&&(this.close(),document.body.removeChild(this.modalElement)),n.remove.apply(null,e);for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},c._renderElement=function(e,t){var i=document.createElement(e),r=[i];return t&&(r=r.concat(t)),n.add.apply(null,r),i},c._emptyContent=function(){this.contentElement.innerHTML=""},t.exports=u},{"./classNames":48,"./dataAttributes":49,"@marcom/ac-classlist/add":11,"@marcom/ac-classlist/remove":16,"@marcom/ac-dom-nodes/isElement":31,"@marcom/ac-dom-nodes/remove":33,"@marcom/ac-object/defaults":55}],48:[function(e,t,i){"use strict";t.exports={modalElement:"modal",modalOpen:"modal-open",documentElement:"has-modal",contentElement:"modal-content",closeButton:"modal-close"}},{}],49:[function(e,t,i){"use strict";t.exports={close:"data-modal-close"}},{}],50:[function(e,t,i){"use strict";t.exports={Modal:e("./ac-modal/Modal"),createStandardModal:e("./ac-modal/factory/createStandardModal"),createFullViewportModal:e("./ac-modal/factory/createFullViewportModal")}},{"./ac-modal/Modal":51,"./ac-modal/factory/createFullViewportModal":52,"./ac-modal/factory/createStandardModal":53}],51:[function(e,t,i){"use strict";function n(e){s.call(this),this.options=e||{},this._modal=new r(e,this.options.renderer),this.opened=!1,this._render(),this.closeButton=this._modal.renderer.closeButton,this.modalElement=this._modal.renderer.modalElement,this.contentElement=this._modal.renderer.contentElement,this.modalElement.setAttribute("role","dialog"),this.closeButton.setAttribute("aria-label","Close"),this._circularTab=new a(this.modalElement),this._onWillOpen=this._onWillOpen.bind(this),this._onOpen=this._onOpen.bind(this),this._onWillClose=this._onWillClose.bind(this),this._onClose=this._onClose.bind(this),this._bindEvents()}var r=e("@marcom/ac-modal-basic").Modal,s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("@marcom/ac-accessibility/CircularTab"),o=n.prototype=Object.create(s.prototype);o.open=function(){this._modal.open(),this.opened=this._modal.opened},o.close=function(){this._modal.close()},o.appendContent=function(e){this._modal.appendContent(e)},o.removeContent=function(e){this._modal.removeContent(e)},o.destroy=function(){this._releaseEvents(),this._modal.destroy(),this._removeModalFocus(),this._circularTab.destroy(),this._focusObj=null;for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},o.addKeyToClose=function(e){this._modal.addKeyToClose(e)},o.removeKeyToClose=function(e){this._modal.removeKeyToClose(e)},o._render=function(){this._modal.render(),this._modal.renderer.modalElement.setAttribute("aria-hidden","true")},o._bindEvents=function(){this._modal.on("willopen",this._onWillOpen),this._modal.on("open",this._onOpen),this._modal.on("willclose",this._onWillClose),this._modal.on("close",this._onClose)},o._releaseEvents=function(){this._modal.off("willopen",this._onWillOpen),this._modal.off("open",this._onOpen),this._modal.off("willclose",this._onWillClose),this._modal.off("close",this._onClose)},o._onWillOpen=function(){this.trigger("willopen")},o._onOpen=function(){this.opened=this._modal.opened,this._giveModalFocus(),this.trigger("open")},o._onWillClose=function(){this.trigger("willclose"),this._removeModalFocus()},o._onClose=function(){this.opened=this._modal.opened,this.trigger("close")},o._giveModalFocus=function(){this.modalElement.removeAttribute("aria-hidden"),this._activeElement=document.activeElement,this.closeButton.focus(),this._circularTab.start()},o._removeModalFocus=function(){this._circularTab.stop(),this.modalElement.setAttribute("aria-hidden","true"),this._activeElement&&(this._activeElement.focus(),this._activeElement=null)},t.exports=n},{"@marcom/ac-accessibility/CircularTab":1,"@marcom/ac-event-emitter-micro":34,"@marcom/ac-modal-basic":45}],52:[function(e,t,i){"use strict";function n(e){var t=new r(a);return e&&t.appendContent(e),t}var r=e("../Modal"),s=e("@marcom/ac-modal-basic").classNames,a={retainScrollPosition:!0,renderer:{classNames:{documentElement:[s.documentElement].concat("has-modal-full-viewport"),modalElement:[s.modalElement].concat("modal-full-viewport")}}};t.exports=n},{"../Modal":51,"@marcom/ac-modal-basic":45}],53:[function(e,t,i){"use strict";function n(e){var t=new r(l);e&&t.appendContent(e);var i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div");return o.add(i,"content-table"),o.add(n,"content-cell"),o.add(s,"content-wrapper"),o.add(u,"content-padding","large-8","medium-10"),t.modalElement.setAttribute(a.close,""),s.setAttribute(a.close,""),n.setAttribute(a.close,""),i.appendChild(n),n.appendChild(s),s.appendChild(u),t.modalElement.appendChild(i),u.appendChild(t.contentElement),u.appendChild(t.closeButton),t}var r=e("../Modal"),s=e("@marcom/ac-modal-basic").classNames,a=e("@marcom/ac-modal-basic").dataAttributes,o={add:e("@marcom/ac-classlist/add")},l={renderer:{classNames:{documentElement:[s.documentElement].concat("has-modal-standard"),modalElement:[s.modalElement].concat("modal-standard")}}};t.exports=n},{"../Modal":51,"@marcom/ac-classlist/add":11,"@marcom/ac-modal-basic":45}],54:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){};t.exports=function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(null===e||"object"!==("undefined"==typeof e?"undefined":n(e)))throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(e):(r.prototype=e,new r)}},{}],55:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./extend");t.exports=function(e,t){if("object"!==("undefined"==typeof e?"undefined":n(e)))throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!==("undefined"==typeof t?"undefined":n(t)))throw new TypeError("defaults: options must be a typeof object");return r({},e,t)}},{"./extend":56}],56:[function(e,t,i){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var n=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach(function(e){if(null!=e)for(var i in e)n.call(e,i)&&(t[i]=e[i])}),t}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],57:[function(e,t,i){"use strict";var n=e("./utils/eventTypeAvailable"),r=e("./shared/camelCasedEventTypes"),s=e("./shared/windowFallbackEventTypes"),a=e("./shared/prefixHelper"),o={};t.exports=function l(e,t){var i,u,c;if(t=t||"div",e=e.toLowerCase(),t in o||(o[t]={}),u=o[t],e in u)return u[e];if(n(e,t))return u[e]=e;if(e in r)for(c=0;c<r[e].length;c++)if(i=r[e][c],n(i.toLowerCase(),t))return u[e]=i;for(c=0;c<a.evt.length;c++)if(i=a.evt[c]+e,n(i,t))return a.reduce(c),u[e]=i;return"window"!==t&&s.indexOf(e)?u[e]=l(e,"window"):u[e]=!1}},{"./shared/camelCasedEventTypes":58,"./shared/prefixHelper":59,"./shared/windowFallbackEventTypes":60,"./utils/eventTypeAvailable":61}],58:[function(e,t,i){"use strict";t.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],59:[function(e,t,i){"use strict";var n=["-webkit-","-moz-","-ms-"],r=["Webkit","Moz","ms"],s=["webkit","moz","ms"],a=function(){this.initialize()},o=a.prototype;o.initialize=function(){this.reduced=!1,this.css=n,this.dom=r,this.evt=s},o.reduce=function(e){this.reduced||(this.reduced=!0,this.css=[this.css[e]],this.dom=[this.dom[e]],this.evt=[this.evt[e]])},t.exports=new a},{}],60:[function(e,t,i){"use strict";t.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],61:[function(e,t,i){"use strict";var n={window:window,document:document};t.exports=function(e,t){var i;return e="on"+e,t in n||(n[t]=document.createElement(t)),i=n[t],e in i||"setAttribute"in i&&(i.setAttribute(e,"return;"),"function"==typeof i[e])}},{}],62:[function(e,t,i){"use strict";function n(e){e=e||{},s.call(this),this.id=o.getNewID(),this.executor=e.executor||a,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),o=e("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");r=n.prototype=Object.create(s.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,s.prototype.destroy.call(this),this._didDestroy=!0,e},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,
this.trigger("start",e))},r._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"@marcom/ac-event-emitter-micro":34,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":73,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":88}],63:[function(e,t,i){"use strict";var n=e("./SingleCallRAFEmitter"),r=function(e){this.rafEmitter=new n,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},s=r.prototype;s.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},s.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},s._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=r},{"./SingleCallRAFEmitter":65}],64:[function(e,t,i){"use strict";var n=e("./RAFInterface"),r=function(){this.events={}},s=r.prototype;s.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},s.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new r},{"./RAFInterface":63}],65:[function(e,t,i){"use strict";var n=e("./RAFEmitter"),r=function(e){n.call(this,e)},s=r.prototype=Object.create(n.prototype);s._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=r},{"./RAFEmitter":62}],66:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":64}],67:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":64}],68:[function(e,t,i){"use strict";function n(e){a.call(this),this.options=r(u,e),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}var r=e("@marcom/ac-object/defaults"),s=e("@marcom/ac-queue").LiveQueue,a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-raf-emitter/update"),l=e("@marcom/ac-raf-emitter/draw"),u={container:document.body,includeContainer:!1},c={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};n.Events={ImageLoad:"image-load",Complete:"complete"};var h=n.prototype=Object.create(a.prototype);h.load=function(e){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=r(c,e),this.loadingQueue=new s(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),l(function(){var e,t,i=this.els.length;for(e=0;e<i;e++)t={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,e),e),el:this.els[e],id:e},this._queueItems.push(t),this._queueItemsObj[e]=t,this.loadingOptions.imageAnimate&&this.els[e].classList.add(this.loadingOptions.imageAnimateClass);o(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(e){return new Promise(function(t,i){l(function(){e.removeAttribute(this._getProgressiveImageDataAttribute()),t(),e=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var e,t=this.els.length;for(e=0;e<t;e++)this.setVisible(this.els[e]),this.loadingOptions.imageAnimate&&l(function(){this.els[e].setAttribute("data-progressive-image-loaded","")}.bind(this,e))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),a.prototype.destroy.call(this)},h._loadNextItem=function(e){return new Promise(function(e,t,i){var n=this._queueItemsObj[e];this._loadAndSetVisible(n.el).then(function(){var e=this._queueItems.indexOf(n);this._queueItems.splice(e,1),this._queueItemsObj[n.id]=null,t(),this._handleImageLoad(n.el),n=t=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,e))},h._loadAndSetVisible=function(e){return new Promise(function(t,i){this.setVisible(e).then(function(){this._getBackgroundImageSrc(e).then(function(i){this._loadImage(i).then(t),e=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(e){return new Promise(function(t,i){o(function(){var i=e.currentStyle;return i||(i=window.getComputedStyle(e,!1)),e=null,0===i.backgroundImage.indexOf("url(")?void t(i.backgroundImage.slice(4,-1).replace(/"/g,"")):void t(null)}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))},h._loadImagePromiseFunc=function(e,t,i){function n(){this.removeEventListener("load",n),t(this),t=null}if(!e)return void t(null);var r=new Image;r.addEventListener("load",n),r.src=e},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(e){l(function(){this.trigger(n.Events.ImageLoad,e),this.loadingOptions.imageAnimate&&e.setAttribute("data-progressive-image-loaded",""),e=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(n.Events.Complete)},t.exports=n},{"@marcom/ac-event-emitter-micro":34,"@marcom/ac-object/defaults":55,"@marcom/ac-queue":69,"@marcom/ac-raf-emitter/draw":66,"@marcom/ac-raf-emitter/update":67}],69:[function(e,t,i){"use strict";t.exports={Queue:e("./ac-queue/Queue"),QueueItem:e("./ac-queue/QueueItem"),LiveQueue:e("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":70,"./ac-queue/Queue":71,"./ac-queue/QueueItem":72}],70:[function(e,t,i){"use strict";function n(e){this._queue=new r,this._maxProcesses=e||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}e("@marcom/ac-polyfills/Promise"),e("@marcom/ac-polyfills/requestAnimationFrame"),e("@marcom/ac-polyfills/Function/prototype.bind");var r=e("./Queue"),s=e("./QueueItem"),a=n.prototype;a.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},a.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},a.stop=function(){this.pause(),this.clear()},a.enqueue=function(e,t){if("function"!=typeof e)throw new Error("LiveQueue can only enqueue functions");void 0===t&&(t=r.PRIORITY_DEFAULT);var i=new s(e,t);return this.enqueueQueueItem(i)},a.enqueueQueueItem=function(e){return this._queue.enqueueQueueItem(e),this._isRunning&&0===this._rafId&&this.start(),e},a.dequeueQueueItem=function(e){return this._queue.dequeueQueueItem(e)},a.clear=function(){this._queue=new r},a.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},a.count=function(){return this._queue.count()+this.pending()},a.pending=function(){return this._maxProcesses-this._availableSlots},a.isEmpty=function(){return 0===this.count()},a._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var e=this._queue.dequeue(),t=e.data();this._isPromise(t)&&(this._retainSlot(),t.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},a._retainSlot=function(){this._availableSlots--},a._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},a._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},a._isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.exports=n},{"./Queue":71,"./QueueItem":72,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Promise":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],71:[function(e,t,i){"use strict";function n(){this._items=[]}var r=e("./QueueItem"),s=n.prototype;s.enqueue=function(e,t){void 0===t&&(t=n.PRIORITY_DEFAULT);var i=new r(e,t);return this.enqueueQueueItem(i)},s.enqueueQueueItem=function(e){return this._items.indexOf(e)===-1&&this._items.push(e),e},s.dequeue=function(){this._heapSort();var e=this._items.length-1,t=this._items[0];return this._items[0]=this._items[e],this._items.pop(),t},s.dequeueQueueItem=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1),e},s.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},s.isEmpty=function(){return 0===this._items.length},s.count=function(){return this._items.length},s.toString=function(){for(var e=["Queue total items: "+this.count()+"\n"],t=0;t<this.count();++t)e.push(this._items[t].toString()+"\n");return e.join("")},s._heapSort=function(){for(var e=0,t=this._items.length-1;t>=0;t--)for(var i=t;i>0;){e++;var n=Math.floor((i-1)/2);if(this._items[i].compareTo(this._items[n])>=0)break;var r=this._items[i];this._items[i]=this._items[n],this._items[n]=r,i=n}},n.PRIORITY_LOW=10,n.PRIORITY_DEFAULT=5,n.PRIORITY_HIGH=1,t.exports=n},{"./QueueItem":72}],72:[function(e,t,i){"use strict";function n(e,t){this.priority=t,this.data=e,this.insertionOrder=r++}var r=0,s=n.prototype;s.compareTo=function(e){return this.priority<e.priority?-1:this.priority>e.priority?1:this.insertionOrder<e.insertionOrder?-1:1},s.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},t.exports=n},{}],73:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",s="1.0.3",a=function(){this._currentID=0};a.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share(r,s,a)},{"@marcom/ac-shared-instance":89}],74:[function(e,t,i){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],75:[function(e,t,i){"use strict";function n(e){e=e||{},s.call(this),this.id=o.getNewID(),this.executor=e.executor||a,this._reset(),this._willRun=!1,this._didDestroy=!1}var r,s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("./sharedRAFExecutorInstance"),o=e("./sharedRAFEmitterIDGeneratorInstance");r=n.prototype=Object.create(s.prototype),r.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},r.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},r.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,s.prototype.destroy.call(this),this._didDestroy=!0,e},r.willRun=function(){return this._willRun},r.isRunning=function(){return this._isRunning},r._subscribe=function(){return this.executor.subscribe(this)},r._unsubscribe=function(){return this.executor.unsubscribe(this)},r._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},r._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},r._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"./sharedRAFEmitterIDGeneratorInstance":84,"./sharedRAFExecutorInstance":85,"@marcom/ac-event-emitter-micro":34}],76:[function(e,t,i){"use strict";function n(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new s,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}var r,s=e("@marcom/ac-event-emitter-micro/EventEmitterMicro");r=n.prototype,r.frameRequestedPhase="requested",r.startPhase="start",r.runPhases=["update","external","draw"],r.endPhase="end",r.disabledPhase="disabled",r.beforePhaseEventPrefix="before:",r.afterPhaseEventPrefix="after:",r.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},r.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.getSubscribeID=function(){return this._totalSubscribeCount+=1},r.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},r.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},r.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},r._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},r._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},r._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},r._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=n},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":35}],77:[function(e,t,i){"use strict";var n=e("./SingleCallRAFEmitter"),r=function(e){this.phase=e,this.rafEmitter=new n,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},s=r.prototype;s.requestAnimationFrame=function(e,t){return t===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},s.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},s._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},s._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},s._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},s._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},s._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},s._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},s._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},s._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=r},{"./SingleCallRAFEmitter":79}],78:[function(e,t,i){"use strict";var n=e("./RAFInterface"),r=function(){this.events={}},s=r.prototype;s.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},s.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new r},{"./RAFInterface":77}],79:[function(e,t,i){"use strict";var n=e("./RAFEmitter"),r=function(e){n.call(this,e)},s=r.prototype=Object.create(n.prototype);s._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=r},{"./RAFEmitter":75}],80:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.cancelAnimationFrame("external")},{"./RAFInterfaceController":78}],81:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.cancelAnimationFrame("update")},{"./RAFInterfaceController":78}],82:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":78}],83:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("external")},{"./RAFInterfaceController":78}],84:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r=e("https://www.apple.com/.release-info.js").majorVersionNumber,s=function(){this._currentID=0};s.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",r,s)},{"../.release-info.js":74,"@marcom/ac-shared-instance":89}],85:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r=e("https://www.apple.com/.release-info.js").majorVersionNumber,s=e("./RAFExecutor");t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",r,s)},{"../.release-info.js":74,"./RAFExecutor":76,"@marcom/ac-shared-instance":89}],86:[function(e,t,i){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":78}],87:[function(e,t,i){"use strict";function n(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var r;r=n.prototype,r.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},r.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},r.trigger=function(e,t){var i;for(i=0;i<this._subscriberArrayLength;i++)null!==this._subscribers[this._subscribersOrder[i]]&&this._subscribers[this._subscribersOrder[i]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[i]].trigger(e,t)},r.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},r.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},r._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},r._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},r._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},r._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},r._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},r._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},r._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=n},{"@marcom/ac-polyfills/performance/now":void 0}],88:[function(e,t,i){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-executor:sharedRAFExecutorInstance",s="2.0.1",a=e("./RAFExecutor");t.exports=n.share(r,s,a)},{"./RAFExecutor":87,"@marcom/ac-shared-instance":89}],89:[function(e,t,i){"use strict";t.exports={SharedInstance:e("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":90}],90:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=window,s="AC",a="SharedInstance",o=r[s],l=function(){var e={};return{get:function(t,i){var n=null;return e[t]&&e[t][i]&&(n=e[t][i]),n},set:function(t,i,n){return e[t]||(e[t]={}),"function"==typeof n?e[t][i]=new n:e[t][i]=n,e[t][i]},share:function(e,t,i){var n=this.get(e,t);return n||(n=this.set(e,t,i)),n},remove:function(t,i){var r="undefined"==typeof i?"undefined":n(i);if("string"===r||"number"===r){if(!e[t]||!e[t][i])return;return void(e[t][i]=null)}e[t]&&(e[t]=null)}}}();o||(o=r[s]={}),o[a]||(o[a]=l),t.exports=o[a]},{}],91:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("./Model/AnimSystemModel"),u=e("./Keyframes/Keyframe"),c=e("./Keyframes/KeyframeCSSClass"),h=e("./Keyframes/KeyframeDiscreteEvent"),m=e("./ScrollGroup"),f=e("./TimeGroup"),d=e("./utils/arrayToObject"),p={
create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),cancelUpdate:e("@marcom/ac-raf-emitter/cancelUpdate"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},_=null,v=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(_)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return _=e,e.groups=[],e.scrollSystems=[],e.timeSystems=[],e._forceUpdateRAFId=-1,e.setupEvents(),e}return s(t,e),a(t,[{key:"initialize",value:function(){this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes()}},{key:"destroy",value:function(){this.groups.forEach(function(e){return e.destroy()}),this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(l.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate)}},{key:"createTimeGroup",value:function(e){var t=new f(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new m(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"removeGroup",value:function(e){var t=this;e.keyframeControllers.forEach(function(t){return e.removeKeyframeController(t)}),p.update(function(){var i=t.groups.indexOf(e);i!==-1&&t.groups.splice(i,1),i=t.scrollSystems.indexOf(e),i!==-1&&t.scrollSystems.splice(i,1),i=t.timeSystems.indexOf(e),i!==-1&&t.timeSystems.splice(i,1),p.update(function(){return e.destroy()})})}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(t){return e.createScrollGroup(t)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(t){return e.createTimeGroup(t)}),this.trigger(l.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"createDOMKeyframes",value:function(){var e=this,t=[];[u.DATA_ATTRIBUTE,c.DATA_ATTRIBUTE,h.DATA_ATTRIBUTE].forEach(function(e){for(var i=0;i<12;i++)t.push(e+(0===i?"":"-"+(i-1)))});for(var i=0;i<t.length;i++)for(var n=t[i],r=document.querySelectorAll("["+n+"]"),s=0;s<r.length;s++){var a=r[s],o=JSON.parse(a.getAttribute(n));this.addKeyframe(a,o)}p.update(function(){return e.groups.forEach(function(e){return e.onKeyframesDirty({preventOnScroll:!0})})},!0),p.update(function(){e.groups.forEach(function(e){return e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)}),e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),e.groups.forEach(function(e){return e.reconcile()}),e.onScroll()},!0)}},{key:"initializeModel",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset,l.pageMetrics.breakpoint=l.getBreakpoint();var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY}},{key:"setupEvents",value:function(){this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeImmediate)}},{key:"determineActiveKeyframes",value:function(){for(var e=d(Array.from(document.documentElement.classList)),t=0,i=this.groups.length;t<i;t++)this.groups[t].determineActiveKeyframes(e)}},{key:"onScroll",value:function(){l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll();this.trigger(l.PageEvents.ON_SCROLL,l.pageMetrics)}},{key:"onResizeImmediate",value:function(){l.pageMetrics.windowHeight=window.innerHeight,l.pageMetrics.windowWidth=window.innerWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY,window.clearTimeout(l.RESIZE_TIMEOUT),l.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(l.PageEvents.ON_RESIZE_IMMEDIATE,l.pageMetrics)}},{key:"onResizedDebounced",value:function(){var e=this;p.update(function(){var t=l.pageMetrics.breakpoint,i=l.getBreakpoint(),n=i!==t;if(n){l.pageMetrics.previousBreakpoint=t,l.pageMetrics.breakpoint=i;for(var r=0,s=e.groups.length;r<s;r++)e.groups[r]._onBreakpointChange();e.trigger(l.PageEvents.ON_BREAKPOINT_CHANGE,l.pageMetrics)}for(var a=0,o=e.groups.length;a<o;a++)e.groups[a].forceUpdate({recalculateActiveKeyframes:n,waitForNextUpdate:!1});e.trigger(l.PageEvents.ON_RESIZE_DEBOUNCED,l.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.recalculateActiveKeyframes,n=void 0!==i&&i,r=t.waitForNextUpdate,s=void 0===r||r;this._forceUpdateRAFId!==-1&&p.cancelUpdate(this._forceUpdateRAFId);var a=function(){for(var t=0,i=e.groups.length;t<i;t++){var r=e.groups[t];r.forceUpdate({recalculateActiveKeyframes:n,waitForNextUpdate:!1})}return-1};this._forceUpdateRAFId=s?p.update(a,!0):a()}},{key:"addKeyframe",value:function(e,t){var i=this.getGroupForTarget(e);return i=i||this.getGroupForTarget(document.body),i.addKeyframe(e,t)}},{key:"getGroupForTarget",value:function(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;for(var t=e;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}}]),t}(o);t.exports=new v},{"./Keyframes/Keyframe":93,"./Keyframes/KeyframeCSSClass":94,"./Keyframes/KeyframeDiscreteEvent":95,"./Model/AnimSystemModel":96,"./ScrollGroup":105,"./TimeGroup":106,"./utils/arrayToObject":107,"@marcom/ac-event-emitter-micro":34,"@marcom/ac-raf-emitter/RAFEmitter":75,"@marcom/ac-raf-emitter/cancelUpdate":81,"@marcom/ac-raf-emitter/draw":82,"@marcom/ac-raf-emitter/external":83,"@marcom/ac-raf-emitter/update":86}],92:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function v(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=e("./Model/AnimSystemModel"),u=(e("./Keyframes/Keyframe"),e("./Keyframes/KeyframeCSSClass")),c=e("./Model/InferKeyframeFromProps"),h=e("./utils/arrayToObject"),m=e("./Model/UUID"),f=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,d=e("@marcom/decompose-css-transform"),p={update:e("@marcom/ac-raf-emitter/update"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},_=function(e){function t(e,i){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.uuid=m(),s.group=e,s.element=i,s._ownerIsElement=s.element instanceof Element,s._ownerIsElement?s.friendlyName=s.element.tagName+"."+Array.from(s.element.classList).join("."):s.friendlyName=s.element.friendlyName||s.uuid,s.element._animInfo=s.element._animInfo||new l.AnimInfo(e,s),s.element._animInfo.controller=s,s.element._animInfo.group=s.group,s.element._animInfo.controllers.push(s),s.tweenProps={},s.eventObject=new l.EventObject(s),s.needsStyleUpdate=!1,s.needsClassUpdate=!1,s.elementMetrics=s.group.metrics.add(s.element),s._parentElementMetrics=null,s.attributes=[],s.keyframes={},s._allKeyframes=[],s._activeKeyframes=[],s.keyframesRequiringDispatch=[],s.updateCachedValuesFromElement(),s.boundsMin=0,s.boundsMax=0,s}return s(t,e),a(t,[{key:"destroy",value:function(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);var e=this.element._animInfo.controllers.indexOf(this);e!==-1&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length?this.element._animInfo=null:(this.element._animInfo.controller=this.element._animInfo.controllers[this.element._animInfo.controllers.length-1],this.element._animInfo.group=this.element._animInfo.controller.group)}this._parentElementMetrics=null,this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var i=0;i<this._allKeyframes.length;i++)this._allKeyframes[i].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){if(this._ownerIsElement){var e=getComputedStyle(this.element),t=d(this.element,!0),i=l.KeyframeDefaults.epsilon,n=!1;this.tweenProps.x=new l.TargetValue(t.translation[0],i,n),this.tweenProps.y=new l.TargetValue(t.translation[1],i,n),this.tweenProps.z=new l.TargetValue(t.translation[2],i,n),this.tweenProps.rotation=new l.TargetValue(t.eulerRotation[2],i,n),this.tweenProps.rotationX=new l.TargetValue(t.eulerRotation[0],i,n),this.tweenProps.rotationY=new l.TargetValue(t.eulerRotation[1],i,n),this.tweenProps.rotationZ=new l.TargetValue(t.eulerRotation[2],i,n),this.tweenProps.scale=new l.TargetValue(t.scale[0],i,n),this.tweenProps.scaleX=new l.TargetValue(t.scale[0],i,n),this.tweenProps.scaleY=new l.TargetValue(t.scale[1],i,n),this.tweenProps.opacity=new l.TargetValue(parseFloat(e.opacity),i,n)}}},{key:"addKeyframe",value:function(e){var t=c(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var i=new t(this,e);return i.parseOptions(e),i.id=this._allKeyframes.length,this._allKeyframes.push(i),i}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e],n=this.tweenProps[i],r=Math.abs(n.current-n.target);if(r>n.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,i=this.attributes.length;t<i;t++){var n=this.attributes[t],r=this.keyframes[this.attributes[t]];if(1!==r.length){var s=this.getNearestKeyframeForAttribute(e,n);s&&s.updateLocalProgress(e)}else r[0].updateLocalProgress(e)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e],n=this.getNearestKeyframeForAttribute(this.group.timelines.local,i);n.updateLocalProgress(this.group.timelines.local),n.snapAtCreation&&n.reconcile(i)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||h(Array.from(document.documentElement.classList));var i=this._activeKeyframes,n=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var r=0;r<this._allKeyframes.length;r++){var s=this._allKeyframes[r];if(s.setEnabled(e)){this._activeKeyframes.push(s);for(var a in s.animValues)this.keyframes[a]=this.keyframes[a]||[],this.keyframes[a].push(s),this.attributes.indexOf(a)===-1&&this.attributes.push(a)}}var o=i.filter(function(e){return t._activeKeyframes.indexOf(e)===-1});if(0!==o.length){var l=n.filter(function(e){return t.attributes.indexOf(e)===-1});0!==l.length&&this._ownerIsElement&&p.external(function(){var e=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],i=l.filter(function(t){return e.indexOf(t)!==-1});i.length>0&&t.element.style.removeProperty("transform");for(var n=0,r=l.length;n<r;++n){var s=l[n],a=t.tweenProps[s];a.current=a.target=a.initialValue,"opacity"===s&&t.element.style.removeProperty("opacity")}for(var c=0,h=o.length;c<h;++c){var m=o[c];m instanceof u&&m._unapply()}},!0)}}},{key:"onDOMRead",value:function(e){for(var t=0,i=this.attributes.length;t<i;t++){var n=this.attributes[t],r=this.getNearestKeyframeForAttribute(e.local,n);r&&r.onDOMRead(n)}}},{key:"onDOMWrite",value:function(){this._ownerIsElement?this.onDOMWriteForElement():this.onDOMWriteForObject(),this.handleEventDispatch()}},{key:"onDOMWriteForObject",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e];this.element[i]=this.tweenProps[i].current}}},{key:"onDOMWriteForElement",value:function(){var e=this.tweenProps,t="";if("undefined"!=typeof this.keyframes.z?t+="translate3d("+e.x.current+"px,"+e.y.current+"px, "+e.z.current+"px)":"undefined"==typeof this.keyframes.x&&"undefined"==typeof this.keyframes.y||(t+="translate("+e.x.current+"px,"+e.y.current+"px)"),"undefined"!=typeof this.keyframes.rotation?t+="rotate("+e.rotation.current+"deg) ":("undefined"!=typeof this.keyframes.rotationX&&(t+="rotateX("+e.rotationX.current+"deg) "),"undefined"!=typeof this.keyframes.rotationY&&(t+="rotateY("+e.rotationY.current+"deg) "),"undefined"!=typeof this.keyframes.rotationZ&&(t+="rotateZ("+e.rotationZ.current+"deg) ")),"undefined"!=typeof this.keyframes.scale)t+="scale("+e.scale.current+","+e.scale.current+") ";else{var i="undefined"!=typeof this.keyframes.scaleX,n="undefined"!=typeof this.keyframes.scaleY;(i||n)&&(t+="scale("+e.scaleX.current+","+e.scaleY.current+") ")}if(""!==t&&(this.element.style.transform=t),"undefined"!=typeof this.keyframes.opacity&&(this.element.style.opacity=e.opacity.current),this.needsStyleUpdate){for(var r in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[r]&&(this.element.style[r]=this.tweenProps.targetStyles[r]),this.tweenProps.targetStyles[r]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var i=this.keyframesRequiringDispatch[e];i.needsEventDispatch=!1,this.eventObject.keyframe=i,this.eventObject.pageMetrics=l.pageMetrics,this.eventObject.event=i.event,this.trigger(i.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,i=this._activeKeyframes.length;t<i;t++)this._activeKeyframes[t].updateAnimationConstraints();this.attributes.forEach(function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(l.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=new Set;e.add(this.element),this._parentElementMetrics&&e.add(this.element.parentElement),this._allKeyframes.forEach(function(t){return e.add(t.relativeTo)}),this.group.metrics.refreshCollection(e),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var i=this.attributes[e],n=this.keyframes[i],r=n[0];if(!(r.keyframeType>l.KeyframeTypes.InterpolationForward))for(var s=0,a=n.length;s<a;s++){var o=n[s];if(null===o.jsonProps[i][0]){if(0===s){o.animValues[i][0]=this.tweenProps[i].initialValue;continue}o.animValues[i][0]=n[s-1].animValues[i][1]}if(null===o.jsonProps[i][1]){if(s===a-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! "+i+":["+o.jsonProps[i][0]+",null]");o.animValues[i][1]=n[s+1].animValues[i][0]}}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,i=this.attributes.length;t<i;t++)for(var n=this.keyframes[this.attributes[t]],r=0;r<n.length;r++){var s=n[r];this.boundsMin=Math.min(s.start,this.boundsMin),this.boundsMax=Math.max(s.end,this.boundsMax),e.min=Math.min(s.start,e.min),e.max=Math.max(s.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){var i=null,n=Number.POSITIVE_INFINITY,r=this.keyframes[t];if(void 0===r)return null;var s=r.length;if(0===s)return null;if(1===s)return r[0];for(var a=0;a<s;a++){var o=r[a];if(o.isInRange(e)){i=o;break}var l=Math.min(Math.abs(e-o.start),Math.abs(e-o.end));l<n&&(n=l,i=o)}return i}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateKeyframe",value:function(e,t){var i=this;e.parseOptions(t),e.updateAnimationConstraints(),this.group.keyframesDirty=!0,p.update(function(){i.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,e),i.group.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}},{key:"removeKeyframe",value:function(e){var t=this._allKeyframes.indexOf(e);t!==-1&&(this._allKeyframes.splice(t,1),this.group.keyframesDirty=!0)}},{key:"updateAnimation",value:function(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}]),t}(f);Object.defineProperty(_.prototype,"parentElementMetrics",{get:function(){return null===this._parentElementMetrics&&(this._parentElementMetrics=this.group.metrics.add(this.element.parentElement)),this._parentElementMetrics}}),t.exports=_},{"./Keyframes/Keyframe":93,"./Keyframes/KeyframeCSSClass":94,"./Model/AnimSystemModel":96,"./Model/InferKeyframeFromProps":99,"./Model/UUID":100,"./utils/arrayToObject":107,"@marcom/ac-event-emitter-micro":34,"@marcom/ac-raf-emitter/draw":82,"@marcom/ac-raf-emitter/external":83,"@marcom/ac-raf-emitter/update":86,"@marcom/decompose-css-transform":111}],93:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../Model/AnimSystemModel"),a=e("@marcom/sm-math-utils"),o=e("../Model/EasingFunctions"),l=e("../Model/UnitBezier"),u=e("../utils/arrayToObject"),c=function(){function e(t,i){n(this,e),this.controller=t,this.relativeTo=t.element,this.jsonProps=i,this.ease=t.group.defaultEase,this.easeFunctionString=s.KeyframeDefaults.easeFunctionString,this.easeFunction=o[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=s.KeyframeTypes.Interpolation,this.hold=!1}return r(e,[{key:"destroy",value:function(){this.controller=null,this.relativeTo=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(e){if(this.jsonProps=e,""!==e.relativeTo&&e.relativeTo?e.relativeTo&&(this.relativeTo=this.controller.group.element.querySelector(e.relativeTo)||document.querySelector(e.relativeTo),null===this.relativeTo&&(console.warn("Keyframe for",this.controller.element.className," .relativeTo failed to find "+e.relativeTo+"' via querySelector"),this.relativeTo=this.controller.element),this.controller.group.metrics.add(this.relativeTo)):this.relativeTo=this.controller.element,e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunction=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,this.easeFunction=o[e.easeFunction],!o.hasOwnProperty(e.easeFunction)){var t=l.fromCSSString(e.easeFunction);t?this.easeFunction=t:console.error("Keyframe parseOptions cannot find EasingFunction named '"+e.easingFunction+"'")}for(var i in e)if(s.KeyframeJSONReservedWords.indexOf(i)===-1){var n=e[i];if(Array.isArray(n)){if(this.animValues[i]=this.controller.group.expressionParser.parse(this,n),void 0===this.controller.tweenProps[i]||!this.controller._ownerIsElement){var r=0;this.controller._ownerIsElement||(r=this.controller.element[i]);var a=new s.TargetValue(r,s.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[i]=a}var u=this.controller.tweenProps[i];if(e.epsilon)u.epsilon=e.epsilon;else{var c=Math.abs(this.animValues[i][0]-this.animValues[i][1]),h=Math.min(.001*c,u.epsilon,s.KeyframeDefaults.epsilon);u.epsilon=Math.max(h,1e-4)}}}this.keyframeType=this.hold?s.KeyframeTypes.InterpolationForward:s.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e>this.end)return this.localT=1,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),i=this.hold?this.localT:0;this.localT=a.clamp(t,i,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],i=this.controller.tweenProps[e];i.initialValue=t[0],i.target=t[0]+this.curvedT*(t[1]-t[0]),i.current!==i.target&&(i.current=i.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;this.ease=1;for(var i in this.animValues)this.reconcile(i);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],i=this.controller.tweenProps[e];i.target=t[0]+this.curvedT*(t[1]-t[0]);var n=i.current;i.current+=(i.target-i.current)*this.ease;var r=i.current-i.target;r<i.epsilon&&r>-i.epsilon&&(i.current=i.target,r=0),""===this.event||this.needsEventDispatch||(r>i.epsilon||r<-i.epsilon||0===r&&n!==i.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||u(Array.from(document.documentElement.classList));var t=this.breakpointMask.indexOf(s.pageMetrics.breakpoint)!==-1,i=!1;return this.disabledWhen.length>0&&(i=this.disabledWhen.some(function(t){return"undefined"!=typeof e[t]})),this.isEnabled=t&&!i,this.isEnabled}},{key:"updateAnimationConstraints",value:function(){this.start=this.controller.group.timeParser.parse(this,this.jsonProps.start),this.end=this.controller.group.timeParser.parse(this,this.jsonProps.end),this.updateAnimatedValueConstraints()}},{key:"updateAnimatedValueConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parse(this,t)}}}]),e}();c.DATA_ATTRIBUTE="data-anim-tween",t.exports=c},{"../Model/AnimSystemModel":96,"../Model/EasingFunctions":97,"../Model/UnitBezier":101,"../utils/arrayToObject":107,"@marcom/sm-math-utils":119}],94:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./Keyframe"),u=e("https://www.apple.com/Model/AnimSystemModel.js"),c=function(e){function t(e,i){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return s.keyframeType=u.KeyframeTypes.CSSClass,s._triggerType=t.TRIGGER_TYPE_CSS_CLASS,s.cssClass="",s.friendlyName="",s.style={on:null,off:null},s.toggle=!1,s.isApplied=!1,s}return s(t,e),o(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var i in this.style.on)this.style.off[i]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var n=getComputedStyle(this.controller.element);this.isApplied=!0;for(var r in this.style.on)if(n[r]!==this.style.on[r]){this.isApplied=!1;break}}l.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new u.TargetValue(0,1,(!1))),this.keyframeType=u.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==a(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==a(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(e,t){}},{key:"onDOMRead",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(l);c.TRIGGER_TYPE_CSS_CLASS=0,c.TRIGGER_TYPE_STYLE_PROPERTY=1,c.DATA_ATTRIBUTE="data-anim-classname",t.exports=c},{"../Model/AnimSystemModel.js":96,"./Keyframe":93}],95:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function h(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:h(r,t,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=e("./Keyframe"),u=e("https://www.apple.com/Model/AnimSystemModel.js"),c=function(e){function t(e,i){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return s.keyframeType=u.KeyframeTypes.Event,s.isApplied=!1,s.hasDuration=!1,s.isCurrentlyInRange=!1,s}return s(t,e),a(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new u.TargetValue(0,1,(!1))),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=u.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,i=e>=this.start&&e<=this.end;if(t===i)return;return i&&!t?this._trigger(this.event+":enter"):t&&!i&&this._trigger(this.event+":exit"),void(this.isCurrentlyInRange=i)}!this.isApplied&&e>=this.start?(this._trigger(this.event),this.isApplied=!0):this.isApplied&&e<this.start&&(this._trigger(this.event+":reverse"),this.isApplied=!1)}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"updateAnimationConstraints",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateAnimationConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"reset",value:function(e){this.isApplied=!1,
this.isCurrentlyInRange=!1,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e)}},{key:"onDOMRead",value:function(e,t){}},{key:"reconcile",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(l);c.DATA_ATTRIBUTE="data-anim-event",t.exports=c},{"../Model/AnimSystemModel.js":96,"./Keyframe":93}],96:[function(e,t,i){"use strict";var n={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"GuiPosition-0"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",longName:"small",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",longName:"medium",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",longName:"xlarge",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",longName:"large",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<n.BREAKPOINTS.length;e++){var t=n.BREAKPOINTS[e],i=window.matchMedia(t.mediaQuery);if(i.matches)return t.name}},KeyframeDefaults:{ease:.1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","relativeTo","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TargetValue:function(e,t,i){this.epsilon=parseFloat(t),this.snapAtCreation=i,this.initialValue=e,this.target=e,this.current=e},Timeline:function(){this.local=0,this.localUnclamped=0},ViewableRange:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0},AnimInfo:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGroup=i,this.group=e,this.controller=t,this.controllers=[]}};t.exports=n},{}],97:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function s(){n(this,s),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return e-=1,e*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.exports=new r},{}],98:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./AnimSystemModel"),a=function(e,t){return void 0===e||null===e?t:e},o=function(){function e(){n(this,e),this._metrics=new WeakMap}return r(e,[{key:"destroy",value:function(){this._metrics=null}},{key:"add",value:function(e){var t=this._metrics.get(e);if(t)return t;var i=new l(e);return this._metrics.set(e,i),this._refreshMetrics(e,i)}},{key:"get",value:function(e){return this._metrics.get(e)}},{key:"refreshCollection",value:function(e){var t=this;e.forEach(function(e){return t._refreshMetrics(e,null)})}},{key:"refreshMetrics",value:function(e){return this._refreshMetrics(e)}},{key:"_refreshMetrics",value:function(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=a(e.width,0),t.height=a(e.height,0),t.top=a(e.top,0),t.left=a(e.left,0),t.right=t.left+t.width,t.bottom=t.top+t.height,t;if(void 0===e.offsetWidth){var i=e.getBoundingClientRect();return t.width=i.width,t.height=i.height,t.top=s.pageMetrics.scrollY+i.top,t.left=s.pageMetrics.scrollX+i.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=s.pageMetrics.documentOffsetY,t.left=s.pageMetrics.documentOffsetX;for(var n=e;n;)t.top+=n.offsetTop,t.left+=n.offsetLeft,n=n.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),e}(),l=function(){function e(t){n(this,e),this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return r(e,[{key:"toString",value:function(){return"top:"+this.top+", bottom:"+this.bottom+", left:"+this.left+", right:"+this.right+", height:"+this.height+", width:"+this.width}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=o},{"./AnimSystemModel":96}],99:[function(e,t,i){"use strict";var n=e("./AnimSystemModel"),r=e("../Keyframes/Keyframe"),s=e("../Keyframes/KeyframeDiscreteEvent"),a=e("../Keyframes/KeyframeCSSClass"),o=function(e){for(var t in e){var i=e[t];if(n.KeyframeJSONReservedWords.indexOf(t)===-1&&Array.isArray(i))return!0}return!1};t.exports=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(o(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return a}if(o(e))return r;if(e.event)return s;throw"Could not determine tween type based on "+JSON.stringify(e)}},{"../Keyframes/Keyframe":93,"../Keyframes/KeyframeCSSClass":94,"../Keyframes/KeyframeDiscreteEvent":95,"./AnimSystemModel":96}],100:[function(e,t,i){"use strict";t.exports=function(){for(var e="",t=0;t<8;t++){var i=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&i|8:i).toString(16)}return e}},{}],101:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=1e-5,a=Math.abs,o=5,l=function(){function e(t,i,r,s){n(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(r-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*i,this.cp[4]=3*(s-i)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return r(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,i,n,r,l,u;for(n=e,u=0;u<o;u++){if(r=this.sampleCurveX(n)-e,a(r)<s)return n;if(l=this.sampleCurveDerivativeX(n),a(l)<s)break;n-=r/l}if(t=0,i=1,n=e,n<t)return t;if(n>i)return i;for(;t<i;){if(r=this.sampleCurveX(n),a(r-e)<s)return n;e>r?t=n:i=n,n=.5*(i-t)+t}return n}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),u=/\d*\.?\d+/g;l.fromCSSString=function(e){var t=e.match(u);if(4!==t.length)throw"UnitBezier could not convert "+e+" to cubic-bezier";var i=t.map(Number),n=new l(i[0],i[1],i[2],i[3]);return n.solve.bind(n)},t.exports=l},{}],102:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../Model/AnimSystemModel"),a=e("./Operations"),o=/([-|+])?(\d+\.?\d*)(px|vh|vw|pw|ph|%w|%h|rw|rh|%)?|([-+*\/])/g,l=/^[-+]?(?:[0-9]{0,30}\.)?[0-9]{1,30}(?:[Ee][-+]?[1-2]?[0-9])?$/g,u=function(){function e(t){n(this,e),this.group=t}return r(e,[{key:"parse",value:function(e,t){if(Array.isArray(t))return this.parseArray(e,t);throw new Error("Keyframe value `"+t+"` is not supported. Only arrays in the form of [start,end] are currently supported")}},{key:"parseArray",value:function(e,t){var i=this.parseExpression(e,t[0]),n=this.parseExpression(e,t[1]);return[i,n]}},{key:"parseExpression",value:function(e,t){if(null===t)return 0;if("number"==typeof t)return t;for(var i=5,n=void 0;(n=t.indexOf("("))!==-1&&--i>0;){var r=this.captureParenthesis(t,n),s=this.parseExpression(e,r);t=t.replace("("+r+")",s)}for(var l=void 0,u=[];null!==(l=o.exec(t));)if(l.index===o.lastIndex&&o.lastIndex++,l[4])u.push(a.GetOpCode(l[4]));else{var c=l[1],h=parseFloat(l[2]),m=l[3];"-"===c&&(h*=-1);var f=this.parseSplitUnit(e,h,m);u.push(f)}var d=u.length;if(3===d&&"function"==typeof u[1])return u[1](u[0],u[2]);for(var p=0;p<d;p++)if("function"==typeof u[p]&&1===u[p].priority){var _=u[p-1],v=u[p+1],y=u[p](_,v);u[p-1]=null,u[p+0]=null,u[p+1]=y,p+=1}for(var b=0;null==u[b]&&b<d;)b+=1;var g=u[b],E=null,w=null;for(b+=1;b<d;b++)null!==u[b]?u[b]instanceof Function?E=u[b]:(null===w&&(w=u[b]),null!==w&&(E=E||a.add,g=E(g,w),E=null,w=null)):b+=1;return g}},{key:"parseSplitUnit",value:function(e,t,i){if("undefined"==typeof i)return parseFloat(t);switch(i){case"vh":return.01*t*s.pageMetrics.windowHeight;case"%":return.01*t*e.controller.elementMetrics.height;case"px":return t;case"rh":return.01*t*this.group.metrics.get(e.relativeTo).height;case"vw":return.01*t*s.pageMetrics.windowWidth;case"rw":return.01*t*this.group.metrics.get(e.relativeTo).width;case"%w":return.01*t*e.controller.elementMetrics.width;case"%h":return.01*t*e.controller.elementMetrics.height;case"pw":return.01*t*e.controller.parentElementMetrics.width;case"ph":return.01*t*e.controller.parentElementMetrics.height;default:throw new Error("ExpressionParser: no strategy found for unit `"+i+"` only `vh, vw, %, ph, pw` are supported")}}},{key:"captureParenthesis",value:function(e,t){for(var i="",n=0,r=!1,s=e.length,a=t;a<s;a++)if("("===e[a]?(n+=1,r&&(i+=e[a]),r=!0):")"===e[a]?(n-=1,0!==n&&(i+=e[a])):r&&(i+=e[a]),r&&0===n)return i}},{key:"isUnitlessNumber",value:function(e){return String(e).match(l)}},{key:"destroy",value:function(){this.group=null}},{key:"logParts",value:function(e){console.log(e.reduce(function(e,t){return"function"==typeof t?e+t.friendlyName+" ":e+(t+" ")},""))}}]),e}();t.exports=u},{"../Model/AnimSystemModel":96,"./Operations":103}],103:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function s(){n(this,s),this.add=function(e,t){return e+t},this.sub=function(e,t){return e-t},this.mul=function(e,t){return e*t},this.div=function(e,t){return e/t},this.add.friendlyName="add",this.sub.friendlyName="sub",this.mul.friendlyName="mul",this.div.friendlyName="div",this.add.priority=0,this.sub.priority=0,this.mul.priority=1,this.div.priority=1,this.GetOpCode=function(e){switch(e){case"-":return this.sub;case"+":return this.add;case"*":return this.mul;case"/":return this.div;default:throw new Error('AnimSystem.parsing.Operations - op code "'+e+"\" was found. Only '+ - * /' are supported. Check expression for typos/spacing issues")}}};t.exports=new r},{}],104:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(this,e),this.group=t,this.groupIsTimeBased=i}return r(e,[{key:"parse",value:function(e,t){if("number"==typeof t)return t;var i=this.groupIsTimeBased?0:this.group.metrics.get(e.relativeTo).top,n=this.group.expressionParser.parseExpression(e,t),r=n+i;return this.group.convertScrollPositionToTValue(r)}},{key:"destroy",value:function(){this.group=null}}]),e}();t.exports=s},{}],105:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=e("@marcom/sm-math-utils"),c=e("./utils/arrayToObject"),h=e("./Model/AnimSystemModel"),m=e("./Model/ElementMetricsLookup"),f=e("./Parsing/ExpressionParser"),d=e("./Parsing/TimeParser"),p=e("./KeyframeController"),_={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},v=function(e){function t(e,i){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.anim=i,s.element=e,s.name=s.name||e.getAttribute("data-anim-scroll-group"),s.isEnabled=!0,s.timelines=new h.Timeline,s.metrics=new m,s.metrics.add(s.element),s.expressionParser=new f(s),s.timeParser=new d(s),s.boundsMin=0,s.boundsMax=0,s.lastPosition=0,s.timelineUpdateRequired=!1,s._keyframesDirty=!1,s.viewableRange=s.createViewableRange(),s.defaultEase=h.KeyframeDefaults.ease,s.keyframeControllers=[],s.updateProgress(s.getPosition()),s.onDOMRead=s.onDOMRead.bind(s),s.onDOMWrite=s.onDOMWrite.bind(s),s.gui=null,s.finalizeInit(),s}return s(t,e),a(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new h.AnimInfo(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null,this.timeParser.destroy(),this.timeParser=null;for(var e=0,i=this.keyframeControllers.length;e<i;e++)this.keyframeControllers[e].destroy();this.timelines=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(e){var t=this;if(this.keyframeControllers.includes(e)){var i=e._allKeyframes;e._allKeyframes=[],this.keyframesDirty=!0,_.draw(function(){var n=t.keyframeControllers.indexOf(e);n!==-1&&(t.keyframeControllers.splice(n,1),e.onDOMWrite(),i.forEach(function(e){return e.destroy()}),e.destroy(),t.gui&&t.gui.create())},!0)}}},{key:"remove",value:function(){this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(e){var t=this;this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new _.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite),this.rafEmitter.once("external",function(){return t.reconcile()})}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.timelines)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite(this.timelines);this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(e,t){var i=this.getControllerForTarget(e);return null===i&&(i=new p(this,e),this.keyframeControllers.push(i)),this.keyframesDirty=!0,i.addKeyframe(t)}},{key:"forceUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.waitForNextUpdate,i=void 0===t||t;this.isEnabled&&(this.refreshActiveMetrics(),this.viewableRange=this.createViewableRange(),this.timelineUpdateRequired=!0,i?this.keyframesDirty=!0:this.onKeyframesDirty())}},{key:"onKeyframesDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preventOnScroll,i=void 0!==t&&t;this.determineActiveKeyframes(),this.keyframesDirty=!1;for(var n=0,r=this.keyframeControllers.length;n<r;n++)this.keyframeControllers[n].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),i||this._onScroll(),this.gui&&this.gui.create()}},{key:"refreshActiveMetrics",value:function(){var e=new Set;e.add(this.element),this.keyframeControllers.forEach(function(t){e.add(t.element),t._parentElementMetrics&&e.add(t.element.parentElement),t._allKeyframes.forEach(function(t){return e.add(t.relativeTo)})}),this.metrics.refreshCollection(e)}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||c(Array.from(document.documentElement.classList));for(var t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].getBounds(e);var n=this.convertTValueToScrollPosition(e.min),r=this.convertTValueToScrollPosition(e.max);r-n<h.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(n-.5*h.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(r+.5*h.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}},{key:"createViewableRange",value:function(){return new h.ViewableRange(this.metrics.get(this.element),h.pageMetrics.windowHeight)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a)):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.timelines.local);this.trigger(h.EVENTS.ON_TIMELINE_UPDATE,this.timelines.local),this.timelineUpdateRequired=!1,this.lastPosition!==this.timelines.local&&(this.lastPosition<=this.boundsMin&&this.timelines.localUnclamped>this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START,this):this.lastPosition>=this.boundsMin&&this.timelines.localUnclamped<this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START+":reverse",this):this.lastPosition<=this.boundsMax&&this.timelines.localUnclamped>=this.boundsMax?this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE,this):this.lastPosition>=this.boundsMax&&this.timelines.localUnclamped<this.boundsMax&&this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.timelines)}},{key:"_onScroll",value:function(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);var t=this.lastPosition===this.boundsMin||this.lastPosition===this.boundsMax,i=this.timelines.localUnclamped===this.boundsMin||this.timelines.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&i&&this.lastPosition===e)return void(this.timelines.local=this.timelines.localUnclamped);if(this.timelineUpdateRequired||this.timelines.localUnclamped>this.boundsMin&&this.timelines.localUnclamped<this.boundsMax)return this.timelines.local=u.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped);var n=this.lastPosition>this.boundsMin&&this.lastPosition<this.boundsMax,r=this.timelines.localUnclamped<=this.boundsMin||this.timelines.localUnclamped>=this.boundsMax;return n&&r?(this.timelines.local=u.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped)):void(null!==this.gui&&this.gui.onScrollUpdate(this.timelines))}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?u.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?u.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return h.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;for(var t=e._animInfo.controllers,i=0,n=t.length;i<n;i++)if(t[i].group===this)return t[i];return null}},{key:"trigger",value:function(e,t){if("undefined"!=typeof this._events[e])for(var i=this._events[e].length-1;i>=0;i--)void 0!==t?this._events[e][i](t):this._events[e][i]()}},{key:"keyframesDirty",set:function(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}},{key:"keyFrames",get:function(){return this.viewableRange}}]),t}(l);t.exports=v},{"./KeyframeController":92,"./Model/AnimSystemModel":96,"./Model/ElementMetricsLookup":98,"./Parsing/ExpressionParser":102,"./Parsing/TimeParser":104,"./utils/arrayToObject":107,"@marcom/ac-event-emitter-micro":34,"@marcom/ac-raf-emitter/RAFEmitter":75,"@marcom/ac-raf-emitter/draw":82,"@marcom/ac-raf-emitter/update":86,"@marcom/sm-math-utils":119}],106:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function f(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=e("./ScrollGroup"),u=e("@marcom/sm-math-utils"),c=0,h={create:e("@marcom/ac-raf-emitter/RAFEmitter")},m=function(e){function t(e,i){n(this,t),e||(e=document.createElement("div"),e.className="TimeGroup-"+c++);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return s.name=s.name||e.getAttribute("data-anim-time-group"),s.timeParser.groupIsTimeBased=!0,s._isPaused=!0,s._repeats=0,s._isReversed=!1,s._timeScale=1,s}return s(t,e),a(t,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(e,t){if(void 0===e)return 0===this.boundsMax?0:this.timelines.local/this.boundsMax;var i=e*this.boundsMax;this.timelineUpdateRequired=t||!1,this._onScroll(i)}},{key:"time",value:function(e,t){return void 0===e?this.timelines.local:(e=u.clamp(e,this.boundsMin,this.boundsMax),this.timelineUpdateRequired=t||!1,void this._onScroll(e))}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e,!0),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e,!0),this._playheadEmitter.run()}},{key:"reversed",value:function(e){return void 0===e?this._isReversed:(this._isReversed=e,this)}},{key:"restart",value:function(){this._isReversed?(this.progress(1,!0),this.reverse(this.time())):(this.progress(0,!0),this.play(this.time()))}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(e){if(!this._isPaused){var i=u.clamp(e.delta/1e3,0,.5);this._isReversed&&(i=-i);var n=this.time(),r=n+i*this._timeScale;if(this._repeats===t.REPEAT_FOREVER||this._repeats>0){var s=!1;!this._isReversed&&r>this.boundsMax?(r-=this.boundsMax,s=!0):this._isReversed&&r<0&&(r=this.boundsMax+r,s=!0),s&&(this._repeats=this._repeats===t.REPEAT_FOREVER?t.REPEAT_FOREVER:this._repeats-1)}this.time(r);var a=!this._isReversed&&this.timelines.local!==this.duration,o=this._isReversed&&0!==this.timelines.local;(a||o)&&this._playheadEmitter.run()}}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=e):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(e){this._playheadEmitter=new h.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){return void 0===e?this._repeats:(this._repeats=e,this)}},{key:"getPosition",value:function(){return this.timelines.local}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.duration>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.keyframesDirty&&this.onKeyframesDirty({preventOnScroll:!0}),this.boundsMax}}]),t}(l);m.REPEAT_FOREVER=-1,t.exports=m},{"./ScrollGroup":105,"@marcom/ac-raf-emitter/RAFEmitter":75,"@marcom/sm-math-utils":119}],107:[function(e,t,i){"use strict";var n=function(e){return e.reduce(function(e,t){return e[t]=t,e},{})};t.exports=n},{}],108:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function f(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},c=function(){},h=0,m=function(e){function t(e){n(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.el=e.el,i.gum=e.gum,i._keyframeController=null,i}return s(t,e),a(t,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(e){var t=e.el||this.el;return this.anim.addKeyframe(t,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+h++;var t=void 0!==e.end&&e.end!==e.start,i=this.addKeyframe(e);return t?(this._addCallbackIfNotNull(i,e.event+":enter",e.onEnter),this._addCallbackIfNotNull(i,e.event+":exit",e.onExit)):(this._addCallbackIfNotNull(i,e.event,e.onEvent),this._addCallbackIfNotNull(i,e.event+":reverse",e.onEventReverse)),i}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(!t.every(function(t){return e.hasOwnProperty(t)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));var i=new u.create;i.on("update",e.onUpdate||c),i.on("draw",e.onDraw||c),i.on("draw",function(){return i.run()});var n=e.onEnter,r=e.onExit;return e.onEnter=function(){i.run(),n?n():0},e.onExit=function(){i.cancel(),
r?r():0},this.addDiscreteEvent(e)}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+h++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){if(this.onComponentWillAppear||this.onComponentWillDisappear){this.onComponentWillAppear=this.onComponentWillAppear?this.onComponentWillAppear.bind(this):void 0,this.onComponentWillDisappear=this.onComponentWillDisappear?this.onComponentWillDisappear.bind(this):void 0;var e={start:"-100vh - 1px",end:"100% + 1px",event:"_appear"+h++};e.onEnter=this.onComponentWillAppear,e.onExit=this.onComponentWillDisappear,this.addDiscreteEvent(e)}}},{key:"_addCallbackIfNotNull",value:function(e,t,i){return!!i&&(e.controller.on(t,i),!0)}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}}]),t}(l);t.exports=m},{"@marcom/ac-event-emitter-micro":34,"@marcom/ac-raf-emitter/RAFEmitter":75,"@marcom/ac-raf-emitter/draw":82,"@marcom/ac-raf-emitter/update":86}],109:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("@marcom/delayed-initializer"),u=e("@marcom/anim-system"),c=e("@marcom/anim-system/Model/AnimSystemModel"),h=e("./ComponentMap"),m={},f=function(e){function t(e){n(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.el=e,i.anim=u,i.components=[],i.el.getAttribute("data-anim-scroll-group")||i.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),u.on(c.EVENTS.ON_DOM_GROUPS_CREATED,function(e){i.componentsInitialized=!1,i.initComponents(),i.setupEvents()}),u.on(c.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){i.components.forEach(function(e){return e.mounted()}),i.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)}),l.add(function(){return u.initialize()}),i}return s(t,e),a(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("data-component-list")&&e.push(this.el);for(var t=0;t<e.length;t++)for(var i=e[t],n=i.getAttribute("data-component-list"),r=n.split(" "),s=0,a=r.length;s<a;s++){var o=r[s];""!==o&&" "!==o&&this.addComponent({el:i,componentName:o})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),u.on(c.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),u.on(c.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),u.on(c.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var i=e.el,n=e.componentName,r=e.data;if(!h.hasOwnProperty(n))throw"BubbleGum::addComponent could not add component to"+i.className+" no component type '"+n+"'found!";var s=h[n];if(!t.componentIsSupported(s,n))return void 0===m[n]&&(console.log("BubbleGum::addComponent unsupported component '"+n+"'. Reason: '"+n+".IS_SUPPORTED' returned false"),m[n]=!0),null;var a=i.dataset.componentList||"";a.includes(n)||(i.dataset.componentList=a.split(" ").concat(n).join(" "));var o=new s({el:i,data:r,gum:this,pageMetrics:c.pageMetrics});return this.components.push(o),this.componentsInitialized&&o.mounted(),o}},{key:"removeComponent",value:function(e){var t=this.components.indexOf(e);t!==-1&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.replace(e.constructor.name,""),e.destroy())}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,i="[data-component-list*="+e+"]",n=t.matches(i)?t:t.querySelector(i);return n?this.components.find(function(t){return t instanceof h[e]&&t.el===n}):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,i="[data-component-list*="+e+"]",n=t.matches(i)?[t]:Array.from(t.querySelectorAll(i));return this.components.filter(function(t){return t instanceof h[e]&&n.includes(t.el)})}},{key:"getComponentsForElement",value:function(e){return this.components.filter(function(t){return t.el===e})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(e){return e.onResizeImmediate(c.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(e){return e.onResizeDebounced(c.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(e){return e.onBreakpointChange(c.pageMetrics)})}}],[{key:"componentIsSupported",value:function(e,t){var i=e.IS_SUPPORTED;if(void 0===i)return!0;if("function"!=typeof i)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var n=e.IS_SUPPORTED();return void 0===n?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):n}}]),t}(o);f.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=f},{"./ComponentMap":110,"@marcom/ac-event-emitter-micro":34,"@marcom/anim-system":91,"@marcom/anim-system/Model/AnimSystemModel":96,"@marcom/delayed-initializer":112}],110:[function(e,t,i){"use strict";t.exports={BaseComponent:e("./BaseComponent")}},{"./BaseComponent":108}],111:[function(e,t,i){"use strict";var n={create:e("gl-mat4/create"),invert:e("gl-mat4/invert"),clone:e("gl-mat4/clone"),transpose:e("gl-mat4/transpose")},r={create:e("gl-vec3/create"),dot:e("gl-vec3/dot"),normalize:e("gl-vec3/normalize"),length:e("gl-vec3/length"),cross:e("gl-vec3/cross"),fromValues:e("gl-vec3/fromValues")},s={create:e("gl-vec4/create"),transformMat4:e("gl-vec4/transformMat4"),fromValues:e("gl-vec4/fromValues")},a=(Math.PI/180,180/Math.PI),o=0,l=1,u=3,c=4,h=5,m=7,f=11,d=12,p=13,_=15,v=function(e,t){t=t||!1;for(var i=n.clone(e),o=r.create(),l=r.create(),c=r.create(),h=s.create(),d=s.create(),p=(r.create(),0);p<16;p++)i[p]/=i[_];var v=n.clone(i);v[u]=0,v[m]=0,v[f]=0,v[_]=1;var E=(i[3],i[7],i[11],i[12]),w=i[13],T=i[14],A=(i[15],s.create());if(g(i[u])&&g(i[m])&&g(i[f]))h=s.fromValues(0,0,0,1);else{A[0]=i[u],A[1]=i[m],A[2]=i[f],A[3]=i[_];var x=n.invert(n.create(),v),C=n.transpose(n.create(),x);h=s.transformMat4(h,A,C)}o[0]=E,o[1]=w,o[2]=T;var S=[r.create(),r.create(),r.create()];S[0][0]=i[0],S[0][1]=i[1],S[0][2]=i[2],S[1][0]=i[4],S[1][1]=i[5],S[1][2]=i[6],S[2][0]=i[8],S[2][1]=i[9],S[2][2]=i[10],l[0]=r.length(S[0]),r.normalize(S[0],S[0]),c[0]=r.dot(S[0],S[1]),S[1]=y(S[1],S[0],1,-c[0]),l[1]=r.length(S[1]),r.normalize(S[1],S[1]),c[0]/=l[1],c[1]=r.dot(S[0],S[2]),S[2]=y(S[2],S[0],1,-c[1]),c[2]=r.dot(S[1],S[2]),S[2]=y(S[2],S[1],1,-c[2]),l[2]=r.length(S[2]),r.normalize(S[2],S[2]),c[1]/=l[2],c[2]/=l[2];var O=r.cross(r.create(),S[1],S[2]);if(r.dot(S[0],O)<0)for(p=0;p<3;p++)l[p]*=-1,S[p][0]*=-1,S[p][1]*=-1,S[p][2]*=-1;d[0]=.5*Math.sqrt(Math.max(1+S[0][0]-S[1][1]-S[2][2],0)),d[1]=.5*Math.sqrt(Math.max(1-S[0][0]+S[1][1]-S[2][2],0)),d[2]=.5*Math.sqrt(Math.max(1-S[0][0]-S[1][1]+S[2][2],0)),d[3]=.5*Math.sqrt(Math.max(1+S[0][0]+S[1][1]+S[2][2],0)),S[2][1]>S[1][2]&&(d[0]=-d[0]),S[0][2]>S[2][0]&&(d[1]=-d[1]),S[1][0]>S[0][1]&&(d[2]=-d[2]);var P=s.fromValues(d[0],d[1],d[2],2*Math.acos(d[3])),k=b(d);return t&&(c[0]=Math.round(c[0]*a*100)/100,c[1]=Math.round(c[1]*a*100)/100,c[2]=Math.round(c[2]*a*100)/100,k[0]=Math.round(k[0]*a*100)/100,k[1]=Math.round(k[1]*a*100)/100,k[2]=Math.round(k[2]*a*100)/100,P[3]=Math.round(P[3]*a*100)/100),{translation:o,scale:l,skew:c,perspective:h,quaternion:d,eulerRotation:k,axisAngle:P}},y=function(e,t,i,n){var s=r.create();return s[0]=i*e[0]+n*t[0],s[1]=i*e[1]+n*t[1],s[2]=i*e[2]+n*t[2],s},b=function(e){var t,i,n,s=e[3]*e[3],a=e[0]*e[0],o=e[1]*e[1],l=e[2]*e[2],u=a+o+l+s,c=e[0]*e[1]+e[2]*e[3];return c>.499*u?(i=2*Math.atan2(e[0],e[3]),n=Math.PI/2,t=0,r.fromValues(t,i,n)):c<-.499*u?(i=-2*Math.atan2(e[0],e[3]),n=-Math.PI/2,t=0,r.fromValues(t,i,n)):(i=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],a-o-l+s),n=Math.asin(2*c/u),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-a+o-l+s),r.fromValues(t,i,n))},g=function(e){return Math.abs(e)<1e-4},E=function(e){var t=String(getComputedStyle(e).transform).trim(),i=n.create();if("none"===t||""===t)return i;var r,s,a=t.slice(0,t.indexOf("("));if("matrix3d"===a)for(r=t.slice(9,-1).split(","),s=0;s<r.length;s++)i[s]=parseFloat(r[s]);else{if("matrix"!==a)throw new TypeError("Invalid Matrix Value");for(r=t.slice(7,-1).split(","),s=r.length;s--;)r[s]=parseFloat(r[s]);i[o]=r[0],i[l]=r[1],i[d]=r[4],i[c]=r[2],i[h]=r[3],i[p]=r[5]}return i};t.exports=function(e,t){var i=E(e);return v(i,t)}},{"gl-mat4/clone":120,"gl-mat4/create":121,"gl-mat4/invert":122,"gl-mat4/transpose":123,"gl-vec3/create":124,"gl-vec3/cross":125,"gl-vec3/dot":126,"gl-vec3/fromValues":127,"gl-vec3/length":128,"gl-vec3/normalize":129,"gl-vec4/create":130,"gl-vec4/fromValues":131,"gl-vec4/transformMat4":132}],112:[function(e,t,i){"use strict";var n=!1,r=!1,s=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(r&&e(),s.push(e),!n){n=!0;var i=document.documentElement.scrollHeight,a=0,o=function l(){var e=document.documentElement.scrollHeight;if(i!==e)a=0;else if(a++,a>=t.NUMBER_OF_FRAMES_TO_WAIT)return void s.forEach(function(e){return e()});i=e,requestAnimationFrame(l)};requestAnimationFrame(o)}}}},{}],113:[function(e,t,i){"use strict";t.exports=Object.freeze({ELEMENT:1,TEXT:3,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11})},{}],114:[function(e,t,i){"use strict";t.exports=function(e){return!(!e||!e.nodeType)}},{}],115:[function(e,t,i){"use strict";var n=e("./isNode");t.exports=function(e,t){return!!n(e)&&("number"==typeof t?e.nodeType===t:!!Array.isArray(t)&&t.indexOf(e.nodeType)!==-1)}},{"./isNode":114}],116:[function(e,t,i){"use strict";var n=e("@marcom/ac-dom-nodes/isNodeType"),r=e("./internal/validate"),s=e("@marcom/ac-dom-nodes/NODE_TYPES").ELEMENT;t.exports=function(e,t,i,a){if(r.childNode(e,"ancestors"),r.selector(t,"ancestors"),i&&n(e,s)&&(!t||e.matches(t)))return e;if(a=a||document.body,e!==a)for(;(e=e.parentNode)&&n(e,s);){if(!t||e.matches(t))return e;if(e===a)break}return null}},{"./internal/validate":117,"@marcom/ac-dom-nodes/NODE_TYPES":113,"@marcom/ac-dom-nodes/isNodeType":115}],117:[function(e,t,i){"use strict";var n=e("@marcom/ac-dom-nodes/isNodeType"),r=e("@marcom/ac-dom-nodes/NODE_TYPES"),s=r.COMMENT,a=r.DOCUMENT_FRAGMENT,o=r.DOCUMENT,l=r.ELEMENT,u=r.TEXT,c=[l,o,a],h=" must be an Element, Document, or Document Fragment",m=[l,u,s],f=" must be an Element, TextNode, or Comment",d=" must be a string";t.exports={parentNode:function(e,t){if(!e||!n(e,c))throw new TypeError(t+": node"+h)},childNode:function(e,t){if(!e||!n(e,m))throw new TypeError(t+": node"+f)},selector:function(e,t,i){if(i="boolean"==typeof i&&i,(e||i)&&"string"!=typeof e)throw new TypeError(t+": selector"+d)}}},{"@marcom/ac-dom-nodes/NODE_TYPES":113,"@marcom/ac-dom-nodes/isNodeType":115}],118:[function(e,t,i){"use strict";var n=e("@marcom/ac-dom-nodes/isNodeType"),r=e("./internal/validate"),s=e("@marcom/ac-dom-nodes/NODE_TYPES").ELEMENT;t.exports=function(e,t){if(r.childNode(e,"nextSibling"),r.selector(t,"nextSibling"),e.nextElementSibling&&!t)return e.nextElementSibling;for(;e=e.nextSibling;)if(n(e,s)&&(!t||e.matches(t)))return e;return null}},{"./internal/validate":117,"@marcom/ac-dom-nodes/NODE_TYPES":113,"@marcom/ac-dom-nodes/isNodeType":115}],119:[function(e,t,i){"use strict";t.exports={lerp:function(e,t,i){return t+(i-t)*e},map:function(e,t,i,n,r){return n+(r-n)*(e-t)/(i-t)},mapClamp:function(e,t,i,n,r){var s=n+(r-n)*(e-t)/(i-t);return Math.max(n,Math.min(r,s))},norm:function(e,t,i){return(e-t)/(i-t)},clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],120:[function(e,t,i){function n(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=n},{}],121:[function(e,t,i){function n(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],122:[function(e,t,i){function n(e,t){var i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=t[8],h=t[9],m=t[10],f=t[11],d=t[12],p=t[13],_=t[14],v=t[15],y=i*o-n*a,b=i*l-r*a,g=i*u-s*a,E=n*l-r*o,w=n*u-s*o,T=r*u-s*l,A=c*p-h*d,x=c*_-m*d,C=c*v-f*d,S=h*_-m*p,O=h*v-f*p,P=m*v-f*_,k=y*P-b*O+g*S+E*C-w*x+T*A;return k?(k=1/k,e[0]=(o*P-l*O+u*S)*k,e[1]=(r*O-n*P-s*S)*k,e[2]=(p*T-_*w+v*E)*k,e[3]=(m*w-h*T-f*E)*k,e[4]=(l*C-a*P-u*x)*k,e[5]=(i*P-r*C+s*x)*k,e[6]=(_*g-d*T-v*b)*k,e[7]=(c*T-m*g+f*b)*k,e[8]=(a*O-o*C+u*A)*k,e[9]=(n*C-i*O-s*A)*k,e[10]=(d*w-p*g+v*y)*k,e[11]=(h*g-c*w-f*y)*k,e[12]=(o*x-a*S-l*A)*k,e[13]=(i*S-n*x+r*A)*k,e[14]=(p*b-d*E-_*y)*k,e[15]=(c*E-h*b+m*y)*k,e):null}t.exports=n},{}],123:[function(e,t,i){function n(e,t){if(e===t){var i=t[1],n=t[2],r=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=r,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=n},{}],124:[function(e,t,i){function n(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=n},{}],125:[function(e,t,i){function n(e,t,i){var n=t[0],r=t[1],s=t[2],a=i[0],o=i[1],l=i[2];return e[0]=r*l-s*o,e[1]=s*a-n*l,e[2]=n*o-r*a,e}t.exports=n},{}],126:[function(e,t,i){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=n},{}],127:[function(e,t,i){function n(e,t,i){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=i,n}t.exports=n},{}],128:[function(e,t,i){function n(e){var t=e[0],i=e[1],n=e[2];return Math.sqrt(t*t+i*i+n*n)}t.exports=n},{}],129:[function(e,t,i){function n(e,t){var i=t[0],n=t[1],r=t[2],s=i*i+n*n+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}t.exports=n},{}],130:[function(e,t,i){function n(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=n},{}],131:[function(e,t,i){function n(e,t,i,n){var r=new Float32Array(4);return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r}t.exports=n},{}],132:[function(e,t,i){function n(e,t,i){var n=t[0],r=t[1],s=t[2],a=t[3];return e[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*a,e[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*a,e[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*a,e[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*a,e}t.exports=n},{}],133:[function(e,t,i){(function(i){var n="undefined"!=typeof t&&t.exports&&"undefined"!=typeof i?i:this||window;(n._gsQueue||(n._gsQueue=[])).push(function(){"use strict";n._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,r,s=n.GreenSockGlobals||n,a=s.com.greensock,o=2*Math.PI,l=Math.PI/2,u=a._class,c=function(t,i){var n=u("easing."+t,function(){},!0),r=n.prototype=new e;return r.constructor=n,r.getRatio=i,n},h=e.register||function(){},m=function(e,t,i,n,r){var s=u("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},!0);return h(s,e),s},f=function(e,t,i){this.t=e,this.v=t,i&&(this.next=i,i.prev=this,this.c=i.v-t,this.gap=i.t-e)},d=function(t,i){var n=u("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new e;return r.constructor=n,r.getRatio=i,r.config=function(e){return new n(e)},n},p=m("Back",d("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),d("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),d("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),_=u("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),v=_.prototype=new e;return v.constructor=_,v.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},_.ease=new _(.7,.7),v.config=_.config=function(e,t,i){return new _(e,t,i)},t=u("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),v=t.prototype=new e,v.constructor=t,v.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},v.config=t.config=function(e){return new t(e)},i=u("easing.RoughEase",function(t){t=t||{};for(var i,n,r,s,a,o,l=t.taper||"none",u=[],c=0,h=0|(t.points||20),m=h,d=t.randomize!==!1,p=t.clamp===!0,_=t.template instanceof e?t.template:null,v="number"==typeof t.strength?.4*t.strength:.4;--m>-1;)i=d?Math.random():1/h*m,n=_?_.getRatio(i):i,"none"===l?r=v:"out"===l?(s=1-i,r=s*s*v):"in"===l?r=i*i*v:i<.5?(s=2*i,r=s*s*.5*v):(s=2*(1-i),r=s*s*.5*v),d?n+=Math.random()*r-.5*r:m%2?n+=.5*r:n-=.5*r,p&&(n>1?n=1:n<0&&(n=0)),u[c++]={x:i,y:n};for(u.sort(function(e,t){return e.x-t.x}),o=new f(1,1,null),m=h;--m>-1;)a=u[m],o=new f(a.x,a.y,o);this._prev=new f(0,0,0!==o.t?o:o.next)},!0),v=i.prototype=new e,v.constructor=i,v.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},v.config=function(e){return new i(e)},i.ease=new i,m("Bounce",c("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),c("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),c("BounceInOut",function(e){var t=e<.5;return e=t?1-2*e:2*e-1,e=e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),m("Circ",c("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),c("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),c("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),r=function(t,i,n){var r=u("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||n)/(e<1?e:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),s=r.prototype=new e;return s.constructor=r,s.getRatio=i,s.config=function(e,t){return new r(e,t)},r},m("Elastic",r("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),r("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),r("ElasticInOut",function(e){return(e*=2)<1?-.5*(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),m("Expo",c("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),c("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),c("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),m("Sine",c("SineOut",function(e){return Math.sin(e*l)}),c("SineIn",function(e){return-Math.cos(e*l)+1}),c("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),u("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),h(s.SlowMo,"SlowMo","ease,"),h(i,"RoughEase","ease,"),h(t,"SteppedEase","ease,"),p},!0)}),n._gsDefine&&n._gsQueue.pop()(),function(){"use strict";var i=function(){return n.GreenSockGlobals||n};"function"==typeof define&&define.amd?define(["./TweenLite"],i):"undefined"!=typeof t&&t.exports&&(e("https://www.apple.com/accessibility/TweenLite.js"),t.exports=i())}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./TweenLite.js":135}],134:[function(e,t,i){(function(i){var n="undefined"!=typeof t&&t.exports&&"undefined"!=typeof i?i:this||window;(n._gsQueue||(n._gsQueue=[])).push(function(){"use strict";n._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],u(i)&&i.join("").indexOf("{self}")!==-1&&(r[n]=this._swapSelfInParams(i));u(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},s=1e-10,a=i._internals,o=r._internals={},l=a.isSelector,u=a.isArray,c=a.lazyTweens,h=a.lazyRender,m=n._gsDefine.globals,f=function(e){var t,i={};for(t in e)i[t]=e[t];return i},d=function(e,t,i){var n,r,s=e.cycle;for(n in s)r=s[n],e[n]="function"==typeof r?r(i,t[i]):r[i%r.length];delete e.cycle},p=o.pauseCallback=function(){},_=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},v=r.prototype=new t;return r.version="1.19.1",v.constructor=r,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(e,t,n,r){var s=n.repeat&&m.TweenMax||i;return t?this.add(new s(e,t,n),r):this.set(e,n,r)},v.from=function(e,t,n,r){return this.add((n.repeat&&m.TweenMax||i).from(e,t,n),r)},v.fromTo=function(e,t,n,r,s){var a=r.repeat&&m.TweenMax||i;return t?this.add(a.fromTo(e,t,n,r),s):this.set(e,r,s)},v.staggerTo=function(e,t,n,s,a,o,u,c){var h,m,p=new r({onComplete:o,onCompleteParams:u,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),v=n.cycle;for("string"==typeof e&&(e=i.selector(e)||e),e=e||[],l(e)&&(e=_(e)),s=s||0,s<0&&(e=_(e),e.reverse(),s*=-1),m=0;m<e.length;m++)h=f(n),h.startAt&&(h.startAt=f(h.startAt),h.startAt.cycle&&d(h.startAt,e,m)),v&&(d(h,e,m),null!=h.duration&&(t=h.duration,delete h.duration)),p.to(e[m],t,h,m*s);return this.add(p,a)},v.staggerFrom=function(e,t,i,n,r,s,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,n,r,s,a,o)},v.staggerFromTo=function(e,t,i,n,r,s,a,o,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,n,r,s,a,o,l)},v.call=function(e,t,n,r){return this.add(i.delayedCall(0,e,t,n),r)},v.set=function(e,t,n){return n=this._parseTimeOrLabel(n,0,!0),null==t.immediateRender&&(t.immediateRender=n===this._time&&!this._paused),this.add(new i(e,0,t),n)},r.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var n,s,a=new r(e),o=a._timeline;for(null==t&&(t=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,n=o._first;n;)s=n._next,t&&n instanceof i&&n.target===n.vars.onComplete||a.add(n,n._startTime-n._delay),n=s;return o.add(a,0),a},v.add=function(n,s,a,o){var l,c,h,m,f,d;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,n)),!(n instanceof e)){if(n instanceof Array||n&&n.push&&u(n)){for(a=a||"normal",o=o||0,l=s,c=n.length,h=0;h<c;h++)u(m=n[h])&&(m=new r({tweens:m})),this.add(m,l),"string"!=typeof m&&"function"!=typeof m&&("sequence"===a?l=m._startTime+m.totalDuration()/m._timeScale:"start"===a&&(m._startTime-=m.delay())),l+=o;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,s);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(t.prototype.add.call(this,n,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,d=f.rawTime()>n._startTime;f._timeline;)d&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},v.remove=function(t){if(t instanceof e){this._remove(t,!1);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:i._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&u(t)){for(var n=t.length;--n>-1;)this.remove(t[n]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},v._remove=function(e,i){t.prototype._remove.call(this,e,i);var n=this._last;return n?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},v.insert=v.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},v.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},v.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},v.addPause=function(e,t,n,r){var s=i.delayedCall(0,p,n,r||this);return s.vars.onComplete=s.vars.onReverseComplete=t,s.data="isPause",this._hasPause=!0,this.add(s,e)},v.removeLabel=function(e){return delete this._labels[e],this},v.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},v._parseTimeOrLabel=function(t,i,n,r){var s;if(r instanceof e&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&u(r)))for(s=r.length;--s>-1;)r[s]instanceof e&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof t&&null==this._labels[i]?t-this.duration():0,n);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(s=t.indexOf("="),s===-1)return null==this._labels[t]?n?this._labels[t]=this.duration()+i:i:this._labels[t]+i;i=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,n):this.duration()}return Number(t)+i},v.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(e,t){return this.play(e,t)},v.gotoAndStop=function(e,t){return this.pause(e,t)},v.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,r,a,o,l,u,m,f=this._dirty?this.totalDuration():this._totalDuration,d=this._time,p=this._startTime,_=this._timeScale,v=this._paused;if(e>=f-1e-7&&e>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(r=!0,o="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===s)&&this._rawPrevTime!==e&&this._first&&(l=!0,this._rawPrevTime>s&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:s,e=f+1e-4;else if(e<1e-7)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==s&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))&&(o="onReverseComplete",r=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=r=!0,o="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:s,0===e&&r)for(n=this._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;e=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=d)for(n=this._first;n&&n._startTime<=e&&!u;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(u=n),n=n._next;else for(n=this._last;n&&n._startTime>=e&&!u;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(u=n),n=n._prev;u&&(this._time=e=u._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==d&&this._first||i||l||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&e>0&&(this._active=!0),0===d&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),m=this._time,m>=d)for(n=this._first;n&&(a=n._next,m===this._time&&(!this._paused||v));)(n._active||n._startTime<=m&&!n._paused&&!n._gc)&&(u===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=a;else for(n=this._last;n&&(a=n._prev,m===this._time&&(!this._paused||v));){if(n._active||n._startTime<=d&&!n._paused&&!n._gc){if(u===n){for(u=n._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(e-u._startTime)*u._timeScale:(e-u._startTime)*u._timeScale,t,i),u=u._prev;u=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=a}this._onUpdate&&(t||(c.length&&h(),this._callback("onUpdate"))),o&&(this._gc||p!==this._startTime&&_===this._timeScale||(0===this._time||f>=this.totalDuration())&&(r&&(c.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[o]&&this._callback(o)))}},v._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},v.getChildren=function(e,t,n,r){r=r||-9999999999;for(var s=[],a=this._first,o=0;a;)a._startTime<r||(a instanceof i?t!==!1&&(s[o++]=a):(n!==!1&&(s[o++]=a),e!==!1&&(s=s.concat(a.getChildren(!0,t,n)),o=s.length))),a=a._next;return s},v.getTweensOf=function(e,t){var n,r,s=this._gc,a=[],o=0;for(s&&this._enabled(!0,!0),n=i.getTweensOf(e),r=n.length;--r>-1;)(n[r].timeline===this||t&&this._contains(n[r]))&&(a[o++]=n[r]);return s&&this._enabled(!1,!0),a},v.recent=function(){return this._recent},v._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},v.shiftChildren=function(e,t,i){i=i||0;for(var n,r=this._first,s=this._labels;r;)r._startTime>=i&&(r._startTime+=e),r=r._next;if(t)for(n in s)s[n]>=i&&(s[n]+=e);return this._uncache(!0)},v._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(e,t)&&(r=!0);return r},v.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;--i>-1;)t[i]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},v._enabled=function(e,i){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return t.prototype._enabled.call(this,e,i)},v.totalTime=function(t,i,n){this._forcingPlayhead=!0;var r=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},v.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,n=0,r=this._last,s=999999999999;r;)t=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),
s=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=t;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},v.paused=function(t){if(!t)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return e.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},v.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},r},!0)}),n._gsDefine&&n._gsQueue.pop()(),function(i){"use strict";var r=function(){return(n.GreenSockGlobals||n)[i]};"function"==typeof define&&define.amd?define(["./TweenLite"],r):"undefined"!=typeof t&&t.exports&&(e("https://www.apple.com/accessibility/TweenLite.js"),t.exports=r())}("TimelineLite")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./TweenLite.js":135}],135:[function(e,t,i){(function(e){!function(e,i){"use strict";var n={},r=e.document,s=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!s.TweenLite){var a,o,l,u,c,h=function(e){var t,i=e.split("."),n=s;for(t=0;t<i.length;t++)n[i[t]]=n=n[i[t]]||{};return n},m=h("com.greensock"),f=1e-10,d=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},p=function(){},_=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&e.call(i)===t)}}(),v={},y=function(r,a,o,l){this.sc=v[r]?v[r].sc:[],v[r]=this,this.gsClass=null,this.func=o;var u=[];this.check=function(c){for(var m,f,d,p,_,b=a.length,g=b;--b>-1;)(m=v[a[b]]||new y(a[b],[])).gsClass?(u[b]=m.gsClass,g--):c&&m.sc.push(this);if(0===g&&o){if(f=("com.greensock."+r).split("."),d=f.pop(),p=h(f.join("."))[d]=this.gsClass=o.apply(o,u),l)if(s[d]=n[d]=p,_="undefined"!=typeof t&&t.exports,!_&&"function"==typeof define&&define.amd)define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p});else if(_)if(r===i){t.exports=n[i]=p;for(b in n)p[b]=n[b]}else n[i]&&(n[i][d]=p);for(b=0;b<this.sc.length;b++)this.sc[b].check()}},this.check(!0)},b=e._gsDefine=function(e,t,i,n){return new y(e,t,i,n)},g=m._class=function(e,t,i){return t=t||function(){},b(e,[],function(){return t},i),t};b.globals=s;var E=[0,0,1,1],w=g("easing.Ease",function(e,t,i,n){this._func=e,this._type=i||0,this._power=n||0,this._params=t?E.concat(t):E},!0),T=w.map={},A=w.register=function(e,t,i,n){for(var r,s,a,o,l=t.split(","),u=l.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(s=l[u],r=n?g("easing."+s,null,!0):m.easing[s]||{},a=c.length;--a>-1;)o=c[a],T[s+"."+o]=T[o+s]=r[o]=e.getRatio?e:e[o]||new e};for(l=w.prototype,l._calcEnd=!1,l.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===t?1-n:2===t?n:e<.5?n/2:1-n/2},a=["Linear","Quad","Cubic","Quart","Quint,Strong"],o=a.length;--o>-1;)l=a[o]+",Power"+o,A(new w(null,null,1,o),l,"easeOut",!0),A(new w(null,null,2,o),l,"easeIn"+(0===o?",easeNone":"")),A(new w(null,null,3,o),l,"easeInOut");T.linear=m.easing.Linear.easeIn,T.swing=m.easing.Quad.easeInOut;var x=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});l=x.prototype,l.addEventListener=function(e,t,i,n,r){r=r||0;var s,a,o=this._listeners[e],l=0;for(this!==u||c||u.wake(),null==o&&(this._listeners[e]=o=[]),a=o.length;--a>-1;)s=o[a],s.c===t&&s.s===i?o.splice(a,1):0===l&&s.pr<r&&(l=a+1);o.splice(l,0,{c:t,s:i,up:n,pr:r})},l.removeEventListener=function(e,t){var i,n=this._listeners[e];if(n)for(i=n.length;--i>-1;)if(n[i].c===t)return void n.splice(i,1)},l.dispatchEvent=function(e){var t,i,n,r=this._listeners[e];if(r)for(t=r.length,t>1&&(r=r.slice(0)),i=this._eventTarget;--t>-1;)n=r[t],n&&(n.up?n.c.call(n.s||i,{type:e,target:i}):n.c.call(n.s||i))};var C=e.requestAnimationFrame,S=e.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},P=O();for(a=["ms","moz","webkit","o"],o=a.length;--o>-1&&!C;)C=e[a[o]+"RequestAnimationFrame"],S=e[a[o]+"CancelAnimationFrame"]||e[a[o]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var i,n,s,a,o,l=this,h=O(),m=!(t===!1||!C)&&"auto",d=500,_=33,v="tick",y=function(e){var t,r,u=O()-P;u>d&&(h+=u-_),P+=u,l.time=(P-h)/1e3,t=l.time-o,(!i||t>0||e===!0)&&(l.frame++,o+=t+(t>=a?.004:a-t),r=!0),e!==!0&&(s=n(y)),r&&l.dispatchEvent(v)};x.call(l),l.time=l.frame=0,l.tick=function(){y(!0)},l.lagSmoothing=function(e,t){d=e||1/f,_=Math.min(t,d,0)},l.sleep=function(){null!=s&&(m&&S?S(s):clearTimeout(s),n=p,s=null,l===u&&(c=!1))},l.wake=function(e){null!==s?l.sleep():e?h+=-P+(P=O()):l.frame>10&&(P=O()-d+5),n=0===i?p:m&&C?C:function(e){return setTimeout(e,1e3*(o-l.time)+1|0)},l===u&&(c=!0),y(2)},l.fps=function(e){return arguments.length?(i=e,a=1/(i||60),o=this.time+a,void l.wake()):i},l.useRAF=function(e){return arguments.length?(l.sleep(),m=e,void l.fps(i)):m},l.fps(e),setTimeout(function(){"auto"===m&&l.frame<5&&"hidden"!==r.visibilityState&&l.useRAF(!1)},1500)}),l=m.Ticker.prototype=new m.events.EventDispatcher,l.constructor=m.Ticker;var k=g("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,Q){c||u.wake();var i=this.vars.useFrames?H:Q;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});u=k.ticker=new m.Ticker,l=k.prototype,l._dirty=l._gc=l._initted=l._paused=!1,l._totalTime=l._time=0,l._rawPrevTime=-1,l._next=l._last=l._onUpdate=l._timeline=l.timeline=null,l._paused=!1;var F=function(){c&&O()-P>2e3&&u.wake(),setTimeout(F,2e3)};F(),l.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},l.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},l.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},l.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},l.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},l.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},l.render=function(e,t,i){},l.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},l.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale},l._enabled=function(e,t){return c||u.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},l._kill=function(e,t){return this._enabled(!1,!1)},l.kill=function(e,t){return this._kill(e,t),this},l._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},l._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();--t>-1;)"{self}"===e[t]&&(i[t]=this);return i},l._callback=function(e){var t=this.vars,i=t[e],n=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this,s=n?n.length:0;switch(s){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},l.eventCallback=function(e,t,i,n){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=_(i)&&i.join("").indexOf("{self}")!==-1?this._swapSelfInParams(i):i,r[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},l.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},l.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},l.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},l.totalTime=function(e,t,i){if(c||u.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(e>n&&!i&&(e=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(N.length&&Z(),this.render(e,t,!1),N.length&&Z())}return this},l.progress=l.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},l.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},l.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},l.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||f,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,i=t||0===t?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},l.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},l.paused=function(e){if(!arguments.length)return this._paused;var t,i,n=this._timeline;return e!=this._paused&&n&&(c||e||u.wake(),t=n.rawTime(),i=t-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var I=g("core.SimpleTimeline",function(e){k.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});l=I.prototype=new k,l.constructor=I,l.kill()._gc=!1,l._first=l._last=l._recent=null,l._sortChildren=!1,l.add=l.insert=function(e,t,i,n){var r,s;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(s=e._startTime;r&&r._startTime>s;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},l._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},l.render=function(e,t,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)n=r._next,(r._active||e>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=n},l.rawTime=function(){return c||u.wake(),this._totalTime};var R=g("TweenLite",function(t,i,n){if(k.call(this,i,n),this.render=R.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:R.selector(t)||t;var r,s,a,o=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?W[R.defaultOverwrite]:"number"==typeof l?l>>0:W[l],(o||t instanceof Array||t.push&&_(t))&&"number"!=typeof t[0])for(this._targets=a=d(t),this._propLookup=[],this._siblings=[],r=0;r<a.length;r++)s=a[r],s?"string"!=typeof s?s.length&&s!==e&&s[0]&&(s[0]===e||s[0].nodeType&&s[0].style&&!s.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(d(s))):(this._siblings[r]=J(s,this,!1),1===l&&this._siblings[r].length>1&&ee(s,this,null,1,this._siblings[r])):(s=a[r--]=R.selector(s),"string"==typeof s&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=J(t,this,!1),1===l&&this._siblings.length>1&&ee(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-f,this.render(Math.min(0,-this._delay)))},!0),M=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var i,n={};for(i in e)Y[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!q[i]||q[i]&&q[i]._autoCSS)||(n[i]=e[i],delete e[i]);e.css=n};l=R.prototype=new k,l.constructor=R,l.kill()._gc=!1,l.ratio=0,l._firstPT=l._targets=l._overwrittenProps=l._startAt=null,l._notifyPluginsOfEnabled=l._lazy=!1,R.version="1.19.1",R.defaultEase=l._ease=new w(null,null,1,1),R.defaultOverwrite="auto",R.ticker=u,R.autoSleep=120,R.lagSmoothing=function(e,t){u.lagSmoothing(e,t)},R.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(R.selector=i,i(t)):"undefined"==typeof r?t:r.querySelectorAll?r.querySelectorAll(t):r.getElementById("#"===t.charAt(0)?t.substr(1):t)};var N=[],L={},U=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,K=function(e){for(var t,i=this._firstPT,n=1e-6;i;)t=i.blob?1===e?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m(t,this._target||i.t):t<n&&t>-n&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},j=function(e,t,i,n){var r,s,a,o,l,u,c,h=[],m=0,f="",d=0;for(h.start=e,h.end=t,e=h[0]=e+"",t=h[1]=t+"",i&&(i(h),e=h[0],t=h[1]),h.length=0,r=e.match(U)||[],s=t.match(U)||[],n&&(n._next=null,n.blob=1,h._firstPT=h._applyPT=n),l=s.length,o=0;o<l;o++)c=s[o],u=t.substr(m,t.indexOf(c,m)-m),f+=u||!o?u:",",m+=u.length,d?d=(d+1)%5:"rgba("===u.substr(-5)&&(d=1),c===r[o]||r.length<=o?f+=c:(f&&(h.push(f),f=""),a=parseFloat(r[o]),h.push(a),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:a,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-a)||0,f:0,m:d&&d<4?Math.round:0}),m+=c.length;return f+=t.substr(m),f&&h.push(f),h.setRatio=K,h},V=function(e,t,i,n,r,s,a,o,l){"function"==typeof n&&(n=n(l||0,e));var u,c=typeof e[t],h="function"!==c?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),m="get"!==i?i:h?a?e[h](a):e[h]():e[t],f="string"==typeof n&&"="===n.charAt(1),d={t:e,p:t,s:m,f:"function"===c,pg:0,n:r||t,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:f?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-m||0};if(("number"!=typeof m||"number"!=typeof n&&!f)&&(a||isNaN(m)||!f&&isNaN(n)||"boolean"==typeof m||"boolean"==typeof n?(d.fp=a,u=j(m,f?d.s+d.c:n,o||R.defaultStringFilter,d),d={t:u,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}):(d.s=parseFloat(m),f||(d.c=parseFloat(n)-d.s||0))),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d},B=R._internals={isArray:_,isSelector:M,lazyTweens:N,blobDif:j},q=R._plugins={},G=B.tweenLookup={},z=0,Y=B.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},H=k._rootFramesTimeline=new I,Q=k._rootTimeline=new I,X=30,Z=B.lazyRender=function(){var e,t=N.length;for(L={};--t>-1;)e=N[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);N.length=0};Q._startTime=u.time,H._startTime=u.frame,Q._active=H._active=!0,setTimeout(Z,1),k._updateRoot=R.render=function(){var e,t,i;if(N.length&&Z(),Q.render((u.time-Q._startTime)*Q._timeScale,!1,!1),H.render((u.frame-H._startTime)*H._timeScale,!1,!1),N.length&&Z(),u.frame>=X){X=u.frame+(parseInt(R.autoSleep,10)||120);for(i in G){for(t=G[i].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete G[i]}if(i=Q._first,(!i||i._paused)&&R.autoSleep&&!H._first&&1===u._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||u.sleep()}}},u.addEventListener("tick",k._updateRoot);var J=function(e,t,i){var n,r,s=e._gsTweenID;if(G[s||(e._gsTweenID=s="t"+z++)]||(G[s]={target:e,tweens:[]}),t&&(n=G[s].tweens,n[r=n.length]=t,i))for(;--r>-1;)n[r]===t&&n.splice(r,1);return G[s].tweens},$=function(e,t,i,n){var r,s,a=e.vars.onOverwrite;return a&&(r=a(e,t,i,n)),a=R.onOverwrite,a&&(s=a(e,t,i,n)),r!==!1&&s!==!1},ee=function(e,t,i,n,r){var s,a,o,l;if(1===n||n>=4){for(l=r.length,s=0;s<l;s++)if((o=r[s])!==t)o._gc||o._kill(null,e,t)&&(a=!0);else if(5===n)break;return a}var u,c=t._startTime+f,h=[],m=0,d=0===t._duration;for(s=r.length;--s>-1;)(o=r[s])===t||o._gc||o._paused||(o._timeline!==t._timeline?(u=u||te(t,0,d),0===te(o,u,d)&&(h[m++]=o)):o._startTime<=c&&o._startTime+o.totalDuration()/o._timeScale>c&&((d||!o._initted)&&c-o._startTime<=2e-10||(h[m++]=o)));for(s=m;--s>-1;)if(o=h[s],2===n&&o._kill(i,e,t)&&(a=!0),2!==n||!o._firstPT&&o._initted){if(2!==n&&!$(o,t))continue;o._enabled(!1,!1)&&(a=!0)}return a},te=function(e,t,i){for(var n=e._timeline,r=n._timeScale,s=e._startTime;n._timeline;){if(s+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return s/=r,s>t?s-t:i&&s===t||!e._initted&&s-t<2*f?f:(s+=e.totalDuration()/e._timeScale/r)>t+f?0:s-t-f};l._init=function(){var e,t,i,n,r,s,a=this.vars,o=this._overwrittenProps,l=this._duration,u=!!a.immediateRender,c=a.ease;if(a.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in a.startAt)r[n]=a.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=u&&a.lazy!==!1,r.startAt=r.delay=null,this._startAt=R.to(this.target,0,r),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(a.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(u=!1),i={};for(n in a)Y[n]&&"autoCSS"!==n||(i[n]=a[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=u&&a.lazy!==!1,i.immediateRender=u,this._startAt=R.to(this.target,0,i),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof w?c:"function"==typeof c?new w(c,a.easeParams):T[c]||R.defaultEase:R.defaultEase,a.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(s=this._targets.length,e=0;e<s;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(t&&R._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=a.onUpdate,this._initted=!0},l._initProps=function(t,i,n,r,s){var a,o,l,u,c,h;if(null==t)return!1;L[t._gsTweenID]&&Z(),this.vars.css||t.style&&t!==e&&t.nodeType&&q.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(a in this.vars)if(h=this.vars[a],Y[a])h&&(h instanceof Array||h.push&&_(h))&&h.join("").indexOf("{self}")!==-1&&(this.vars[a]=h=this._swapSelfInParams(h,this));else if(q[a]&&(u=new q[a])._onInitTween(t,this.vars[a],this,s)){for(this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:u._priority,m:0},o=u._overwriteProps.length;--o>-1;)i[u._overwriteProps[o]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else i[a]=V.call(this,t,a,"get",h,a,0,null,this.vars.stringFilter,s);return r&&this._kill(r,t)?this._initProps(t,i,n,r,s):this._overwrite>1&&this._firstPT&&n.length>1&&ee(t,this,i,this._overwrite,n)?(this._kill(i,t),this._initProps(t,i,n,r,s)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(L[t._gsTweenID]=!0),l)},l.render=function(e,t,i){var n,r,s,a,o=this._time,l=this._duration,u=this._rawPrevTime;if(e>=l-1e-7&&e>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(u<0||e<=0&&e>=-1e-7||u===f&&"isPause"!==this.data)&&u!==e&&(i=!0,u>f&&(r="onReverseComplete")),this._rawPrevTime=a=!t||e||u===e?e:f);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===l&&u>0)&&(r="onReverseComplete",n=this._reversed),e<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(u>=0&&(u!==f||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!t||e||u===e?e:f)),this._initted||(i=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/l,h=this._easeType,m=this._easePower;(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===m?c*=c:2===m?c*=c*c:3===m?c*=c*c*c:4===m&&(c*=c*c*c*c),1===h?this.ratio=1-c:2===h?this.ratio=c:e/l<.5?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=u,N.push(this),void(this._lazy=[e,t]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&e>=0&&(this._active=!0),0===o&&(this._startAt&&(e>=0?this._startAt.render(e,t,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||t||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(e<0&&this._startAt&&e!==-1e-4&&this._startAt.render(e,t,i),t||(this._time!==o||n||i)&&this._callback("onUpdate")),r&&(this._gc&&!i||(e<0&&this._startAt&&!this._onUpdate&&e!==-1e-4&&this._startAt.render(e,t,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===f&&a!==f&&(this._rawPrevTime=0)))}},l._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:R.selector(t)||t;var n,r,s,a,o,l,u,c,h,m=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((_(t)||M(t))&&"number"!=typeof t[0])for(n=t.length;--n>-1;)this._kill(e,t[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){if(u=e||o,c=e!==r&&"all"!==r&&e!==o&&("object"!=typeof e||!e._tempKill),i&&(R.onOverwrite||this.vars.onOverwrite)){for(s in u)o[s]&&(h||(h=[]),h.push(s));if((h||!e)&&!$(this,i,t,h))return!1}for(s in u)(a=o[s])&&(m&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,l=!0),a.pg&&a.t._kill(u)&&(l=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[s]),c&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},l.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],k.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-f,this.render(Math.min(0,-this._delay))),this},l._enabled=function(e,t){if(c||u.wake(),e&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=J(n[i],this,!0);else this._siblings=J(this.target,this,!0)}return k.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&R._onPluginEvent(e?"_onEnable":"_onDisable",this)},R.to=function(e,t,i){return new R(e,t,i)},R.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(e,t,i)},R.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new R(e,t,n)},R.delayedCall=function(e,t,i,n,r){return new R(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},R.set=function(e,t){return new R(e,0,t)},R.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:R.selector(e)||e;var i,n,r,s;if((_(e)||M(e))&&"number"!=typeof e[0]){for(i=e.length,n=[];--i>-1;)n=n.concat(R.getTweensOf(e[i],t));for(i=n.length;--i>-1;)for(s=n[i],r=i;--r>-1;)s===n[r]&&n.splice(i,1)}else for(n=J(e).concat(),i=n.length;--i>-1;)(n[i]._gc||t&&!n[i].isActive())&&n.splice(i,1);return n},R.killTweensOf=R.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var n=R.getTweensOf(e,t),r=n.length;--r>-1;)n[r]._kill(i,e)};var ie=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ie.prototype},!0);if(l=ie.prototype,ie.version="1.19.0",ie.API=2,l._firstPT=null,l._addTween=V,l.setRatio=K,l._kill=function(e){var t,i=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;--t>-1;)null!=e[i[t]]&&i.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},l._mod=l._roundProps=function(e){for(var t,i=this._firstPT;i;)t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")],t&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},R._onPluginEvent=function(e,t){var i,n,r,s,a,o=t._firstPT;if("_onInitAllProps"===e){for(;o;){for(a=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:s)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:s=o,o=a}o=t._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[e]&&o.t[e]()&&(i=!0),o=o._next;return i},ie.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===ie.API&&(q[(new e[t])._propName]=e[t]);return!0},b.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,n=e.priority||0,r=e.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ie.call(this,i,n),this._overwriteProps=r||[]},e.global===!0),o=a.prototype=new ie(i);o.constructor=a,a.API=e.API;for(t in s)"function"==typeof e[t]&&(o[s[t]]=e[t]);return a.version=e.version,ie.activate([a]),a},a=e._gsQueue){for(o=0;o<a.length;o++)a[o]();for(l in v)v[l].func||e.console.log("GSAP encountered missing dependency: "+l)}c=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof e?e:this||window,"TweenLite")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],136:[function(e,t,i){"use strict";function n(e){return this.isEnabled=!0,document.documentElement.classList.contains("no-webgl")||document.documentElement.classList.contains("ie")||document.documentElement.classList.contains("edge")?void(this.isEnabled=!1):(this.el=e.el,this.flashMaterial=null,this.noiseTexture=null,this.uniforms=null,this.renderer=null,this.timeline=null,this.hasRun=!1,this.camera=null,this.scene=null,this.stage=null,this.currentBreakpoint=e.pageMetrics.breakpoint,this.rafEmitter=null,this.needsUpdate=!1,this.replayBtn=Array.from(this.el.querySelectorAll(".callout-replay")),this.cameraElement=this.el.querySelector(".hearing-flash .media-object"),this.replayBtn=this.replayBtn.filter(function(e){return l(e,".callout").contains(this.cameraElement)}.bind(this)),this.texturePath=this.cameraElement.getAttribute("data-texture-path"),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.render=this.render.bind(this),this.runAnimation=this.runAnimation.bind(this),this.exitKeyframe=this.exitKeyframe.bind(this),void this.replayBtn.forEach(function(e){e.addEventListener("click",this.runAnimation)}.bind(this)))}var r=e("@marcom/bubble-gum/BaseComponent"),s=r.prototype,a=e("@marcom/ac-gsap/TimelineLite"),o=(e("@marcom/ac-gsap/easing/EasePack"),{create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")}),l=e("@marcom/dom-traversal/ancestor"),u=n.prototype=Object.create(s);u.mounted=function(){if(this.isEnabled){this.keyFrameController=this.cameraElement._animInfo.controller;var e=this.preloadAssets(),t=this.listenAnimationDidBecomeVisible();Promise.all([e,t]).then(this.runAnimation),this.keyFrameController.once("camera-trigger:exit",this.exitKeyframe,this),this.rafEmitter=new o.create}},u.preloadAssets=function(){var e=this;return new Promise(function(t,i){e.loadAssets().then(function(i){i instanceof THREE.Texture&&(e.noiseTexture=i,t()),e.setFocusPoint(e.currentBreakpoint)})})},u.listenAnimationDidBecomeVisible=function(){var e=this;return new Promise(function(t,i){e.keyFrameController.once("camera-trigger:enter",function(){e.isEnabled&&(e.hasRun||t())},e)})},u.onBreakpointChange=function(e){this.isEnabled&&this.setFocusPoint(e.breakpoint)},u.onResizeDebounced=function(e){!this.isEnabled},u.setFocusPoint=function(e){this.flashFocus={},"S"===e?(this.flashFocus.x=27,this.flashFocus.y=285):"M"===e?(this.flashFocus.x=74,this.flashFocus.y=27):(this.flashFocus.x=65,this.flashFocus.y=44)},u.setUniforms=function(){this.uniforms={},this.uniforms.uResolution={type:"v3",value:new THREE.Vector3(0,0,0)},this.uniforms.uPhysicalFlashCoord={type:"v4",value:new THREE.Vector4(this.flashFocus.x,this.flashFocus.y,0,0)},this.uniforms.uTextureResolution={type:"v3v",value:[new THREE.Vector3(this.noiseTexture.image.width,this.noiseTexture.image.height,0),new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,0)]},this.uniforms.uTexture={type:"t",value:this.noiseTexture},this.uniforms.uFlashScale={type:"f",value:.1}},u.loadAssets=function(){var e=new THREE.TextureLoader;return new Promise(function(t){e.load(this.texturePath,function(e){return t(e)})}.bind(this))},u.prepareRenderer=function(){window.devicePixelRatio||1;this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.camera=new THREE.Camera,this.scene=new THREE.Scene,this.camera.position.z=1,this.renderer.domElement.classList.add("flash"),this.renderer.setClearColor(0,0);
},u.prepareMaterial=function(){this.flashMaterial=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:document.getElementById("lense-flare-vertex-shader").innerText,fragmentShader:document.getElementById("lense-flare-fragment-shader").innerText}),this.stage=new THREE.Mesh(new THREE.PlaneGeometry(2,2),this.flashMaterial),this.scene.add(this.stage)},u.createAndRunTimeline=function(){var e=Power0.easeNone,t=new THREE.Vector3(window.innerWidth,window.innerHeight,0),i=new THREE.Vector3(0,0,0),n={},r=29;this.timeline=new a,this.timeline.to(n,1/r,{ease:e,onComplete:function(){this.uniforms.uResolution.value=t}.bind(this)}).to(this.uniforms.uFlashScale,2/r,{value:.25,ease:e,onComplete:function(){this.uniforms.uResolution.value=i}.bind(this)}).to(n,10/r,{ease:e,onComplete:function(){this.uniforms.uResolution.value=t}.bind(this)}).to(this.uniforms.uFlashScale,2/r,{value:.25,ease:e,onComplete:function(){this.uniforms.uResolution.value=i}.bind(this)}).to(n,12/r,{ease:e,onComplete:function(){this.uniforms.uResolution.value=t}.bind(this)}).to(this.uniforms.uFlashScale,2/r,{value:.5,ease:Circ.easeOut,onComplete:this.onAnimationComplete})},u.exitKeyframe=function(){},u.runAnimation=function(e){var t=this.cameraElement.getBoundingClientRect();this.rafEmitter.on("draw",this.render),this.rafEmitter.run(),this.needsUpdate=!0,this.setUniforms(),this.prepareRenderer(),this.prepareMaterial(),this.cameraElement.appendChild(this.renderer.domElement),this.renderer.setSize(t.width,t.height),this.cameraElement.classList.add("engaged"),this.createAndRunTimeline(),this.hasRun=!0,e.target&&this._hideReplayBtn(this.replayBtn)},u._hideReplayBtn=function(e){e.forEach(function(e){e.classList.remove("active")})},u.render=function(e){this.renderer.render(this.scene,this.camera),this.needsUpdate&&this.rafEmitter.run()},u.onAnimationComplete=function(){this.cameraElement.removeChild(this.renderer.domElement),this.renderer.domElement=null,this.needsUpdate=!1,this.replayBtn.forEach(function(e){e.classList.add("active")})},n.IS_SUPPORTED=function(){var e=document.getElementsByTagName("html")[0];return!e.classList.contains("aow")&&(!e.classList.contains("no-inline-video")&&(!e.classList.contains("no-webgl")&&(!e.classList.contains("ie")&&!e.classList.contains("edge"))))},t.exports=n},{"@marcom/ac-gsap/TimelineLite":38,"@marcom/ac-gsap/easing/EasePack":39,"@marcom/ac-raf-emitter/RAFEmitter":75,"@marcom/ac-raf-emitter/draw":82,"@marcom/ac-raf-emitter/update":86,"@marcom/bubble-gum/BaseComponent":108,"@marcom/dom-traversal/ancestor":116}],137:[function(e,t,i){"use strict";function n(e){this.el=e.el,this.currentBreakpoint=e.pageMetrics.breakpoint,this.isRetina=l(),this._bindKeyFramesEvents=this._bindKeyFramesEvents.bind(this),this._preloadVideo=this._preloadVideo.bind(this),this._onCanplayThrough=this._onCanplayThrough.bind(this),this._onVideoEnter=this._onVideoEnter.bind(this),this._onVideoEnd=this._onVideoEnd.bind(this),this._createVideo=this._createVideo.bind(this),this.videoContainers=this.el.querySelectorAll(".media-object[data-video-baseurl]"),this.videoContainers=Array.from(this.videoContainers),this.videoContainers.forEach(this._createVideo),r.call(this,e)}var r=e("@marcom/bubble-gum/BaseComponent"),s=r.prototype,a=(e("@marcom/dom-traversal/nextSibling"),e("@marcom/dom-traversal/ancestor")),o={L:"large",M:"medium",S:"small"},l=e("@marcom/ac-feature/isRetina"),u=n.prototype=Object.create(s);u.mounted=function(){this.videoContainers.forEach(this._bindKeyFramesEvents)},u._createVideo=function(e){var t=this.getMediaFile(e.getAttribute("data-video-baseurl"));if(!document.querySelector("html").classList.contains("no-mask-image")||!t.match("homepod")){var i=document.createElement("video");i.setAttribute("muted",!0),i.muted=!0,i.setAttribute("playsinline",!0),i.playsinline=!0,i.setAttribute("tabindex","-1"),i.setAttribute("role","presentation"),e.querySelector(".mediaobject-startframe").appendChild(i);var n=a(e,".callout").querySelectorAll(".callout-replay"),r=this;n.forEach(function(e){e.addEventListener("click",r._replay.bind(r,i))})}},u._bindKeyFramesEvents=function(e){if(e._animInfo){var t=e._animInfo.controller;t.on("load-video",this._preloadVideo),t.on("play-video:enter",this._onVideoEnter)}},u._preloadVideo=function(e){var t=e.element.querySelector("video");if(t&&!(t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2)){var i=this.getMediaFile(e.element.getAttribute("data-video-baseurl"));t.addEventListener("canplaythrough",this._onCanplayThrough),t.src=i,t.load(),t._onCanplayThrough=!1}},u._onVideoEnter=function(e){var t=e.element.querySelector("video");t&&t._canAutoplay!==!1&&(t._onCanplayThrough?this._playVideo(t):t._wantsToPlay=!0)},u._onCanplayThrough=function(e){e.target._onCanplayThrough=!0,e.target._wantsToPlay&&(e.target._wantsToPlay=!1,this._playVideo(e.target))},u._playVideo=function(e){e.play(),e.addEventListener("ended",this._onVideoEnd);var t=a(e,".callout").querySelectorAll(".callout-replay"),i=this;t.forEach(function(e){i._hideReplayBtn(e)})},u._replay=function(e,t){if(e.play(),a(e,".callout").querySelector(".siri-text")){var i=a(e,".callout").querySelector(".siri-text");i.classList.remove("siri-fade-up"),i.offsetHeight,i.classList.add("siri-fade-up")}var n=a(e,".callout").querySelectorAll(".callout-replay"),r=this;n.forEach(function(e){r._hideReplayBtn(e)})},u._onVideoEnd=function(e){e.target._canAutoplay=!1,e.target.removeEventListener("end",this._onVideoEnd);var t=a(e.target,".callout").querySelectorAll(".callout-replay");t.forEach(function(e){e.classList.add("active"),e.removeAttribute("disabled")})},u._hideReplayBtn=function(e){e.classList.remove("active"),e.setAttribute("disabled","disabled")},u.getMediaFile=function(e){var t=o[this.currentBreakpoint],i=this.isRetina?"_2x":"";return""+e+t+i+".mp4"},u.onBreakpointChange=function(e){this.currentBreakpoint=e.breakpoint;var t=this.el.querySelectorAll("video");t=Array.from(t),t.forEach(function(t){t.src=t.src.replace(/large|medium|small/,o[e.breakpoint]),t._wantsToPlay=!0,t.load()})},n.IS_SUPPORTED=function(){var e=document.getElementsByTagName("html")[0];return!e.classList.contains("aow")&&!e.classList.contains("no-inline-video")},t.exports=n},{"@marcom/ac-feature/isRetina":37,"@marcom/bubble-gum/BaseComponent":108,"@marcom/dom-traversal/ancestor":116,"@marcom/dom-traversal/nextSibling":118}],138:[function(e,t,i){"use strict";function n(e){var t=e.el.querySelectorAll(".thumbnail-transcript-button");t=Array.from(t),t.forEach(function(e){var t=e.parentElement.querySelector(".video-transcript");e.addEventListener("click",this.openModal.bind(this,t))}.bind(this)),this.modal=r({retainScrollPosition:!0}),this.modal.modalElement.setAttribute("aria-labelledby","transcript-modal"),s.call(this,e)}var r=(e("@marcom/ac-modal").Modal,e("@marcom/ac-modal").createFullViewportModal),s=e("@marcom//bubble-gum/BaseComponent"),a=(s.prototype,n.prototype=Object.create(s.prototype));a.openModal=function(e){var t=this.modal.contentElement.children;t.length>0&&this.modal.contentElement.removeChild(t[0]),this.modal.appendContent(e),this.modal.open()},t.exports=n},{"@marcom//bubble-gum/BaseComponent":108,"@marcom/ac-modal":50}],139:[function(e,t,i){"use strict";function n(e){this.element=e.el;try{this._loadOptions=JSON.parse(this.element.getAttribute("data-progressive-image-options"))}catch(t){this._loadOptions=null}this.imageLoader=new a({container:this.element,includeContainer:!0}),r.call(this,e)}var r=e("@marcom/bubble-gum/BaseComponent"),s=r.prototype,a=e("@marcom/ac-progressive-image-loader/ProgressiveImageLoader");n.Events={ImageLoad:"progressive-image-load",Complete:"progressive-image-complete"};var o=n.prototype=Object.create(s);o.mounted=function(){if(this.addDiscreteEvent({start:"-200vh",end:"-200vh",event:"ProgressiveImageLoad"}),this.element._animInfo){var e=this.element._animInfo.controller;e.on("ProgressiveImageLoad",function(){this.imageLoader.load(this._loadOptions)}.bind(this))}},n.IS_SUPPORTED=function(){var e=document.getElementsByTagName("html")[0];return e.classList.contains("progressive-image")},o.setupEvents=function(){this._onImageLoad=this._onImageLoad.bind(this),this._onComplete=this._onComplete.bind(this),this.imageLoader.on(a.Events.ImageLoad,this._onImageLoad),this.imageLoader.on(a.Events.Complete,this._onComplete)},o.destroy=function(){this.imageLoader.destroy(),this.imageLoader=null},o._onImageLoad=function(e){this.section.trigger(n.Events.ImageLoad,e)},o._onComplete=function(){this.section.trigger(n.Events.Complete)},t.exports=n},{"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":68,"@marcom/bubble-gum/BaseComponent":108}],140:[function(e,t,i){"use strict";t.exports={ModalComponent:e("../components/ModalComponent"),InlineVideoComponent:e("../components/InlineVideoComponent"),CameraFlashAnimationComponent:e("../components/CameraFlashAnimationComponent"),ProgressiveImageComponent:e("../components/ProgressiveImageComponent")}},{"../components/CameraFlashAnimationComponent":136,"../components/InlineVideoComponent":137,"../components/ModalComponent":138,"../components/ProgressiveImageComponent":139}],141:[function(e,t,i){"use strict";var n=e("@marcom/bubble-gum/BubbleGum"),r=e("@marcom/bubble-gum/ComponentMap"),s=e("./model/ComponentMap"),a=function(){return{initialize:function(){Object.assign(r,s);var e=document.querySelector(".main"),t=new n(e);t.on(n.EVENTS.DOM_COMPONENTS_MOUNTED,function(){t.addComponent({componentName:"ModalComponent",el:e})})}}}();t.exports=a.initialize()},{"./model/ComponentMap":140,"@marcom/bubble-gum/BubbleGum":109,"@marcom/bubble-gum/ComponentMap":110}]},{},[141]);