!function(){function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}return e}()({1:[function(e,t,r){"use strict";var n=e("./helpers/TabManager"),i=e("./helpers/hideSiblingElements"),a=e("./helpers/showSiblingElements"),o=function(e,t){t=t||{},this._tabbables=null,this._excludeHidden=t.excludeHidden,this._firstTabbableElement=t.firstFocusElement,this._lastTabbableElement=null,this._relatedTarget=null,this.el=e,this._handleOnFocus=this._handleOnFocus.bind(this)},s=o.prototype;s.start=function(){this.updateTabbables(),i(this.el,null,this._excludeHidden),this._firstTabbableElement?this.el.contains(document.activeElement)||this._firstTabbableElement.focus():console.warn("this._firstTabbableElement is null, CircularTab needs at least one tabbable element."),this._relatedTarget=document.activeElement,document.addEventListener("focus",this._handleOnFocus,!0)},s.stop=function(){a(this.el),document.removeEventListener("focus",this._handleOnFocus,!0)},s.updateTabbables=function(){this._tabbables=n.getTabbableElements(this.el,this._excludeHidden),this._firstTabbableElement=this._firstTabbableElement||this._tabbables[0],this._lastTabbableElement=this._tabbables[this._tabbables.length-1]},s._handleOnFocus=function(e){if(this.el.contains(e.target))this._relatedTarget=e.target;else{if(e.preventDefault(),this.updateTabbables(),this._relatedTarget===this._lastTabbableElement||null===this._relatedTarget)return this._firstTabbableElement.focus(),void(this._relatedTarget=this._firstTabbableElement);if(this._relatedTarget===this._firstTabbableElement)return this._lastTabbableElement.focus(),void(this._relatedTarget=this._lastTabbableElement)}},s.destroy=function(){this.stop(),this.el=null,this._tabbables=null,this._firstTabbableElement=null,this._lastTabbableElement=null,this._relatedTarget=null,this._handleOnFocus=null},t.exports=o},{"./helpers/TabManager":2,"./helpers/hideSiblingElements":4,"./helpers/showSiblingElements":8}],2:[function(e,t,r){"use strict";var n=e("./../maps/focusableElement"),i=function(){this.focusableSelectors=n.join(",")},a=i.prototype;a.isFocusableElement=function(e,t,r){if(t&&!this._isDisplayed(e))return!1;var i=e.nodeName.toLowerCase(),a=n.indexOf(i)>-1;return"a"===i||(a?!e.disabled:!e.contentEditable||(r=r||parseFloat(e.getAttribute("tabindex")),!isNaN(r)))},a.isTabbableElement=function(e,t){if(t&&!this._isDisplayed(e))return!1;var r=e.getAttribute("tabindex");return r=parseFloat(r),isNaN(r)?this.isFocusableElement(e,t,r):r>=0},a._isDisplayed=function(e){var t=e.getBoundingClientRect();return(0!==t.top||0!==t.left||0!==t.width||0!==t.height)&&"hidden"!==window.getComputedStyle(e).visibility},a.getTabbableElements=function(e,t){for(var r=e.querySelectorAll(this.focusableSelectors),n=r.length,i=[],a=0;a<n;a++)this.isTabbableElement(r[a],t)&&i.push(r[a]);return i},a.getFocusableElements=function(e,t){for(var r=e.querySelectorAll(this.focusableSelectors),n=r.length,i=[],a=0;a<n;a++)this.isFocusableElement(r[a],t)&&i.push(r[a]);return i},t.exports=new i},{"./../maps/focusableElement":10}],3:[function(e,t,r){"use strict";var n=e("./setAttributes"),i=e("./../maps/ariaMap"),a=e("./TabManager"),o="data-original-",s="tabindex",u=function(e,t){var r=e.getAttribute(o+t);r||(r=e.getAttribute(t)||"",n(e,o+t,r))};t.exports=function(e,t){if(a.isFocusableElement(e,t))u(e,s),n(e,s,-1);else for(var r=a.getTabbableElements(e,t),o=r.length;o--;)u(r[o],s),n(r[o],s,-1);u(e,i.HIDDEN),n(e,i.HIDDEN,!0)}},{"./../maps/ariaMap":9,"./TabManager":2,"./setAttributes":6}],4:[function(e,t,r){"use strict";var n=e("./hide");t.exports=function i(e,t,r){t=t||document.body;for(var a=e,o=e;a=a.previousElementSibling;)n(a,r);for(;o=o.nextElementSibling;)n(o,r);e.parentElement&&e.parentElement!==t&&i(e.parentElement)}},{"./hide":3}],5:[function(e,t,r){"use strict";var n=function(e,t){if("string"==typeof t)for(var r=t.split(/\s+/),n=0;n<r.length;n++)e.getAttribute(r[n])&&e.removeAttribute(r[n])},i=function(e,t){if(e.length)for(var r=0;r<e.length;r++)n(e[r],t);else n(e,t)};t.exports=i},{}],6:[function(e,t,r){"use strict";var n=function(e,t,r){e&&1===e.nodeType&&e.setAttribute(t,r)},i=function(e,t,r){if("string"!=typeof r&&(r=r.toString()),e)if(e.length)for(var i=0;i<e.length;i++)n(e[i],t,r);else n(e,t,r)};t.exports=i},{}],7:[function(e,t,r){"use strict";var n=e("./removeAttributes"),i=e("./setAttributes"),a=e("./../maps/ariaMap"),o="data-original-",s="tabindex",u=function(e,t){var r=e.getAttribute(o+t);"string"==typeof r&&(r.length?i(e,t,r):n(e,t),n(e,o+t))};t.exports=function(e){n(e,s+" "+a.HIDDEN),u(e,s),u(e,a.HIDDEN);for(var t=e.querySelectorAll("["+o+s+"]"),r=t.length;r--;)u(t[r],s)}},{"./../maps/ariaMap":9,"./removeAttributes":5,"./setAttributes":6}],8:[function(e,t,r){"use strict";var n=e("./show");t.exports=function i(e,t){t=t||document.body;for(var r=e,a=e;r=r.previousElementSibling;)n(r);for(;a=a.nextElementSibling;)n(a);e.parentElement&&e.parentElement!==t&&i(e.parentElement)}},{"./show":7}],9:[function(e,t,r){"use strict";t.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"}},{}],10:[function(e,t,r){"use strict";t.exports=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","*[tabindex]","*[contenteditable]"]},{}],11:[function(e,t,r){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var n=e("./className/add");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=t.shift(t);if(r.classList&&r.classList.add)return void r.classList.add.apply(r.classList,t);for(e=0;e<t.length;e++)n(r,t[e])}},{"./className/add":12,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],12:[function(e,t,r){"use strict";var n=e("./contains");t.exports=function(e,t){n(e,t)||(e.className+=" "+t)}},{"./contains":13}],13:[function(e,t,r){"use strict";var n=e("./getTokenRegExp");t.exports=function(e,t){return n(t).test(e.className)}},{"./getTokenRegExp":14}],14:[function(e,t,r){"use strict";t.exports=function(e){return new RegExp("(\\s|^)"+e+"(\\s|$)")}},{}],15:[function(e,t,r){"use strict";var n=e("./contains"),i=e("./getTokenRegExp");t.exports=function(e,t){n(e,t)&&(e.className=e.className.replace(i(t),"$1").trim())}},{"./contains":13,"./getTokenRegExp":14}],16:[function(e,t,r){"use strict";e("@marcom/ac-polyfills/Array/prototype.slice"),e("@marcom/ac-polyfills/Element/prototype.classList");var n=e("./className/remove");t.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=t.shift(t);if(r.classList&&r.classList.remove)return void r.classList.remove.apply(r.classList,t);for(e=0;e<t.length;e++)n(r,t[e])}},{"./className/remove":15,"@marcom/ac-polyfills/Array/prototype.slice":void 0,"@marcom/ac-polyfills/Element/prototype.classList":void 0}],17:[function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="f7c9180f-5c45-47b4-8de4-428015f096c0",o=window||self;try{n=!!o.localStorage.getItem(a)}catch(s){}t.exports=function(e){return function(){if(n&&"object"===i(window.console))return console[e].apply(console,Array.prototype.slice.call(arguments,0))}}},{}],18:[function(e,t,r){"use strict";t.exports=e("./internal/expose")("log")},{"./internal/expose":17}],19:[function(e,t,r){"use strict";var n=e("./utils/addEventListener"),i=e("./shared/getEventType");t.exports=function(e,t,r,a){return t=i(e,t),n(e,t,r,a)}},{"./shared/getEventType":21,"./utils/addEventListener":23}],20:[function(e,t,r){"use strict";var n=e("./utils/removeEventListener"),i=e("./shared/getEventType");t.exports=function(e,t,r,a){return t=i(e,t),n(e,t,r,a)}},{"./shared/getEventType":21,"./utils/removeEventListener":24}],21:[function(e,t,r){"use strict";var n=e("@marcom/ac-prefixer/getEventType");t.exports=function(e,t){var r,i;return r="tagName"in e?e.tagName:e===window?"window":"document",i=n(t,r),i?i:t}},{"@marcom/ac-prefixer/getEventType":60}],22:[function(e,t,r){"use strict";t.exports=function(e){return e=e||window.event,"undefined"!=typeof e.target?e.target:e.srcElement}},{}],23:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){return e.addEventListener?e.addEventListener(t,r,!!n):e.attachEvent("on"+t,r),e}},{}],24:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){return e.removeEventListener?e.removeEventListener(t,r,!!n):e.detachEvent("on"+t,r),e}},{}],25:[function(e,t,r){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageXOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollLeft}},{}],26:[function(e,t,r){"use strict";t.exports=function(e){var t;if(e=e||window,e===window){if(t=window.pageYOffset)return t;e=document.documentElement||document.body.parentNode||document.body}return e.scrollTop}},{}],27:[function(e,t,r){"use strict";t.exports=8},{}],28:[function(e,t,r){"use strict";t.exports=11},{}],29:[function(e,t,r){"use strict";t.exports=1},{}],30:[function(e,t,r){"use strict";t.exports=3},{}],31:[function(e,t,r){"use strict";var n=e("../isNode");t.exports=function(e,t){return!!n(e)&&("number"==typeof t?e.nodeType===t:t.indexOf(e.nodeType)!==-1)}},{"../isNode":34}],32:[function(e,t,r){"use strict";var n=e("./isNodeType"),i=e("../COMMENT_NODE"),a=e("../DOCUMENT_FRAGMENT_NODE"),o=e("../ELEMENT_NODE"),s=e("../TEXT_NODE"),u=[o,s,i,a],l=" must be an Element, TextNode, Comment, or Document Fragment",c=[o,s,i],h=" must be an Element, TextNode, or Comment",f=[o,a],d=" must be an Element, or Document Fragment",m=" must have a parentNode";t.exports={parentNode:function(e,t,r,i){if(i=i||"target",(e||t)&&!n(e,f))throw new TypeError(r+": "+i+d)},childNode:function(e,t,r,i){if(i=i||"target",(e||t)&&!n(e,c))throw new TypeError(r+": "+i+h)},insertNode:function(e,t,r,i){if(i=i||"node",(e||t)&&!n(e,u))throw new TypeError(r+": "+i+l)},hasParentNode:function(e,t,r){if(r=r||"target",!e.parentNode)throw new TypeError(t+": "+r+m)}}},{"../COMMENT_NODE":27,"../DOCUMENT_FRAGMENT_NODE":28,"../ELEMENT_NODE":29,"../TEXT_NODE":30,"./isNodeType":31}],33:[function(e,t,r){"use strict";var n=e("./internal/isNodeType"),i=e("./ELEMENT_NODE");t.exports=function(e){return n(e,i)}},{"./ELEMENT_NODE":29,"./internal/isNodeType":31}],34:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||!e.nodeType)}},{}],35:[function(e,t,r){"use strict";var n=e("./internal/validate");t.exports=function(e){return n.childNode(e,!0,"remove"),e.parentNode?e.parentNode.removeChild(e):e}},{"./internal/validate":32}],36:[function(e,t,r){"use strict";t.exports={EventEmitterMicro:e("./ac-event-emitter-micro/EventEmitterMicro")}},{"./ac-event-emitter-micro/EventEmitterMicro":37}],37:[function(e,t,r){"use strict";function n(){this._events={}}var i=n.prototype;i.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},i.once=function(e,t){function r(i){n.off(e,r),void 0!==i?t(i):t()}var n=this;this.on(e,r)},i.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var r=this._events[e].indexOf(t);r!==-1&&this._events[e].splice(r,1)}},i.trigger=function(e,t){if(this.has(e))for(var r=this._events[e].length-1;r>=0;r--)void 0!==t?this._events[e][r](t):this._events[e][r]()},i.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},i.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=n},{}],38:[function(e,t,r){"use strict";var n=e("./initializer");n.setup(),e("gsap/TweenLite"),n.complete(),t.exports=window.TweenLite},{"./initializer":39,"gsap/TweenLite":158}],39:[function(e,t,r){"use strict";var n=e("@marcom/ac-raf-emitter/external"),i=e("@marcom/ac-raf-emitter/cancelExternal");t.exports=function(){var e=!0,t=window.requestAnimationFrame,r=window.cancelAnimationFrame;return{useRAFEmitter:function(t){e=t},setup:function(){e&&(window.requestAnimationFrame=n,window.cancelAnimationFrame=i)},complete:function(){window.requestAnimationFrame=t,window.cancelAnimationFrame=r}}}()},{"@marcom/ac-raf-emitter/cancelExternal":84,"@marcom/ac-raf-emitter/external":87}],40:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function a(e){var t,r,i,a,o,s=e.length;a=n(e),o=new h(3*s/4-a),r=a>0?s-4:s;var u=0;for(t=0;t<r;t+=4)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,o[u++]=255&i):1===a&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(o(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",a=[],o=16383,u=0,c=r-n;u<c;u+=o)a.push(s(e,u,u+o>c?c:u+o));return 1===n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),a.push(i),a.join("")}r.byteLength=i,r.toByteArray=a,r.fromByteArray=u;for(var l=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="https://www.apple.com/apple-arcade/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,m=f.length;d<m;++d)l[d]=f[d],c[f.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],41:[function(e,t,r){(function(t){"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?h(e,t,r):m(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,r,n){return u(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}function c(e,t){if(u(t),e=a(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=a(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function f(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function m(e,t){if(o.isBuffer(t)){var r=0|p(t.length);return e=a(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Q(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&$(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return Y(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t=255&t,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<s;l++)if(a(e,l)===a(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*o}else c!==-1&&(l-=l-c),c=-1}else for(r+u>s&&(r=s-u),l=r;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(a(e,l+f)!==a(t,f)){h=!1;break}if(h)return l}return-1}function E(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function x(e,t,r,n){return H(Y(t,e.length-r),e,r,n)}function T(e,t,r,n){return H(G(t),e,r,n)}function A(e,t,r,n){return T(e,t,r,n)}function S(e,t,r,n){return H(X(t),e,r,n)}function k(e,t,r,n){return H(W(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,l,c,h;switch(s){case 1:a<128&&(o=a);break;case 2:u=e[i+1],128===(192&u)&&(h=(31&a)<<6|63&u,h>127&&(o=h));break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(h=(15&a)<<12|(63&u)<<6|63&l,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(h=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c,h>65535&&h<1114112&&(o=h))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return M(n)}function M(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=z(e[a]);return i}function F(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function D(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function V(e,t,r,n,i){return i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function q(e){if(e=K(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function W(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function X(e){return Z.toByteArray(q(e))}function H(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Q(e){return e!==e}var Z=e("base64-js"),J=e("ieee754"),$=e("isarray");r.Buffer=o,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),r.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return s(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return l(null,e,t,r)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,u=Math.min(a,s),l=this.slice(n,i),c=e.slice(t,r),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return T(this,e,t,r);case"latin1":case"binary":return A(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,(void 0));for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},o.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||D(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var i=Math.pow(2,8*r)-1;L(this,e,t,r,i,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var i=Math.pow(2,8*r)-1;L(this,e,t,r,i,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){
if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t=0|t,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e=255&e);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=o.isBuffer(e)?e:Y(new o(e,n).toString()),u=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":40,ieee754:42,isarray:43}],42:[function(e,t,r){"use strict";r.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:(d?-1:1)*(1/0);o+=Math.pow(2,n),a-=l}return(d?-1:1)*o*Math.pow(2,a-n)},r.write=function(e,t,r,n,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,m=n?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+h>=1?f/u:f*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=m,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[r+d]=255&o,d+=m,o/=256,l-=8);e[r+d-m]|=128*p}},{}],43:[function(e,t,r){"use strict";var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],44:[function(e,t,r){"use strict";function n(e){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=e||document,a(this._context,l,this._DOMKeyDown,!0),a(this._context,c,this._DOMKeyUp,!0),i.call(this)}var i=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,a=e("@marcom/ac-dom-events/utils/addEventListener"),o=e("@marcom/ac-dom-events/utils/removeEventListener"),s=e("@marcom/ac-object/create"),u=e("./internal/KeyEvent"),l="keydown",c="keyup",h=n.prototype=s(i.prototype);h.onDown=function(e,t){return this.on(l+":"+e,t)},h.onceDown=function(e,t){return this.once(l+":"+e,t)},h.offDown=function(e,t){return this.off(l+":"+e,t)},h.onUp=function(e,t){return this.on(c+":"+e,t)},h.onceUp=function(e,t){return this.once(c+":"+e,t)},h.offUp=function(e,t){return this.off(c+":"+e,t)},h.isDown=function(e){return e+="",this._keysDown[e]||!1},h.isUp=function(e){return!this.isDown(e)},h.destroy=function(){return o(this._context,l,this._DOMKeyDown,!0),o(this._context,c,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,i.prototype.destroy.call(this),this},h._DOMKeyDown=function(e){var t=this._normalizeKeyboardEvent(e),r=t.keyCode+="";this._trackKeyDown(r),this.trigger(l+":"+r,t)},h._DOMKeyUp=function(e){var t=this._normalizeKeyboardEvent(e),r=t.keyCode+="";this._trackKeyUp(r),this.trigger(c+":"+r,t)},h._normalizeKeyboardEvent=function(e){return new u(e)},h._trackKeyUp=function(e){this._keysDown[e]&&(this._keysDown[e]=!1)},h._trackKeyDown=function(e){this._keysDown[e]||(this._keysDown[e]=!0)},t.exports=n},{"./internal/KeyEvent":46,"@marcom/ac-dom-events/utils/addEventListener":23,"@marcom/ac-dom-events/utils/removeEventListener":24,"@marcom/ac-event-emitter-micro":36,"@marcom/ac-object/create":57}],45:[function(e,t,r){"use strict";var n=e("./Keyboard");t.exports=new n},{"./Keyboard":44}],46:[function(e,t,r){"use strict";function n(e){this.originalEvent=e;var t;for(t in e)i.indexOf(t)===-1&&"function"!=typeof e[t]&&(this[t]=e[t]);this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}var i=["keyLocation"];n.prototype={preventDefault:function(){return"function"!=typeof this.originalEvent.preventDefault?void(this.originalEvent.returnValue=!1):this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}},t.exports=n},{}],47:[function(e,t,r){"use strict";t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],48:[function(e,t,r){"use strict";t.exports={Modal:e("./ac-modal-basic/Modal"),Renderer:e("./ac-modal-basic/Renderer"),classNames:e("./ac-modal-basic/classNames"),dataAttributes:e("./ac-modal-basic/dataAttributes")}},{"./ac-modal-basic/Modal":49,"./ac-modal-basic/Renderer":50,"./ac-modal-basic/classNames":51,"./ac-modal-basic/dataAttributes":52}],49:[function(e,t,r){"use strict";function n(e,t){l.call(this),this.options=o.defaults(h,e),this.renderer=new c(t),this.opened=!1,this._keysToClose=[u.ESCAPE],this._attachedKeysToClose=[],this.close=this.close.bind(this)}var i={addEventListener:e("@marcom/ac-dom-events/addEventListener"),removeEventListener:e("@marcom/ac-dom-events/removeEventListener"),target:e("@marcom/ac-dom-events/target")},a={getScrollX:e("@marcom/ac-dom-metrics/getScrollX"),getScrollY:e("@marcom/ac-dom-metrics/getScrollY")},o={create:e("@marcom/ac-object/create"),defaults:e("@marcom/ac-object/defaults")},s=e("@marcom/ac-keyboard"),u=e("@marcom/ac-keyboard/keyMap"),l=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,c=e("./Renderer"),h={retainScrollPosition:!1},f=n.prototype=o.create(l.prototype);f.open=function(){this.options.retainScrollPosition&&this._saveScrollPosition(),this.opened||(this._attachEvents(),this.trigger("willopen"),this.renderer.open(),this.opened=!0,this.trigger("open"))},f.close=function(e){var t,r;if(this.opened){if(e&&"click"===e.type&&(t=i.target(e),r=this.renderer.options.dataAttributes.close,!t.hasAttribute(r)))return;this.trigger("willclose"),this._removeEvents(),this.renderer.close(),this.options.retainScrollPosition&&this._restoreScrollPosition(),this.opened=!1,this.trigger("close")}},f.render=function(){this.renderer.render()},f.appendContent=function(e,t){this.renderer.appendContent(e,t)},f.removeContent=function(e){this.renderer.removeContent(e)},f.destroy=function(){this._removeEvents(),this.renderer.destroy();for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},f.addKeyToClose=function(e){var t=this._keysToClose.indexOf(e);t===-1&&(this._keysToClose.push(e),this._bindKeyToClose(e))},f.removeKeyToClose=function(e){var t=this._keysToClose.indexOf(e);t!==-1&&this._keysToClose.splice(t,1),this._releaseKeyToClose(e)},f._bindKeyToClose=function(e){var t=this._attachedKeysToClose.indexOf(e);t===-1&&(s.onUp(e,this.close),this._attachedKeysToClose.push(e))},f._releaseKeyToClose=function(e){var t=this._attachedKeysToClose.indexOf(e);t!==-1&&(s.offUp(e,this.close),this._attachedKeysToClose.splice(t,1))},f._removeEvents=function(){this.renderer.modalElement&&i.removeEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._releaseKeyToClose,this)},f._attachEvents=function(){this.renderer.modalElement&&i.addEventListener(this.renderer.modalElement,"click",this.close),this._keysToClose.forEach(this._bindKeyToClose,this)},f._restoreScrollPosition=function(){window.scrollTo(this._scrollX||0,this._scrollY||0)},f._saveScrollPosition=function(){this._scrollX=a.getScrollX(),this._scrollY=a.getScrollY()},t.exports=n},{"./Renderer":50,"@marcom/ac-dom-events/addEventListener":19,"@marcom/ac-dom-events/removeEventListener":20,"@marcom/ac-dom-events/target":22,"@marcom/ac-dom-metrics/getScrollX":25,"@marcom/ac-dom-metrics/getScrollY":26,"@marcom/ac-event-emitter-micro":36,"@marcom/ac-keyboard":45,"@marcom/ac-keyboard/keyMap":47,"@marcom/ac-object/create":57,"@marcom/ac-object/defaults":58}],50:[function(e,t,r){"use strict";var n={add:e("@marcom/ac-classlist/add"),remove:e("@marcom/ac-classlist/remove")},i={defaults:e("@marcom/ac-object/defaults")},a={remove:e("@marcom/ac-dom-nodes/remove"),isElement:e("@marcom/ac-dom-nodes/isElement")},o=e("./classNames"),s=e("./dataAttributes"),u={modalElement:null,contentElement:null,closeButton:null,classNames:o,dataAttributes:s},l=function(e){e=e||{},this.options=i.defaults(u,e),this.options.classNames=i.defaults(u.classNames,e.classNames),this.options.dataAttributes=i.defaults(u.dataAttributes,e.dataAttributes),this.modalElement=this.options.modalElement,this.contentElement=this.options.contentElement,this.closeButton=this.options.closeButton},c=l.prototype;c.render=function(){return a.isElement(this.modalElement)||(this.modalElement=this.renderModalElement(this.options.classNames.modalElement)),a.isElement(this.contentElement)||(this.contentElement=this.renderContentElement(this.options.classNames.contentElement)),this.closeButton!==!1&&(a.isElement(this.closeButton)||(this.closeButton=this.renderCloseButton(this.options.classNames.closeButton)),this.modalElement.appendChild(this.closeButton)),this.modalElement.appendChild(this.contentElement),document.body.appendChild(this.modalElement),this.modalElement},c.renderCloseButton=function(e){var t;return e=e||this.options.classNames.closeButton,t=this._renderElement("button",e),t.setAttribute(this.options.dataAttributes.close,""),t},c.renderModalElement=function(e){return e=e||this.options.classNames.modalElement,this._renderElement("div",e)},c.renderContentElement=function(e){return e=e||this.options.classNames.contentElement,this._renderElement("div",e)},c.appendContent=function(e,t){a.isElement(e)&&(void 0===arguments[1]?this.contentElement.appendChild(e):a.isElement(t)&&t.appendChild(e))},c.removeContent=function(e){e?this.modalElement.contains(e)&&a.remove(e):this._emptyContent()},c.open=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement),t=[this.modalElement].concat(this.options.classNames.modalOpen);n.add.apply(null,e),n.add.apply(null,t)},c.close=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement),t=[this.modalElement].concat(this.options.classNames.modalOpen);n.remove.apply(null,e),n.remove.apply(null,t)},c.destroy=function(){var e=[document.documentElement].concat(this.options.classNames.documentElement);this.modalElement&&document.body.contains(this.modalElement)&&(this.close(),document.body.removeChild(this.modalElement)),n.remove.apply(null,e);for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},c._renderElement=function(e,t){var r=document.createElement(e),i=[r];return t&&(i=i.concat(t)),n.add.apply(null,i),r},c._emptyContent=function(){this.contentElement.innerHTML=""},t.exports=l},{"./classNames":51,"./dataAttributes":52,"@marcom/ac-classlist/add":11,"@marcom/ac-classlist/remove":16,"@marcom/ac-dom-nodes/isElement":33,"@marcom/ac-dom-nodes/remove":35,"@marcom/ac-object/defaults":58}],51:[function(e,t,r){"use strict";t.exports={modalElement:"modal",modalOpen:"modal-open",documentElement:"has-modal",contentElement:"modal-content",closeButton:"modal-close"}},{}],52:[function(e,t,r){"use strict";t.exports={close:"data-modal-close"}},{}],53:[function(e,t,r){"use strict";t.exports={Modal:e("./ac-modal/Modal"),createStandardModal:e("./ac-modal/factory/createStandardModal"),createFullViewportModal:e("./ac-modal/factory/createFullViewportModal")}},{"./ac-modal/Modal":54,"./ac-modal/factory/createFullViewportModal":55,"./ac-modal/factory/createStandardModal":56}],54:[function(e,t,r){"use strict";function n(e){a.call(this),this.options=e||{},this._modal=new i(e,this.options.renderer),this.opened=!1,this._render(),this.closeButton=this._modal.renderer.closeButton,this.modalElement=this._modal.renderer.modalElement,this.contentElement=this._modal.renderer.contentElement,this.modalElement.setAttribute("role","dialog"),this.closeButton.setAttribute("aria-label","Close"),this._circularTab=new o(this.modalElement),this._onWillOpen=this._onWillOpen.bind(this),this._onOpen=this._onOpen.bind(this),this._onWillClose=this._onWillClose.bind(this),this._onClose=this._onClose.bind(this),this._bindEvents()}var i=e("@marcom/ac-modal-basic").Modal,a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-accessibility/CircularTab"),s=n.prototype=Object.create(a.prototype);s.open=function(){this._modal.open(),this.opened=this._modal.opened},s.close=function(){this._modal.close()},s.appendContent=function(e){this._modal.appendContent(e)},s.removeContent=function(e){this._modal.removeContent(e)},s.destroy=function(){this._releaseEvents(),this._modal.destroy(),this._removeModalFocus(),this._circularTab.destroy(),this._focusObj=null;for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)},s.addKeyToClose=function(e){this._modal.addKeyToClose(e)},s.removeKeyToClose=function(e){this._modal.removeKeyToClose(e)},s._render=function(){this._modal.render(),this._modal.renderer.modalElement.setAttribute("aria-hidden","true")},s._bindEvents=function(){this._modal.on("willopen",this._onWillOpen),this._modal.on("open",this._onOpen),this._modal.on("willclose",this._onWillClose),this._modal.on("close",this._onClose)},s._releaseEvents=function(){this._modal.off("willopen",this._onWillOpen),this._modal.off("open",this._onOpen),this._modal.off("willclose",this._onWillClose),this._modal.off("close",this._onClose)},s._onWillOpen=function(){this.trigger("willopen")},s._onOpen=function(){this.opened=this._modal.opened,this._giveModalFocus(),this.trigger("open")},s._onWillClose=function(){this.trigger("willclose"),this._removeModalFocus()},s._onClose=function(){this.opened=this._modal.opened,this.trigger("close")},s._giveModalFocus=function(){this.modalElement.removeAttribute("aria-hidden"),this._activeElement=document.activeElement,this.closeButton.focus(),this._circularTab.start()},s._removeModalFocus=function(){this._circularTab.stop(),this.modalElement.setAttribute("aria-hidden","true"),this._activeElement&&(this._activeElement.focus(),this._activeElement=null)},t.exports=n},{"@marcom/ac-accessibility/CircularTab":1,"@marcom/ac-event-emitter-micro":36,"@marcom/ac-modal-basic":48}],55:[function(e,t,r){"use strict";function n(e){var t=new i(o);return e&&t.appendContent(e),t}var i=e("../Modal"),a=e("@marcom/ac-modal-basic").classNames,o={retainScrollPosition:!0,renderer:{classNames:{documentElement:[a.documentElement].concat("has-modal-full-viewport"),modalElement:[a.modalElement].concat("modal-full-viewport")}}};t.exports=n},{"../Modal":54,"@marcom/ac-modal-basic":48}],56:[function(e,t,r){"use strict";function n(e){var t=new i(u);e&&t.appendContent(e);var r=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div");return s.add(r,"content-table"),s.add(n,"content-cell"),s.add(a,"content-wrapper"),s.add(l,"content-padding","large-8","medium-10"),t.modalElement.setAttribute(o.close,""),a.setAttribute(o.close,""),n.setAttribute(o.close,""),r.appendChild(n),n.appendChild(a),a.appendChild(l),t.modalElement.appendChild(r),l.appendChild(t.contentElement),l.appendChild(t.closeButton),t}var i=e("../Modal"),a=e("@marcom/ac-modal-basic").classNames,o=e("@marcom/ac-modal-basic").dataAttributes,s={add:e("@marcom/ac-classlist/add")},u={renderer:{classNames:{documentElement:[a.documentElement].concat("has-modal-standard"),modalElement:[a.modalElement].concat("modal-standard")}}};t.exports=n},{"../Modal":54,"@marcom/ac-classlist/add":11,"@marcom/ac-modal-basic":48}],57:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){};t.exports=function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(null===e||"object"!==("undefined"==typeof e?"undefined":n(e)))throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(e):(i.prototype=e,new i)}},{}],58:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./extend");t.exports=function(e,t){if("object"!==("undefined"==typeof e?"undefined":n(e)))throw new TypeError("defaults: must provide a defaults object");if(t=t||{},"object"!==("undefined"==typeof t?"undefined":n(t)))throw new TypeError("defaults: options must be a typeof object");return i({},e,t)}},{"./extend":59}],59:[function(e,t,r){"use strict";e("@marcom/ac-polyfills/Array/prototype.forEach");var n=Object.prototype.hasOwnProperty;t.exports=function(){var e,t;return e=arguments.length<2?[{},arguments[0]]:[].slice.call(arguments),t=e.shift(),e.forEach(function(e){if(null!=e)for(var r in e)n.call(e,r)&&(t[r]=e[r])}),t}},{"@marcom/ac-polyfills/Array/prototype.forEach":void 0}],60:[function(e,t,r){"use strict";var n=e("./utils/eventTypeAvailable"),i=e("./shared/camelCasedEventTypes"),a=e("./shared/windowFallbackEventTypes"),o=e("./shared/prefixHelper"),s={};t.exports=function u(e,t){var r,l,c;if(t=t||"div",e=e.toLowerCase(),t in s||(s[t]={}),l=s[t],e in l)return l[e];if(n(e,t))return l[e]=e;if(e in i)for(c=0;c<i[e].length;c++)if(r=i[e][c],n(r.toLowerCase(),t))return l[e]=r;for(c=0;c<o.evt.length;c++)if(r=o.evt[c]+e,n(r,t))return o.reduce(c),l[e]=r;return"window"!==t&&a.indexOf(e)?l[e]=u(e,"window"):l[e]=!1}},{"./shared/camelCasedEventTypes":61,"./shared/prefixHelper":62,"./shared/windowFallbackEventTypes":63,"./utils/eventTypeAvailable":64}],61:[function(e,t,r){"use strict";t.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]}},{}],62:[function(e,t,r){"use strict";var n=["-webkit-","-moz-","-ms-"],i=["Webkit","Moz","ms"],a=["webkit","moz","ms"],o=function(){this.initialize()},s=o.prototype;s.initialize=function(){this.reduced=!1,this.css=n,this.dom=i,this.evt=a},s.reduce=function(e){this.reduced||(this.reduced=!0,this.css=[this.css[e]],this.dom=[this.dom[e]],this.evt=[this.evt[e]])},t.exports=new o},{}],63:[function(e,t,r){"use strict";t.exports=["transitionend","animationstart","animationend","animationiteration"]},{}],64:[function(e,t,r){"use strict";var n={window:window,document:document};t.exports=function(e,t){var r;return e="on"+e,t in n||(n[t]=document.createElement(t)),r=n[t],e in r||"setAttribute"in r&&(r.setAttribute(e,"return;"),"function"==typeof r[e])}},{}],65:[function(e,t,r){"use strict";function n(e){e=e||{},a.call(this),this.id=s.getNewID(),this.executor=e.executor||o,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),s=e("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");i=n.prototype=Object.create(a.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,a.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"@marcom/ac-event-emitter-micro":36,"@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":76,"@marcom/ac-raf-executor/sharedRAFExecutorInstance":92}],66:[function(e,t,r){"use strict";var n=e("./SingleCallRAFEmitter"),i=function(e){this.rafEmitter=new n,this.rafEmitter.on(e,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=i.prototype;a.requestAnimationFrame=function(e){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2,this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx!==-1&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},a._onRAFExecuted=function(e){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e)},t.exports=i},{"./SingleCallRAFEmitter":68}],67:[function(e,t,r){"use strict";var n=e("./RAFInterface"),i=function(){this.events={}},a=i.prototype;a.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},a.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":66}],68:[function(e,t,r){"use strict";var n=e("./RAFEmitter"),i=function(e){n.call(this,e)},a=i.prototype=Object.create(n.prototype);a._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":65}],69:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":67}],70:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":67}],71:[function(e,t,r){"use strict";function n(e){o.call(this),this.options=i(l,e),this.loadingOptions=null,this.els=[],this.loadingQueue=null,this._queueItems=[],this._queueItemsObj={},this._loadOrder=[],this._timeout=null,this._didCallLoad=!1}var i=e("@marcom/ac-object/defaults"),a=e("@marcom/ac-queue").LiveQueue,o=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,s=e("@marcom/ac-raf-emitter/update"),u=e("@marcom/ac-raf-emitter/draw"),l={container:document.body,includeContainer:!1},c={loadingPoolSize:8,timeout:null,imageDataAttribute:"data-progressive-image",imageAnimate:!0,imageAnimateClass:"progressive-image-animated"};n.Events={ImageLoad:"image-load",Complete:"complete"};var h=n.prototype=Object.create(o.prototype);h.load=function(e){this._didCallLoad||(this._didCallLoad=!0,this.loadingOptions=i(c,e),this.loadingQueue=new a(this.loadingOptions.loadingPoolSize),this.els=Array.from(this._getProgressiveImageElements()),this.options.includeContainer&&this.options.container.hasAttribute(this._getProgressiveImageDataAttribute())&&this.els.unshift(this.options.container),u(function(){var e,t,r=this.els.length;for(e=0;e<r;e++)t={queueItem:this.loadingQueue.enqueue(this._loadNextItem.bind(this,e),e),el:this.els[e],id:e},this._queueItems.push(t),this._queueItemsObj[e]=t,this.loadingOptions.imageAnimate&&this.els[e].classList.add(this.loadingOptions.imageAnimateClass);s(function(){this.loadingQueue.start(),"number"==typeof this.loadingOptions.timeout&&(this._timeout=setTimeout(this.cancel.bind(this),this.loadingOptions.timeout))}.bind(this))}.bind(this)))},h.setVisible=function(e){return new Promise(function(t,r){u(function(){e.removeAttribute(this._getProgressiveImageDataAttribute()),t(),e=null}.bind(this))}.bind(this))},h.cancel=function(){if(this.els){var e,t=this.els.length;for(e=0;e<t;e++)this.setVisible(this.els[e]),this.loadingOptions.imageAnimate&&u(function(){this.els[e].setAttribute("data-progressive-image-loaded","")}.bind(this,e))}this._handleLoadingComplete()},h.destroy=function(){this.cancel(),this.off(),o.prototype.destroy.call(this)},h._loadNextItem=function(e){return new Promise(function(e,t,r){var n=this._queueItemsObj[e];this._loadAndSetVisible(n.el).then(function(){var e=this._queueItems.indexOf(n);this._queueItems.splice(e,1),this._queueItemsObj[n.id]=null,t(),this._handleImageLoad(n.el),n=t=null,1===this.loadingQueue.count()&&this._handleLoadingComplete()}.bind(this))}.bind(this,e))},h._loadAndSetVisible=function(e){return new Promise(function(t,r){this.setVisible(e).then(function(){this._getBackgroundImageSrc(e).then(function(r){this._loadImage(r).then(t),e=null}.bind(this))}.bind(this))}.bind(this))},h._getBackgroundImageSrc=function(e){return new Promise(function(t,r){s(function(){var r=e.currentStyle;return r||(r=window.getComputedStyle(e,!1)),e=null,0===r.backgroundImage.indexOf("url(")?void t(r.backgroundImage.slice(4,-1).replace(/"/g,"")):void t(null)}.bind(this))}.bind(this))},h._getProgressiveImageDataAttribute=function(){return this.loadingOptions.imageDataAttribute},h._getProgressiveImageCSSQuery=function(){return"["+this._getProgressiveImageDataAttribute()+"]"},h._getProgressiveImageElements=function(){return this.options.container.querySelectorAll(this._getProgressiveImageCSSQuery())||[]},h._loadImage=function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))},h._loadImagePromiseFunc=function(e,t,r){function n(){this.removeEventListener("load",n),t(this),t=null}if(!e)return void t(null);var i=new Image;i.addEventListener("load",n),i.src=e},h._clearTimeout=function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)},h._handleImageLoad=function(e){u(function(){this.trigger(n.Events.ImageLoad,e),this.loadingOptions.imageAnimate&&e.setAttribute("data-progressive-image-loaded",""),e=null}.bind(this))},h._handleLoadingComplete=function(){this.loadingQueue.stop(),this._clearTimeout(),this.trigger(n.Events.Complete)},t.exports=n},{"@marcom/ac-event-emitter-micro":36,"@marcom/ac-object/defaults":58,"@marcom/ac-queue":72,"@marcom/ac-raf-emitter/draw":69,"@marcom/ac-raf-emitter/update":70}],72:[function(e,t,r){"use strict";t.exports={Queue:e("./ac-queue/Queue"),QueueItem:e("./ac-queue/QueueItem"),LiveQueue:e("./ac-queue/LiveQueue")}},{"./ac-queue/LiveQueue":73,"./ac-queue/Queue":74,"./ac-queue/QueueItem":75}],73:[function(e,t,r){"use strict";function n(e){this._queue=new i,this._maxProcesses=e||1,this._availableSlots=this._maxProcesses,this._rafId=0,this._isRunning=!1,this._boundFunctions={_run:this._run.bind(this),_releaseSlot:this._releaseSlot.bind(this)}}e("@marcom/ac-polyfills/Promise"),e("@marcom/ac-polyfills/requestAnimationFrame"),e("@marcom/ac-polyfills/Function/prototype.bind");var i=e("./Queue"),a=e("./QueueItem"),o=n.prototype;o.start=function(){this._isRunning&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this._boundFunctions._run),this._isRunning=!0},o.pause=function(){this._isRunning&&(cancelAnimationFrame(this._rafId),this._rafId=0),this._isRunning=!1},o.stop=function(){this.pause(),this.clear()},o.enqueue=function(e,t){if("function"!=typeof e)throw new Error("LiveQueue can only enqueue functions");void 0===t&&(t=i.PRIORITY_DEFAULT);var r=new a(e,t);return this.enqueueQueueItem(r)},o.enqueueQueueItem=function(e){return this._queue.enqueueQueueItem(e),this._isRunning&&0===this._rafId&&this.start(),e},o.dequeueQueueItem=function(e){return this._queue.dequeueQueueItem(e)},o.clear=function(){this._queue=new i},o.destroy=function(){this.pause(),this._isRunning=!1,this._queue=null,this._boundFunctions=null},o.count=function(){return this._queue.count()+this.pending()},o.pending=function(){return this._maxProcesses-this._availableSlots},o.isEmpty=function(){return 0===this.count()},o._run=function(){if(this._isRunning&&(this._rafId=requestAnimationFrame(this._boundFunctions._run),!this._queue.isEmpty()&&0!==this._availableSlots)){var e=this._queue.dequeue(),t=e.data();this._isPromise(t)&&(this._retainSlot(),t.then(this._boundFunctions._releaseSlot,this._boundFunctions._releaseSlot)),this._stopRunningIfDone()}},o._retainSlot=function(){this._availableSlots--},o._releaseSlot=function(){this._availableSlots++,this._stopRunningIfDone()},o._stopRunningIfDone=function(){0!=this._rafId&&0===this._queue.count()&&this._availableSlots==this._maxProcesses&&(cancelAnimationFrame(this._rafId),this._rafId=0)},o._isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.exports=n},{"./Queue":74,"./QueueItem":75,"@marcom/ac-polyfills/Function/prototype.bind":void 0,"@marcom/ac-polyfills/Promise":void 0,"@marcom/ac-polyfills/requestAnimationFrame":void 0}],74:[function(e,t,r){"use strict";function n(){this._items=[]}var i=e("./QueueItem"),a=n.prototype;
a.enqueue=function(e,t){void 0===t&&(t=n.PRIORITY_DEFAULT);var r=new i(e,t);return this.enqueueQueueItem(r)},a.enqueueQueueItem=function(e){return this._items.indexOf(e)===-1&&this._items.push(e),e},a.dequeue=function(){this._heapSort();var e=this._items.length-1,t=this._items[0];return this._items[0]=this._items[e],this._items.pop(),t},a.dequeueQueueItem=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1),e},a.peek=function(){return 0==this.count()?null:(this._heapSort(),this._items[0])},a.isEmpty=function(){return 0===this._items.length},a.count=function(){return this._items.length},a.toString=function(){for(var e=["Queue total items: "+this.count()+"\n"],t=0;t<this.count();++t)e.push(this._items[t].toString()+"\n");return e.join("")},a._heapSort=function(){for(var e=0,t=this._items.length-1;t>=0;t--)for(var r=t;r>0;){e++;var n=Math.floor((r-1)/2);if(this._items[r].compareTo(this._items[n])>=0)break;var i=this._items[r];this._items[r]=this._items[n],this._items[n]=i,r=n}},n.PRIORITY_LOW=10,n.PRIORITY_DEFAULT=5,n.PRIORITY_HIGH=1,t.exports=n},{"./QueueItem":75}],75:[function(e,t,r){"use strict";function n(e,t){this.priority=t,this.data=e,this.insertionOrder=i++}var i=0,a=n.prototype;a.compareTo=function(e){return this.priority<e.priority?-1:this.priority>e.priority?1:this.insertionOrder<e.insertionOrder?-1:1},a.toString=function(){return"QueueItem {priority:"+this.priority+",\tdata:"+this.data+"\tinsertionOrder:"+this.insertionOrder+"}"},t.exports=n},{}],76:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",a="1.0.3",o=function(){this._currentID=0};o.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share(i,a,o)},{"@marcom/ac-shared-instance":93}],77:[function(e,t,r){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],78:[function(e,t,r){"use strict";function n(e){e=e||{},a.call(this),this.id=s.getNewID(),this.executor=e.executor||o,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,a=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,o=e("./sharedRAFExecutorInstance"),s=e("./sharedRAFEmitterIDGeneratorInstance");i=n.prototype=Object.create(a.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,a.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=n},{"./sharedRAFEmitterIDGeneratorInstance":88,"./sharedRAFExecutorInstance":89,"@marcom/ac-event-emitter-micro":36}],79:[function(e,t,r){"use strict";function n(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new a,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}var i,a=e("@marcom/ac-event-emitter-micro/EventEmitterMicro");i=n.prototype,i.frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=n},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":37}],80:[function(e,t,r){"use strict";var n=e("./SingleCallRAFEmitter"),i=function(e){this.phase=e,this.rafEmitter=new n,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=i.prototype;a.requestAnimationFrame=function(e,t){return t===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},a._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},a._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},a._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},a._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},a._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},a._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},a._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},a._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=i},{"./SingleCallRAFEmitter":82}],81:[function(e,t,r){"use strict";var n=e("./RAFInterface"),i=function(){this.events={}},a=i.prototype;a.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].requestAnimationFrame},a.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new n(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{"./RAFInterface":80}],82:[function(e,t,r){"use strict";var n=e("./RAFEmitter"),i=function(e){n.call(this,e)},a=i.prototype=Object.create(n.prototype);a._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{"./RAFEmitter":78}],83:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.cancelAnimationFrame("draw")},{"./RAFInterfaceController":81}],84:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.cancelAnimationFrame("external")},{"./RAFInterfaceController":81}],85:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.cancelAnimationFrame("update")},{"./RAFInterfaceController":81}],86:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("draw")},{"./RAFInterfaceController":81}],87:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("external")},{"./RAFInterfaceController":81}],88:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i=e("https://www.apple.com/.release-info.js").majorVersionNumber,a=function(){this._currentID=0};a.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",i,a)},{"../.release-info.js":77,"@marcom/ac-shared-instance":93}],89:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i=e("https://www.apple.com/.release-info.js").majorVersionNumber,a=e("./RAFExecutor");t.exports=n.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",i,a)},{"../.release-info.js":77,"./RAFExecutor":79,"@marcom/ac-shared-instance":93}],90:[function(e,t,r){"use strict";var n=e("./RAFInterfaceController");t.exports=n.requestAnimationFrame("update")},{"./RAFInterfaceController":81}],91:[function(e,t,r){"use strict";function n(e){e=e||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}e("@marcom/ac-polyfills/performance/now");var i;i=n.prototype,i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.trigger=function(e,t){var r;for(r=0;r<this._subscriberArrayLength;r++)null!==this._subscribers[this._subscribersOrder[r]]&&this._subscribers[this._subscribersOrder[r]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[r]].trigger(e,t)},i.destroy=function(){var e=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onSubscribersAnimationFrameStart=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameStart(e)},i._onSubscribersAnimationFrameEnd=function(e){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&this._subscribers[this._subscribersOrder[t]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[t]]._onAnimationFrameEnd(e)},i._onAnimationFrame=function(e){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},t.exports=n},{"@marcom/ac-polyfills/performance/now":void 0}],92:[function(e,t,r){"use strict";var n=e("@marcom/ac-shared-instance").SharedInstance,i="ac-raf-executor:sharedRAFExecutorInstance",a="2.0.1",o=e("./RAFExecutor");t.exports=n.share(i,a,o)},{"./RAFExecutor":91,"@marcom/ac-shared-instance":93}],93:[function(e,t,r){"use strict";t.exports={SharedInstance:e("./ac-shared-instance/SharedInstance")}},{"./ac-shared-instance/SharedInstance":94}],94:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=window,a="AC",o="SharedInstance",s=i[a],u=function(){var e={};return{get:function(t,r){var n=null;return e[t]&&e[t][r]&&(n=e[t][r]),n},set:function(t,r,n){return e[t]||(e[t]={}),"function"==typeof n?e[t][r]=new n:e[t][r]=n,e[t][r]},share:function(e,t,r){var n=this.get(e,t);return n||(n=this.set(e,t,r)),n},remove:function(t,r){var i="undefined"==typeof r?"undefined":n(r);if("string"===i||"number"===i){if(!e[t]||!e[t][r])return;return void(e[t][r]=null)}e[t]&&(e[t]=null)}}}();s||(s=i[a]={}),s[o]||(s[o]=u),t.exports=s[o]},{}],95:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=e("./Model/AnimSystemModel"),l=e("./Keyframes/Keyframe"),c=e("./Keyframes/KeyframeCSSClass"),h=e("./Keyframes/KeyframeDiscreteEvent"),f=e("./ScrollGroup"),d=e("./TimeGroup"),m=e("./utils/arrayToObject"),p={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),cancelUpdate:e("@marcom/ac-raf-emitter/cancelUpdate"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},v=null,y=function(e){function t(){n(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(v)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return v=e,e.groups=[],e.scrollSystems=[],e.timeSystems=[],e._forceUpdateRAFId=-1,e.setupEvents(),e}return a(t,e),o(t,[{key:"initialize",value:function(){this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes()}},{key:"destroy",value:function(){this.groups.forEach(function(e){return e.destroy()}),this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(u.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate)}},{key:"createTimeGroup",value:function(e){var t=new d(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(u.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new f(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(u.EVENTS.ON_GROUP_CREATED,t),t}},{key:"removeGroup",value:function(e){var t=this;e.keyframeControllers.forEach(function(t){return e.removeKeyframeController(t)}),p.update(function(){var r=t.groups.indexOf(e);r!==-1&&t.groups.splice(r,1),r=t.scrollSystems.indexOf(e),r!==-1&&t.scrollSystems.splice(r,1),r=t.timeSystems.indexOf(e),r!==-1&&t.timeSystems.splice(r,1),p.update(function(){return e.destroy()})})}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(t){return e.createScrollGroup(t)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(t){return e.createTimeGroup(t)}),this.trigger(u.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"createDOMKeyframes",value:function(){var e=this,t=[];[l.DATA_ATTRIBUTE,c.DATA_ATTRIBUTE,h.DATA_ATTRIBUTE].forEach(function(e){for(var r=0;r<12;r++)t.push(e+(0===r?"":"-"+(r-1)))});for(var r=0;r<t.length;r++)for(var n=t[r],i=document.querySelectorAll("["+n+"]"),a=0;a<i.length;a++){var o=i[a],s=JSON.parse(o.getAttribute(n));this.addKeyframe(o,s)}p.update(function(){return e.groups.forEach(function(e){return e.onKeyframesDirty({preventOnScroll:!0})})},!0),p.update(function(){e.groups.forEach(function(e){return e.trigger(u.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)}),e.trigger(u.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),e.groups.forEach(function(e){return e.reconcile()}),e.onScroll()},!0)}},{key:"initializeModel",value:function(){u.pageMetrics.windowHeight=window.innerHeight,u.pageMetrics.windowWidth=window.innerWidth,u.pageMetrics.scrollY=window.scrollY||window.pageYOffset,u.pageMetrics.scrollX=window.scrollX||window.pageXOffset,u.pageMetrics.breakpoint=u.getBreakpoint();var e=document.documentElement.getBoundingClientRect();u.pageMetrics.documentOffsetX=e.left+u.pageMetrics.scrollX,u.pageMetrics.documentOffsetY=e.top+u.pageMetrics.scrollY}},{key:"setupEvents",value:function(){this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeImmediate)}},{key:"determineActiveKeyframes",value:function(){for(var e=m(Array.from(document.documentElement.classList)),t=0,r=this.groups.length;t<r;t++)this.groups[t].determineActiveKeyframes(e)}},{key:"onScroll",value:function(){u.pageMetrics.scrollY=window.scrollY||window.pageYOffset,u.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll();this.trigger(u.PageEvents.ON_SCROLL,u.pageMetrics)}},{key:"onResizeImmediate",value:function(){u.pageMetrics.windowHeight=window.innerHeight,u.pageMetrics.windowWidth=window.innerWidth,u.pageMetrics.scrollY=window.scrollY||window.pageYOffset,u.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var e=document.documentElement.getBoundingClientRect();u.pageMetrics.documentOffsetX=e.left+u.pageMetrics.scrollX,u.pageMetrics.documentOffsetY=e.top+u.pageMetrics.scrollY,window.clearTimeout(u.RESIZE_TIMEOUT),u.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(u.PageEvents.ON_RESIZE_IMMEDIATE,u.pageMetrics)}},{key:"onResizedDebounced",value:function(){var e=this;p.update(function(){var t=u.pageMetrics.breakpoint,r=u.getBreakpoint(),n=r!==t;if(n){u.pageMetrics.previousBreakpoint=t,u.pageMetrics.breakpoint=r;for(var i=0,a=e.groups.length;i<a;i++)e.groups[i]._onBreakpointChange();e.trigger(u.PageEvents.ON_BREAKPOINT_CHANGE,u.pageMetrics)}for(var o=0,s=e.groups.length;o<s;o++)e.groups[o].forceUpdate({recalculateActiveKeyframes:n,waitForNextUpdate:!1});e.trigger(u.PageEvents.ON_RESIZE_DEBOUNCED,u.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.recalculateActiveKeyframes,n=void 0!==r&&r,i=t.waitForNextUpdate,a=void 0===i||i;this._forceUpdateRAFId!==-1&&p.cancelUpdate(this._forceUpdateRAFId);var o=function(){for(var t=0,r=e.groups.length;t<r;t++){var i=e.groups[t];i.forceUpdate({recalculateActiveKeyframes:n,waitForNextUpdate:!1})}return-1};this._forceUpdateRAFId=a?p.update(o,!0):o()}},{key:"addKeyframe",value:function(e,t){var r=this.getGroupForTarget(e);return r.addKeyframe(e,t)}},{key:"getGroupForTarget",value:function(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;for(var t=e;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}}]),t}(s);t.exports=new y},{"./Keyframes/Keyframe":97,"./Keyframes/KeyframeCSSClass":98,"./Keyframes/KeyframeDiscreteEvent":99,"./Model/AnimSystemModel":100,"./ScrollGroup":109,"./TimeGroup":110,"./utils/arrayToObject":111,"@marcom/ac-event-emitter-micro":36,"@marcom/ac-raf-emitter/RAFEmitter":78,"@marcom/ac-raf-emitter/cancelUpdate":85,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/external":87,"@marcom/ac-raf-emitter/update":90}],96:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function y(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=e("./Model/AnimSystemModel"),l=(e("./Keyframes/Keyframe"),e("./Keyframes/KeyframeCSSClass")),c=e("./Model/InferKeyframeFromProps"),h=e("./utils/arrayToObject"),f=e("./Model/UUID"),d=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,m=e("@marcom/decompose-css-transform"),p={update:e("@marcom/ac-raf-emitter/update"),external:e("@marcom/ac-raf-emitter/external"),draw:e("@marcom/ac-raf-emitter/draw")},v=function(e){function t(e,r){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.uuid=f(),a.group=e,a.element=r,a._ownerIsElement=a.element instanceof Element,a._ownerIsElement?a.friendlyName=a.element.tagName+"."+Array.from(a.element.classList).join("."):a.friendlyName=a.element.friendlyName||a.uuid,a.element._animInfo=a.element._animInfo||new u.AnimInfo(e,a),a.element._animInfo.controller=a,a.element._animInfo.group=a.group,a.element._animInfo.controllers.push(a),a.tweenProps={},a.eventObject=new u.EventObject(a),a.needsStyleUpdate=!1,a.needsClassUpdate=!1,a.elementMetrics=a.group.metrics.add(a.element),a._parentElementMetrics=null,a.attributes=[],a.keyframes={},a._allKeyframes=[],a._activeKeyframes=[],a.keyframesRequiringDispatch=[],a.updateCachedValuesFromElement(),a.boundsMin=0,a.boundsMax=0,a}return a(t,e),o(t,[{key:"destroy",value:function(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);var e=this.element._animInfo.controllers.indexOf(this);
e!==-1&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length?this.element._animInfo=null:(this.element._animInfo.controller=this.element._animInfo.controllers[this.element._animInfo.controllers.length-1],this.element._animInfo.group=this.element._animInfo.controller.group)}this._parentElementMetrics=null,this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var r=0;r<this._allKeyframes.length;r++)this._allKeyframes[r].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){if(this._ownerIsElement){var e=getComputedStyle(this.element),t=m(this.element,!0),r=u.KeyframeDefaults.epsilon,n=!1;this.tweenProps.x=new u.TargetValue(t.translation[0],r,n),this.tweenProps.y=new u.TargetValue(t.translation[1],r,n),this.tweenProps.z=new u.TargetValue(t.translation[2],r,n),this.tweenProps.rotation=new u.TargetValue(t.eulerRotation[2],r,n),this.tweenProps.rotationX=new u.TargetValue(t.eulerRotation[0],r,n),this.tweenProps.rotationY=new u.TargetValue(t.eulerRotation[1],r,n),this.tweenProps.rotationZ=new u.TargetValue(t.eulerRotation[2],r,n),this.tweenProps.scale=new u.TargetValue(t.scale[0],r,n),this.tweenProps.scaleX=new u.TargetValue(t.scale[0],r,n),this.tweenProps.scaleY=new u.TargetValue(t.scale[1],r,n),this.tweenProps.opacity=new u.TargetValue(parseFloat(e.opacity),r,n)}}},{key:"addKeyframe",value:function(e){var t=c(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var r=new t(this,e);return r.parseOptions(e),r.id=this._allKeyframes.length,this._allKeyframes.push(r),r}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e],n=this.tweenProps[r],i=Math.abs(n.current-n.target);if(i>n.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,r=this.attributes.length;t<r;t++){var n=this.attributes[t],i=this.keyframes[this.attributes[t]];if(1!==i.length){var a=this.getNearestKeyframeForAttribute(e,n);a&&a.updateLocalProgress(e)}else i[0].updateLocalProgress(e)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e],n=this.getNearestKeyframeForAttribute(this.group.timelines.local,r);n.updateLocalProgress(this.group.timelines.local),n.snapAtCreation&&n.reconcile(r)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||h(Array.from(document.documentElement.classList));var r=this._activeKeyframes,n=this.attributes;this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var i=0;i<this._allKeyframes.length;i++){var a=this._allKeyframes[i];if(a.setEnabled(e)){this._activeKeyframes.push(a);for(var o in a.animValues)this.keyframes[o]=this.keyframes[o]||[],this.keyframes[o].push(a),this.attributes.indexOf(o)===-1&&this.attributes.push(o)}}var s=r.filter(function(e){return t._activeKeyframes.indexOf(e)===-1});if(0!==s.length){var u=n.filter(function(e){return t.attributes.indexOf(e)===-1});0!==u.length&&this._ownerIsElement&&p.external(function(){var e=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],r=u.filter(function(t){return e.indexOf(t)!==-1});r.length>0&&t.element.style.removeProperty("transform");for(var n=0,i=u.length;n<i;++n){var a=u[n],o=t.tweenProps[a];o.current=o.target=o.initialValue,"opacity"===a&&t.element.style.removeProperty("opacity")}for(var c=0,h=s.length;c<h;++c){var f=s[c];f instanceof l&&f._unapply()}},!0)}}},{key:"onDOMRead",value:function(e){for(var t=0,r=this.attributes.length;t<r;t++){var n=this.attributes[t],i=this.getNearestKeyframeForAttribute(e.local,n);i&&i.onDOMRead(n)}}},{key:"onDOMWrite",value:function(){this._ownerIsElement?this.onDOMWriteForElement():this.onDOMWriteForObject(),this.handleEventDispatch()}},{key:"onDOMWriteForObject",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e];this.element[r]=this.tweenProps[r].current}}},{key:"onDOMWriteForElement",value:function(){var e=this.tweenProps,t="";if("undefined"!=typeof this.keyframes.z?t+="translate3d("+e.x.current+"px,"+e.y.current+"px, "+e.z.current+"px)":"undefined"==typeof this.keyframes.x&&"undefined"==typeof this.keyframes.y||(t+="translate("+e.x.current+"px,"+e.y.current+"px)"),"undefined"!=typeof this.keyframes.rotation?t+="rotate("+e.rotation.current+"deg) ":("undefined"!=typeof this.keyframes.rotationX&&(t+="rotateX("+e.rotationX.current+"deg) "),"undefined"!=typeof this.keyframes.rotationY&&(t+="rotateY("+e.rotationY.current+"deg) "),"undefined"!=typeof this.keyframes.rotationZ&&(t+="rotateZ("+e.rotationZ.current+"deg) ")),"undefined"!=typeof this.keyframes.scale)t+="scale("+e.scale.current+","+e.scale.current+") ";else{var r="undefined"!=typeof this.keyframes.scaleX,n="undefined"!=typeof this.keyframes.scaleY;(r||n)&&(t+="scale("+e.scaleX.current+","+e.scaleY.current+") ")}if(""!==t&&(this.element.style.transform=t),"undefined"!=typeof this.keyframes.opacity&&(this.element.style.opacity=e.opacity.current),this.needsStyleUpdate){for(var i in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[i]&&(this.element.style[i]=this.tweenProps.targetStyles[i]),this.tweenProps.targetStyles[i]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var r=this.keyframesRequiringDispatch[e];r.needsEventDispatch=!1,this.eventObject.keyframe=r,this.eventObject.pageMetrics=u.pageMetrics,this.eventObject.event=r.event,this.trigger(r.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,r=this._activeKeyframes.length;t<r;t++)this._activeKeyframes[t].updateAnimationConstraints();this.attributes.forEach(function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(u.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=this,t=this._activeKeyframes.map(function(e){return e.relativeTo}),r=new Set(t);r.add(this.element),r.forEach(function(t){return e.group.metrics.refreshMetrics(t)}),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var r=this.attributes[e],n=this.keyframes[r],i=n[0];if(!(i.keyframeType>u.KeyframeTypes.InterpolationForward))for(var a=0,o=n.length;a<o;a++){var s=n[a];if(null===s.jsonProps[r][0]){if(0===a)throw new RangeError("AnimSystem - earliest keyframe cannot defer it's beginning value! "+r+":[null,"+s.jsonProps[r][1]+"]");s.animValues[r][0]=n[a-1].animValues[r][1]}if(null===s.jsonProps[r][1]){if(a===o-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! "+r+":["+s.jsonProps[r][0]+",null]");s.animValues[r][1]=n[a+1].animValues[r][0]}}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,r=this.attributes.length;t<r;t++)for(var n=this.keyframes[this.attributes[t]],i=0;i<n.length;i++){var a=n[i];this.boundsMin=Math.min(a.start,this.boundsMin),this.boundsMax=Math.max(a.end,this.boundsMax),e.min=Math.min(a.start,e.min),e.max=Math.max(a.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){var r=null,n=Number.POSITIVE_INFINITY,i=this.keyframes[t];if(void 0===i)return null;var a=i.length;if(0===a)return null;if(1===a)return i[0];for(var o=0;o<a;o++){var s=i[o];if(s.isInRange(e)){r=s;break}var u=Math.min(Math.abs(e-s.start),Math.abs(e-s.end));u<n&&(n=u,r=s)}return r}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateKeyframe",value:function(e,t){var r=this;e.parseOptions(t),e.updateAnimationConstraints(),this.group.keyframesDirty=!0,p.update(function(){r.trigger(u.EVENTS.ON_KEYFRAME_UPDATED,e),r.group.trigger(u.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}},{key:"removeKeyframe",value:function(e){var t=this._allKeyframes.indexOf(e);t!==-1&&(this._allKeyframes.splice(t,1),this.group.keyframesDirty=!0)}},{key:"updateAnimation",value:function(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}]),t}(d);Object.defineProperty(v.prototype,"parentElementMetrics",{get:function(){return null===this._parentElementMetrics&&(this._parentElementMetrics=this.group.metrics.add(this.element.parentElement)),this._parentElementMetrics}}),t.exports=v},{"./Keyframes/Keyframe":97,"./Keyframes/KeyframeCSSClass":98,"./Model/AnimSystemModel":100,"./Model/InferKeyframeFromProps":103,"./Model/UUID":104,"./utils/arrayToObject":111,"@marcom/ac-event-emitter-micro":36,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/external":87,"@marcom/ac-raf-emitter/update":90,"@marcom/decompose-css-transform":115}],97:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../Model/AnimSystemModel"),o=e("@marcom/sm-math-utils"),s=e("../Model/EasingFunctions"),u=e("../Model/UnitBezier"),l=e("../utils/arrayToObject"),c=function(){function e(t,r){n(this,e),this.controller=t,this.relativeTo=t.element,this.jsonProps=r,this.ease=a.KeyframeDefaults.ease,this.easeFunctionString=a.KeyframeDefaults.easeFunctionString,this.easeFunction=s[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=a.KeyframeTypes.Interpolation,this.hold=!1}return i(e,[{key:"destroy",value:function(){this.controller=null,this.relativeTo=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(e){if(this.jsonProps=e,""!==e.relativeTo&&e.relativeTo?e.relativeTo&&(this.relativeTo=this.controller.group.element.querySelector(e.relativeTo)||document.querySelector(e.relativeTo),null===this.relativeTo&&(console.warn("Keyframe for",this.controller.element.className," .relativeTo failed to find "+e.relativeTo+"' via querySelector"),this.relativeTo=this.controller.element),this.controller.group.metrics.add(this.relativeTo)):this.relativeTo=this.controller.element,e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunction=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,this.easeFunction=s[e.easeFunction],!s.hasOwnProperty(e.easeFunction)){var t=u.fromCSSString(e.easeFunction);t?this.easeFunction=t:console.error("Keyframe parseOptions cannot find EasingFunction named '"+e.easingFunction+"'")}for(var r in e)if(a.KeyframeJSONReservedWords.indexOf(r)===-1){var n=e[r];if(Array.isArray(n)){if(this.animValues[r]=this.controller.group.expressionParser.parse(this,n),void 0===this.controller.tweenProps[r]||!this.controller._ownerIsElement){var i=0;this.controller._ownerIsElement||(i=this.controller.element[r]);var o=new a.TargetValue(i,a.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[r]=o}var l=this.controller.tweenProps[r];if(e.epsilon)l.epsilon=e.epsilon;else{var c=Math.abs(this.animValues[r][0]-this.animValues[r][1]),h=Math.min(.001*c,l.epsilon,a.KeyframeDefaults.epsilon);l.epsilon=Math.max(h,1e-4)}}}this.keyframeType=this.hold?a.KeyframeTypes.InterpolationForward:a.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e>this.end)return this.localT=1,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),r=this.hold?this.localT:0;this.localT=o.clamp(t,r,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],r=this.controller.tweenProps[e];r.initialValue=t[0],r.target=t[0]+this.curvedT*(t[1]-t[0]),r.current!==r.target&&(r.current=r.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;this.ease=1;for(var r in this.animValues)this.reconcile(r);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],r=this.controller.tweenProps[e];r.target=t[0]+this.curvedT*(t[1]-t[0]);var n=r.current;r.current+=(r.target-r.current)*this.ease;var i=r.current-r.target;i<r.epsilon&&i>-r.epsilon&&(r.current=r.target,i=0),""===this.event||this.needsEventDispatch||(i>r.epsilon||i<-r.epsilon||0===i&&n!==r.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||l(Array.from(document.documentElement.classList));var t=this.breakpointMask.indexOf(a.pageMetrics.breakpoint)!==-1,r=!1;return this.disabledWhen.length>0&&(r=this.disabledWhen.some(function(t){return"undefined"!=typeof e[t]})),this.isEnabled=t&&!r,this.isEnabled}},{key:"updateAnimationConstraints",value:function(){this.start=this.controller.group.timeParser.parse(this,this.jsonProps.start),this.end=this.controller.group.timeParser.parse(this,this.jsonProps.end),this.updateAnimatedValueConstraints()}},{key:"updateAnimatedValueConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parse(this,t)}}}]),e}();c.DATA_ATTRIBUTE="data-anim-tween",t.exports=c},{"../Model/AnimSystemModel":100,"../Model/EasingFunctions":101,"../Model/UnitBezier":105,"../utils/arrayToObject":111,"@marcom/sm-math-utils":120}],98:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Keyframe"),l=e("https://www.apple.com/Model/AnimSystemModel.js"),c=function(e){function t(e,r){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.keyframeType=l.KeyframeTypes.CSSClass,a._triggerType=t.TRIGGER_TYPE_CSS_CLASS,a.cssClass="",a.friendlyName="",a.style={on:null,off:null},a.toggle=!1,a.isApplied=!1,a}return a(t,e),s(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var r in this.style.on)this.style.off[r]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var n=getComputedStyle(this.controller.element);this.isApplied=!0;for(var i in this.style.on)if(n[i]!==this.style.on[i]){this.isApplied=!1;break}}u.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new l.TargetValue(0,1,(!1))),this.keyframeType=l.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==o(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==o(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(e,t){}},{key:"onDOMRead",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(u);c.TRIGGER_TYPE_CSS_CLASS=0,c.TRIGGER_TYPE_STYLE_PROPERTY=1,c.DATA_ATTRIBUTE="data-anim-classname",t.exports=c},{"../Model/AnimSystemModel.js":100,"./Keyframe":97}],99:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function h(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:h(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=e("./Keyframe"),l=e("https://www.apple.com/Model/AnimSystemModel.js"),c=function(e){function t(e,r){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.keyframeType=l.KeyframeTypes.Event,a.isApplied=!1,a.hasDuration=!1,a.isCurrentlyInRange=!1,a}return a(t,e),o(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new l.TargetValue(0,1,(!1))),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=l.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,r=e>=this.start&&e<=this.end;if(t===r)return;return r&&!t?this._trigger(this.event+":enter"):t&&!r&&this._trigger(this.event+":exit"),void(this.isCurrentlyInRange=r)}!this.isApplied&&e>=this.start?(this._trigger(this.event),this.isApplied=!0):this.isApplied&&e<this.start&&(this._trigger(this.event+":reverse"),this.isApplied=!1)}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"updateAnimationConstraints",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateAnimationConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"reset",value:function(e){this.isApplied=!1,this.isCurrentlyInRange=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e)}},{key:"onDOMRead",value:function(e,t){}},{key:"reconcile",value:function(e,t){}},{key:"updateAnimatedValueConstraints",value:function(){}}]),t}(u);c.DATA_ATTRIBUTE="data-anim-event",t.exports=c},{"../Model/AnimSystemModel.js":100,"./Keyframe":97}],100:[function(e,t,r){"use strict";var n={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"GuiPosition-0"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",longName:"small",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",longName:"medium",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",longName:"xlarge",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",longName:"large",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<n.BREAKPOINTS.length;e++){var t=n.BREAKPOINTS[e],r=window.matchMedia(t.mediaQuery);if(r.matches)return t.name}},KeyframeDefaults:{ease:.1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","relativeTo","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TargetValue:function(e,t,r){this.epsilon=parseFloat(t),this.snapAtCreation=r,this.initialValue=e,this.target=e,this.current=e},Timeline:function(){this.local=0,this.localUnclamped=0},ViewableRange:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0},AnimInfo:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isGroup=r,this.group=e,this.controller=t,this.controllers=[]}};t.exports=n},{}],101:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function a(){n(this,a),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return e-=1,e*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.exports=new i},{}],102:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./AnimSystemModel"),o=function(e,t){return void 0===e||null===e?t:e},s=function(){function e(){n(this,e),this._metrics=new WeakMap}return i(e,[{key:"destroy",value:function(){this._metrics=null}},{key:"add",value:function(e){var t=this._metrics.get(e);if(t)return t;var r=new u(e);return this._metrics.set(e,r),this._refreshMetrics(e,r)}},{key:"get",value:function(e){return this._metrics.get(e)}},{key:"refreshCollection",value:function(e){var t=this;e.forEach(function(e){return t._refreshMetrics(e,null)})}},{key:"refreshMetrics",value:function(e){return this._refreshMetrics(e)}},{key:"_refreshMetrics",value:function(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=o(e.width,0),t.height=o(e.height,0),t.top=o(e.top,0),t.left=o(e.left,0),t.right=t.left+t.width,t.bottom=t.top+t.height,t;if(void 0===e.offsetWidth){var r=e.getBoundingClientRect();return t.width=r.width,t.height=r.height,t.top=a.pageMetrics.scrollY+r.top,t.left=a.pageMetrics.scrollX+r.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=a.pageMetrics.documentOffsetY,t.left=a.pageMetrics.documentOffsetX;for(var n=e;n;)t.top+=n.offsetTop,t.left+=n.offsetLeft,n=n.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),e}(),u=function(){function e(t){n(this,e),this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return i(e,[{key:"toString",value:function(){return"top:"+this.top+", bottom:"+this.bottom+", left:"+this.left+", right:"+this.right+", height:"+this.height+", width:"+this.width}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=s},{"./AnimSystemModel":100}],103:[function(e,t,r){"use strict";var n=e("./AnimSystemModel"),i=e("../Keyframes/Keyframe"),a=e("../Keyframes/KeyframeDiscreteEvent"),o=e("../Keyframes/KeyframeCSSClass"),s=function(e){for(var t in e){var r=e[t];if(n.KeyframeJSONReservedWords.indexOf(t)===-1&&Array.isArray(r))return!0}return!1};t.exports=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(s(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return o}if(s(e))return i;if(e.event)return a;throw"Could not determine tween type based on "+JSON.stringify(e)}},{"../Keyframes/Keyframe":97,"../Keyframes/KeyframeCSSClass":98,"../Keyframes/KeyframeDiscreteEvent":99,"./AnimSystemModel":100}],104:[function(e,t,r){"use strict";t.exports=function(){for(var e="",t=0;t<8;t++){var r=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&r|8:r).toString(16)}return e}},{}],105:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=1e-5,o=Math.abs,s=5,u=function(){function e(t,r,i,a){n(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(i-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*r,this.cp[4]=3*(a-r)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return i(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,r,n,i,u,l;for(n=e,l=0;l<s;l++){if(i=this.sampleCurveX(n)-e,o(i)<a)return n;if(u=this.sampleCurveDerivativeX(n),o(u)<a)break;n-=i/u}if(t=0,r=1,n=e,n<t)return t;if(n>r)return r;for(;t<r;){if(i=this.sampleCurveX(n),o(i-e)<a)return n;e>i?t=n:r=n,n=.5*(r-t)+t}return n}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),l=/\d*\.?\d+/g;u.fromCSSString=function(e){var t=e.match(l);if(4!==t.length)throw"UnitBezier could not convert "+e+" to cubic-bezier";var r=t.map(Number),n=new u(r[0],r[1],r[2],r[3]);return n.solve.bind(n)},t.exports=u},{}],106:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);
}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../Model/AnimSystemModel"),o=e("./Operations"),s=/([-|+])?(\d+\.?\d*)(px|vh|vw|pw|ph|%w|%h|rw|rh|%)?|([-+*\/])/g,u=/^[-+]?(?:[0-9]{0,30}\.)?[0-9]{1,30}(?:[Ee][-+]?[1-2]?[0-9])?$/g,l=function(){function e(t){n(this,e),this.group=t}return i(e,[{key:"parse",value:function(e,t){if(Array.isArray(t))return this.parseArray(e,t);throw new Error("Keyframe value `"+t+"` is not supported. Only arrays in the form of [start,end] are currently supported")}},{key:"parseArray",value:function(e,t){var r=this.parseExpression(e,t[0]),n=this.parseExpression(e,t[1]);return[r,n]}},{key:"parseExpression",value:function(e,t){if(null===t)return 0;if("number"==typeof t)return t;for(var r=5,n=void 0;(n=t.indexOf("("))!==-1&&--r>0;){var i=this.captureParenthesis(t,n),a=this.parseExpression(e,i);t=t.replace("("+i+")",a)}for(var u=void 0,l=[];null!==(u=s.exec(t));)if(u.index===s.lastIndex&&s.lastIndex++,u[4])l.push(o.GetOpCode(u[4]));else{var c=u[1],h=parseFloat(u[2]),f=u[3];"-"===c&&(h*=-1);var d=this.parseSplitUnit(e,h,f);l.push(d)}var m=l.length;if(3===m&&"function"==typeof l[1])return l[1](l[0],l[2]);for(var p=0;p<m;p++)if("function"==typeof l[p]&&1===l[p].priority){var v=l[p-1],y=l[p+1],g=l[p](v,y);l[p-1]=null,l[p+0]=null,l[p+1]=g,p+=1}for(var _=0;null==l[_]&&_<m;)_+=1;var b=l[_],w=null,E=null;for(_+=1;_<m;_++)null!==l[_]?l[_]instanceof Function?w=l[_]:(null===E&&(E=l[_]),null!==E&&(w=w||o.add,b=w(b,E),w=null,E=null)):_+=1;return b}},{key:"parseSplitUnit",value:function(e,t,r){if("undefined"==typeof r)return parseFloat(t);switch(r){case"vh":return.01*t*a.pageMetrics.windowHeight;case"%":return.01*t*e.controller.elementMetrics.height;case"px":return t;case"rh":return.01*t*this.group.metrics.get(e.relativeTo).height;case"vw":return.01*t*a.pageMetrics.windowWidth;case"rw":return.01*t*this.group.metrics.get(e.relativeTo).width;case"%w":return.01*t*e.controller.elementMetrics.width;case"%h":return.01*t*e.controller.elementMetrics.height;case"pw":return.01*t*e.controller.parentElementMetrics.width;case"ph":return.01*t*e.controller.parentElementMetrics.height;default:throw new Error("ExpressionParser: no strategy found for unit `"+r+"` only `vh, vw, %, ph, pw` are supported")}}},{key:"captureParenthesis",value:function(e,t){for(var r="",n=0,i=!1,a=e.length,o=t;o<a;o++)if("("===e[o]?(n+=1,i&&(r+=e[o]),i=!0):")"===e[o]?(n-=1,0!==n&&(r+=e[o])):i&&(r+=e[o]),i&&0===n)return r}},{key:"isUnitlessNumber",value:function(e){return String(e).match(u)}},{key:"destroy",value:function(){this.group=null}},{key:"logParts",value:function(e){console.log(e.reduce(function(e,t){return"function"==typeof t?e+t.friendlyName+" ":e+(t+" ")},""))}}]),e}();t.exports=l},{"../Model/AnimSystemModel":100,"./Operations":107}],107:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function a(){n(this,a),this.add=function(e,t){return e+t},this.sub=function(e,t){return e-t},this.mul=function(e,t){return e*t},this.div=function(e,t){return e/t},this.add.friendlyName="add",this.sub.friendlyName="sub",this.mul.friendlyName="mul",this.div.friendlyName="div",this.add.priority=0,this.sub.priority=0,this.mul.priority=1,this.div.priority=1,this.GetOpCode=function(e){switch(e){case"-":return this.sub;case"+":return this.add;case"*":return this.mul;case"/":return this.div;default:throw new Error('AnimSystem.parsing.Operations - op code "'+e+"\" was found. Only '+ - * /' are supported. Check expression for typos/spacing issues")}}};t.exports=new i},{}],108:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(this,e),this.group=t,this.groupIsTimeBased=r}return i(e,[{key:"parse",value:function(e,t){if("number"==typeof t)return t;var r=this.groupIsTimeBased?0:this.group.metrics.get(e.relativeTo).top,n=this.group.expressionParser.parseExpression(e,t),i=n+r;return this.group.convertScrollPositionToTValue(i)}},{key:"destroy",value:function(){this.group=null}}]),e}();t.exports=a},{}],109:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function g(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:g(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=e("@marcom/sm-math-utils"),c=e("./utils/arrayToObject"),h=e("./Model/AnimSystemModel"),f=e("./Model/ElementMetricsLookup"),d=e("./Parsing/ExpressionParser"),m=e("./Parsing/TimeParser"),p=e("./KeyframeController"),v={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},y=function(e){function t(e,r){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.anim=r,a.element=e,a.name=a.name||e.getAttribute("data-anim-scroll-group"),a.isEnabled=!0,a.timelines=new h.Timeline,a.metrics=new f,a.metrics.add(a.element),a.expressionParser=new d(a),a.timeParser=new m(a),a.boundsMin=0,a.boundsMax=0,a.lastPosition=0,a.timelineUpdateRequired=!1,a._keyframesDirty=!1,a.viewableRange=a.createViewableRange(),a.keyframeControllers=[],a.updateProgress(a.getPosition()),a.onDOMRead=a.onDOMRead.bind(a),a.onDOMWrite=a.onDOMWrite.bind(a),a.gui=null,a.finalizeInit(),a}return a(t,e),o(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new h.AnimInfo(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null,this.timeParser.destroy(),this.timeParser=null;for(var e=0,r=this.keyframeControllers.length;e<r;e++)this.keyframeControllers[e].destroy();this.timelines=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(e){var t=this;if(this.keyframeControllers.includes(e)){var r=e._allKeyframes;e._allKeyframes=[],this.keyframesDirty=!0,v.draw(function(){var n=t.keyframeControllers.indexOf(e);n!==-1&&(t.keyframeControllers.splice(n,1),e.onDOMWrite(),r.forEach(function(e){return e.destroy()}),e.destroy(),t.gui&&t.gui.create())},!0)}}},{key:"remove",value:function(){this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(e){this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new v.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite)}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.timelines)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite(this.timelines);this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(e,t){var r=this.getControllerForTarget(e);return null===r&&(r=new p(this,e),this.keyframeControllers.push(r)),this.keyframesDirty=!0,r.addKeyframe(t)}},{key:"forceUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.recalculateActiveKeyframes,r=void 0!==t&&t,n=e.waitForNextUpdate,i=void 0===n||n;this.isEnabled&&(r&&this.determineActiveKeyframes(null),this.refreshActiveMetrics(),this.viewableRange=this.createViewableRange(),this.timelineUpdateRequired=!0,i?this.keyframesDirty=!0:this.onKeyframesDirty())}},{key:"onKeyframesDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preventOnScroll,r=void 0!==t&&t;this.determineActiveKeyframes(),this.keyframesDirty=!1;for(var n=0,i=this.keyframeControllers.length;n<i;n++)this.keyframeControllers[n].updateAnimationConstraints();this.updateProgress(this.getPosition()),this.updateBounds(),r||this._onScroll(),this.gui&&this.gui.create()}},{key:"refreshActiveMetrics",value:function(){var e=new Set;e.add(this.element),this.keyframeControllers.forEach(function(t){e.add(t.element),t._parentElementMetrics&&e.add(t.element.parentElement),t._activeKeyframes.forEach(function(t){return e.add(t.relativeTo)})}),this.metrics.refreshCollection(e)}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||c(Array.from(document.documentElement.classList));for(var t=0,r=this.keyframeControllers.length;t<r;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,r=this.keyframeControllers.length;t<r;t++)this.keyframeControllers[t].getBounds(e);var n=this.convertTValueToScrollPosition(e.min),i=this.convertTValueToScrollPosition(e.max);i-n<h.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(n-.5*h.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(i+.5*h.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}},{key:"createViewableRange",value:function(){return new h.ViewableRange(this.metrics.get(this.element),h.pageMetrics.windowHeight)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a)):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.timelines.local);this.trigger(h.EVENTS.ON_TIMELINE_UPDATE,this.timelines.local),this.timelineUpdateRequired=!1,this.lastPosition!==this.timelines.local&&(this.lastPosition<=this.boundsMin&&this.timelines.localUnclamped>this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START,this):this.lastPosition>=this.boundsMin&&this.timelines.localUnclamped<this.boundsMin?this.trigger(h.EVENTS.ON_TIMELINE_START+":reverse",this):this.lastPosition<=this.boundsMax&&this.timelines.localUnclamped>=this.boundsMax?this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE,this):this.lastPosition>=this.boundsMax&&this.timelines.localUnclamped<this.boundsMax&&this.trigger(h.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.timelines)}},{key:"_onScroll",value:function(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);var t=this.lastPosition===this.boundsMin||this.lastPosition===this.boundsMax,r=this.timelines.localUnclamped===this.boundsMin||this.timelines.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&r&&this.lastPosition===e)return void(this.timelines.local=this.timelines.localUnclamped);if(this.timelineUpdateRequired||this.timelines.localUnclamped>this.boundsMin&&this.timelines.localUnclamped<this.boundsMax)return this.timelines.local=l.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped);var n=this.lastPosition>this.boundsMin&&this.lastPosition<this.boundsMax,i=this.timelines.localUnclamped<=this.boundsMin||this.timelines.localUnclamped>=this.boundsMax;return n&&i?(this.timelines.local=l.clamp(this.timelines.localUnclamped,this.boundsMin,this.boundsMax),this.performTimelineDispatch(),this.requestDOMChange(),void(this.lastPosition=this.timelines.localUnclamped)):void(null!==this.gui&&this.gui.onScrollUpdate(this.timelines))}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?l.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?l.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return h.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;for(var t=e._animInfo.controllers,r=0,n=t.length;r<n;r++)if(t[r].group===this)return t[r];return null}},{key:"trigger",value:function(e,t){if("undefined"!=typeof this._events[e])for(var r=this._events[e].length-1;r>=0;r--)void 0!==t?this._events[e][r](t):this._events[e][r]()}},{key:"keyframesDirty",set:function(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}},{key:"keyFrames",get:function(){return this.viewableRange}}]),t}(u);t.exports=y},{"./KeyframeController":96,"./Model/AnimSystemModel":100,"./Model/ElementMetricsLookup":102,"./Parsing/ExpressionParser":106,"./Parsing/TimeParser":108,"./utils/arrayToObject":111,"@marcom/ac-event-emitter-micro":36,"@marcom/ac-raf-emitter/RAFEmitter":78,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90,"@marcom/sm-math-utils":120}],110:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=e("./ScrollGroup"),l=e("@marcom/sm-math-utils"),c=0,h={create:e("@marcom/ac-raf-emitter/RAFEmitter")},f=function(e){function t(e,r){n(this,t),e||(e=document.createElement("div"),e.className="TimeGroup-"+c++);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.name=a.name||e.getAttribute("data-anim-time-group"),a.timeParser.groupIsTimeBased=!0,a._isPaused=!0,a._repeats=0,a._isReversed=!1,a._timeScale=1,a}return a(t,e),o(t,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(e,t){if(void 0===e)return 0===this.boundsMax?0:this.timelines.local/this.boundsMax;var r=e*this.boundsMax;this.timelineUpdateRequired=t||!1,this._onScroll(r)}},{key:"time",value:function(e,t){return void 0===e?this.timelines.local:(e=l.clamp(e,this.boundsMin,this.boundsMax),this.timelineUpdateRequired=t||!1,void this._onScroll(e))}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e,!0),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e,!0),this._playheadEmitter.run()}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse()):(this.progress(0),this.play())}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(e){if(!this._isPaused){var r=l.clamp(e.delta/1e3,0,.5);this._isReversed&&(r=-r);var n=this.time(),i=n+r*this._timeScale;if(this._repeats===t.REPEAT_FOREVER||this._repeats>0){var a=!1;!this._isReversed&&i>this.boundsMax?(i-=this.boundsMax,a=!0):this._isReversed&&i<0&&(i=this.boundsMax+i,a=!0),a&&(this._repeats=this._repeats===t.REPEAT_FOREVER?t.REPEAT_FOREVER:this._repeats-1)}this.time(i);var o=!this._isReversed&&this.timelines.local!==this.duration,s=this._isReversed&&0!==this.timelines.local;(o||s)&&this._playheadEmitter.run()}}},{key:"updateProgress",value:function(e){return this.hasDuration()?void(this.timelines.localUnclamped=e):void(this.timelines.local=this.timelines.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,r=this.keyframeControllers.length;t<r;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(e){this._playheadEmitter=new h.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){return void 0===e?this._repeats:(this._repeats=e,this)}},{key:"reversed",value:function(e){return void 0===e?this._isReversed:(this._isReversed=e,this)}},{key:"getPosition",value:function(){return this.timelines.local}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.boundsMax>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.keyframesDirty&&this.onKeyframesDirty({preventOnScroll:!0}),this.boundsMax}}]),t}(u);f.REPEAT_FOREVER=-1,t.exports=f},{"./ScrollGroup":109,"@marcom/ac-raf-emitter/RAFEmitter":78,"@marcom/sm-math-utils":120}],111:[function(e,t,r){"use strict";var n=function(e){return e.reduce(function(e,t){return e[t]=t,e},{})};t.exports=n},{}],112:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l={create:e("@marcom/ac-raf-emitter/RAFEmitter"),update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},c=function(){},h=0,f=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.el=e.el,r.gum=e.gum,r._keyframeController=null,r}return a(t,e),o(t,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(e){var t=e.el||this.el;return this.anim.addKeyframe(t,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+h++;var t=void 0!==e.end&&e.end!==e.start,r=this.addKeyframe(e);return t?(this._addCallbackIfNotNull(r,e.event+":enter",e.onEnter),this._addCallbackIfNotNull(r,e.event+":exit",e.onExit)):(this._addCallbackIfNotNull(r,e.event,e.onEvent),this._addCallbackIfNotNull(r,e.event+":reverse",e.onEventReverse)),r}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(!t.every(function(t){return e.hasOwnProperty(t)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));var r=new l.create;r.on("update",e.onUpdate||c),r.on("draw",e.onDraw||c),r.on("draw",function(){return r.run()});var n=e.onEnter,i=e.onExit;return e.onEnter=function(){r.run(),n?n():0},e.onExit=function(){r.cancel(),i?i():0},this.addDiscreteEvent(e)}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+h++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){if(this.onComponentWillAppear||this.onComponentWillDisappear){this.onComponentWillAppear=this.onComponentWillAppear?this.onComponentWillAppear.bind(this):void 0,this.onComponentWillDisappear=this.onComponentWillDisappear?this.onComponentWillDisappear.bind(this):void 0;var e={start:"-100vh - 1px",end:"100% + 1px",event:"_appear"+h++};e.onEnter=this.onComponentWillAppear,e.onExit=this.onComponentWillDisappear,this.addDiscreteEvent(e)}}},{key:"_addCallbackIfNotNull",value:function(e,t,r){return!!r&&(e.controller.on(t,r),!0)}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}}]),t}(u);t.exports=f},{"@marcom/ac-event-emitter-micro":36,"@marcom/ac-raf-emitter/RAFEmitter":78,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90}],113:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=e("@marcom/delayed-initializer"),l=e("@marcom/anim-system"),c=e("@marcom/anim-system/Model/AnimSystemModel"),h=e("./ComponentMap"),f={},d=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.el=e,r.anim=l,r.components=[],r.el.getAttribute("data-anim-scroll-group")||r.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),l.on(c.EVENTS.ON_DOM_GROUPS_CREATED,function(e){r.componentsInitialized=!1,r.initComponents(),r.setupEvents()}),l.on(c.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){r.components.forEach(function(e){return e.mounted()}),r.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)}),u.add(function(){return l.initialize()}),r}return a(t,e),o(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("[data-component-list]")&&e.push(this.el);for(var t=0;t<e.length;t++)for(var r=e[t],n=r.getAttribute("data-component-list"),i=n.split(" "),a=0,o=i.length;a<o;a++){var s=i[a];""!==s&&" "!==s&&this.addComponent({el:r,componentName:s})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),l.on(c.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),l.on(c.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),l.on(c.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var r=e.el,n=e.componentName,i=e.data;if(!h.hasOwnProperty(n))throw"BubbleGum::addComponent could not add component to"+r.className+" no component type '"+n+"'found!";var a=h[n];if(!t.componentIsSupported(a,n))return void 0===f[n]&&(console.log("BubbleGum::addComponent unsupported component '"+n+"'. Reason: '"+n+".IS_SUPPORTED' returned false"),f[n]=!0),null;var o=r.dataset.componentList||"";o.includes(n)||(r.dataset.componentList=o.split(" ").concat(n).join(" "));var s=new a({el:r,data:i,gum:this,pageMetrics:c.pageMetrics});return this.components.push(s),this.componentsInitialized&&s.mounted(),s}},{key:"removeComponent",value:function(e){var t=this.components.indexOf(e);t!==-1&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.replace(e.constructor.name,""),e.destroy())}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,r="[data-component-list*="+e+"]",n=t.matches(r)?t:t.querySelector(r);return n?this.components.find(function(t){return t instanceof h[e]&&t.el===n}):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,r="[data-component-list*="+e+"]",n=t.matches(r)?[t]:Array.from(t.querySelectorAll(r));return this.components.filter(function(t){return t instanceof h[e]&&n.includes(t.el)})}},{key:"getComponentsForElement",value:function(e){return this.components.filter(function(t){return t.el===e})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(e){return e.onResizeImmediate(c.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(e){return e.onResizeDebounced(c.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(e){return e.onBreakpointChange(c.pageMetrics)})}}],[{key:"componentIsSupported",value:function(e,t){var r=e.IS_SUPPORTED;if(void 0===r)return!0;if("function"!=typeof r)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var n=e.IS_SUPPORTED();return void 0===n?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):n}}]),t}(s);d.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=d},{"./ComponentMap":114,"@marcom/ac-event-emitter-micro":36,"@marcom/anim-system":95,"@marcom/anim-system/Model/AnimSystemModel":100,"@marcom/delayed-initializer":116}],114:[function(e,t,r){"use strict";t.exports={BaseComponent:e("./BaseComponent")}},{"./BaseComponent":112}],115:[function(e,t,r){"use strict";var n={create:e("gl-mat4/create"),invert:e("gl-mat4/invert"),clone:e("gl-mat4/clone"),transpose:e("gl-mat4/transpose")},i={create:e("gl-vec3/create"),dot:e("gl-vec3/dot"),normalize:e("gl-vec3/normalize"),length:e("gl-vec3/length"),cross:e("gl-vec3/cross"),fromValues:e("gl-vec3/fromValues")},a={create:e("gl-vec4/create"),transformMat4:e("gl-vec4/transformMat4"),fromValues:e("gl-vec4/fromValues")},o=(Math.PI/180,180/Math.PI),s=0,u=1,l=3,c=4,h=5,f=7,d=11,m=12,p=13,v=15,y=function(e,t){t=t||!1;for(var r=n.clone(e),s=i.create(),u=i.create(),c=i.create(),h=a.create(),m=a.create(),p=(i.create(),0);p<16;p++)r[p]/=r[v];var y=n.clone(r);y[l]=0,y[f]=0,y[d]=0,y[v]=1;var w=(r[3],r[7],r[11],r[12]),E=r[13],x=r[14],T=(r[15],a.create());if(b(r[l])&&b(r[f])&&b(r[d]))h=a.fromValues(0,0,0,1);else{T[0]=r[l],T[1]=r[f],T[2]=r[d],T[3]=r[v];var A=n.invert(n.create(),y),S=n.transpose(n.create(),A);h=a.transformMat4(h,T,S)}s[0]=w,s[1]=E,s[2]=x;var k=[i.create(),i.create(),i.create()];k[0][0]=r[0],k[0][1]=r[1],k[0][2]=r[2],k[1][0]=r[4],k[1][1]=r[5],k[1][2]=r[6],k[2][0]=r[8],k[2][1]=r[9],k[2][2]=r[10],u[0]=i.length(k[0]),i.normalize(k[0],k[0]),c[0]=i.dot(k[0],k[1]),k[1]=g(k[1],k[0],1,-c[0]),u[1]=i.length(k[1]),i.normalize(k[1],k[1]),c[0]/=u[1],c[1]=i.dot(k[0],k[2]),k[2]=g(k[2],k[0],1,-c[1]),c[2]=i.dot(k[1],k[2]),k[2]=g(k[2],k[1],1,-c[2]),u[2]=i.length(k[2]),i.normalize(k[2],k[2]),c[1]/=u[2],c[2]/=u[2];var O=i.cross(i.create(),k[1],k[2]);if(i.dot(k[0],O)<0)for(p=0;p<3;p++)u[p]*=-1,k[p][0]*=-1,k[p][1]*=-1,k[p][2]*=-1;m[0]=.5*Math.sqrt(Math.max(1+k[0][0]-k[1][1]-k[2][2],0)),m[1]=.5*Math.sqrt(Math.max(1-k[0][0]+k[1][1]-k[2][2],0)),m[2]=.5*Math.sqrt(Math.max(1-k[0][0]-k[1][1]+k[2][2],0)),m[3]=.5*Math.sqrt(Math.max(1+k[0][0]+k[1][1]+k[2][2],0)),k[2][1]>k[1][2]&&(m[0]=-m[0]),k[0][2]>k[2][0]&&(m[1]=-m[1]),k[1][0]>k[0][1]&&(m[2]=-m[2]);var P=a.fromValues(m[0],m[1],m[2],2*Math.acos(m[3])),M=_(m);return t&&(c[0]=Math.round(c[0]*o*100)/100,c[1]=Math.round(c[1]*o*100)/100,c[2]=Math.round(c[2]*o*100)/100,M[0]=Math.round(M[0]*o*100)/100,M[1]=Math.round(M[1]*o*100)/100,M[2]=Math.round(M[2]*o*100)/100,P[3]=Math.round(P[3]*o*100)/100),{translation:s,scale:u,skew:c,perspective:h,quaternion:m,eulerRotation:M,axisAngle:P}},g=function(e,t,r,n){var a=i.create();return a[0]=r*e[0]+n*t[0],a[1]=r*e[1]+n*t[1],a[2]=r*e[2]+n*t[2],a},_=function(e){var t,r,n,a=e[3]*e[3],o=e[0]*e[0],s=e[1]*e[1],u=e[2]*e[2],l=o+s+u+a,c=e[0]*e[1]+e[2]*e[3];return c>.499*l?(r=2*Math.atan2(e[0],e[3]),n=Math.PI/2,t=0,i.fromValues(t,r,n)):c<-.499*l?(r=-2*Math.atan2(e[0],e[3]),
n=-Math.PI/2,t=0,i.fromValues(t,r,n)):(r=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],o-s-u+a),n=Math.asin(2*c/l),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-o+s-u+a),i.fromValues(t,r,n))},b=function(e){return Math.abs(e)<1e-4},w=function(e){var t=String(getComputedStyle(e).transform).trim(),r=n.create();if("none"===t||""===t)return r;var i,a,o=t.slice(0,t.indexOf("("));if("matrix3d"===o)for(i=t.slice(9,-1).split(","),a=0;a<i.length;a++)r[a]=parseFloat(i[a]);else{if("matrix"!==o)throw new TypeError("Invalid Matrix Value");for(i=t.slice(7,-1).split(","),a=i.length;a--;)i[a]=parseFloat(i[a]);r[s]=i[0],r[u]=i[1],r[m]=i[4],r[c]=i[2],r[h]=i[3],r[p]=i[5]}return r};t.exports=function(e,t){var r=w(e);return y(r,t)}},{"gl-mat4/clone":135,"gl-mat4/create":136,"gl-mat4/invert":138,"gl-mat4/transpose":139,"gl-vec3/create":148,"gl-vec3/cross":149,"gl-vec3/dot":150,"gl-vec3/fromValues":151,"gl-vec3/length":152,"gl-vec3/normalize":153,"gl-vec4/create":154,"gl-vec4/fromValues":155,"gl-vec4/transformMat4":156}],116:[function(e,t,r){"use strict";var n=!1,i=!1,a=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(i&&e(),a.push(e),!n){n=!0;var r=document.documentElement.scrollHeight,o=0,s=function u(){var e=document.documentElement.scrollHeight;if(r!==e)o=0;else if(o++,o>=t.NUMBER_OF_FRAMES_TO_WAIT)return void a.forEach(function(e){return e()});r=e,requestAnimationFrame(u)};requestAnimationFrame(s)}}}},{}],117:[function(e,t,r){"use strict";function n(e){for(var t=6*e,r=new Uint16Array(t),n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}var i=e("gl-aliased-vao"),a=e("gl-buffer");t.exports.floatsPerVertex=7,t.exports.mixins={create:function(e){e=e||{},this.clear(),this.vao&&this.dispose();var r="number"==typeof e.capacity?e.capacity:100;if(r>10922)throw new Error("Can't have more than 10922 quads per batch: "+r);this._capacity=r;var o=4*r*t.exports.floatsPerVertex;this.vertices=new Float32Array(o),this.indices=n(r);var s=this.gl,u=e.dynamic?s.DYNAMIC_DRAW:s.STATIC_DRAW;this.vertexBuffer=a(s,this.vertices,s.ARRAY_BUFFER,u),this.indexBuffer=a(s,this.indices,s.ELEMENT_ARRAY_BUFFER,s.STATIC_DRAW);var l=28;return this.vao=i(s,[{name:"position",buffer:this.vertexBuffer,size:4,stride:l},{name:"texcoord0",buffer:this.vertexBuffer,size:2,offset:16,stride:l},{name:"color",buffer:this.vertexBuffer,size:4,stride:l,offset:32,type:s.UNSIGNED_BYTE,normalized:!0}],this.indexBuffer),this},ensureCapacity:function(e){return this.capacity<e&&this.create({capacity:e}),this}}},{"gl-aliased-vao":130,"gl-buffer":134}],118:[function(e,t,r){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t);if(!e)throw new Error("must specify gl context");this.gl=e,t=t||{},this._bound=!1,this.idx=0,this.transform=null,this._defaultTexture=t.defaultTexture||l(e),this._ownsDefault=!t.defaultTexture,this._lastTexture=this._defaultTexture,this._texture=this._defaultTexture,this.texture=null,this.mode="number"==typeof t.mode?t.mode:e.TRIANGLES,this.premultiplied=t.premultiplied||!1,this._dirty=!0,this.create(t),this.defaults()}function i(e,t,r){return e[0]=t,e[1]=r,e}function a(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}var o=e("./pack-rgba-float"),s=e("mixes"),u=e("premultiplied-rgba"),l=e("gl-white-texture"),c=e("./common").floatsPerVertex,h=[0,0,0,0],f=[0,0],d=[0,0,0,0],m=[0,0,0,0],p=[0,0,0,0];s(n,e("./common").mixins),s(n,{capacity:{get:function(){return this._capacity}},texture:{get:function(){return this._texture},set:function(e){this._texture=e||this._defaultTexture}},dispose:function(){this.vertexBuffer&&this.vertexBuffer.dispose(),this.indexBuffer&&this.indexBuffer.dispose(),this.vao&&this.vao.dispose(),this._ownsDefault&&this._defaultTexture.dispose()},clear:function(){return this.idx=0,this},bind:function(e){e.bind(),this.vao.bind(e),this._bound=!0},unbind:function(){this.vao.unbind(),this._bound=!1},defaults:function(){return this.position=a(h,0,0,0,0),this.texcoord=a(d,0,0,1,1),this.color=a(m,1,1,1,1),this.shape=i(f,0,0),this},push:function(e){if(e&&(this.texture=e.texture,this.position=e.position||a(h,0,0,0,0),this.texcoord=e.texcoord||a(d,0,0,1,1),this.color=e.color||a(m,1,1,1,1),this.shape=e.shape||i(f,0,0)),this.texture!==this._lastTexture)this._bound&&this.flush(),this._lastTexture=this.texture;else if(this.idx===this.vertices.length){if(!this._bound)return this;this.flush()}this._dirty=!0;var t=this.premultiplied?u(this.color,p):this.color,r=o(t),n=this.texcoord[0],s=this.texcoord[1],l=this.texcoord[2],c=this.texcoord[3],v=this.position[0],y=this.position[1],g=this.position[2],_=this.position[3],b=this.shape[0],w=this.shape[1];return this._vert(v,y,g,_,n,s,r),this._vert(v+b,y,g,_,l,s,r),this._vert(v+b,y+w,g,_,l,c,r),this._vert(v,y+w,g,_,n,c,r),this},_vert:function(e,t,r,n,i,a,o){var s=this.idx,u=this.vertices,l=this.transform;if(l){var c=e,h=t;e=l[0]*c+l[4]*h+l[12],t=l[1]*c+l[5]*h+l[13]}u[s++]=e,u[s++]=t,u[s++]=r,u[s++]=n,u[s++]=i,u[s++]=a,u[s++]=o,this.idx=s},flush:function(){return this.draw(),this.clear()},draw:function(){if(0===this.idx||!this._bound)return this;this.gl;if(this._dirty){var e=this.vertices.subarray(0,this.idx);this.vertexBuffer.update(e,0),this._dirty=!1}this._lastTexture&&this._lastTexture.bind(),this._lastTexture=this.texture;var t=this.idx/(4*c);return t>0&&this.vao.draw(this.mode,6*t,0),this}}),t.exports=n},{"./common":117,"./pack-rgba-float":119,"gl-white-texture":157,mixes:161,"premultiplied-rgba":165}],119:[function(e,t,r){"use strict";var n=e("number-util").colorToFloat;t.exports=function(e){return n(~~(255*e[0]),~~(255*e[1]),~~(255*e[2]),~~(255*e[3]))}},{"number-util":164}],120:[function(e,t,r){"use strict";t.exports={lerp:function(e,t,r){return t+(r-t)*e},map:function(e,t,r,n,i){return n+(i-n)*(e-t)/(r-t)},mapClamp:function(e,t,r,n,i){var a=n+(i-n)*(e-t)/(r-t);return Math.max(n,Math.min(i,a))},norm:function(e,t,r){return(e-t)/(r-t)},clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],121:[function(e,t,r){"use strict";t.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}}},{}],122:[function(e,t,r){"use strict";t.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Opera")===-1},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&e.ua.indexOf("Android")===-1}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]}},{}],123:[function(e,t,r){"use strict";function n(e){return new RegExp(e+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function i(e,t){if("function"==typeof e.parseVersion)return e.parseVersion(t);var r=e.version||e.userAgent;"string"==typeof r&&(r=[r]);for(var i,a=r.length,o=0;o<a;o++)if(i=t.match(n(r[o])),i&&i.length>1)return i[1].replace(/_/g,".");return!1}function a(e,t,r){for(var n,a,o=e.length,s=0;s<o;s++)if("function"==typeof e[s].test?e[s].test(r)===!0&&(n=e[s].name):r.ua.indexOf(e[s].userAgent)>-1&&(n=e[s].name),n){if(t[n]=!0,a=i(e[s],r.ua),"string"==typeof a){var u=a.split(".");t.version.string=a,u&&u.length>0&&(t.version.major=parseInt(u[0]||0),t.version.minor=parseInt(u[1]||0),t.version.patch=parseInt(u[2]||0))}else"edge"===n&&(t.version.string="12.0.0",t.version.major="12",t.version.minor="0",t.version.patch="0");return"function"==typeof e[s].parseDocumentMode&&(t.version.documentMode=e[s].parseDocumentMode()),t}return t}function o(e){var t={};return t.browser=a(u.browser,s.browser,e),t.os=a(u.os,s.os,e),t}var s=e("./defaults"),u=e("./dictionary");t.exports=o},{"./defaults":121,"./dictionary":122}],124:[function(e,t,r){"use strict";var n={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};t.exports=e("./parseUserAgent")(n)},{"./parseUserAgent":123}],125:[function(e,t,r){"use strict";"use restrict";function n(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(e){return(e>0)-(e<0)},r.abs=function(e){var t=e>>i-1;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var a=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(a),r.reverse=function(e){return a[255&e]<<24|a[e>>>8&255]<<16|a[e>>>16&255]<<8|a[e>>>24&255]},r.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},r.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},r.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},r.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],126:[function(e,t,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new n;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,a(t)}var a=e("https://www.apple.com/apple-arcade/lib/thunk.js");t.exports=i},{"./lib/thunk.js":128}],127:[function(e,t,r){"use strict";function n(e,t,r){var n,i,a=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],l=[],c=0,h=0;for(n=0;n<a;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<o;++i)for(n=0;n<a;++n)h=c,c=e[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",h,"*t",i,"p",h,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=a-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<a;++n){for(h=c,c=e[n],i=0;i<o;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",h,"]-=s",h].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function i(e,t,r,i){for(var a=t.length,o=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<o;++c)l.push(["var offset",c,"=p",c].join(""));for(var c=e;c<a;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(var c=0;c<o;++c){for(var h=["offset"+c],f=e;f<a;++f)h.push(["j",f,"*t",c,"p",t[f]].join(""));l.push(["p",c,"=(",h.join("+"),")"].join(""))}l.push(n(t,r,i));for(var c=e;c<a;++c)l.push("}");return l.join("\n")}function a(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function o(e,t,r){for(var n=e.body,i=[],a=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var h=t.offsetArgIndex.indexOf(o),f=t.offsetArgs[h];c=f.array,l="+q"+h;case"array":l="p"+c+l;var d="l"+o,m="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(i.push(["var ",d,"=",m,".get(",l,")"].join("")),n=n.replace(u,d),a.push([m,".set(",l,",",d,")"].join(""))):n=n.replace(u,[m,".get(",l,")"].join("")):n=n.replace(u,[m,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",d,"=",m,".get(",l,")"].join("")),n=n.replace(u,d),s.lvalue&&a.push([m,".set(",l,",",d,")"].join(""))):(i.push(["var ",d,"=",m,"[",l,"]"].join("")),n=n.replace(u,d),s.lvalue&&a.push([m,"[",l,"]=",d].join("")));else{for(var p=[s.name],v=[l],y=0;y<Math.abs(t.arrayBlockIndices[c]);y++)p.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(y+1)+"*t"+c+"b"+y);if(u=new RegExp(p.join(""),"g"),l=v.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[m,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(o));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,a.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+a:t[n]=i.charAt(0)+a,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function u(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,u=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),h=0;h<e.arrayArgs.length;++h)c[h]=t[2*h],u[h]=t[2*h+1];for(var f=[],d=[],m=[],p=[],v=[],h=0;h<e.arrayArgs.length;++h){e.arrayBlockIndices[h]<0?(m.push(0),p.push(r),f.push(r),d.push(r+e.arrayBlockIndices[h])):(m.push(e.arrayBlockIndices[h]),p.push(e.arrayBlockIndices[h]+r),f.push(0),d.push(e.arrayBlockIndices[h]));for(var y=[],g=0;g<u[h].length;g++)m[h]<=u[h][g]&&u[h][g]<p[h]&&y.push(u[h][g]-m[h]);v.push(y)}for(var _=["SS"],b=["'use strict'"],w=[],g=0;g<r;++g)w.push(["s",g,"=SS[",g,"]"].join(""));for(var h=0;h<e.arrayArgs.length;++h){_.push("a"+h),_.push("t"+h),_.push("p"+h);for(var g=0;g<r;++g)w.push(["t",h,"p",g,"=t",h,"[",m[h]+g,"]"].join(""));for(var g=0;g<Math.abs(e.arrayBlockIndices[h]);++g)w.push(["t",h,"b",g,"=t",h,"[",f[h]+g,"]"].join(""))}for(var h=0;h<e.scalarArgs.length;++h)_.push("Y"+h);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var E=new Array(r),h=0;h<r;++h)E[h]="0";w.push(["index=[",E.join(","),"]"].join(""))}for(var h=0;h<e.offsetArgs.length;++h){for(var x=e.offsetArgs[h],T=[],g=0;g<x.offset.length;++g)0!==x.offset[g]&&(1===x.offset[g]?T.push(["t",x.array,"p",g].join("")):T.push([x.offset[g],"*t",x.array,"p",g].join("")));0===T.length?w.push("q"+h+"=0"):w.push(["q",h,"=",T.join("+")].join(""))}var A=l([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(A),w.length>0&&b.push("var "+w.join(","));for(var h=0;h<e.arrayArgs.length;++h)b.push("p"+h+"|=0");e.pre.body.length>3&&b.push(o(e.pre,e,c));var S=o(e.body,e,c),k=a(v);k<r?b.push(i(k,v[0],e,S)):b.push(n(v[0],e,S)),e.post.body.length>3&&b.push(o(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------");var O=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",k,s(c)].join(""),P=new Function(["function ",O,"(",_.join(","),"){",b.join("\n"),"} return ",O].join(""));return P()}var l=e("uniq");t.exports=u},{uniq:167}],128:[function(e,t,r){"use strict";function n(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var h=e.arrayArgs[c];r.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),a.push("t"+h),a.push("r"+h),o.push("t"+h),o.push("r"+h+".join()"),s.push("array"+h+".data"),s.push("array"+h+".stride"),s.push("array"+h+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var f=new Function("compile",t.join("\n"));return f(i.bind(void 0,e))}var i=e("https://www.apple.com/apple-arcade/compile.js");t.exports=n},{"./compile.js":127}],129:[function(e,t,r){"use strict";function n(e,t,r){var i=0|e[r];if(i<=0)return[];var a,o=new Array(i);if(r===e.length-1)for(a=0;a<i;++a)o[a]=t;else for(a=0;a<i;++a)o[a]=n(e,t,r+1);return o}function i(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function a(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return i(0|e,t);break;case"object":if("number"==typeof e.length)return n(e,t,0)}return[]}t.exports=a},{}],130:[function(e,t,r){function n(e,t,r,n){var a=i(e);return a.update(t,r,n),a}var i=e("https://www.apple.com/apple-arcade/lib/vao-emulated.js");t.exports=n},{"./lib/vao-emulated.js":132}],131:[function(e,t,r){function n(e,t){if(!e)return null;var r=t.attributes;return r[e]?r[e].location:null}function i(e,t,r,i){if(t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),null===a&&(a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS),o=new Array(a)),r){if(r.length>a)throw new Error("gl-vao: Too many vertex attributes");var s=null;for(v=0;v<a;v++)o[v]=!1;for(v=0;v<r.length;v++){var u=r[v],l=n(u.name,i);if(null!==l)if(o[l]=!0,u.buffer){var c=u.buffer,h=u.size||4,f=u.type||e.FLOAT,d=!!u.normalized,m=u.stride||0,p=u.offset||0;s!==c&&(c.bind(),s=c),e.enableVertexAttribArray(l),e.vertexAttribPointer(l,h,f,d,m,p)}else{if("number"==typeof u)e.vertexAttrib1f(l,u);else if(1===u.length)e.vertexAttrib1f(l,u[0]);else if(2===u.length)e.vertexAttrib2f(l,u[0],u[1]);else if(3===u.length)e.vertexAttrib3f(l,u[0],u[1],u[2]);else{if(4!==u.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(l,u[0],u[1],u[2],u[3])}e.disableVertexAttribArray(l)}}for(v=0;v<a;v++)o[v]||e.disableVertexAttribArray(v)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var v=0;v<a;++v)e.disableVertexAttribArray(v)}}var a=null,o=null;t.exports=i},{}],132:[function(e,t,r){function n(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}function i(e){return new n(e)}var a=e("https://www.apple.com/apple-arcade/do-bind.js");n.prototype.bind=function(e){if(!e)throw new Error("must associate shader with vertex array");a(this.gl,this._elements,this._attributes,e)},n.prototype.update=function(e,t,r){this._elements=t,this._attributes=e,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){a(this.gl)},n.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._elements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},t.exports=i},{"./do-bind.js":131}],133:[function(e,t,r){function n(e,t,r,n){r=r||0;var i="";i+="attribute vec4 "+s+";\n"+(e?"attribute vec3 "+u+";\n":"")+(t?"attribute vec4 "+l+";\n":"");var a;for(n=n.toFixed(5),a=0;a<r;a++)i+="attribute vec2 "+c+a+";\n";for(i+="uniform mat4 projection;\n",i+="uniform mat4 view;\n",i+="uniform mat4 model;\n",i+=t?"varying vec4 v_col;\n":"",a=0;a<r;a++)i+="varying vec2 v_tex"+a+";\n";for(i+="\nvoid main() {\n   gl_Position = projection * view * model * "+s+";\n"+(t?"   v_col = "+l+";\n":""),a=0;a<r;a++)i+="   v_tex"+a+" = "+c+a+";\n";return i+="   gl_PointSize = "+n+";\n",i+="}\n"}function i(e,t){t=t||0;var r="#ifdef GL_ES\nprecision mediump float;\n#endif\n\n";e&&(r+="varying vec4 v_col;\n");var n;for(n=0;n<t;n++)r+="varying vec2 v_tex"+n+";\n",r+="uniform sampler2D texture"+n+";\n";for(r+="uniform vec4 tint;\n",r+="\nvoid main() {\n   gl_FragColor = ",e&&(r+="v_col"),e&&t>0?r+=" * ":e||t||(r+="vec4(1.0)"),n=0;n<t;n++)r+=n==t-1?" texture2D(texture"+n+",  v_tex"+n+")":" texture2D(texture"+n+",  v_tex"+n+") *";return r+=" * tint",r+=";\n}"}var a=e("gl-mat4/identity"),o=e("gl-shader-core"),s="position",u="normal",l="color",c="texcoord";t.exports=function(e,r){r=r||{},r.texcoord="number"==typeof r.texcoord?r.texcoord:r.texcoord||0;var n=t.exports.generate(r),i=n.vertex,s=n.fragment,u=n.uniforms,l=n.attributes,c=o(e,i,s,u,l);c.bind();for(var h=0;h<r.texcoord;h++)c.uniforms["texture"+h]=h;var f=a(new Float32Array(16));return c.uniforms.projection=f,c.uniforms.model=f,c.uniforms.view=f,c.uniforms.tint=r.tint||[1,1,1,1],c},t.exports.generate=function(e){e=e||{},e.texcoord="number"==typeof e.texcoord?e.texcoord:e.texcoord||0;var t="number"==typeof e.pointSize?e.pointSize:1,r="string"==typeof e.vertex?e.vertex:n(e.normal,e.color,e.texcoord,t),a="string"==typeof e.fragment?e.fragment:i(e.color,e.texcoord),o=[{type:"mat4",name:"projection"},{type:"mat4",name:"view"},{type:"mat4",name:"model"},{type:"vec4",name:"tint"}],h=[{type:"vec4",name:s,location:0}];e.normal&&h.push({type:"vec3",name:u,location:1}),e.color&&h.push({type:"vec4",name:l,location:2});for(var f=3,d=0;d<e.texcoord;d++)o.push({type:"sampler2D",name:"texture"+d}),h.push({type:"vec2",name:c+d,location:f++});return{vertex:r,fragment:a,uniforms:o,attributes:h}}},{"gl-mat4/identity":137,"gl-shader-core":146}],134:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.gl=e,this.type=t,this.handle=r,this.length=n,this.usage=i}function i(e,t,r,n,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return e.bufferData(t,i,n),o;if(o+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,i),r}function a(e,t){for(var r=u.malloc(e.length,t),n=e.length,i=0;i<n;++i)r[i]=e[i];return r}function o(e,t){for(var r=1,n=t.length-1;n>=0;--n){if(t[n]!==r)return!1;r*=e[n]}return!0}function s(e,t,r,i){if(r=r||e.ARRAY_BUFFER,i=i||e.DYNAMIC_DRAW,r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==e.DYNAMIC_DRAW&&i!==e.STATIC_DRAW&&i!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var a=e.createBuffer(),o=new n(e,r,a,0,i);return o.update(t),o}var u=e("typedarray-pool"),l=e("ndarray-ops"),c=e("ndarray"),h=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],f=n.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)},f.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&"undefined"!=typeof e.shape){var r=e.dtype;if(h.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var n=gl.getExtension("OES_element_index_uint");r=n&&"uint16"!==r?"uint32":"uint16"}if(r===e.dtype&&o(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=i(this.gl,this.type,this.length,this.usage,e.data,t):this.length=i(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var s=u.malloc(e.size,r),f=c(s,e.shape);l.assign(f,e),t<0?this.length=i(this.gl,this.type,this.length,this.usage,s,t):this.length=i(this.gl,this.type,this.length,this.usage,s.subarray(0,e.size),t),u.free(s)}}else if(Array.isArray(e)){var d;d=this.type===this.gl.ELEMENT_ARRAY_BUFFER?a(e,"uint16"):a(e,"float32"),t<0?this.length=i(this.gl,this.type,this.length,this.usage,d,t):this.length=i(this.gl,this.type,this.length,this.usage,d.subarray(0,e.length),t),u.free(d)}else if("object"==typeof e&&"number"==typeof e.length)this.length=i(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e=0|e,e<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=s},{ndarray:163,"ndarray-ops":162,"typedarray-pool":166}],135:[function(e,t,r){function n(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=n},{}],136:[function(e,t,r){function n(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],137:[function(e,t,r){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=n},{}],138:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],m=t[12],p=t[13],v=t[14],y=t[15],g=r*s-n*o,_=r*u-i*o,b=r*l-a*o,w=n*u-i*s,E=n*l-a*s,x=i*l-a*u,T=c*p-h*m,A=c*v-f*m,S=c*y-d*m,k=h*v-f*p,O=h*y-d*p,P=f*y-d*v,M=g*P-_*O+b*k+w*S-E*A+x*T;return M?(M=1/M,e[0]=(s*P-u*O+l*k)*M,e[1]=(i*O-n*P-a*k)*M,e[2]=(p*x-v*E+y*w)*M,e[3]=(f*E-h*x-d*w)*M,e[4]=(u*S-o*P-l*A)*M,e[5]=(r*P-i*S+a*A)*M,e[6]=(v*b-m*x-y*_)*M,e[7]=(c*x-f*b+d*_)*M,e[8]=(o*O-s*S+l*T)*M,e[9]=(n*S-r*O-a*T)*M,e[10]=(m*E-p*b+y*g)*M,e[11]=(h*b-c*E-d*g)*M,e[12]=(s*A-o*k-u*T)*M,e[13]=(r*k-n*A+i*T)*M,e[14]=(p*_-m*w-v*g)*M,e[15]=(c*w-h*_+f*g)*M,e):null}t.exports=n},{}],139:[function(e,t,r){function n(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=n},{}],140:[function(e,t,r){"use strict";function n(e){r.ARRAY_TYPE=s=e}function i(e){return e*l}function a(e,t){return Math.abs(e-t)<=o*Math.max(1,Math.abs(e),Math.abs(t))}Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=n,r.toRadian=i,r.equals=a,r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var o=1e-6;r.EPSILON=o;var s="undefined"!=typeof Float32Array?Float32Array:Array;r.ARRAY_TYPE=s;var u=Math.random;r.RANDOM=u;var l=Math.PI/180},{}],141:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t["default"]=e,t}function i(){var e=new H.ARRAY_TYPE(16);return H.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a(e){var t=new H.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,n,i,a,o,s,u,l,c,h,f,d,m,p){var v=new H.ARRAY_TYPE(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=n,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=u,v[9]=l,v[10]=c,v[11]=h,v[12]=f,v[13]=d,v[14]=m,v[15]=p,v}function u(e,t,r,n,i,a,o,s,u,l,c,h,f,d,m,p,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=h,e[11]=f,e[12]=d,e[13]=m,e[14]=p,e[15]=v,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,
e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],m=t[12],p=t[13],v=t[14],y=t[15],g=r*s-n*o,_=r*u-i*o,b=r*l-a*o,w=n*u-i*s,E=n*l-a*s,x=i*l-a*u,T=c*p-h*m,A=c*v-f*m,S=c*y-d*m,k=h*v-f*p,O=h*y-d*p,P=f*y-d*v,M=g*P-_*O+b*k+w*S-E*A+x*T;return M?(M=1/M,e[0]=(s*P-u*O+l*k)*M,e[1]=(i*O-n*P-a*k)*M,e[2]=(p*x-v*E+y*w)*M,e[3]=(f*E-h*x-d*w)*M,e[4]=(u*S-o*P-l*A)*M,e[5]=(r*P-i*S+a*A)*M,e[6]=(v*b-m*x-y*_)*M,e[7]=(c*x-f*b+d*_)*M,e[8]=(o*O-s*S+l*T)*M,e[9]=(n*S-r*O-a*T)*M,e[10]=(m*E-p*b+y*g)*M,e[11]=(h*b-c*E-d*g)*M,e[12]=(s*A-o*k-u*T)*M,e[13]=(r*k-n*A+i*T)*M,e[14]=(p*_-m*w-v*g)*M,e[15]=(c*w-h*_+f*g)*M,e):null}function f(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],d=t[11],m=t[12],p=t[13],v=t[14],y=t[15];return e[0]=s*(f*y-d*v)-h*(u*y-l*v)+p*(u*d-l*f),e[1]=-(n*(f*y-d*v)-h*(i*y-a*v)+p*(i*d-a*f)),e[2]=n*(u*y-l*v)-s*(i*y-a*v)+p*(i*l-a*u),e[3]=-(n*(u*d-l*f)-s*(i*d-a*f)+h*(i*l-a*u)),e[4]=-(o*(f*y-d*v)-c*(u*y-l*v)+m*(u*d-l*f)),e[5]=r*(f*y-d*v)-c*(i*y-a*v)+m*(i*d-a*f),e[6]=-(r*(u*y-l*v)-o*(i*y-a*v)+m*(i*l-a*u)),e[7]=r*(u*d-l*f)-o*(i*d-a*f)+c*(i*l-a*u),e[8]=o*(h*y-d*p)-c*(s*y-l*p)+m*(s*d-l*h),e[9]=-(r*(h*y-d*p)-c*(n*y-a*p)+m*(n*d-a*h)),e[10]=r*(s*y-l*p)-o*(n*y-a*p)+m*(n*l-a*s),e[11]=-(r*(s*d-l*h)-o*(n*d-a*h)+c*(n*l-a*s)),e[12]=-(o*(h*v-f*p)-c*(s*v-u*p)+m*(s*f-u*h)),e[13]=r*(h*v-f*p)-c*(n*v-i*p)+m*(n*f-i*h),e[14]=-(r*(s*v-u*p)-o*(n*v-i*p)+m*(n*u-i*s)),e[15]=r*(s*f-u*h)-o*(n*f-i*h)+c*(n*u-i*s),e}function d(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],m=e[13],p=e[14],v=e[15],y=t*o-r*a,g=t*s-n*a,_=t*u-i*a,b=r*s-n*o,w=r*u-i*o,E=n*u-i*s,x=l*m-c*d,T=l*p-h*d,A=l*v-f*d,S=c*p-h*m,k=c*v-f*m,O=h*v-f*p;return y*O-g*k+_*S+b*A-w*T+E*x}function m(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],m=t[11],p=t[12],v=t[13],y=t[14],g=t[15],_=r[0],b=r[1],w=r[2],E=r[3];return e[0]=_*n+b*s+w*h+E*p,e[1]=_*i+b*u+w*f+E*v,e[2]=_*a+b*l+w*d+E*y,e[3]=_*o+b*c+w*m+E*g,_=r[4],b=r[5],w=r[6],E=r[7],e[4]=_*n+b*s+w*h+E*p,e[5]=_*i+b*u+w*f+E*v,e[6]=_*a+b*l+w*d+E*y,e[7]=_*o+b*c+w*m+E*g,_=r[8],b=r[9],w=r[10],E=r[11],e[8]=_*n+b*s+w*h+E*p,e[9]=_*i+b*u+w*f+E*v,e[10]=_*a+b*l+w*d+E*y,e[11]=_*o+b*c+w*m+E*g,_=r[12],b=r[13],w=r[14],E=r[15],e[12]=_*n+b*s+w*h+E*p,e[13]=_*i+b*u+w*f+E*v,e[14]=_*a+b*l+w*d+E*y,e[15]=_*o+b*c+w*m+E*g,e}function p(e,t,r){var n,i,a,o,s,u,l,c,h,f,d,m,p=r[0],v=r[1],y=r[2];return t===e?(e[12]=t[0]*p+t[4]*v+t[8]*y+t[12],e[13]=t[1]*p+t[5]*v+t[9]*y+t[13],e[14]=t[2]*p+t[6]*v+t[10]*y+t[14],e[15]=t[3]*p+t[7]*v+t[11]*y+t[15]):(n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],m=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=d,e[11]=m,e[12]=n*p+s*v+h*y+t[12],e[13]=i*p+u*v+f*y+t[13],e[14]=a*p+l*v+d*y+t[14],e[15]=o*p+c*v+m*y+t[15]),e}function v(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y(e,t,r,n){var i,a,o,s,u,l,c,h,f,d,m,p,v,y,g,_,b,w,E,x,T,A,S,k,O=n[0],P=n[1],M=n[2],C=Math.sqrt(O*O+P*P+M*M);return C<H.EPSILON?null:(C=1/C,O*=C,P*=C,M*=C,i=Math.sin(r),a=Math.cos(r),o=1-a,s=t[0],u=t[1],l=t[2],c=t[3],h=t[4],f=t[5],d=t[6],m=t[7],p=t[8],v=t[9],y=t[10],g=t[11],_=O*O*o+a,b=P*O*o+M*i,w=M*O*o-P*i,E=O*P*o-M*i,x=P*P*o+a,T=M*P*o+O*i,A=O*M*o+P*i,S=P*M*o-O*i,k=M*M*o+a,e[0]=s*_+h*b+p*w,e[1]=u*_+f*b+v*w,e[2]=l*_+d*b+y*w,e[3]=c*_+m*b+g*w,e[4]=s*E+h*x+p*T,e[5]=u*E+f*x+v*T,e[6]=l*E+d*x+y*T,e[7]=c*E+m*x+g*T,e[8]=s*A+h*S+p*k,e[9]=u*A+f*S+v*k,e[10]=l*A+d*S+y*k,e[11]=c*A+m*S+g*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function g(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*n,e[5]=o*i+c*n,e[6]=s*i+h*n,e[7]=u*i+f*n,e[8]=l*i-a*n,e[9]=c*i-o*n,e[10]=h*i-s*n,e[11]=f*i-u*n,e}function _(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*n,e[1]=o*i-c*n,e[2]=s*i-h*n,e[3]=u*i-f*n,e[8]=a*n+l*i,e[9]=o*n+c*i,e[10]=s*n+h*i,e[11]=u*n+f*i,e}function b(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*n,e[1]=o*i+c*n,e[2]=s*i+h*n,e[3]=u*i+f*n,e[4]=l*i-a*n,e[5]=c*i-o*n,e[6]=h*i-s*n,e[7]=f*i-u*n,e}function w(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function E(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t,r){var n,i,a,o=r[0],s=r[1],u=r[2],l=Math.sqrt(o*o+s*s+u*u);return l<H.EPSILON?null:(l=1/l,o*=l,s*=l,u*=l,n=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=o*o*a+i,e[1]=s*o*a+u*n,e[2]=u*o*a-s*n,e[3]=0,e[4]=o*s*a-u*n,e[5]=s*s*a+i,e[6]=u*s*a+o*n,e[7]=0,e[8]=o*u*a+s*n,e[9]=s*u*a-o*n,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function T(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,u=i+i,l=a+a,c=n*s,h=n*u,f=n*l,d=i*u,m=i*l,p=a*l,v=o*s,y=o*u,g=o*l;return e[0]=1-(d+p),e[1]=h+g,e[2]=f-y,e[3]=0,e[4]=h-g,e[5]=1-(c+p),e[6]=m+v,e[7]=0,e[8]=f+y,e[9]=m-v,e[10]=1-(c+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function O(e,t){var r=new H.ARRAY_TYPE(3),n=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=n*n+i*i+a*a+o*o;return h>0?(r[0]=2*(s*o+c*n+u*a-l*i)/h,r[1]=2*(u*o+c*i+l*n-s*a)/h,r[2]=2*(l*o+c*a+s*i-u*n)/h):(r[0]=2*(s*o+c*n+u*a-l*i),r[1]=2*(u*o+c*i+l*n-s*a),r[2]=2*(l*o+c*a+s*i-u*n)),k(e,t,r),e}function P(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function M(e,t){var r=t[0],n=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e}function C(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function R(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,m=a*l,p=a*c,v=o*c,y=s*u,g=s*l,_=s*c,b=n[0],w=n[1],E=n[2];return e[0]=(1-(m+v))*b,e[1]=(f+_)*b,e[2]=(d-g)*b,e[3]=0,e[4]=(f-_)*w,e[5]=(1-(h+v))*w,e[6]=(p+y)*w,e[7]=0,e[8]=(d+g)*E,e[9]=(p-y)*E,e[10]=(1-(h+m))*E,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function I(e,t,r,n,i){var a=t[0],o=t[1],s=t[2],u=t[3],l=a+a,c=o+o,h=s+s,f=a*l,d=a*c,m=a*h,p=o*c,v=o*h,y=s*h,g=u*l,_=u*c,b=u*h,w=n[0],E=n[1],x=n[2],T=i[0],A=i[1],S=i[2],k=(1-(p+y))*w,O=(d+b)*w,P=(m-_)*w,M=(d-b)*E,C=(1-(f+y))*E,R=(v+g)*E,I=(m+_)*x,F=(v-g)*x,D=(1-(f+p))*x;return e[0]=k,e[1]=O,e[2]=P,e[3]=0,e[4]=M,e[5]=C,e[6]=R,e[7]=0,e[8]=I,e[9]=F,e[10]=D,e[11]=0,e[12]=r[0]+T-(k*T+M*A+I*S),e[13]=r[1]+A-(O*T+C*A+F*S),e[14]=r[2]+S-(P*T+R*A+D*S),e[15]=1,e}function F(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,l=r*o,c=n*o,h=n*s,f=i*o,d=i*s,m=i*u,p=a*o,v=a*s,y=a*u;return e[0]=1-h-m,e[1]=c+y,e[2]=f-v,e[3]=0,e[4]=c-y,e[5]=1-l-m,e[6]=d+p,e[7]=0,e[8]=f+v,e[9]=d-p,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function D(e,t,r,n,i,a,o){var s=1/(r-t),u=1/(i-n),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function L(e,t,r,n,i){var a,o=1/Math.tan(t/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function N(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((o-s)*u*.5),e[9]=(i-a)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function j(e,t,r,n,i,a,o){var s=1/(t-r),u=1/(n-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(o+a)*l,e[15]=1,e}function U(e,t,r,n){var i,a,o,s,u,c,h,f,d,m,p=t[0],v=t[1],y=t[2],g=n[0],_=n[1],b=n[2],w=r[0],E=r[1],x=r[2];return Math.abs(p-w)<H.EPSILON&&Math.abs(v-E)<H.EPSILON&&Math.abs(y-x)<H.EPSILON?l(e):(h=p-w,f=v-E,d=y-x,m=1/Math.sqrt(h*h+f*f+d*d),h*=m,f*=m,d*=m,i=_*d-b*f,a=b*h-g*d,o=g*f-_*h,m=Math.sqrt(i*i+a*a+o*o),m?(m=1/m,i*=m,a*=m,o*=m):(i=0,a=0,o=0),s=f*o-d*a,u=d*i-h*o,c=h*a-f*i,m=Math.sqrt(s*s+u*u+c*c),m?(m=1/m,s*=m,u*=m,c*=m):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=h,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=d,e[11]=0,e[12]=-(i*p+a*v+o*y),e[13]=-(s*p+u*v+c*y),e[14]=-(h*p+f*v+d*y),e[15]=1,e)}function B(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=n[0],u=n[1],l=n[2],c=i-r[0],h=a-r[1],f=o-r[2],d=c*c+h*h+f*f;d>0&&(d=1/Math.sqrt(d),c*=d,h*=d,f*=d);var m=u*f-l*h,p=l*c-s*f,v=s*h-u*c;return d=m*m+p*p+v*v,d>0&&(d=1/Math.sqrt(d),m*=d,p*=d,v*=d),e[0]=m,e[1]=p,e[2]=v,e[3]=0,e[4]=h*v-f*p,e[5]=f*m-c*v,e[6]=c*p-h*m,e[7]=0,e[8]=c,e[9]=h,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function V(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function q(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function K(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function z(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Y(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function G(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function W(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function X(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],m=e[12],p=e[13],v=e[14],y=e[15],g=t[0],_=t[1],b=t[2],w=t[3],E=t[4],x=t[5],T=t[6],A=t[7],S=t[8],k=t[9],O=t[10],P=t[11],M=t[12],C=t[13],R=t[14],I=t[15];return Math.abs(r-g)<=H.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-_)<=H.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-b)<=H.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-w)<=H.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-E)<=H.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-x)<=H.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-T)<=H.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(l-A)<=H.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-S)<=H.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-k)<=H.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(f-O)<=H.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(d-P)<=H.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(m-M)<=H.EPSILON*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(p-C)<=H.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(v-R)<=H.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(y-I)<=H.EPSILON*Math.max(1,Math.abs(y),Math.abs(I))}Object.defineProperty(r,"__esModule",{value:!0}),r.create=i,r.clone=a,r.copy=o,r.fromValues=s,r.set=u,r.identity=l,r.transpose=c,r.invert=h,r.adjoint=f,r.determinant=d,r.multiply=m,r.translate=p,r.scale=v,r.rotate=y,r.rotateX=g,r.rotateY=_,r.rotateZ=b,r.fromTranslation=w,r.fromScaling=E,r.fromRotation=x,r.fromXRotation=T,r.fromYRotation=A,r.fromZRotation=S,r.fromRotationTranslation=k,r.fromQuat2=O,r.getTranslation=P,r.getScaling=M,r.getRotation=C,r.fromRotationTranslationScale=R,r.fromRotationTranslationScaleOrigin=I,r.fromQuat=F,r.frustum=D,r.perspective=L,r.perspectiveFromFieldOfView=N,r.ortho=j,r.lookAt=U,r.targetTo=B,r.str=V,r.frob=q,r.add=K,r.subtract=z,r.multiplyScalar=Y,r.multiplyScalarAndAdd=G,r.exactEquals=W,r.equals=X,r.sub=r.mul=void 0;var H=n(e("https://www.apple.com/apple-arcade/common.js")),Q=m;r.mul=Q;var Z=z;r.sub=Z},{"./common.js":140}],142:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t["default"]=e,t}function i(){var e=new z.ARRAY_TYPE(3);return z.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=new z.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function o(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function s(e,t,r){var n=new z.ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function l(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function h(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function f(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function m(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function p(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function v(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function y(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function g(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function _(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function b(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function w(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function E(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function x(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function T(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function A(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function S(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function k(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2];return e[0]=i*u-a*s,e[1]=a*o-n*u,e[2]=n*s-i*o,e}function P(e,t,r,n){var i=t[0],a=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e}function M(e,t,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+r[0]*u+n[0]*l+i[0]*c,e[1]=t[1]*s+r[1]*u+n[1]*l+i[1]*c,e[2]=t[2]*s+r[2]*u+n[2]*l+i[2]*c,e}function C(e,t,r,n,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,h=3*u*o,f=u*a;return e[0]=t[0]*l+r[0]*c+n[0]*h+i[0]*f,e[1]=t[1]*l+r[1]*c+n[1]*h+i[1]*f,e[2]=t[2]*l+r[2]*c+n[2]*h+i[2]*f,e}function R(e,t){t=t||1;var r=2*z.RANDOM()*Math.PI,n=2*z.RANDOM()-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e}function I(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e}function F(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e}function D(e,t,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=t[0],u=t[1],l=t[2],c=i*l-a*u,h=a*s-n*l,f=n*u-i*s,d=i*f-a*h,m=a*c-n*f,p=n*h-i*c,v=2*o;return c*=v,h*=v,f*=v,d*=2,m*=2,p*=2,e[0]=s+c+d,e[1]=u+h+m,e[2]=l+f+p,e}function L(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function N(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function j(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function U(e,t){var r=s(e[0],e[1],e[2]),n=s(t[0],t[1],t[2]);S(r,r),S(n,n);var i=k(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function B(e){return e[0]=0,e[1]=0,e[2]=0,e}function V(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function q(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function K(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(r-a)<=z.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=z.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=z.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(r,"__esModule",{value:!0}),r.create=i,r.clone=a,r.length=o,r.fromValues=s,r.copy=u,r.set=l,r.add=c,r.subtract=h,r.multiply=f,r.divide=d,r.ceil=m,r.floor=p,r.min=v,r.max=y,r.round=g,r.scale=_,r.scaleAndAdd=b,r.distance=w,r.squaredDistance=E,r.squaredLength=x,r.negate=T,r.inverse=A,r.normalize=S,r.dot=k,r.cross=O,r.lerp=P,r.hermite=M,r.bezier=C,r.random=R,r.transformMat4=I,r.transformMat3=F,r.transformQuat=D,r.rotateX=L,r.rotateY=N,r.rotateZ=j,r.angle=U,r.zero=B,r.str=V,r.exactEquals=q,r.equals=K,r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var z=n(e("https://www.apple.com/apple-arcade/common.js")),Y=h;r.sub=Y;var G=f;r.mul=G;var W=d;r.div=W;var X=w;r.dist=X;var H=E;r.sqrDist=H;var Q=o;r.len=Q;var Z=x;r.sqrLen=Z;var J=function(){var e=i();return function(t,r,n,i,a,o){var s,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();r.forEach=J},{"./common.js":140}],143:[function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){this._gl=e,this._program=t,this._location=r,this._dimension=n,this._name=i,this._constFunc=a,this._relink=o}function i(e,t,r,i,a,o,s){for(var u=["gl","v"],l=[],c=0;c<i;++c)u.push("x"+c),l.push("x"+c);u.push(["if(x0.length===void 0){return gl.vertexAttrib",i,"f(v,",l.join(),")}else{return gl.vertexAttrib",i,"fv(v,x0)}"].join(""));var h=Function.apply(void 0,u),f=new n(e,t,r,i,o,h,s);Object.defineProperty(a,o,{set:function(t){return e.disableVertexAttribArray(f._location),h(e,f._location,t),t},get:function(){return f},enumerable:!0})}function a(e,t,r,n){for(var a={},o=0,s=r.length;o<s;++o){var u=r[o],l=u.name,c=u.type,h=e.getAttribLocation(t,l);switch(c){case"bool":case"int":case"float":i(e,t,h,1,a,l,n);break;default:if(!(c.indexOf("vec")>=0))throw new Error("gl-shader: Unknown data type for attribute "+l+": "+c);var f=c.charCodeAt(c.length-1)-48;if(f<2||f>4)throw new Error("gl-shader: Invalid data type for attribute "+l+": "+c);i(e,t,h,f,a,l,n)}}return a}t.exports=a;var o=n.prototype;o.pointer=function(e,t,r,n){var i=this._gl;i.vertexAttribPointer(this._location,this._dimension,e||i.FLOAT,!!t,r||0,n||0),this._gl.enableVertexAttribArray(this._location)},Object.defineProperty(o,"location",{get:function(){return this._location},set:function(e){e!==this._location&&(this._location=e,this._gl.bindAttribLocation(this._program,e,this._name),this._gl.linkProgram(this._program),this._relink())}})},{}],144:[function(e,t,r){"use strict";function n(e){var t=new Function("y","return function(){return y}");return t(e)}function i(e,t,r,i){function s(r){var n=new Function("gl","prog","locations","return function(){return gl.getUniform(prog,locations["+r+"])}");return n(e,t,i)}function u(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4)throw new Error("gl-shader: Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}}function l(e,t){if("object"!=typeof t)return[[e,t]];var r=[];for(var n in t){var i=t[n],a=e;a+=parseInt(n)+""===n?"["+n+"]":"."+n,"object"==typeof i?r.push.apply(r,l(a,i)):r.push([a,i])}return r}function c(n){for(var a=["return function updateProperty(obj){"],o=l("",n),s=0;s<o.length;++s){var c=o[s],h=c[0],f=c[1];i[f]&&a.push(u(h,f,r[f].type))}a.push("return obj}");var d=new Function("gl","prog","locations",a.join("\n"));return d(e,t,i)}function h(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4)throw new Error("gl-shader: Invalid data type");return"b"===e.charAt(0)?a(r,!1):a(r)}if(0===e.indexOf("mat")&&4===e.length){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+e);return a([r,r])}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+e)}}function f(e,t,a){if("object"==typeof a){var o=d(a);Object.defineProperty(e,t,{get:n(o),set:c(a),enumerable:!0,configurable:!1})}else i[a]?Object.defineProperty(e,t,{get:s(a),set:c(a),enumerable:!0,configurable:!1}):e[t]=h(r[a].type)}function d(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)f(t,r,e[r])}else{t={};for(var n in e)f(t,n,e[n])}return t}var m=o(r,!0);return{get:n(d(m)),set:c(m),enumerable:!0,configurable:!0}}var a=e("dup"),o=e("./reflect");t.exports=i},{"./reflect":145,dup:129}],145:[function(e,t,r){"use strict";function n(e,t){for(var r={},n=0;n<e.length;++n)for(var i=e[n].name,a=i.split("."),o=r,s=0;s<a.length;++s){var u=a[s].split("[");if(u.length>1){u[0]in o||(o[u[0]]=[]),o=o[u[0]];for(var l=1;l<u.length;++l){var c=parseInt(u[l]);l<u.length-1||s<a.length-1?(c in o||(l<u.length-1?o[c]=[]:o[c]={}),o=o[c]):t?o[c]=n:o[c]=e[n].type}}else s<a.length-1?(u[0]in o||(o[u[0]]={}),o=o[u[0]]):t?o[u[0]]=n:o[u[0]]=e[n].type}return r}t.exports=n},{}],146:[function(e,t,r){"use strict";function n(e,t,r,n){this.gl=e,this.handle=t,this.attributes=null,this.uniforms=null,this.types=null,this.vertexShader=r,this.fragmentShader=n}function i(e,t,r,n){for(var i=0;i<n.length;++i)r[i]=e.getUniformLocation(t,n[i].name)}function a(e,t,r,i,a){var o=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(o);throw console.error("gl-shader: Error compling vertex shader:",s),new Error("gl-shader: Error compiling vertex shader:"+s)}var u=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(u,r),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(u);throw console.error("gl-shader: Error compiling fragment shader:",s),new Error("gl-shader: Error compiling fragment shader:"+s)}var l=e.createProgram();if(e.attachShader(l,u),e.attachShader(l,o),a.forEach(function(t){"number"==typeof t.location&&e.bindAttribLocation(l,t.location,t.name)}),e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS)){var s=e.getProgramInfoLog(l);throw console.error("gl-shader: Error linking shader program:",s),new Error("gl-shader: Error linking shader program:"+s)}var c=new n(e,l,o,u);return c.updateExports(i,a),c}var o=e("./lib/create-uniforms"),s=e("./lib/create-attributes"),u=e("./lib/reflect");n.prototype.bind=function(){this.gl.useProgram(this.handle)},n.prototype.dispose=function(){var e=this.gl;e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader),e.deleteProgram(this.handle)},n.prototype.updateExports=function(e,t){var r=new Array(e.length),n=this.handle,a=this.gl,l=i.bind(void 0,a,n,r,e);l(),this.types={uniforms:u(e),attributes:u(t)},this.attributes=s(a,n,t,l),Object.defineProperty(this,"uniforms",o(a,n,e,r))},t.exports=a},{"./lib/create-attributes":143,"./lib/create-uniforms":144,"./lib/reflect":145}],147:[function(e,t,r){"use strict";function n(e){y=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],g=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],_=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function i(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}function a(e,t,r){var n=e.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function o(e,t,r,n,i,a){this.gl=e,this.handle=t,this.format=i,this.type=a,this._shape=[r,n],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=u}function s(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function u(e,t,r,n,i,a,o,u){var l=u.dtype,c=u.shape.slice();if(c.length<2||c.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var h=0,f=0,d=s(c,u.stride.slice());"float32"===l?h=e.FLOAT:"float64"===l?(h=e.FLOAT,d=!1,l="float32"):"uint8"===l?h=e.UNSIGNED_BYTE:(h=e.UNSIGNED_BYTE,d=!1,l="uint8");var y=1;if(2===c.length)f=e.LUMINANCE,c=[c[0],c[1],1],u=m(u.data,c,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==c.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===c[2])f=e.ALPHA;else if(2===c[2])f=e.LUMINANCE_ALPHA;else if(3===c[2])f=e.RGB;else{if(4!==c[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=e.RGBA}y=c[2]}if(f!==e.LUMINANCE&&f!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(f=i),f!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var g=u.size,_=o.indexOf(n)<0;if(_&&o.push(n),h===a&&d)0===u.offset&&u.data.length===g?_?e.texImage2D(e.TEXTURE_2D,n,i,c[0],c[1],0,i,a,u.data):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],i,a,u.data):_?e.texImage2D(e.TEXTURE_2D,n,i,c[0],c[1],0,i,a,u.data.subarray(u.offset,u.offset+g)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],i,a,u.data.subarray(u.offset,u.offset+g));else{var w;w=a===e.FLOAT?v.mallocFloat32(g):v.mallocUint8(g);var E=m(w,c,[c[2],c[2]*c[0],1]);h===e.FLOAT&&a===e.UNSIGNED_BYTE?b(E,u):p.assign(E,u),_?e.texImage2D(e.TEXTURE_2D,n,i,c[0],c[1],0,i,a,w.subarray(0,g)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,c[0],c[1],i,a,w.subarray(0,g)),a===e.FLOAT?v.freeFloat32(w):v.freeUint8(w)}}function l(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function c(e,t,r,n,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var s=l(e);return e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null),new o(e,s,t,r,n,i)}function h(e,t,r,n,i,a){var s=l(e);return e.texImage2D(e.TEXTURE_2D,0,i,i,a,t),new o(e,s,r,n,i,a)}function f(e,t){var r=t.dtype,n=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>i||n[1]<0||n[1]>i)throw new Error("gl-texture2d: Invalid texture size");var a=s(n,t.stride.slice()),u=0;"float32"===r?u=e.FLOAT:"float64"===r?(u=e.FLOAT,a=!1,r="float32"):"uint8"===r?u=e.UNSIGNED_BYTE:(u=e.UNSIGNED_BYTE,a=!1,r="uint8");var c=0;if(2===n.length)c=e.LUMINANCE,n=[n[0],n[1],1],t=m(t.data,n,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])c=e.ALPHA;else if(2===n[2])c=e.LUMINANCE_ALPHA;else if(3===n[2])c=e.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");c=e.RGBA}}u!==e.FLOAT||e.getExtension("OES_texture_float")||(u=e.UNSIGNED_BYTE,a=!1);var h,f,d=t.size;if(a)h=0===t.offset&&t.data.length===d?t.data:t.data.subarray(t.offset,t.offset+d);else{var y=[n[2],n[2]*n[0],1];f=v.malloc(d,r);var g=m(f,n,y,0);"float32"!==r&&"float64"!==r||u!==e.UNSIGNED_BYTE?p.assign(g,t):b(g,t),h=f.subarray(0,d)}var _=l(e);return e.texImage2D(e.TEXTURE_2D,0,c,n[0],n[1],0,c,u,h),a||v.free(f),new o(e,_,n[0],n[1],c,u)}function d(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(y||n(e),"number"==typeof arguments[1])return c(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return c(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);
if("object"==typeof arguments[1]){var t=arguments[1],r=i(t)?t:t.raw;if(r)return h(e,r,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return f(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var m=e("ndarray"),p=e("ndarray-ops"),v=e("typedarray-pool");t.exports=d;var y=null,g=null,_=null,b=function(e,t){p.muls(e,t,255)},w=o.prototype;Object.defineProperties(w,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&y.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),g.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&y.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),g.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),_.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),_.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(_.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return a(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e=0|e,a(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e=0|e,a(this,this._shape[0],e),e}}}),w.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},w.dispose=function(){this.gl.deleteTexture(this.handle)},w.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},w.setPixels=function(e,t,r,n){var a=this.gl;this.bind(),Array.isArray(t)?(n=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),n=n||0;var o=i(e)?e:e.raw;if(o){var s=this._mipLevels.indexOf(n)<0;s?(a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,o),this._mipLevels.push(n)):a.texSubImage2D(a.TEXTURE_2D,n,t,r,this.format,this.type,o)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");u(a,t,r,n,this.format,this.type,this._mipLevels,e)}}},{ndarray:163,"ndarray-ops":162,"typedarray-pool":166}],148:[function(e,t,r){function n(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=n},{}],149:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2];return e[0]=i*u-a*s,e[1]=a*o-n*u,e[2]=n*s-i*o,e}t.exports=n},{}],150:[function(e,t,r){function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=n},{}],151:[function(e,t,r){function n(e,t,r){var n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}t.exports=n},{}],152:[function(e,t,r){function n(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}t.exports=n},{}],153:[function(e,t,r){function n(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}t.exports=n},{}],154:[function(e,t,r){function n(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=n},{}],155:[function(e,t,r){function n(e,t,r,n){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}t.exports=n},{}],156:[function(e,t,r){function n(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}t.exports=n},{}],157:[function(e,t,r){var n=e("gl-texture2d"),i=e("ndarray");t.exports=function(e){var t=Array.apply(null,new Array(16)).map(Number.prototype.valueOf,255),r=i(new Uint8Array(t),[2,2,4]);return n(e,r)}},{"gl-texture2d":147,ndarray:163}],158:[function(e,t,r){(function(e){!function(e,r){"use strict";var n={},i=e.document,a=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!a.TweenLite){var o,s,u,l,c,h=function(e){var t,r=e.split("."),n=a;for(t=0;t<r.length;t++)n[r[t]]=n=n[r[t]]||{};return n},f=h("com.greensock"),d=1e-10,m=function(e){var t,r=[],n=e.length;for(t=0;t!==n;r.push(e[t++]));return r},p=function(){},v=function(){var e=Object.prototype.toString,t=e.call([]);return function(r){return null!=r&&(r instanceof Array||"object"==typeof r&&!!r.push&&e.call(r)===t)}}(),y={},g=function(i,o,s,u){this.sc=y[i]?y[i].sc:[],y[i]=this,this.gsClass=null,this.func=s;var l=[];this.check=function(c){for(var f,d,m,p,v,_=o.length,b=_;--_>-1;)(f=y[o[_]]||new g(o[_],[])).gsClass?(l[_]=f.gsClass,b--):c&&f.sc.push(this);if(0===b&&s){if(d=("com.greensock."+i).split("."),m=d.pop(),p=h(d.join("."))[m]=this.gsClass=s.apply(s,l),u)if(a[m]=n[m]=p,v="undefined"!=typeof t&&t.exports,!v&&"function"==typeof define&&define.amd)define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+i.split(".").pop(),[],function(){return p});else if(v)if(i===r){t.exports=n[r]=p;for(_ in n)p[_]=n[_]}else n[r]&&(n[r][m]=p);for(_=0;_<this.sc.length;_++)this.sc[_].check()}},this.check(!0)},_=e._gsDefine=function(e,t,r,n){return new g(e,t,r,n)},b=f._class=function(e,t,r){return t=t||function(){},_(e,[],function(){return t},r),t};_.globals=a;var w=[0,0,1,1],E=b("easing.Ease",function(e,t,r,n){this._func=e,this._type=r||0,this._power=n||0,this._params=t?w.concat(t):w},!0),x=E.map={},T=E.register=function(e,t,r,n){for(var i,a,o,s,u=t.split(","),l=u.length,c=(r||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(a=u[l],i=n?b("easing."+a,null,!0):f.easing[a]||{},o=c.length;--o>-1;)s=c[o],x[a+"."+s]=x[s+a]=i[s]=e.getRatio?e:e[s]||new e};for(u=E.prototype,u._calcEnd=!1,u.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,r=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===r?n*=n:2===r?n*=n*n:3===r?n*=n*n*n:4===r&&(n*=n*n*n*n),1===t?1-n:2===t?n:e<.5?n/2:1-n/2},o=["Linear","Quad","Cubic","Quart","Quint,Strong"],s=o.length;--s>-1;)u=o[s]+",Power"+s,T(new E(null,null,1,s),u,"easeOut",!0),T(new E(null,null,2,s),u,"easeIn"+(0===s?",easeNone":"")),T(new E(null,null,3,s),u,"easeInOut");x.linear=f.easing.Linear.easeIn,x.swing=f.easing.Quad.easeInOut;var A=b("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});u=A.prototype,u.addEventListener=function(e,t,r,n,i){i=i||0;var a,o,s=this._listeners[e],u=0;for(this!==l||c||l.wake(),null==s&&(this._listeners[e]=s=[]),o=s.length;--o>-1;)a=s[o],a.c===t&&a.s===r?s.splice(o,1):0===u&&a.pr<i&&(u=o+1);s.splice(u,0,{c:t,s:r,up:n,pr:i})},u.removeEventListener=function(e,t){var r,n=this._listeners[e];if(n)for(r=n.length;--r>-1;)if(n[r].c===t)return void n.splice(r,1)},u.dispatchEvent=function(e){var t,r,n,i=this._listeners[e];if(i)for(t=i.length,t>1&&(i=i.slice(0)),r=this._eventTarget;--t>-1;)n=i[t],n&&(n.up?n.c.call(n.s||r,{type:e,target:r}):n.c.call(n.s||r))};var S=e.requestAnimationFrame,k=e.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},P=O();for(o=["ms","moz","webkit","o"],s=o.length;--s>-1&&!S;)S=e[o[s]+"RequestAnimationFrame"],k=e[o[s]+"CancelAnimationFrame"]||e[o[s]+"CancelRequestAnimationFrame"];b("Ticker",function(e,t){var r,n,a,o,s,u=this,h=O(),f=!(t===!1||!S)&&"auto",m=500,v=33,y="tick",g=function(e){var t,i,l=O()-P;l>m&&(h+=l-v),P+=l,u.time=(P-h)/1e3,t=u.time-s,(!r||t>0||e===!0)&&(u.frame++,s+=t+(t>=o?.004:o-t),i=!0),e!==!0&&(a=n(g)),i&&u.dispatchEvent(y)};A.call(u),u.time=u.frame=0,u.tick=function(){g(!0)},u.lagSmoothing=function(e,t){m=e||1/d,v=Math.min(t,m,0)},u.sleep=function(){null!=a&&(f&&k?k(a):clearTimeout(a),n=p,a=null,u===l&&(c=!1))},u.wake=function(e){null!==a?u.sleep():e?h+=-P+(P=O()):u.frame>10&&(P=O()-m+5),n=0===r?p:f&&S?S:function(e){return setTimeout(e,1e3*(s-u.time)+1|0)},u===l&&(c=!0),g(2)},u.fps=function(e){return arguments.length?(r=e,o=1/(r||60),s=this.time+o,void u.wake()):r},u.useRAF=function(e){return arguments.length?(u.sleep(),f=e,void u.fps(r)):f},u.fps(e),setTimeout(function(){"auto"===f&&u.frame<5&&"hidden"!==i.visibilityState&&u.useRAF(!1)},1500)}),u=f.Ticker.prototype=new f.events.EventDispatcher,u.constructor=f.Ticker;var M=b("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,H){c||l.wake();var r=this.vars.useFrames?X:H;r.add(this,r._time),this.vars.paused&&this.paused(!0)}});l=M.ticker=new f.Ticker,u=M.prototype,u._dirty=u._gc=u._initted=u._paused=!1,u._totalTime=u._time=0,u._rawPrevTime=-1,u._next=u._last=u._onUpdate=u._timeline=u.timeline=null,u._paused=!1;var C=function(){c&&O()-P>2e3&&l.wake(),setTimeout(C,2e3)};C(),u.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},u.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},u.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},u.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},u.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},u.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},u.render=function(e,t,r){},u.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},u.isActive=function(){var e,t=this._timeline,r=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=r&&e<r+this.totalDuration()/this._timeScale},u._enabled=function(e,t){return c||l.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},u._kill=function(e,t){return this._enabled(!1,!1)},u.kill=function(e,t){return this._kill(e,t),this},u._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},u._swapSelfInParams=function(e){for(var t=e.length,r=e.concat();--t>-1;)"{self}"===e[t]&&(r[t]=this);return r},u._callback=function(e){var t=this.vars,r=t[e],n=t[e+"Params"],i=t[e+"Scope"]||t.callbackScope||this,a=n?n.length:0;switch(a){case 0:r.call(i);break;case 1:r.call(i,n[0]);break;case 2:r.call(i,n[0],n[1]);break;default:r.apply(i,n)}},u.eventCallback=function(e,t,r,n){if("on"===(e||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[e];null==t?delete i[e]:(i[e]=t,i[e+"Params"]=v(r)&&r.join("").indexOf("{self}")!==-1?this._swapSelfInParams(r):r,i[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},u.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},u.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},u.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},u.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},u.totalTime=function(e,t,r){if(c||l.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!r&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,i=this._timeline;if(e>n&&!r&&(e=n),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?n-e:e)/this._timeScale,i._dirty||this._uncache(!1),i._timeline)for(;i._timeline;)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(L.length&&Z(),this.render(e,t,!1),L.length&&Z())}return this},u.progress=u.totalProgress=function(e,t){var r=this.duration();return arguments.length?this.totalTime(r*e,t):r?this._time/r:this.ratio},u.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},u.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},u.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||d,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,r=t||0===t?t:this._timeline.totalTime();this._startTime=r-(r-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},u.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},u.paused=function(e){if(!arguments.length)return this._paused;var t,r,n=this._timeline;return e!=this._paused&&n&&(c||e||l.wake(),t=n.rawTime(),r=t-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==r&&this._initted&&this.duration()&&(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var R=b("core.SimpleTimeline",function(e){M.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});u=R.prototype=new M,u.constructor=R,u.kill()._gc=!1,u._first=u._last=u._recent=null,u._sortChildren=!1,u.add=u.insert=function(e,t,r,n){var i,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last,this._sortChildren)for(a=e._startTime;i&&i._startTime>a;)i=i._prev;return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._recent=e,this._timeline&&this._uncache(!0),this},u._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},u.render=function(e,t,r){var n,i=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;i;)n=i._next,(i._active||e>=i._startTime&&!i._paused)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)),i=n},u.rawTime=function(){return c||l.wake(),this._totalTime};var I=b("TweenLite",function(t,r,n){if(M.call(this,r,n),this.render=I.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:I.selector(t)||t;var i,a,o,s=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),u=this.vars.overwrite;if(this._overwrite=u=null==u?W[I.defaultOverwrite]:"number"==typeof u?u>>0:W[u],(s||t instanceof Array||t.push&&v(t))&&"number"!=typeof t[0])for(this._targets=o=m(t),this._propLookup=[],this._siblings=[],i=0;i<o.length;i++)a=o[i],a?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(o.splice(i--,1),this._targets=o=o.concat(m(a))):(this._siblings[i]=J(a,this,!1),1===u&&this._siblings[i].length>1&&ee(a,this,null,1,this._siblings[i])):(a=o[i--]=I.selector(a),"string"==typeof a&&o.splice(i+1,1)):o.splice(i--,1);else this._propLookup={},this._siblings=J(t,this,!1),1===u&&this._siblings.length>1&&ee(t,this,null,1,this._siblings);(this.vars.immediateRender||0===r&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-d,this.render(Math.min(0,-this._delay)))},!0),F=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var r,n={};for(r in e)G[r]||r in t&&"transform"!==r&&"x"!==r&&"y"!==r&&"width"!==r&&"height"!==r&&"className"!==r&&"border"!==r||!(!K[r]||K[r]&&K[r]._autoCSS)||(n[r]=e[r],delete e[r]);e.css=n};u=I.prototype=new M,u.constructor=I,u.kill()._gc=!1,u.ratio=0,u._firstPT=u._targets=u._overwrittenProps=u._startAt=null,u._notifyPluginsOfEnabled=u._lazy=!1,I.version="1.19.1",I.defaultEase=u._ease=new E(null,null,1,1),I.defaultOverwrite="auto",I.ticker=l,I.autoSleep=120,I.lagSmoothing=function(e,t){l.lagSmoothing(e,t)},I.selector=e.$||e.jQuery||function(t){var r=e.$||e.jQuery;return r?(I.selector=r,r(t)):"undefined"==typeof i?t:i.querySelectorAll?i.querySelectorAll(t):i.getElementById("#"===t.charAt(0)?t.substr(1):t)};var L=[],N={},j=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,U=function(e){for(var t,r=this._firstPT,n=1e-6;r;)t=r.blob?1===e?this.end:e?this.join(""):this.start:r.c*e+r.s,r.m?t=r.m(t,this._target||r.t):t<n&&t>-n&&!r.blob&&(t=0),r.f?r.fp?r.t[r.p](r.fp,t):r.t[r.p](t):r.t[r.p]=t,r=r._next},B=function(e,t,r,n){var i,a,o,s,u,l,c,h=[],f=0,d="",m=0;for(h.start=e,h.end=t,e=h[0]=e+"",t=h[1]=t+"",r&&(r(h),e=h[0],t=h[1]),h.length=0,i=e.match(j)||[],a=t.match(j)||[],n&&(n._next=null,n.blob=1,h._firstPT=h._applyPT=n),u=a.length,s=0;s<u;s++)c=a[s],l=t.substr(f,t.indexOf(c,f)-f),d+=l||!s?l:",",f+=l.length,m?m=(m+1)%5:"rgba("===l.substr(-5)&&(m=1),c===i[s]||i.length<=s?d+=c:(d&&(h.push(d),d=""),o=parseFloat(i[s]),h.push(o),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:o,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-o)||0,f:0,m:m&&m<4?Math.round:0}),f+=c.length;return d+=t.substr(f),d&&h.push(d),h.setRatio=U,h},V=function(e,t,r,n,i,a,o,s,u){"function"==typeof n&&(n=n(u||0,e));var l,c=typeof e[t],h="function"!==c?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),f="get"!==r?r:h?o?e[h](o):e[h]():e[t],d="string"==typeof n&&"="===n.charAt(1),m={t:e,p:t,s:f,f:"function"===c,pg:0,n:i||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-f||0};if(("number"!=typeof f||"number"!=typeof n&&!d)&&(o||isNaN(f)||!d&&isNaN(n)||"boolean"==typeof f||"boolean"==typeof n?(m.fp=o,l=B(f,d?m.s+m.c:n,s||I.defaultStringFilter,m),m={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:i||t,pr:0,m:0}):(m.s=parseFloat(f),d||(m.c=parseFloat(n)-m.s||0))),m.c)return(m._next=this._firstPT)&&(m._next._prev=m),this._firstPT=m,m},q=I._internals={isArray:v,isSelector:F,lazyTweens:L,blobDif:B},K=I._plugins={},z=q.tweenLookup={},Y=0,G=q.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},X=M._rootFramesTimeline=new R,H=M._rootTimeline=new R,Q=30,Z=q.lazyRender=function(){var e,t=L.length;for(N={};--t>-1;)e=L[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);L.length=0};H._startTime=l.time,X._startTime=l.frame,H._active=X._active=!0,setTimeout(Z,1),M._updateRoot=I.render=function(){var e,t,r;if(L.length&&Z(),H.render((l.time-H._startTime)*H._timeScale,!1,!1),X.render((l.frame-X._startTime)*X._timeScale,!1,!1),L.length&&Z(),l.frame>=Q){Q=l.frame+(parseInt(I.autoSleep,10)||120);for(r in z){for(t=z[r].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete z[r]}if(r=H._first,(!r||r._paused)&&I.autoSleep&&!X._first&&1===l._listeners.tick.length){for(;r&&r._paused;)r=r._next;r||l.sleep()}}},l.addEventListener("tick",M._updateRoot);var J=function(e,t,r){var n,i,a=e._gsTweenID;if(z[a||(e._gsTweenID=a="t"+Y++)]||(z[a]={target:e,tweens:[]}),t&&(n=z[a].tweens,n[i=n.length]=t,r))for(;--i>-1;)n[i]===t&&n.splice(i,1);return z[a].tweens},$=function(e,t,r,n){var i,a,o=e.vars.onOverwrite;return o&&(i=o(e,t,r,n)),o=I.onOverwrite,o&&(a=o(e,t,r,n)),i!==!1&&a!==!1},ee=function(e,t,r,n,i){var a,o,s,u;if(1===n||n>=4){for(u=i.length,a=0;a<u;a++)if((s=i[a])!==t)s._gc||s._kill(null,e,t)&&(o=!0);else if(5===n)break;return o}var l,c=t._startTime+d,h=[],f=0,m=0===t._duration;for(a=i.length;--a>-1;)(s=i[a])===t||s._gc||s._paused||(s._timeline!==t._timeline?(l=l||te(t,0,m),0===te(s,l,m)&&(h[f++]=s)):s._startTime<=c&&s._startTime+s.totalDuration()/s._timeScale>c&&((m||!s._initted)&&c-s._startTime<=2e-10||(h[f++]=s)));for(a=f;--a>-1;)if(s=h[a],2===n&&s._kill(r,e,t)&&(o=!0),2!==n||!s._firstPT&&s._initted){if(2!==n&&!$(s,t))continue;s._enabled(!1,!1)&&(o=!0)}return o},te=function(e,t,r){for(var n=e._timeline,i=n._timeScale,a=e._startTime;n._timeline;){if(a+=n._startTime,i*=n._timeScale,n._paused)return-100;n=n._timeline}return a/=i,a>t?a-t:r&&a===t||!e._initted&&a-t<2*d?d:(a+=e.totalDuration()/e._timeScale/i)>t+d?0:a-t-d};u._init=function(){var e,t,r,n,i,a,o=this.vars,s=this._overwrittenProps,u=this._duration,l=!!o.immediateRender,c=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),i={};for(n in o.startAt)i[n]=o.startAt[n];if(i.overwrite=!1,i.immediateRender=!0,i.lazy=l&&o.lazy!==!1,i.startAt=i.delay=null,this._startAt=I.to(this.target,0,i),l)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(o.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),r={};for(n in o)G[n]&&"autoCSS"!==n||(r[n]=o[n]);if(r.overwrite=0,r.data="isFromStart",r.lazy=l&&o.lazy!==!1,r.immediateRender=l,this._startAt=I.to(this.target,0,r),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof E?c:"function"==typeof c?new E(c,o.easeParams):x[c]||I.defaultEase:I.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],s?s[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(t&&I._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(r=this._firstPT;r;)r.s+=r.c,r.c=-r.c,r=r._next;this._onUpdate=o.onUpdate,this._initted=!0},u._initProps=function(t,r,n,i,a){var o,s,u,l,c,h;if(null==t)return!1;N[t._gsTweenID]&&Z(),this.vars.css||t.style&&t!==e&&t.nodeType&&K.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(o in this.vars)if(h=this.vars[o],G[o])h&&(h instanceof Array||h.push&&v(h))&&h.join("").indexOf("{self}")!==-1&&(this.vars[o]=h=this._swapSelfInParams(h,this));else if(K[o]&&(l=new K[o])._onInitTween(t,this.vars[o],this,a)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority,m:0},s=l._overwriteProps.length;--s>-1;)r[l._overwriteProps[s]]=this._firstPT;(l._priority||l._onInitAllProps)&&(u=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else r[o]=V.call(this,t,o,"get",h,o,0,null,this.vars.stringFilter,a);return i&&this._kill(i,t)?this._initProps(t,r,n,i,a):this._overwrite>1&&this._firstPT&&n.length>1&&ee(t,this,r,this._overwrite,n)?(this._kill(r,t),this._initProps(t,r,n,i,a)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(N[t._gsTweenID]=!0),u)},u.render=function(e,t,r){var n,i,a,o,s=this._time,u=this._duration,l=this._rawPrevTime;if(e>=u-1e-7&&e>=0)this._totalTime=this._time=u,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,i="onComplete",r=r||this._timeline.autoRemoveChildren),0===u&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(e=0),(l<0||e<=0&&e>=-1e-7||l===d&&"isPause"!==this.data)&&l!==e&&(r=!0,l>d&&(i="onReverseComplete")),this._rawPrevTime=o=!t||e||l===e?e:d);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===u&&l>0)&&(i="onReverseComplete",n=this._reversed),e<0&&(this._active=!1,0===u&&(this._initted||!this.vars.lazy||r)&&(l>=0&&(l!==d||"isPause"!==this.data)&&(r=!0),this._rawPrevTime=o=!t||e||l===e?e:d)),this._initted||(r=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/u,h=this._easeType,f=this._easePower;(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===f?c*=c:2===f?c*=c*c:3===f?c*=c*c*c:4===f&&(c*=c*c*c*c),1===h?this.ratio=1-c:2===h?this.ratio=c:e/u<.5?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(e/u);if(this._time!==s||r){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=l,L.push(this),void(this._lazy=[e,t]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/u):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,t,r):i||(i="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==u||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&e!==-1e-4&&this._startAt.render(e,t,r),t||(this._time!==s||n||r)&&this._callback("onUpdate")),i&&(this._gc&&!r||(e<0&&this._startAt&&!this._onUpdate&&e!==-1e-4&&this._startAt.render(e,t,r),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i),0===u&&this._rawPrevTime===d&&o!==d&&(this._rawPrevTime=0)))}},u._kill=function(e,t,r){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:I.selector(t)||t;var n,i,a,o,s,u,l,c,h,f=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline;if((v(t)||F(t))&&"number"!=typeof t[0])for(n=t.length;--n>-1;)this._kill(e,t[n],r)&&(u=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(t===this._targets[n]){s=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,i=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(l=e||s,c=e!==i&&"all"!==i&&e!==s&&("object"!=typeof e||!e._tempKill),r&&(I.onOverwrite||this.vars.onOverwrite)){for(a in l)s[a]&&(h||(h=[]),h.push(a));if((h||!e)&&!$(this,r,t,h))return!1}for(a in l)(o=s[a])&&(f&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,u=!0),o.pg&&o.t._kill(l)&&(u=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),c&&(i[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return u},u.invalidate=function(){return this._notifyPluginsOfEnabled&&I._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-d,this.render(Math.min(0,-this._delay))),this},u._enabled=function(e,t){if(c||l.wake(),e&&this._gc){var r,n=this._targets;if(n)for(r=n.length;--r>-1;)this._siblings[r]=J(n[r],this,!0);else this._siblings=J(this.target,this,!0)}return M.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&I._onPluginEvent(e?"_onEnable":"_onDisable",this)},I.to=function(e,t,r){return new I(e,t,r)},I.from=function(e,t,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new I(e,t,r)},I.fromTo=function(e,t,r,n){return n.startAt=r,n.immediateRender=0!=n.immediateRender&&0!=r.immediateRender,new I(e,t,n)},I.delayedCall=function(e,t,r,n,i){return new I(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},I.set=function(e,t){return new I(e,0,t)},I.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:I.selector(e)||e;var r,n,i,a;if((v(e)||F(e))&&"number"!=typeof e[0]){for(r=e.length,n=[];--r>-1;)n=n.concat(I.getTweensOf(e[r],t));for(r=n.length;--r>-1;)for(a=n[r],i=r;--i>-1;)a===n[i]&&n.splice(r,1)}else for(n=J(e).concat(),r=n.length;--r>-1;)(n[r]._gc||t&&!n[r].isActive())&&n.splice(r,1);return n},I.killTweensOf=I.killDelayedCallsTo=function(e,t,r){"object"==typeof t&&(r=t,t=!1);for(var n=I.getTweensOf(e,t),i=n.length;--i>-1;)n[i]._kill(r,e)};var re=b("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=re.prototype},!0);if(u=re.prototype,re.version="1.19.0",re.API=2,u._firstPT=null,u._addTween=V,u.setRatio=U,u._kill=function(e){var t,r=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=r.length;--t>-1;)null!=e[r[t]]&&r.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},u._mod=u._roundProps=function(e){for(var t,r=this._firstPT;r;)t=e[this._propName]||null!=r.n&&e[r.n.split(this._propName+"_").join("")],t&&"function"==typeof t&&(2===r.f?r.t._applyPT.m=t:r.m=t),r=r._next},I._onPluginEvent=function(e,t){var r,n,i,a,o,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(o=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:a)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:a=s,s=o}s=t._firstPT=i}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(r=!0),s=s._next;return r},re.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===re.API&&(K[(new e[t])._propName]=e[t]);return!0},_.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";
var t,r=e.propName,n=e.priority||0,i=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=b("plugins."+r.charAt(0).toUpperCase()+r.substr(1)+"Plugin",function(){re.call(this,r,n),this._overwriteProps=i||[]},e.global===!0),s=o.prototype=new re(r);s.constructor=o,o.API=e.API;for(t in a)"function"==typeof e[t]&&(s[a[t]]=e[t]);return o.version=e.version,re.activate([o]),o},o=e._gsQueue){for(s=0;s<o.length;s++)o[s]();for(u in y)y[u].func||e.console.log("GSAP encountered missing dependency: "+u)}c=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof e?e:this||window,"TweenLite")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],159:[function(e,t,r){"use strict";function n(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}t.exports=n},{}],160:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],161:[function(e,t,r){function n(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if("function"==typeof n)e[r]=n;else if(n&&"object"==typeof n){var o=i(a,n);Object.defineProperty(e,r,o)}}}var i=e("xtend"),a={enumerable:!0,configurable:!0};t.exports=function(e,t){n(e.prototype,t)},t.exports.mix=n},{xtend:168}],162:[function(e,t,r){"use strict";function n(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var r=e.args[t];0===t?e.args[t]={name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return o({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}function a(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(i(e))}var o=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in u){var t=u[e];r[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];r[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];r[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];r[t+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=o({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=o({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=o({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=o({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=o({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=o({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=o({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=o({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":126}],163:[function(e,t,r){function n(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var i=new Array(r.length);for(e=0;e<i.length;++e)i[e]=r[e][1];return i}function a(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n="generic"===e;if(t===-1){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",o=new Function(a);return o()}if(0===t){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",o=new Function("TrivialArray",a);return o(h[e][0])}var a=["'use strict'"],s=u(t),l=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),f=s.map(function(e){return"b"+e}).join(","),d=s.map(function(e){return"c"+e}).join(",");a.push("function "+r+"(a,"+f+","+d+",d){this.data=a","this.shape=["+f+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+r+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?a.push("return this.data.set("+c+",v)}"):a.push("return this.data["+c+"]=v}"),a.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?a.push("return this.data.get("+c+")}"):a.push("return this.data["+c+"]}"),a.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}"),a.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var m=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),p=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+m.join(",")+","+p.join(","));for(var v=0;v<t;++v)a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");a.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var v=0;v<t;++v)a.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");a.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var y=new Array(t),g=new Array(t),v=0;v<t;++v)y[v]="a[i"+v+"]",g[v]="b[i"+v+"]";a.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+y.join(",")+","+g.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var v=0;v<t;++v)a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",a.join("\n"));return o(h[e],i)}function o(e){if(l(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,r,n){if(void 0===e){var i=h.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===r){r=new Array(s);for(var u=s-1,l=1;u>=0;--u)r[u]=l,l*=t[u]}if(void 0===n){n=0;for(var u=0;u<s;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var c=o(e),f=h[c];f.length<=s+1;)f.push(a(c,f.length-1));var i=f[s+1];return i(e,t,r,n)}var u=e("iota-array"),l=e("is-buffer"),c="undefined"!=typeof Float64Array,h={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s},{"iota-array":159,"is-buffer":160}],164:[function(e,t,r){var n=new Int8Array(4),i=new Int32Array(n.buffer,0,1),a=new Float32Array(n.buffer,0,1),o=function(){};o.intBitsToFloat=function(e){return i[0]=e,a[0]},o.floatToIntBits=function(e){return a[0]=e,i[0]},o.intToFloatColor=function(e){return o.intBitsToFloat(4278190079&e)},o.colorToFloat=function(e,t,r,n){var i=n<<24|r<<16|t<<8|e;return o.intToFloatColor(i)},o.isPowerOfTwo=function(e){return 0===(e&e-1)},o.nextPowerOfTwo=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1},t.exports=o},{}],165:[function(e,t,r){function n(e,t){return t&&"number"!=typeof t||(t=[0,0,0,0]),t[0]=e[0]*e[3],t[1]=e[1]*e[3],t[2]=e[2]*e[3],t[3]=e[3],t}t.exports=n},{}],166:[function(e,t,r){(function(t,n){"use strict";function i(e){if(e){var t=e.length||e.byteLength,r=g.log2(t);E[r].push(e)}}function a(e){i(e.buffer)}function o(e){var e=g.nextPow2(e),t=g.log2(e),r=E[t];return r.length>0?r.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(o(e),0,e)}function u(e){return new Uint16Array(o(2*e),0,e)}function l(e){return new Uint32Array(o(4*e),0,e)}function c(e){return new Int8Array(o(e),0,e)}function h(e){return new Int16Array(o(2*e),0,e)}function f(e){return new Int32Array(o(4*e),0,e)}function d(e){return new Float32Array(o(4*e),0,e)}function m(e){return new Float64Array(o(8*e),0,e)}function p(e){return b?new Uint8ClampedArray(o(e),0,e):s(e)}function v(e){return new DataView(o(e),0,e)}function y(e){e=g.nextPow2(e);var t=g.log2(e),r=x[t];return r.length>0?r.pop():new n(e)}var g=e("bit-twiddle"),_=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:_([32,0]),UINT16:_([32,0]),UINT32:_([32,0]),INT8:_([32,0]),INT16:_([32,0]),INT32:_([32,0]),FLOAT:_([32,0]),DOUBLE:_([32,0]),DATA:_([32,0]),UINT8C:_([32,0]),BUFFER:_([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=t.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=_([32,0])),w.BUFFER||(w.BUFFER=_([32,0]));var E=w.DATA,x=w.BUFFER;r.free=function(e){if(n.isBuffer(e))x[g.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|g.log2(t);E[r].push(e)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=a,r.freeArrayBuffer=i,r.freeBuffer=function(e){x[g.log2(e.length)].push(e)},r.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return o(e);switch(t){case"uint8":return s(e);case"uint16":return u(e);case"uint32":return l(e);case"int8":return c(e);case"int16":return h(e);case"int32":return f(e);case"float":case"float32":return d(e);case"double":case"float64":return m(e);case"uint8_clamped":return p(e);case"buffer":return y(e);case"data":case"dataview":return v(e);default:return null}return null},r.mallocArrayBuffer=o,r.mallocUint8=s,r.mallocUint16=u,r.mallocUint32=l,r.mallocInt8=c,r.mallocInt16=h,r.mallocInt32=f,r.mallocFloat32=r.mallocFloat=d,r.mallocFloat64=r.mallocDouble=m,r.mallocUint8Clamped=p,r.mallocDataView=v,r.mallocBuffer=y,r.clearCache=function(){for(var e=0;e<32;++e)w.UINT8[e].length=0,w.UINT16[e].length=0,w.UINT32[e].length=0,w.INT8[e].length=0,w.INT16[e].length=0,w.INT32[e].length=0,w.FLOAT[e].length=0,w.DOUBLE[e].length=0,w.UINT8C[e].length=0,E[e].length=0,x[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":125,buffer:41,dup:129}],167:[function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,i=e[0],a=e[0],o=1;o<n;++o)if(a=i,i=e[o],t(i,a)){if(o===r){r++;continue}e[r++]=i}return e.length=r,e}function i(e){for(var t=1,r=e.length,n=e[0],i=e[0],a=1;a<r;++a,i=n)if(i=n,n=e[a],n!==i){if(a===t){t++;continue}e[t++]=n}return e.length=t,e}function a(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),i(e))}t.exports=a},{}],168:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}],169:[function(e,t,r){"use strict";t.exports={"tint.frag":"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec4 v_col;\nvarying vec3 pos;\nvarying vec2 v_tex0;\nuniform sampler2D texture0;\nuniform vec4 tint;\n\nvoid main() {\n   gl_FragColor = texture2D(texture0,  v_tex0);\n}\n","quad.vert":"attribute vec4 position;\nattribute vec4 color;\nattribute vec2 texcoord0;\nuniform mat4 projection;\nuniform mat4 view;\nuniform mat4 model;\nvarying vec4 v_col;\nvarying vec2 v_tex0;\n\nvoid main() {\n   gl_Position = projection * view * model * vec4(position.xyz, 1);\n   v_col = color;\n   v_tex0 = texcoord0;\n   gl_PointSize = 1.00000;\n}\n"}},{}],170:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a="https://www.apple.com/apple-arcade/itms-apps://?action=arcade&amp;itscg=10000&amp;itsct=arc-0-ovp-try_cnt-apl-btn-200204",o="https://www.apple.com/apple-arcade/itms-apps://?action=arcade&amp;itscg=10000&amp;itsct=arc-0-ovp-try_vnt-apl-btn-200204",s=function(){function e(){n(this,e),this.localNavButtons=document.querySelectorAll(".ac-ln-button"),this.linksRID=document.querySelectorAll("[data-link-rid]"),this._updateLocalNavButtons(),this._showLinks()}return i(e,[{key:"_updateLocalNavButtons",value:function(){this.localNavButtons.forEach(function(e){e.parentElement.classList.contains("button-variant-a")?e.href=o:e.href=a,e.removeAttribute("data-analytics-click"),e.setAttribute("data-rid-relay",'{"288":"itsct"}'),e.setAttribute("data-analytics-exit-link","data-relay")})}},{key:"_showLinks",value:function(){this.linksRID.forEach(function(e){e.style.display="block"})}}]),e}();t.exports=s},{}],171:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/ac-raf-emitter/draw"),l=Array.from(document.querySelectorAll('[data-component-list*="GameTrailersCard"]'));l.forEach(function(e,t){u(function(){return e.style.zIndex=Math.abs(t-l.length)})});var c=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.index=l.indexOf(r.el),r.cardElement=r.el.querySelector("[data-card-element]"),r.videoFrame=r.el.querySelector("[data-inline-video-container]"),r.playButton=r.el.querySelector("[data-card-play-button]"),r}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this.index/l.length*100+"rh - 100vh",t=(this.index+1)/l.length*100+"rh - 100vh",r={el:this.cardElement,breakpointMask:"S",relativeTo:".games-gallery",easeFunction:"linear",start:e,end:t};this.addKeyframe(Object.assign({},r,{el:this.videoFrame,breakpointMask:"XLM",ease:.3,easeFunction:"easeOutCubic",disabledWhen:["transform-hairlines-disable","android","reduced-motion"],scale:[.92,1]})),0!==this.index&&(this.addKeyframe(Object.assign({},r,{ease:.9,scale:[.92,1],disabledWhen:["transform-hairlines-disable","android","reduced-motion"]})),this.addKeyframe(Object.assign({},r,{ease:1,end:"("+e+" + 1px)",opacity:[.001,.999]})))}},{key:"onBreakpointChange",value:function(e){var t=this;"S"===e.breakpoint&&"S"!==e.previousBreakpoint&&u(function(){t.el.style.visibility="hidden",u(function(){t.el.style.visibility="visible"})})}}]),t}(s);t.exports=c},{"@marcom/ac-raf-emitter/draw":86,"@marcom/bubble-gum/BaseComponent":112}],172:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=.001,l=.999,c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"mounted",value:function(){this.video=this.el.querySelector("video"),this.headline=this.el.querySelector(".section-headline"),this.paragraph=this.el.querySelector(".section-paragraph"),this.copyContainer=this.el.querySelector(".copy-container"),this.addKeyframe({el:this.headline,start:"-100vh",end:"-75vh",opacity:[u,l]}),this.addKeyframe({el:this.video,relativeTo:".section-games .section-headline",start:"-100vh",end:"50% - 100vh + 52px",opacity:[l,.55]}),this.addKeyframe({el:this.paragraph,start:"-100vh",end:"-75vh",opacity:[u,l]}),this.addKeyframe({el:this.copyContainer,ease:1,start:"50% - 50vh",end:"100% + 12vh - 52px",y:["0px","12vh"]}),this.addKeyframe({el:this.copyContainer,start:"100% - 25vh",end:"100% + 12vh",opacity:[l,u]})}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("game-hero")}}]),t}(s);t.exports=c},{"@marcom/bubble-gum/BaseComponent":112}],173:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/update"),c=e("@marcom/ac-raf-emitter/draw"),h=e("@marcom/useragent-detect"),f=document.getElementById("ac-localnav"),d=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.initialized=!1,r.noReducedMotion=document.documentElement.classList.contains("no-reduced-motion"),r.addDiscreteEvent({event:"LazyInit: GameTrailers Layout",start:"-150vh",onEvent:function(t){t.controller.off(t.event),r.initialized=!0,r.fitsViewport=r.noReducedMotion,r.breakpointWasChanged=!1,r.lastBreakpointOnResize=e.pageMetrics.breakpoint,l(function(){r.cards=r.el.querySelectorAll(".game-card"),r.videoContainers=r.el.querySelectorAll(".game-card-video"),r.detailContainers=r.el.querySelectorAll(".game-card-detail"),r.videoContainers[0]&&r.onResizeDebounced(e.pageMetrics)})}}),r}return o(t,e),s(t,[{key:"updateMetrics",value:function(e){var t=this;return new Promise(function(r){l(function(){var i=window.getComputedStyle(t.videoContainers[0]),a=parseFloat(i.minWidth),o=parseFloat(i.maxWidth),s=parseFloat(i.getPropertyValue("--aspect-ratio")),u=f?f.clientHeight:0,l=Math.max.apply(Math,n(Array.from(t.detailContainers).map(function(e){return e.clientHeight}))),h=e.windowHeight,d=h-l-u,m=Math.round(d*s);m>=o?m=o:m<=a&&(m=a),(m>=o||m<=a)&&(d=Math.floor(m/s)),t.fitsViewport=d+l+u<=h&&t.noReducedMotion,c(function(){t.el.style.setProperty("--game-trailers-video-width",m+"px"),t.el.style.setProperty("--game-trailers-video-height",d+"px"),r()})})})}},{key:"setBreakpointOnResize",value:function(e){e.breakpoint!==this.lastBreakpointOnResize&&(this.breakpointWasChanged=!0),this.lastBreakpointOnResize=e.breakpoint}},{key:"onResizeDebounced",value:function(e){var t=this;this.initialized&&this.updateMetrics(e).then(function(){c(function(){t.setBreakpointOnResize(e);var r=!t.breakpointWasChanged&&t.fitsViewport&&!h.os.android;document.documentElement.classList.toggle("viewport-cards",r),l(function(){t.anim.forceUpdate()})})})}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("no-ie")}}]),t}(u);t.exports=d},{"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90,"@marcom/bubble-gum/BaseComponent":112,"@marcom/useragent-detect":124}],174:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/anim-system/Model/AnimSystemModel"),u=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-films").create,c=e("@marcom/ac-raf-emitter/update"),h="end-state",f=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.section=document.querySelector(".section-games"),r.poster=r.el.querySelector("[data-video-poster]"),r.videoContainer=r.el.querySelector("[data-inline-video-container]"),r.isAndroid=document.documentElement.classList.contains("android"),r.showPoster=r.showPoster.bind(r),r.hidePoster=r.hidePoster.bind(r),r.showVideoPlayer=r.showVideoPlayer.bind(r),r.hideVideoPlayer=r.hideVideoPlayer.bind(r),r.hidePlayButton=r.hidePlayButton.bind(r),
r.pauseOtherVideos=r.pauseOtherVideos.bind(r),r.onVideoPlay=r.onVideoPlay.bind(r),r.onVideoEnded=r.onVideoEnded.bind(r),r.onModalOpened=r.onModalOpened.bind(r),r.onModalClosed=r.onModalClosed.bind(r),r.viewportWhenEnteringFullscreen=null,r.addDiscreteEvent({event:"LazyInit: GameTrailers Video",start:"-100vh",onEvent:function(t){t.controller.off(t.event),r.onBreakpointChange(e.pageMetrics)}}),r}return a(t,e),o(t,[{key:"showPoster",value:function(){this.poster.classList.contains("hidden")?this.poster.addEventListener("transitionend",this.hideVideoPlayer):this.hideVideoPlayer(),this.poster.classList.remove("hidden"),this.poster.removeAttribute("aria-hidden")}},{key:"hidePoster",value:function(){this.showVideoPlayer(),this.poster.classList.add("hidden"),this.poster.setAttribute("aria-hidden","true"),this.film.player.controls&&this.film.player.controls.playButtonElement.focus()}},{key:"showVideoPlayer",value:function(){this.film.player.el.style.visibility="visible"}},{key:"hideVideoPlayer",value:function(){this.film.player.el.style.visibility="hidden"}},{key:"showPlayButton",value:function(){this.poster.classList.remove("button-hidden")}},{key:"hidePlayButton",value:function(){this.poster.classList.add("button-hidden")}},{key:"pauseOtherVideos",value:function(){var e=this,t=this.gum.getComponentOfType("VideoViewportSource",this.section);t&&t.constructor.IS_SUPPORTED()&&t.pauseVideoPlayback(),this.gum.getComponentsOfType("GameTrailersVideo").forEach(function(t){t!==e&&t.film&&t.film.player&&t.film.player.pause()})}},{key:"instantiateInlineFilm",value:function(){this.film&&this.destroyFilmInstance(),this.film=l([this.poster],{targetElement:this.videoContainer}),this.addCommonEventListeners(),this.film.player.on("loadstart",this.hidePlayButton),this.film.player.on("canplay",this.hidePoster),this.film.player.on("play",this.onVideoPlay),this.isAndroid&&this.film.player.on("ended",this.onVideoEnded),this.showPoster()}},{key:"instantiateModalFilm",value:function(){var e=this;this.film&&this.destroyFilmInstance(),c(function(){e.film=l([e.poster],{modal:!0}),e.addCommonEventListeners(),e.film.modalVideo&&(e.film.modalVideo.on("open",e.onModalOpened),e.film.modalVideo.on("close",e.onModalClosed)),e.showPoster()})}},{key:"addCommonEventListeners",value:function(){var e=this.film.player.getMediaElement();e.addEventListener("webkitbeginfullscreen",this.onModalOpened,!1),e.addEventListener("webkitendfullscreen",this.onModalClosed,!1)}},{key:"removeCommonEventListeners",value:function(){var e=this.film.player.getMediaElement();e.removeEventListener("webkitbeginfullscreen",this.onModalOpened,!1),e.removeEventListener("webkitendfullscreen",this.onModalClosed,!1)}},{key:"destroyFilmInstance",value:function(){if(this.film){this.film.modalVideo&&this.film.modalVideo.close(),this.film.player.off("loadstart",this.hidePlayButton),this.film.player.off("canplay",this.hidePoster),this.film.player.off("play",this.pauseOtherVideos),this.removeCommonEventListeners(),this.film.modalVideo&&(this.film.modalVideo.off("open",this.onModalOpened),this.film.modalVideo.off("close",this.onModalClosed)),this.showPlayButton(),this.showPoster();var e=this.poster.cloneNode(!0);this.poster.parentNode.replaceChild(e,this.poster),this.poster=e;var t=this.film.player.el;if(this.film.player.controls&&this.film.player.controls.overlays){if(this.film.player.controls.overlays._popUp){var r=this.film.player.controls.overlays._popUp;r._removeEventListeners(),window.removeEventListener("resize",r._calcOffsets),r._player.off("resize",r._calcOffsets),r._tracker={destroy:function(){}},r.destroy()}this.film.player.controls.overlays.destroy()}if(this.film.player._controlsInteraction){var n=this.film.player._controlsInteraction;n._hideControls=function(){},n._elementEmitter.on("focusin",n._onFocusIn),n._elementEmitter.on("focusout",n._onFocusOut),n.destroy()}window.clearTimeout(this.film.player._videoImpl._refreshSizeTimeout),this.film.player._videoImpl.destroy=function(){this._textTracksEmitter&&(this._textTracksEmitter.off("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.off("change",this._forwardCaptionEvent),this._textTracksEmitter.off("removetrack",this._forwardCaptionEvent)),this._textTracks&&this._textTracks.destroy.call(this),this._textTracks=null,this._textTracksEmitter=null,this.el=null},this.film.modalVideo&&this.film.modalVideo.destroy(),this.film.player&&(this.film.player.refreshSize=function(){},this.film.player.destroy(),this.film.player=null),t&&t.parentNode.removeChild(t),this.film=null}}},{key:"onVideoPlay",value:function(){this.pauseOtherVideos(),this.isAndroid&&this.el.classList.remove(h)}},{key:"onVideoEnded",value:function(){this.isAndroid&&this.el.classList.add(h)}},{key:"onModalOpened",value:function(){this.showVideoPlayer(),this.viewportWhenEnteringModal=s.pageMetrics.breakpoint}},{key:"onModalClosed",value:function(){var e=s.pageMetrics.breakpoint,t=this.viewportWhenEnteringModal;this.viewportWhenEnteringModal=null,t!==e&&this.onBreakpointChange(s.pageMetrics),"S"===e&&this.hideVideoPlayer()}},{key:"onBreakpointChange",value:function(e){if(!this.viewportWhenEnteringModal){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return t?void(this.viewportWhenEnteringFullscreen=e.breakpoint):e.previousBreakpoint===this.viewportWhenEnteringFullscreen?void(this.viewportWhenEnteringFullscreen=null):void("S"===e.breakpoint?this.instantiateModalFilm():e.previousBreakpoint&&"S"!==e.previousBreakpoint||this.instantiateInlineFilm())}}}]),t}(u);t.exports=f},{"@marcom/ac-films":void 0,"@marcom/ac-raf-emitter/update":90,"@marcom/anim-system/Model/AnimSystemModel":100,"@marcom/bubble-gum/BaseComponent":112}],175:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("gl-matrix/vec3"),o=e("gl-matrix/mat4"),s=Math.PI/180,u=(180/Math.PI,function(){function e(t,r,i,s,u){n(this,e),this.friendlyName=u||"Camera3D",this.fov=t,this.near=i,this.far=s,this.aspect=r,this.zoom=1,this.position=a.create(),this.projectionMatrix=o.create(),this.viewMatrix=o.create(),this.updateProjectionMatrix()}return i(e,[{key:"makeCameraPixelPerfect",value:function(e,t){this.aspect=e/t;var r=this.fov*(Math.PI/180);this.z=t/(2*Math.tan(r/2)),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.projectionMatrix,t=this.near,r=t*Math.tan(.5*s*this.fov)/this.zoom,n=this.far,i=2*r,a=this.aspect*i,o=-.5*a,u=o+a,l=r-i,c=2*t/(u-o),h=2*t/(r-l),f=(u+o)/(u-o),d=(r+l)/(r-l),m=-(n+t)/(n-t),p=-2*n*t/(n-t);e[0]=c,e[4]=0,e[8]=f,e[12]=0,e[1]=0,e[5]=h,e[9]=d,e[13]=0,e[2]=0,e[6]=0,e[10]=m,e[14]=p,e[3]=0,e[7]=0,e[11]=-1,e[15]=0}},{key:"updateViewMatrix",value:function(){return o.identity(this.viewMatrix),o.translate(this.viewMatrix,this.viewMatrix,[this.x,this.y,-this.z]),o.rotateX(this.viewMatrix,this.viewMatrix,180*Math.PI/180),this.viewMatrix}},{key:"scaleToPosition",value:function(e){return this.z*(1-e)*-1}},{key:"x",get:function(){return this.position[0]},set:function(e){this.position[0]=e}},{key:"y",get:function(){return this.position[1]},set:function(e){this.position[1]=e}},{key:"z",get:function(){return this.position[2]},set:function(e){this.position[2]=e}}]),e}());t.exports=u},{"gl-matrix/mat4":141,"gl-matrix/vec3":142}],176:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.friendlyName=t,this.x=0,this.y=0,this.z=0,this.scale=1,this.width=0,this.height=0,this.visible=!0,this.sprites=[]}return i(e,[{key:"destroy",value:function(){this.sprites=null}},{key:"add",value:function(e){e.parent=this,this.sprites.push(e),this.updateDimensions()}},{key:"remove",value:function(e){if(e.parent===this){var t=this.sprites.indexOf(e);t!==-1&&this.sprites.splice(t,1),e.parent=null,this.updateDimensions()}}},{key:"updateDimensions",value:function(){var e=this;this.sprites.forEach(function(t){t.contributesToGroupDimensions&&(e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height))})}},{key:"toString",value:function(){return"("+this.x+","+this.y+","+this.z+")"}}]),e}();t.exports=a},{}],177:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("gl-basic-shader"),o=e("gl-texture2d"),s=e("./Camera3D"),u=e("./_default_shaders"),l=function(){function e(t){n(this,e),this.gl=t,this.camera=null,this.shader=null}return i(e,[{key:"createCamera",value:function(e){return this._checkOptions(e,["fov","aspect","near","far"])?(this.camera=new s(e.fov,e.aspect,e.near,e.far,"Camera3D"),this.camera):null}},{key:"createTexture",value:function(e){if(!this._checkOptions(e,["source","minFilter","magFilter"]))return null;var t=o(this.gl,e.source);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e.minFilter||this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e.magFilter||this.gl.LINEAR),t}},{key:"createColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,this.gl),i=o(n,1,1,n.RGBA,n.UNSIGNED_BYTE);return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([e,t,r,255])),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),i}},{key:"createShader",value:function(e,t){return this.shader=a(this.gl,{vertex:e||u["quad.vert"],fragment:t||u["tint.frag"],texcoord:!0,color:!0}),this.shader}},{key:"_checkOptions",value:function(e,t){return!!t.every(function(t){return e.hasOwnProperty(t)})||(console.error("Renderer error. Required options are missing "+t.join(" ")),!1)}}]),e}();t.exports=l},{"./Camera3D":175,"./_default_shaders":180,"gl-basic-shader":133,"gl-texture2d":147}],178:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.options=t,this.friendlyName=t.friendlyName,this.parent=t.parent||null,this.x=t.x,this.y=t.y,this.z=void 0!==t.z?t.z:0,this.scale=1,this.width=t.width,this.height=t.height,this.uvX=t.uvX,this.uvY=t.uvY,this.uvWidth=t.uvWidth,this.uvHeight=t.uvHeight,this.visible=!0,this.texture=t.texture,this.textureWidth=t.textureWidth,this.textureHeight=t.textureHeight,this.contributesToGroupDimensions=!0,this.uvCoords=new Float32Array(4)}return i(e,[{key:"destroy",value:function(){this.texture=null,this.parent=null,this.options=null}},{key:"getNormalizedTextCoordsForSourceDimensions",value:function(){var e=this.textureWidth,t=this.textureHeight;return this.uvCoords[0]=this.uvX/e,this.uvCoords[1]=this.uvY/t,this.uvCoords[2]=(this.uvX+this.uvWidth)/e,this.uvCoords[3]=(this.uvY+this.uvHeight)/t,this.uvCoords}},{key:"toString",value:function(){return this.friendlyName+" - local: ("+this.x+","+this.y+","+this.z+"), world: ("+this.renderX+","+this.renderY+","+this.renderZ+")"}},{key:"renderX",get:function(){for(var e=this.parent,t=this.x;e;)t+=e.x,e=e.parent;return t}},{key:"renderY",get:function(){for(var e=this.parent,t=this.y;e;)t+=e.y,e=e.parent;return t}},{key:"renderZ",get:function(){for(var e=this.parent,t=this.z;e;)t+=e.z,e=e.parent;return t}}]),e}();t.exports=a},{}],179:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.sprites={},this.count=0}return i(e,[{key:"add",value:function(e){if(this.get(e.friendlyName))throw"SpriteManager already contains sprite named "+e.friendlyName+"! Cannot add";return this.sprites[e.friendlyName]=e,this.count+=1,e}},{key:"remove",value:function(e){if(!this.get(e.friendlyName))throw"SpriteManager already does not contain sprite named "+e.friendlyName+"! Cannot remove";delete this.sprites[e.friendlyName],this.count-=1}},{key:"get",value:function(e){return this.sprites[e]||null}},{key:"getSpritesWithTexture",value:function(e){return Object.values(this.sprites).filter(function(t){return t.texture===e})}},{key:"forEach",value:function(e){Object.values(this.sprites).forEach(e)}},{key:"clear",value:function(){Object.values(this.sprites).forEach(function(e){return e.destroy()}),this.sprites={},this.count=0}}]),e}();t.exports=a},{}],180:[function(e,t,r){"use strict";t.exports={"tint.frag":"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec4 v_col;\nvarying vec3 pos;\nvarying vec2 v_tex0;\nuniform sampler2D texture0;\nuniform vec4 tint;\n\nvoid main() {\n   gl_FragColor = texture2D(texture0,  v_tex0);\n}\n","quad.vert":"attribute vec4 position;\nattribute vec4 color;\nattribute vec2 texcoord0;\nuniform mat4 projection;\nuniform mat4 view;\nuniform mat4 model;\nvarying vec4 v_col;\nvarying vec2 v_tex0;\n\nvoid main() {\n   gl_Position = projection * view * model * vec4(position.xyz, 1);\n   v_col = color;\n   v_tex0 = texcoord0;\n   gl_PointSize = 1.00000;\n}\n"}},{}],181:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/anim-system"),l=e("@marcom/anim-system/Model/AnimSystemModel"),c=e("../../../glsl/compiled-shaders"),h=e("./ShadowVideo"),f=e("@marcom/gl-3d-sprite-batch"),d=e("./positioning"),m=e("./Dolly/Renderer"),p=e("./Dolly/Sprite3D"),v=e("./Dolly/Sprite3DRepo"),y=e("./Dolly/Group"),g=e("./SpriteSheetController"),_=(e("../../components/PlaybackControl"),e("./Tracker")),b={update:e("@marcom/ac-raf-emitter/update"),cancelUpdate:e("@marcom/ac-raf-emitter/cancelUpdate"),draw:e("@marcom/ac-raf-emitter/draw"),cancelDraw:e("@marcom/ac-raf-emitter/cancelDraw")},w=.55,E=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.canvas=document.createElement("canvas"),r.el.appendChild(r.canvas),r.draw=r.draw.bind(r),r.updateVideoTexture=r.updateVideoTexture.bind(r),r.onBreakpointChange=r.onBreakpointChange.bind(r),r.onFirstFrameLoaded=r.onFirstFrameLoaded.bind(r),r.retinaScale=window.devicePixelRatio>1?2:1,r.gl=null,r.batch=null,r.renderer=null,r.camera=null,r.shader=null,r.tempTexture=null,r.spriteRepo=new v,r.spriteSheetController=null,r.screens=[],r.devices=[],r.dynamicKeyframes=[],r.timeline=u.createTimeGroup(),r.timeline.name="HeroLockup",r.shadowVideo=null,r.keyframes=null,r.hasLoadedImages=r.hasLoadedVideo=r.hasFinishedObjectPlacement=!1,r.tracker=new _;var a=getComputedStyle(r.el).getPropertyValue("--lockup-padding-bottom");return r.paddingBottom=a,r}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this.el.clientWidth,t=this.el.clientHeight;this.gl=this.canvas.getContext("webgl",{alpha:!1,antialias:!1,premultipliedAlpha:!1,depth:!0}),this.batch=new f(this.gl),this.renderer=new m(this.gl),this.camera=this.renderer.createCamera({fov:50,aspect:e/t,near:50,far:1e4}),this.shader=this.renderer.createShader(c["quad.vert"],c["tint.frag"]),this.retinaScale=window.devicePixelRatio>1?2:1,this.tempTexture=this.renderer.createColorTexture(255,255,255,255),this.createFirstFrameTexture(),this.createVideo(),this.createSpriteSheetController(),this.createRenderKeyframes(),this.setupDimming(),this.onResizeImmediate()}},{key:"createSpriteSheetController",value:function(){var e=this;this.spriteSheetController&&this.spriteSheetController.destroy(),this.spriteSheetController=new g({name:"hardware",figure:this.el.querySelector("figure.spritesheet")}),this.spriteSheetController.once("load",function(){e.hasLoadedImages=!0,e.createDevices(),e.createScreens(),e.onLoadingComplete()}),this.spriteSheetController.load()}},{key:"createRenderKeyframes",value:function(){var e=this,t=!1;this.addRAFLoop({event:"HeroLockupDraw",start:"-100vh",end:"100rh",relativeTo:".sticky-lockup-container",onDraw:this.draw,onEnter:function(){t&&e.shadowVideo.video.paused&&e.shadowVideo.video.play()},onExit:function(){t=!0,!e.shadowVideo.video.paused&&e.shadowVideo.video.pause()}}),this.addContinuousEvent({start:"-50vh",end:"100% - 50vh",time:[0,this.timeline.duration],relativeTo:".section.section-lockup",ease:.75,easeFunction:"linear",breakpointMask:["L","M"],onDraw:function(t){e.timeline.time(t.tweenProps.time.current)}}),this.addDiscreteEvent({event:"Analytics: HeroTracking",start:"100rh - 100vh",relativeTo:".sticky-lockup-container",onEvent:function(t){t.controller.off(t.event),e.tracker.shouldTrack=!1}})}},{key:"createFirstFrameTexture",value:function(){this.firstFrameImage&&(this.firstFrameImage.removeEventListener("load",this.onFirstFrameLoaded),this.firstFrameImage.src=""),this.firstFrameImage=new Image,this.firstFrameImage.addEventListener("load",this.onFirstFrameLoaded);var e=g.getSpriteSheetPath(this.el.querySelector(".video-spritesheet"));e[1]=e[1].replace(this.getBreakpointSuffix(),this.getBreakpointSuffixForVideo()),this.firstFrameImage.src=e[1]+e[2]}},{key:"onFirstFrameLoaded",value:function(e){var t=this;if(!this.hasLoadedVideo){var r=e.target;this.videoTexture=this.tempTexture=this.renderer.createTexture({source:r,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR}),this.screens.forEach(function(e){e.texture=t.tempTexture,e.textureWidth=r.naturalWidth,e.textureHeight=r.naturalHeight}),this.hasLoadedVideo=!0,this.onLoadingComplete()}}},{key:"createVideo",value:function(){var e=this;this.videoTexture=this.tempTexture,this.shadowVideo||(this.shadowVideo=new h({el:this.el,loop:!0,autoplay:!0}),this.playbackControl=this.gum.getComponentOfType("PlaybackControl",this.el.parentElement),this.playbackControl.mediaElement=this.shadowVideo.video),this.shadowVideo.once(h.canplaythrough,function(){try{e.videoTexture=e.renderer.createTexture({source:e.shadowVideo.video,minFilter:e.gl.LINEAR,magFilter:e.gl.LINEAR}),e.screens.forEach(function(t){t.textureWidth=e.shadowVideo.video.videoWidth,t.textureHeight=e.shadowVideo.video.videoHeight}),e.hasLoadedVideo||(e.hasLoadedVideo=!0,e.onLoadingComplete()),e.shadowVideo.video.play(),e.tracker.track()}catch(t){e.videoTexture=e.tempTexture}});var t=this.el.querySelector("video").getAttribute("data-src-"+this.getBreakpointSuffixForVideo());this.shadowVideo.load(t)}},{key:"createDevices",value:function(){var e=this;this.devices=[],this.deviceTexture=this.renderer.createTexture({source:this.spriteSheetController.image,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR});var t=d[this.getBreakpointSuffix()],r=Object.keys(this.spriteSheetController.json.frames);r.forEach(function(r){var n=r.replace(/\.png|\.jpg|_large|_medium|_small|_2x|__.*/g,""),i=e.spriteSheetController.json.frames[r],a=i.frame,o=new p({friendlyName:n,texture:e.deviceTexture,textureWidth:e.deviceTexture.width,textureHeight:e.deviceTexture.height,x:0,y:0,z:0,width:a.w/e.retinaScale,height:a.h/e.retinaScale,uvX:a.x,uvY:a.y,uvWidth:a.w,uvHeight:a.h});t[n]&&t[n]["position-offset"]&&(o.x+=t[n]["position-offset"].x?t[n]["position-offset"].x:0,o.y+=t[n]["position-offset"].y?t[n]["position-offset"].y:0,o.y+=t[n]["position-offset"].z?t[n]["position-offset"].z:0),1===e.retinaScale&&t[n]&&t[n]["1x-offset"]&&(o.x+=t[n]["1x-offset"].x?t[n]["1x-offset"].x:0,o.y+=t[n]["1x-offset"].y?t[n]["1x-offset"].y:0,o.y+=t[n]["1x-offset"].z?t[n]["1x-offset"].z:0),e.spriteRepo.add(o),e.devices.push(o)}),this.spriteRepo.get("tv_shadow").contributesToGroupDimensions=!1}},{key:"createScreens",value:function(){this.screens=[];var e=d[this.getBreakpointSuffixForVideo()],t=d[this.getBreakpointSuffix()],r=.01;for(var n in t){var i=n+"-video",a=e[n].video,o=t[n].video;if(a){var s=o["position-offset"],u=o["dimensions-offset"],l=this.spriteRepo.get(n),c=new p({friendlyName:i,texture:this.tempTexture,textureWidth:this.tempTexture.width,textureHeight:this.tempTexture.height,x:s.x,y:s.y,z:r,width:l.width+u.width,height:l.height+u.height,uvX:a.uv.x,uvY:a.uv.y,uvWidth:a.uv.width,uvHeight:a.uv.height});this.screens.push(c),this.spriteRepo.add(c)}}}},{key:"onLoadingComplete",value:function(){var e=this;if(this.hasLoadedImages&&this.hasLoadedVideo){this.keyframes={};var t=d[this.getBreakpointSuffix()],r=void 0;r=this.createGroup({name:"tv-group",z:500,children:[this.spriteRepo.get("tv"),this.spriteRepo.get("tv-video"),this.spriteRepo.get("tv_shadow")]});var n=1.1,i=t.tv,a=i.x.map(function(e){return e}),o=i.y.map(function(t){return t.replace("--lockup-padding-bottom",e.paddingBottom)});this.keyframes.tv=this.timeline.addKeyframe(r,{start:0,end:1,ease:.75,snapAtCreation:!0,x:a,y:o,z:[-.01,-.01],easeFunction:"easeInOutQuad"}),r=this.createGroup({name:"macbook-group",children:[this.spriteRepo.get("mba"),this.spriteRepo.get("mba-video")]}),i=t.mba,a=i.x.map(function(e){return e}),o=i.y.map(function(t){return t.replace("--lockup-padding-bottom",e.paddingBottom)}),this.keyframes.macbook=this.timeline.addKeyframe(r,{start:.579,end:n,ease:.95,snapAtCreation:!0,x:a,y:o,z:[-1e3,-.2],easeFunction:"easeOutQuad"}),r=this.createGroup({name:"ipad-group",z:200,children:[this.spriteRepo.get("ipad_pro"),this.spriteRepo.get("ipad_pro-video")]}),i=t.ipad_pro,a=i.x.map(function(e){return e}),o=i.y.map(function(t){return t.replace("--lockup-padding-bottom",e.paddingBottom)}),this.keyframes.ipad=this.timeline.addKeyframe(r,{start:.625,end:n,ease:.95,snapAtCreation:!0,x:a,y:o,z:[-1100,-.3],easeFunction:"easeOutQuad"}),r=this.createGroup({name:"iphone-group",z:0,children:[this.spriteRepo.get("iphone"),this.spriteRepo.get("iphone-video")]}),i=t.iphone,a=i.x.map(function(e){return e}),o=i.y.map(function(t){return t.replace("--lockup-padding-bottom",e.paddingBottom)}),this.keyframes.iphone=this.timeline.addKeyframe(r,{start:.65,end:n,ease:.95,snapAtCreation:!0,x:a,y:o,z:[-1100,-.4],easeFunction:"easeInOutQuad"}),r=this.createGroup({name:"floor-group",children:[this.spriteRepo.get("floor")]}),i=t.floor,a=i.x.map(function(e){return e}),o=i.y.map(function(t){return t.replace("--lockup-padding-bottom",e.paddingBottom)});var s="S"===l.pageMetrics.breakpoint?-100:-400,u="S"===l.pageMetrics.breakpoint?.5:.65;this.keyframes.floor=this.timeline.addKeyframe(r,{start:u,end:n,ease:.95,snapAtCreation:!0,x:a,y:o,z:[s,0],easeFunction:"easeOutQuad"}),this.keyframes.camera=this.timeline.addKeyframe(this.camera,{start:.5,end:n,ease:1,x:["-50vw","-50vw"],y:["50vh","50vh"],easeFunction:"easeInOutSin"}),this.presortObjects(),this.dynamicKeyframes.forEach(function(e){return e.remove()}),this.dynamicKeyframes=[],this.dynamicKeyframes.push(this.addContinuousEvent({start:"("+this.paddingBottom+")*1.1 - 200vh",end:"("+this.paddingBottom+")*1.1 - 100vh",time:[0,this.timeline.duration],relativeTo:".section-pillars",ease:.9,easeFunction:"easeInOutSin",breakpointMask:["S"],onDraw:function(t){e.timeline.time(t.tweenProps.time.current)}})),this.dynamicKeyframes.push(this.addKeyframe({el:this.canvas,relativeTo:".section-pillars",start:this.paddingBottom+" - 210vh",end:this.paddingBottom+" - 200vh",opacity:[w,1]}));var c=this.keyframeController.getNearestKeyframeForAttribute(0,"time");c&&(c.overwriteProps({time:[0,this.timeline.duration]}),this.timeline.time(this.keyframeController.tweenProps.time.current,!0))}}},{key:"setupDimming",value:function(){var e={el:this.canvas,ease:.5};this.addKeyframe(Object.assign({},e,{relativeTo:".section-manifesto",start:"-100vh",end:"-50vh",opacity:[1,w]})),this.addKeyframe({el:this.playbackControl.el,start:"-50vh",end:"-30vh",relativeTo:".section.section-lockup",ease:.75,opacity:[1,0]});var t=document.querySelector(".main > .section.section-pillars");t&&this.addKeyframe({el:t,start:"-200vh",end:"-100vh",cssClass:"will-change",toggle:!0})}},{key:"createGroup",value:function(e){var t=this,r=e.name;return e.children.forEach(function(n){var i=t.spriteRepo.get(r);i||(i=t.spriteRepo.add(new y(r)),i.x=e.x||0,i.y=e.y||0,i.z=e.z||0),i.add(n)}),this.spriteRepo.get(r)}},{key:"updateVideoTexture",value:function(){if(this.tempTexture!==this.videoTexture){var e=this.gl;e.bindTexture(e.TEXTURE_2D,this.videoTexture.handle),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.shadowVideo.video)}}},{key:"drawScreens",value:function(){var e=this;this.batch.clear(),this.screens.forEach(function(t){t.visible&&e.batch.push({position:[t.renderX,t.renderY,t.renderZ],shape:[t.width,t.height],texcoord:t.getNormalizedTextCoordsForSourceDimensions(),texture:e.videoTexture})}),this.batch.draw()}},{key:"drawHardware",value:function(){var e=this;this.spriteRepo.get("tv-group")&&(this.batch.clear(),this.devices.forEach(function(t){t.visible&&e.batch.push({position:[t.renderX,t.renderY,t.renderZ],shape:[t.width,t.height],texcoord:t.getNormalizedTextCoordsForSourceDimensions(),texture:t.texture})}),this.batch.draw())}},{key:"draw",value:function(){this.hasFinishedLoading&&(this.updateVideoTexture(),this.lastVideoTime=this.shadowVideo.currentTime(),this.drawGL())}},{key:"drawGL",value:function(){this.shader.uniforms.projection=this.camera.projectionMatrix,this.shader.uniforms.view=this.camera.updateViewMatrix(),this.batch.bind(this.shader);var e=this.gl;e.clearColor(1,1,1,1),e.viewport(0,0,this.canvas.width,this.canvas.height),e.depthMask(!0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.enable(e.DEPTH_TEST),this.drawScreens(),e.depthMask(!1),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.drawHardware()}},{key:"onResizeImmediate",value:function(e){var t=this,r=this.paddingBottom,n=getComputedStyle(this.el).getPropertyValue("--lockup-padding-bottom");this.paddingBottom=n;var i=u.getGroupForTarget(this.el),a=i.metrics.add(this.el);i.metrics.refreshMetrics(this.el),this.retinaScale=window.devicePixelRatio>1?2:1;var o=a.width,s=a.height;this.canvas.style.width=o+"px",this.canvas.style.height=s+"px",this.canvas.width=o*this.retinaScale,this.canvas.height=s*this.retinaScale,this.camera.makeCameraPixelPerfect(o,s),this.keyframes&&(this.updateScreenPositionToFillScreen(),this.drawGL(),this.paddingBottom!==r&&b.update(function(){return t.onBreakpointChange()}))}},{key:"onBreakpointChange",value:function(e){this.tracker.shouldTrack=!1,this.timeline.keyframeControllers.forEach(function(e){return e.remove()}),this.spriteRepo.clear(),this.screens=[],this.devices=[],this.hasLoadedImages=this.hasLoadedVideo=this.hasFinishedObjectPlacement=!1;var t=getComputedStyle(this.el).getPropertyValue("--lockup-padding-bottom");this.paddingBottom=t,this.createFirstFrameTexture(),this.createVideo(),this.createSpriteSheetController()}},{key:"updateScreenPositionToFillScreen",value:function(){var e=this;if(this.hasFinishedObjectPlacement=!1,0===this.spriteRepo.count||this.keyframes.tv&&null===this.keyframes.tv.controller)return void console.warn("cannot update screen position");var t=this.keyframeController.elementMetrics,r=this.spriteRepo.get("tv").width-16*this.retinaScale,n=r/t.width,i=this.spriteRepo.get("tv").height-16*this.retinaScale,a=i/t.height,o=Math.min(n,a),s=this.camera.scaleToPosition(o);this.keyframes.tv.overwriteProps({z:[s,-.01]});var u=l.pageMetrics.breakpoint,c={L:[.95,.95,.75],M:[.95,.85,.55],S:[.075,.0751,.0752]};if(["macbook","ipad","iphone"].forEach(function(t,r){var n=e.keyframes[t],i=n.jsonProps,a=c[u][r];n.overwriteProps({z:[e.camera.z*a*-1,i.z[1]]})}),"S"===u)this.keyframes.tv.overwriteProps({end:.8}),this.spriteRepo.get("floor").visible=!1;else{var h=1.25*this.spriteRepo.get("tv_shadow").height,f=Math.min(0,t.height-h),m=Array.from(d[this.getBreakpointSuffix()].tv.y);f<0&&(m[1]="50vh - 50% + "+f+"/2"),this.keyframes.tv.overwriteProps({y:m})}this.forceRender(),this.hasFinishedObjectPlacement=!0}},{key:"presortObjects",value:function(){var e=this;b.update(function(){e.timeline.forceUpdate({waitForNextUpdate:!1,recalculateActiveKeyframes:!0}),e.updateScreenPositionToFillScreen();var t=e.timeline.progress();e.forceRender(.9),e.devices=e.devices.sort(function(e,t){return t.renderZ-e.renderZ}),e.screens=e.screens.sort(function(e,t){return e.renderZ-t.renderZ}),e.forceRender(t)})}},{key:"forceRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeline.progress();this.timeline.progress(e,!0),this.timeline.forceUpdate({recalculateActiveKeyframes:!1,waitForNextUpdate:!1}),this.timeline.reconcile(),this.timeline.onDOMRead(),this.timeline.onDOMWrite()}},{key:"getBreakpointSuffix",value:function(){var e=void 0,t=l.pageMetrics.breakpoint;switch(t){case"S":e="small";break;case"M":e="medium";break;case"L":e="large";break;default:e="large"}return e}},{key:"getBreakpointSuffixForVideo",value:function(){var e=this.getBreakpointSuffix();return"small"===e?"medium":e}},{key:"hasFinishedLoading",get:function(){return this.hasLoadedImages&&this.hasLoadedVideo&&this.hasFinishedObjectPlacement}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("lockup-transition")}}]),t}(s);t.exports=E},{"../../../glsl/compiled-shaders":169,"../../components/PlaybackControl":194,"./Dolly/Group":176,"./Dolly/Renderer":177,"./Dolly/Sprite3D":178,"./Dolly/Sprite3DRepo":179,"./ShadowVideo":183,"./SpriteSheetController":184,"./Tracker":185,"./positioning":186,"@marcom/ac-raf-emitter/cancelDraw":83,"@marcom/ac-raf-emitter/cancelUpdate":85,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90,"@marcom/anim-system":95,"@marcom/anim-system/Model/AnimSystemModel":100,"@marcom/bubble-gum/BaseComponent":112,"@marcom/gl-3d-sprite-batch":118}],182:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/anim-system/Model/AnimSystemModel"),l=(e("../../components/PlaybackControl"),e("./Tracker")),c={update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},h=e("./positioning"),f=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this;this.video=this.el.querySelector("video"),this.video.src=this.video.getAttribute("data-src-"+t.getBreakpointSuffix()),this.playbackControl=this.gum.getComponentOfType("PlaybackControl",this.el.parentElement),this.playbackControl.mediaElement=this.video,this.tracker=new l,this.video.addEventListener("canplaythrough",this.tracker.track()),this.addDiscreteEvent({start:"0%",end:"100rh - 100vh",relativeTo:".sticky-lockup-container",onEnter:function(){return e.tracker.shouldTrack=!0},onExit:function(){return e.tracker.shouldTrack=!1}}),this.onResizeImmediate()}},{key:"onBreakpointChange",value:function(){this.video.src=this.video.getAttribute("data-src-"+t.getBreakpointSuffix())}},{key:"onResizeImmediate",value:function(){var e=this;c.update(function(){var r=e.el.getBoundingClientRect(),n=r.width,i=r.height,a=h[t.getBreakpointSuffix()],o=a.tv.video.uv,s=o.width,u=o.height,l=s/n,f=u/i,d=Math.min(l,f),m=Math.round(s*(1/d)),p=Math.round(u*(1/d));c.draw(function(){e.video.style.width=m+"px",e.video.style.marginLeft=Math.round(m-n)/-2+"px",e.video.style.marginTop=Math.round(p-i)/-2+"px"},!0)},!0)}}],[{key:"getBreakpointSuffix",value:function(){var e=void 0,t=u.pageMetrics.breakpoint;switch(t){case"S":e="medium";break;case"M":e="medium";break;case"L":e="large";break;default:e="large"}return e}},{key:"IS_SUPPORTED",value:function(){return!document.documentElement.classList.contains("lockup-transition")}}]),t}(s);t.exports=f},{"../../components/PlaybackControl":194,"./Tracker":185,"./positioning":186,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90,"@marcom/anim-system/Model/AnimSystemModel":100,"@marcom/bubble-gum/BaseComponent":112}],183:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=e("../../shared/waitFrames"),l=e("@marcom/ac-console/log"),c=document.createElement("a"),h=document.createElement("a"),f=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.staggerFirstLoad=document.documentElement.classList.contains("stagger-hero-load"),r.el=e.el,r.src=e.src,r.onFirstFrameReady=r.onFirstFrameReady.bind(r),r.onCanPlayThrough=r.onCanPlayThrough.bind(r),r.video=document.createElement("video"),r.video.loop=void 0===e.loop||e.loop,r.video.autoplay=void 0===e.autoplay||e.autoplay,r.video.muted=!0,r.video.playsInline=!0,r.video.crossOrigin="anonymous",r.video.addEventListener("progress",function(e){if(0!==r.video.buffered.length){var n=r.video.buffered.end(0)/r.video.duration;l("video loading: "+Math.round(100*n)+"%"),1===n&&r.trigger(t.loadcomplete)}}),r}return a(t,e),o(t,[{key:"load",value:function(e){var r=this;return this.video.removeEventListener(t.loadeddata,this.onFirstFrameReady),this.video.removeEventListener(t.canplaythrough,this.onCanPlayThrough),this.video.autoplay=this.video.readyState>=3&&!this.video.paused,this._isUniqueURL(this.video.src,e)?(this.video.addEventListener(t.loadeddata,this.onFirstFrameReady),this.video.addEventListener(t.canplaythrough,this.onCanPlayThrough),this.staggerFirstLoad?(this.staggerFirstLoad=!1,u(50).then(function(){return r.video.src=e})):this.video.src=e,void this.video.load()):void(this.video.readyState>=2?(this.onFirstFrameReady(),this.onCanPlayThrough()):(this.video.addEventListener(t.loadeddata,this.onFirstFrameReady),this.video.addEventListener(t.canplaythrough,this.onCanPlayThrough)))}},{key:"onFirstFrameReady",value:function(){this.video.removeEventListener(t.loadeddata,this.onFirstFrameReady),navigator.userAgent.includes("Chrome")&&(this.video.style.position="absolute",this.video.style.visibility="visible",this.video.style.top="0",this.video.style.left="0",this.video.style.width="1px",this.video.style.height="1px",this.video.style.display="block",this.video.style.opacity=.01,this.video.parentElement||this.el.appendChild(this.video)),this.trigger(t.loadeddata,this)}},{key:"onCanPlayThrough",value:function(){this.video.removeEventListener(t.canplaythrough,this.onCanPlayThrough),this.trigger(t.canplaythrough,this)}},{key:"currentTime",value:function(){return this.video.currentTime}},{key:"_isUniqueURL",value:function(e,t){return c.href=t,h.href=e,c.pathname!==h.pathname}}]),t}(s);f.loadcomplete="loadcomplete",f.loadeddata="loadeddata",f.canplaythrough="canplaythrough",t.exports=f},{"../../shared/waitFrames":202,"@marcom/ac-console/log":18,"@marcom/ac-event-emitter-micro":36}],184:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function c(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:c(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},u=e("@marcom/ac-event-emitter-micro").EventEmitterMicro,l=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name=e.name,r.figure=e.figure,r.image=null,r.request=null,r.loadingState={json:!1,image:!1},r.onImageLoaded=r.onImageLoaded.bind(r),r.onJSONLoaded=r.onJSONLoaded.bind(r),r}return a(t,e),o(t,[{key:"destroy",value:function(){this.request&&(this.request.removeEventListener("load",this.onJSONLoaded),this.request.abort(),this.request=null),this.image&&(this.image.removeEventListener("load",this.onImageLoaded),this.image.src="",this.image=null),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){this.path=t.getSpriteSheetPath(this.figure)[1],this.loadImage(),this.loadJSON()}},{key:"loadImage",value:function(){this.loadingState.image=!1,this.image=new Image,this.image.addEventListener("load",this.onImageLoaded),this.image.src=this.path+".png"}},{key:"loadJSON",value:function(){this.request&&this.request.abort(),this.loadingState.json=!1,this.request=new XMLHttpRequest,this.request.addEventListener("load",this.onJSONLoaded),this.request.open("https://www.apple.com/apple-arcade/GET",this.path+".json"),this.request.send()}},{key:"onImageLoaded",value:function(){this.loadingState.image=!0,this.onLoadingComplete()}},{key:"onJSONLoaded",value:function(e){return 4!==this.request.readyState||e.target!==this.request?void e.target.abort():(this.loadingState.json=!0,this.json=JSON.parse(this.request.responseText),void this.onLoadingComplete())}},{key:"onLoadingComplete",value:function(){this.loadingState.json&&this.loadingState.image&&this.trigger("load",this)}}],[{key:"getSpriteSheetPath",value:function(e){var t=getComputedStyle(e),r=t.backgroundImage;return r.match(/url\("?(.*)(\.png|\.jpg)"?\)/i)}}]),t}(u);t.exports=l},{"@marcom/ac-event-emitter-micro":36}],185:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=void 0;try{a=e("@marcom/ac-analytics")}catch(o){}var s=60,u=function(){function e(){n(this,e),this.shouldTrack=!0}return i(e,[{key:"track",value:function(){if(this.shouldTrack&&a&&a.passiveTracker){var e=this._getLoadTime();e&&(a.passiveTracker({eVar70:"{PAGE_NAME_NO_LOCALE} | enhanced-hero",events:"event268="+e+",event269"},{overwriteStorageItemValues:!0}),this.shouldTrack=!1)}}},{key:"_getLoadTime",value:function(){var e=this._getLoadStartTime();if(!e)return null;var t=((Date.now()-e)/1e3).toFixed(2);return isNaN(t)?null:(t=parseFloat(t),t>=s||t<=0?null:t)}},{key:"_getLoadStartTime",value:function(){var e=void 0;return window&&window.performance&&window.performance.timing&&window.performance.timing.domInteractive&&(e=window.performance.timing.domInteractive),e}}]),e}();t.exports=u},{"@marcom/ac-analytics":void 0}],186:[function(e,t,r){t.exports={large:{tv:{x:["50vw - 50%w","50vw - 50%w"],y:["50vh - 50%","50vh - 50%h"],video:{uv:{x:0,y:0,width:1280,height:720},"position-offset":{x:1,y:1},"dimensions-offset":{width:-2,height:-2}}},mba:{x:["50vw - 50%w + 135px*1.5","50vw - 50%w + 135px"],y:["100vh - 75%","100vh - 100% - --lockup-padding-bottom"],video:{uv:{x:0,y:730,width:454,height:285},"position-offset":{x:65,y:20},"dimensions-offset":{width:-130,height:-40}}},ipad_pro:{x:["50vw - 50% - 200px*1.5","50vw - 50% - 200px"],y:["100vh - 50%","100vh - 100% - --lockup-padding-bottom"],video:{uv:{x:0,y:730,width:454,height:285},"position-offset":{x:12,y:8},"dimensions-offset":{width:-20,height:-20}}},iphone:{x:["50vw - 50%w","50vw - 50%w"],y:["100vh - 75%h","100vh - 100% - --lockup-padding-bottom + 5px"],video:{uv:{x:823,y:730,width:211,height:99},"position-offset":{x:6,y:7},"dimensions-offset":{width:-12,height:-14}}},floor:{x:["50vw - 50%w","50vw - 50%w"],y:["100vh - 100% - --lockup-padding-bottom - 2.5px + 25%","100vh - 100% - --lockup-padding-bottom - 2.5px"]},tv_shadow:{"position-offset":{x:0,y:0}}},medium:{tv:{x:["50vw - 50%w","50vw - 50%w"],y:["50vh - 50%","50vh - 50%h"],video:{uv:{x:0,y:0,width:960,height:542},"position-offset":{x:1,y:1},"dimensions-offset":{width:-2,height:-2}}},mba:{x:["50vw - 50%w + 92px*1.5","50vw - 50%w + 92px"],y:["100vh - 100%","100vh - 100% - --lockup-padding-bottom"],video:{uv:{x:0,y:548,width:340,height:215},"position-offset":{x:43,y:13},"dimensions-offset":{width:-88,height:-33}}},ipad_pro:{x:["50vw - 50% - 138px*1.5","50vw - 50% - 138px"],y:["100vh - 75%","100vh - 100% - --lockup-padding-bottom"],video:{uv:{x:348,y:548,width:262,height:185},"position-offset":{x:8,y:8},"dimensions-offset":{width:-17,height:-17}}},iphone:{x:["50vw - 50%w","50vw - 50%w"],y:["100vh - 100%h","100vh - 100% - --lockup-padding-bottom + 1px"],video:{uv:{x:618,y:548,width:158,height:73},"position-offset":{x:4,y:4},"dimensions-offset":{width:-8,height:-9}}},floor:{x:["50vw - 50%w","50vw - 50%w"],y:["100vh - 100% - --lockup-padding-bottom - 2.5px + 25%","100vh - 100% - --lockup-padding-bottom - 2.5px"]},tv_shadow:{"position-offset":{x:-1,y:0,z:-.1}}},small:{tv:{x:["50vw - 50%w","50vw - 50%w"],y:["50vh - 50%","(100vh - 100%) - --lockup-padding-bottom - 60px"],video:{uv:{x:0,y:0,width:640,height:361},"position-offset":{x:1,y:1},"dimensions-offset":{width:-2,height:-2}}},mba:{x:["100vw","50vw - 50%w + 53px"],y:["100vh - 100% - --lockup-padding-bottom","100vh - 100% - --lockup-padding-bottom"],video:{uv:{x:0,y:365,width:227,height:143},"position-offset":{x:23,y:5},"dimensions-offset":{width:-48,height:-10}}},ipad_pro:{x:["-100%w","50vw - 50% - 80px"],y:["100vh - 100% - --lockup-padding-bottom","100vh - 100% - --lockup-padding-bottom"],video:{uv:{x:232,y:365,width:175,height:123},"position-offset":{x:5,y:3},"dimensions-offset":{width:-9,height:-7}}},iphone:{x:["100vw + 100%w","50vw - 50%w"],y:["100vh - 100% - --lockup-padding-bottom + 1","100vh - 100% - --lockup-padding-bottom + 1"],video:{uv:{x:412,y:365,width:106,height:50},"position-offset":{x:2,y:3},"dimensions-offset":{width:-5,height:-6}}},floor:{x:["50vw - 50%w","50vw - 50%w"],y:["100vh - 100% - --lockup-padding-bottom - 2.5px","100vh - 100% - --lockup-padding-bottom - 2.5px"]},tv_shadow:{"position-offset":{x:1,y:3,z:0},"1x-offset":{x:-1,y:0,z:0}}}}},{}],187:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/ac-raf-emitter/update"),l=e("@marcom/ac-raf-emitter/draw"),c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this,t=this.addKeyframe({start:"-140vh",event:"LazyInit: Notify iframe"});t.controller.once(t.event,function(){var t=void 0;u(function(){return t=e.el.getAttribute("data-lazy-src")}),l(function(){return e.el.src=t})})}}]),t}(s);t.exports=c},{"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90,"@marcom/bubble-gum/BaseComponent":112}],188:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u={update:e("@marcom/ac-raf-emitter/update"),draw:e("@marcom/ac-raf-emitter/draw")},l=document.querySelector("#ac-localnav"),c=0,h=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onResizeDebounced(),r.uniqueSelector=r.generateIdenitifyingSelector(),r.initializeKeyframe(),r}return a(t,e),o(t,[{key:"IS_SUPPORTED",value:function(){return!!l}}]),o(t,[{key:"generateIdenitifyingSelector",value:function(){var e="data-ln-section",t=++c;return this.el.setAttribute(e,t),"["+e+'="'+t+'"]'}},{key:"initializeKeyframe",value:function(){this.keyframe&&this.keyframe.remove(),this.keyframe=this.anim.addKeyframe(l,{start:"0% - "+this.localnavHeight+"px",end:"100rh - 100%",cssClass:"ac-localnav-dark",toggle:!0,relativeTo:this.uniqueSelector})}},{key:"onResizeDebounced",value:function(){var e=this;this.localnavHeight=l.clientHeight;var t=document.querySelector("#ac-localeswitcher");t&&(this.localnavHeight+=t.clientHeight,u.update(function(){return u.draw(function(){e.initializeKeyframe()})}))}}]),t}(s);t.exports=h},{"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90,"@marcom/bubble-gum/BaseComponent":112}],189:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this;this.el.querySelectorAll("[data-keyframe]").forEach(function(t){var r={el:t,opacity:[0,1],scale:[1.2,1],ease:.9,easeFunction:"easeOutQuad",disabledWhen:["static-interaction","reduced-motion"]};e.addKeyframe(Object.assign({},{el:t,start:"-73vh",end:"-55vh",y:["25px","0px"],breakpointMask:"MLX"},r)),e.addKeyframe(Object.assign({},{el:t,start:"-80vh",end:"-64vh",y:["12px","0px"],breakpointMask:"S"},r)),e.addKeyframe({el:r.el,start:"-200vh",end:"100% + 200vh",cssClass:"will-change",disabledWhen:r.disabledWhen})})}}]),t}(s);t.exports=u},{"@marcom/bubble-gum/BaseComponent":112}],190:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){for(var t=e.length,r=void 0,n=void 0;t;)r=Math.floor(Math.random()*t),t-=1,n=e[t],e[t]=e[r],e[r]=n;return e}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-progressive-image-loader/ProgressiveImageLoader"),c=e("@marcom/ac-raf-emitter/draw"),h=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.imageLoader=new l({container:r.el}),r}return a(t,e),s(t,[{key:"mounted",value:function(){var e=this;this.addDiscreteEvent({event:"LazyInit: Marquee",start:"-350vh",onEvent:function(t){if(t.controller.off(t.event),"replaceWith"in Element.prototype){var r=Array.from(e.el.querySelectorAll(".marquee-item")),n=r.map(function(e){return e.cloneNode(!0)});o(r).forEach(function(e,t){return e.replaceWith(n[t])})}var i=document.querySelectorAll(".marquee-row");c(function(){return i.forEach(function(e){return e.style.visibility="hidden"})}),e.imageLoader.on("complete",function(){c(function(){i.forEach(function(t){e.gum.addComponent({componentName:"MarqueeRow",el:t})})})}),e.imageLoader.load()}})}}]),t}(u);t.exports=h},{"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":71,"@marcom/ac-raf-emitter/draw":86,"@marcom/bubble-gum/BaseComponent":112}],191:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isVisible=!1,r.offset=r.el.offsetLeft,r.x=r.offset,r.cacheDimensions(),r}return a(t,e),o(t,[{key:"mounted",value:function(){this.el.style.willChange="transform, visibility",this.render()}},{key:"render",value:function(){this._visibilityAtLastRender!==this.isVisible&&(this.el.style.visibility=this.isVisible?"visible":"hidden"),this.isVisible&&(this.el.style.transform="translateX("+(this.x-this.offset)+"px)"),this._visibilityAtLastRender=this.isVisible}},{key:"cacheDimensions",value:function(){var e=this.el.getBoundingClientRect();this.width=e.width+parseFloat(getComputedStyle(this.el).marginRight),this.height=e.height}},{key:"onMarqueeResize",value:function(){this.offset=this.el.offsetLeft,this.x=this.offset,this.cacheDimensions()}}]),t}(s);t.exports=u},{"@marcom/bubble-gum/BaseComponent":112}],192:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=window.matchMedia("(prefers-reduced-motion)"),l=u.matches,c=document.documentElement.classList.contains("ie"),h=null,f=.5,d=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.items=[],r.paused=!0,r.updateOptions=r.updateOptions.bind(r),r.updateOptions(),r._firstDraw=!1,u.addListener(function(e){l=e.matches,r.updateOptions()}),r}return a(t,e),o(t,[{key:"updateOptions",value:function(){var e=this.el.getAttribute("data-direction");h||(h=e);var r=parseFloat(this.el.getAttribute("data-speed"))||1;this.direction=l?h:e,this.sign=this.direction===t.DIRECTION_LEFT?-1:1,this.speed=l?Math.min(f,r):r}},{key:"mounted",value:function(){var e=this;this.prepareItems(),this.cacheMetrics(),this.paused=!1;var t={relativeTo:".marquee",start:"-100vh",end:"100rh",event:"marquee"};this.addRAFLoop(Object.assign(t,{onDraw:function(){e.paused||(e._firstDraw||(e.el.style.visibility="visible",e._firstDraw=!0),e.items.forEach(function(t){t.x+=e.speed*e.sign,e.wrapItem(t),t.render()}))}}));var r=function(t){("key"in t&&" "===t.key||32===t.keyCode)&&(t.preventDefault(),e.paused=!e.paused)},n=!c&&{passive:!1};this.addDiscreteEvent(Object.assign(t,{onEnter:function(){document.addEventListener("keydown",r,n)},onExit:function(){document.removeEventListener("keydown",r)}})),this.el.addEventListener("scroll",function(e){e.preventDefault(),e.target.scrollLeft=0},n)}},{key:"wrapItem",value:function(e){this.direction===t.DIRECTION_LEFT?(e.x+e.width<0&&(e.x+=this.width,e.isVisible=!1),e.x<this.visibleWidth&&(e.isVisible=!0)):(e.x>this.visibleWidth&&(e.x-=this.width,e.isVisible=!1),e.x+e.width>0&&(e.isVisible=!0))}},{key:"prepareItems",value:function(){var e=this,t=Array.from(this.el.querySelectorAll(".marquee-item"));this.el.setAttribute("role","img");var r=this.el.getAttribute("data-aria-label-heading"),n=t.map(function(e){return Array.from(e.firstElementChild.children).map(function(e){return e.textContent.trim()}).join(", ")}).join(". ");r&&(n=r+": "+n),this.el.setAttribute("aria-label",n),t.concat(t.map(function(t){var r=t.cloneNode(!0);return e.el.appendChild(r),r})).forEach(function(t){t.setAttribute("aria-hidden",!0),e.items.push(e.gum.addComponent({componentName:"MarqueeItem",el:t}))})}},{key:"cacheMetrics",value:function(){this.visibleWidth=this.el.parentElement.getBoundingClientRect().width,this.width=this.items.reduce(function(e,t){return e+t.width},0)}},{key:"onResizeDebounced",value:function(){this.items.forEach(function(e){return e.onMarqueeResize()}),this.cacheMetrics()}}]),t}(s);d.DIRECTION_LEFT="left",d.DIRECTION_RIGHT="right",t.exports=d},{"@marcom/bubble-gum/BaseComponent":112}],193:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u={update:e("@marcom/ac-raf-emitter/update")},l=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this,t=this.anim.getGroupForTarget(this.el);this.addKeyframe({el:this.el,start:"0%-85vh",end:"0% + 100vh",event:"trigger",relativeTo:".row.pillars",breakpointMask:"MLX"});var r=this.el.querySelector("[data-anim-time-group]");this.timeGroup=this.anim.getGroupForTarget(r),this.keyframeController.on("trigger:enter",function(){e.timeGroup.play(0)}),this.items=this.el.querySelectorAll("[data-pillar-trigger]"),this.items.forEach(function(r,n){e.timeGroup.addKeyframe(r,{start:"0.1 + 0.4 * "+n,end:5,cssClass:"triggered",toggle:!1,breakpointMask:"MLX"}),t.addKeyframe(r,{start:"0% - 85vh",end:"0% + 150vh",cssClass:"triggered",toggle:!1,breakpointMask:"S"})})}},{key:"onBreakpointChange",value:function(e){var t=this;u.update(function(){t.el.querySelector(".triggered")?t.items.forEach(function(e){return e.classList.add("triggered-breakpoint")}):"S"===e.breakpoint&&null===t.el.querySelector(".triggered-breakpoint")&&t.items.forEach(function(e){var r=t.anim.getControllerForTarget(e).getNearestKeyframeForAttribute(0,".triggered");r.isApplied&&!e.classList.contains(r.cssClass)&&e.classList.add("triggered-breakpoint")})})}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("svg-transform")}}]),t}(s);t.exports=l},{"@marcom/ac-raf-emitter/update":90,"@marcom/bubble-gum/BaseComponent":112}],194:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){e&&e.reason&&"NotAllowedError"===e.reason.name&&0===e.reason.stack.indexOf("play")&&(f=!0)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("@marcom/bubble-gum/BaseComponent"),l=e("@marcom/ac-raf-emitter/draw"),c=window.matchMedia("(prefers-reduced-motion)"),h=c.matches,f=!1;window.addEventListener("unhandledrejection",o),window.addEventListener("rejectionhandled",o);var d=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));e.data=e.data||{},r.loadingLabel=e.data.loadingLabel||r.el.dataset.loadingLabel,r.pauseLabel=e.data.pauseLabel||r.el.dataset.pauseLabel,r.playLabel=e.data.playLabel||r.el.dataset.playLabel;var a=void 0;return Object.defineProperty(r,"mediaElement",{get:function(){return a},set:function(e){r.mediaElementDelegate&&r.mediaElementDelegate.destroy(),e instanceof HTMLMediaElement&&(r.mediaElementDelegate=new m(r,e))}}),r.el.dataset["for"]&&(r.mediaElement=document.getElementById(r.el.dataset["for"])),r.analyticsClickTemplate=e.data.analyticsClickTemplate||r.el.dataset.analyticsClickTemplate,r.analyticsTitleTemplate=e.data.analyticsTitleTemplate||r.el.dataset.analyticsTitleTemplate,r._mediaStateWasPlaying=!1,r._appearanceInitialized=!1,r.mediaState=e.initialState||t.DefaultMediaState,r.onClick=r.onClick.bind(r),r.el.addEventListener("click",r.onClick,!1),c.addListener(function(e){h=e.matches,h&&r.mediaState===t.MediaState.Playing&&(r.mediaState=t.MediaState.Paused,r.trigger("pause"))}),r}return a(t,e),s(t,[{key:"destroy",value:function(){this.mediaElementDelegate.destroy(),this.mediaElementDelegate=null,this.el.removeEventListener("click",this.onClick)}},{key:"onClick",value:function(){this.toggle(),this.mediaState===t.MediaState.Playing?(this.mediaElementDelegate&&this.mediaElementDelegate.onPlayControlActivated(),this.trigger("play")):this.mediaState===t.MediaState.Paused&&this.trigger("pause"),this.updateAppearance()}},{key:"toggle",value:function(){this.mediaState===t.MediaState.Paused?this.mediaState=t.MediaState.Playing:this.mediaState===t.MediaState.Playing&&(this.mediaState=t.MediaState.Paused)}},{key:"updateAppearance",value:function(){var e=this;l(function(){e._appearanceInitialized||e.el.removeAttribute("aria-hidden");var r=e.mediaState===t.MediaState.Loading;e.el.disabled=r,e.el.setAttribute("aria-label",e.ariaLabel),e.el.classList.toggle("is-loading",r),e.el.classList.toggle("is-playing",e.mediaState===t.MediaState.Playing),e.el.classList.toggle("is-paused",e.mediaState===t.MediaState.Paused),
e.setAnalyticsAttributes()})}},{key:"setAnalyticsAttributes",value:function(){var e=void 0;return this.mediaState===t.MediaState.Playing?e="pause":this.mediaState===t.MediaState.Paused&&(e="play"),e?(this.el.setAttribute("data-analytics-click",this.analyticsClickTemplate.replace("{controlState}",e)),void this.el.setAttribute("data-analytics-title",this.analyticsTitleTemplate.replace("{controlState}",e))):(this.el.removeAttribute("data-analytics-click"),void this.el.removeAttribute("data-analytics-title"))}},{key:"mediaState",get:function(){return this._mediaState},set:function(e){if("boolean"==typeof e||e||(e=t.MediaState.Loading),!t.validMediaStates.includes(e)){var r=t.validMediaStates.map(function(e){return"'"+e+"'"}).join(", ");throw new Error(this.constructor.name+" 'mediaState' must be one of: "+r)}e===t.MediaState.Playing&&(h&&!this._mediaStateWasPlaying&&(e=t.MediaState.Paused,this.trigger("pause")),this._mediaStateWasPlaying=!0),this._mediaState=e,this.updateAppearance()}},{key:"ariaLabel",get:function(){switch(this.mediaState){case t.MediaState.Loading:return this.loadingLabel;case t.MediaState.Playing:return this.pauseLabel;case t.MediaState.Paused:return this.playLabel;default:return""}}}]),t}(u);d.MediaState=Object.freeze({Loading:"loading",Playing:"playing",Paused:"paused"}),d.validMediaStates=Object.freeze(Object.keys(d.MediaState).map(function(e){return d.MediaState[e]}));var m=function(){function e(t,r){n(this,e),this.element=r,this.controls=t,this.lastUserInitiatedState=null,this.lastEventWasUserInteraction=!1,this.onMediaLoading=this.onMediaLoading.bind(this),this.onMediaPlay=this.onMediaPlay.bind(this),this.onMediaPause=this.onMediaPause.bind(this),this.onPlayControlActivated=this.onPlayControlActivated.bind(this),this.onPauseControlActivated=this.onPauseControlActivated.bind(this),this.element.addEventListener("emptied",this.onMediaLoading),this.element.addEventListener("waiting",this.onMediaLoading),this.element.addEventListener("canplay",this.onMediaPause),this.element.addEventListener("playing",this.onMediaPlay),this.element.addEventListener("pause",this.onMediaPause),this.controls.on("play",this.onPlayControlActivated),this.controls.on("pause",this.onPauseControlActivated),this.element.readyState>=3&&(this.element.paused?this.onMediaPause():this.onMediaPlay()),this.onMediaLoading()}return s(e,[{key:"onMediaLoading",value:function(){this.controls.mediaState=d.MediaState.Loading}},{key:"onMediaPlay",value:function(){!this.lastEventWasUserInteraction&&("pause"===this.lastUserInitiatedState||f&&"play"!==this.lastUserInitiatedState)?this.element.pause():this.controls.mediaState=d.MediaState.Playing,this.lastEventWasUserInteraction=!1}},{key:"onMediaPause",value:function(){this.controls.mediaState=d.MediaState.Paused,this.lastEventWasUserInteraction=!1}},{key:"onPlayControlActivated",value:function(){this.lastEventWasUserInteraction=!0,this.lastUserInitiatedState="play",this.element.play()}},{key:"onPauseControlActivated",value:function(){this.lastEventWasUserInteraction=!0,this.lastUserInitiatedState="pause",this.element.pause()}},{key:"destroy",value:function(){this.element.removeEventListener("emptied",this.onMediaLoading),this.element.removeEventListener("waiting",this.onMediaLoading),this.element.removeEventListener("canplay",this.onMediaPause),this.element.removeEventListener("playing",this.onMediaPlay),this.element.removeEventListener("pause",this.onMediaPause),this.controls.off("play",this.onPlayControlActivated),this.controls.off("pause",this.onPauseControlActivated),this.element=null,this.controls=null}}]),e}();t.exports=d},{"@marcom/ac-raf-emitter/draw":86,"@marcom/bubble-gum/BaseComponent":112}],195:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/ac-progressive-image-loader/ProgressiveImageLoader"),l=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));try{r._loadOptions=JSON.parse(r.el.getAttribute("data-progressive-image-options"))}catch(a){r._loadOptions=null}return r.imageLoader=new u({container:r.el,includeContainer:!0}),r}return a(t,e),o(t,[{key:"mounted",value:function(){var e=this;this.addDiscreteEvent({start:"-200vh",end:"-200vh",event:"ProgressiveImageLoad",allowRTL:!0}),this.keyframeController.once("ProgressiveImageLoad",function(){e.imageLoader.load(e._loadOptions)})}},{key:"setupEvents",value:function(){this._onImageLoad=this._onImageLoad.bind(this),this._onComplete=this._onComplete.bind(this),this.imageLoader.on(u.Events.ImageLoad,this._onImageLoad),this.imageLoader.on(u.Events.Complete,this._onComplete)}},{key:"destroy",value:function(){this.imageLoader.destroy(),this.imageLoader=null}},{key:"_onImageLoad",value:function(e){this.section.trigger(this.Events.ImageLoad,e)}},{key:"_onComplete",value:function(){this.section.trigger(this.Events.Complete)}}]),t}(s);l.Events={ImageLoad:"progressive-image-load",Complete:"progressive-image-complete"},l.IS_SUPPORTED=function(){var e=document.documentElement;return e.classList.contains("progressive-image")},t.exports=l},{"@marcom/ac-progressive-image-loader/ProgressiveImageLoader":71,"@marcom/bubble-gum/BaseComponent":112}],196:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),o(t,[{key:"mounted",value:function(){}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(s);t.exports=u},{"@marcom/bubble-gum/BaseComponent":112}],197:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("@marcom/bubble-gum/BaseComponent"),u=e("@marcom/ac-gsap/TweenLite"),l={draw:e("@marcom/ac-raf-emitter/draw")},c=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.friendlyName=e.data.friendlyName||"TimelineChapterPlayer",r.timeGroup=e.data.timeGroup,r.chapters=[],r.currentChapter=null,r.tween=null,r._time=0,r}return a(t,e),o(t,[{key:"mounted",value:function(){}},{key:"addChapter",value:function(e){var t=this,r=e.name,n=e.position,i=this.timeGroup.addKeyframe(this,{start:n,end:n,event:r}),a=new h(r,n,i);return this.chapters.push(a),l.draw(function(){t.chapters.sort(function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}),t.chapters.forEach(function(e,t){return e.index=t})}),a}},{key:"playToChapter",value:function(e){var t=this,r=void 0!==e.index?this.chapters[e.index]:this.getChapterWithName(e.name);if(r&&this.currentChapter!==r){this.tween&&(this.tween.kill(),this.tween=null),this.currentChapter=r;var n=void 0!==e.duration?e.duration:this.getDurationToChapter(r),i=void 0!==e.timeScale?e.timeScale:1,a=void 0!==e.ease?e.ease:"easeInOutCubic";this._time=this.timeGroup.time();var o;o=this.tween=u.to(this,n*i,{_time:r.start,ease:a,onUpdate:function(){t.timeGroup.time(t._time)},onComplete:function(){t._tween===o&&(t._tween=null)}})}}},{key:"playToNextChapter",value:function(){var e=this.chapters.indexOf(this.currentChapter),t=e+1;t>=this.chapters.length||this.playToChapter(this.chapters[t])}},{key:"playToPreviousChapter",value:function(){var e=this.chapters.indexOf(this.currentChapter),t=e-1;t<0||this.playToChapter(this.chapters[t])}},{key:"getChapterWithName",value:function(e){for(var t=0,r=this.chapters.length;t<r;t++)if(this.chapters[t].name===e)return this.chapters[t];return null}},{key:"getChapterAtIndex",value:function(e){return this.chapters[e]}},{key:"getDurationToChapter",value:function(e){var t=this.timeGroup.time(),r=e.start;return Math.abs(t-r)}},{key:"killTween",value:function(){this.tween&&(this.tween.kill(),this.tween=null)}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"now",get:function(){return this.timeGroup.time()}}]),t}(s),h=function(){function e(t,r,i){n(this,e),this.name=t,this.index=0,this.keyframe=i,this.position=r}return o(e,[{key:"start",get:function(){return this.keyframe.start}}]),e}();t.exports=c},{"@marcom/ac-gsap/TweenLite":38,"@marcom/ac-raf-emitter/draw":86,"@marcom/bubble-gum/BaseComponent":112}],198:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{X:"xlarge",L:"large",M:"medium",S:"small"}[e]}var s=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},c=e("@marcom/bubble-gum/BaseComponent"),h=3,f=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.video=r.el,r.options=e.data||{},r.pauseRelativeTo=r.options.pauseRelativeTo||r.el.getAttribute("data-pause-relative-to"),r.sources={},Object.entries(r.video.dataset).filter(function(e){var t=s(e,1),r=t[0];return 0===r.indexOf("src")}).forEach(function(e){var t=s(e,2),n=t[0],i=t[1],a=n.replace(/^src/,"").toLowerCase();r.sources[a]=i});var a=void 0;return Object.defineProperty(r,"currentViewport",{set:function(e){a=o(e),r.load(a)},get:function(){return a}}),r.currentViewport=e.pageMetrics.breakpoint,r.previousSource=null,r.inLoadArea=!1,r}return a(t,e),u(t,[{key:"mounted",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this),this.addDiscreteEvent({event:"Video: Load",start:this.options.loadAreaStart||"-200vh",end:this.options.loadAreaEnd||"100% + 100vh",onEnter:function(){e.inLoadArea=!0,e.load()},onExit:function(){e.inLoadArea=!1}}),this.addDiscreteEvent({event:"Video: Pause Offscreen",start:"-100vh",end:"100rh",relativeTo:this.pauseRelativeTo,onEnter:function(){return e.queueVideoPlayback()},onExit:function(){return e.pauseVideoPlayback()}})}},{key:"onBreakpointChange",value:function(e){this.currentViewport=e.breakpoint}},{key:"load",value:function(e){if(this.inLoadArea){e=e||this.currentViewport;var t=this.sources[e];t&&t!==this.previousSource&&(this.video.autoplay=this.video.readyState>=h&&!this.video.paused,this.video.src=this.previousSource=t,this.video.load())}}},{key:"queueVideoPlayback",value:function(){var e=this;"function"==typeof this._onCanPlay&&this.video.removeEventListener("canplay",this._onCanPlay),this.video.readyState<h?(this._onCanPlay=function(){e.video.play(),e.video.removeEventListener("canplay",e._onCanPlay)},this.video.addEventListener("canplay",this._onCanPlay)):this.video.play()}},{key:"pauseVideoPlayback",value:function(){this.video.paused||this.video.pause()}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("no-ie")}}]),t}(c);t.exports=f},{"@marcom/bubble-gum/BaseComponent":112}],199:[function(e,t,r){"use strict";var n=e("@marcom/anim-system"),i=e("@marcom/anim-system/Model/AnimSystemModel"),a=e("@marcom/delayed-initializer");a.NUMBER_OF_FRAMES_TO_WAIT=15;var o=e("@marcom/bubble-gum"),s=e("@marcom/bubble-gum/ComponentMap"),u=e("./model/SiteComponentMap"),l=e("./shared/NotifyModal"),c=e("./components/ArcadeLinks"),h=void 0;try{h=e("@marcom/data-relay")}catch(f){}var d={initialize:function(){d.filterResizeEvents(),d.setupDataRelay(),Object.assign(s,u);var e=document.querySelector(".main");this.gum=new o(e),this.gum.on(o.EVENTS.DOM_COMPONENTS_MOUNTED,d.setupDelayedAutoFilmsInitializer.bind(this)),d.setupArcadeLinks()},setupDelayedAutoFilmsInitializer:function(){var t=this,r=document.querySelector("[data-films-modal-link]"),i=n.addKeyframe(r,{start:"-110vh",event:"LazyInit: AutoFilms"});i.controller.once(i.event,function(){var r=e("@marcom/ac-films/AutoFilms"),n=new r;n.modalVideo&&n.modalVideo.on("open",function(){t.gum.getComponentsOfType("GameTrailersVideo").forEach(function(e){e.film&&e.film.player&&e.film.player.pause()})})})},filterResizeEvents:function(){var e=document.createElement("div");e.setAttribute("windowDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e);var t=e.clientWidth,r=e.clientHeight;n.on("ON_DOM_GROUPS_CREATED",function(){i.pageMetrics.windowWidth=t,i.pageMetrics.windowHeight=r}),n.on("ON_RESIZE_IMMEDIATE",function(){i.pageMetrics.windowWidth=t,i.pageMetrics.windowHeight=r}),window.removeEventListener("resize",n.onResizeImmediate),window.addEventListener("resize",function(i){var a=e.clientWidth,o=e.clientHeight;a===t&&o===r||(t=a,r=o,n.onResizeImmediate(i))})},setupArcadeLinks:function(){var e=[].slice.call(document.querySelectorAll(".ac-ln-button")),t=[].slice.call(document.querySelectorAll(".button-trial")),r=document.querySelector("[data-notify-modal]");if(document.documentElement.classList.contains("arcade-supported"))new c;else{var n=new l(e[0],r);e.slice(1).forEach(function(e){e.setAttribute("role","button"),e.addEventListener("click",n._openModal,!0)}),t.forEach(function(e){e.removeAttribute("data-rid-relay"),e.removeAttribute("data-analytics-exit-link"),e.setAttribute("href","#section-tryitfree"),e.setAttribute("data-analytics-click","prop3:try it free modal"),e.setAttribute("role","button"),e.addEventListener("click",n._openModal,!0)})}},setupDataRelay:function(){if(h){var e={properties:{customAnalyticsAttribute:"data-analytics-exit-link"}},t=new h(e);t&&t.passiveTrackingOptions&&(t.passiveTrackingOptions.overwriteAppMeasurementValues=!0)}}};d.initialize()},{"./components/ArcadeLinks":170,"./model/SiteComponentMap":200,"./shared/NotifyModal":201,"@marcom/ac-films/AutoFilms":void 0,"@marcom/anim-system":95,"@marcom/anim-system/Model/AnimSystemModel":100,"@marcom/bubble-gum":113,"@marcom/bubble-gum/ComponentMap":114,"@marcom/data-relay":void 0,"@marcom/delayed-initializer":116}],200:[function(e,t,r){"use strict";t.exports={StubComponent:e("../components/StubComponent"),LocalNavThemeDark:e("../components/LocalNavThemeDark"),GameTrailersHero:e("../components/GameTrailers/Hero"),GameTrailersVideo:e("../components/GameTrailers/Video"),GameTrailersLayout:e("../components/GameTrailers/Layout"),GameTrailersCard:e("../components/GameTrailers/Card"),Marquee:e("../components/Marquee"),MarqueeRow:e("../components/MarqueeRow"),MarqueeItem:e("../components/MarqueeItem"),PillarTrigger:e("../components/PillarTrigger"),Manifesto:e("../components/Manifesto"),HeroLockupComponent:e("../components/HeroLockup/HeroLockupComponent"),HeroLockUpNoGL:e("../components/HeroLockup/HeroLockupNoGL"),TimelineChapterPlayer:e("../components/TimelineChapterPlayer"),ProgressiveImage:e("../components/ProgressiveImage"),PlaybackControl:e("../components/PlaybackControl"),VideoViewportSource:e("../components/VideoViewportSource"),LazyIframe:e("../components/LazyIframe")}},{"../components/GameTrailers/Card":171,"../components/GameTrailers/Hero":172,"../components/GameTrailers/Layout":173,"../components/GameTrailers/Video":174,"../components/HeroLockup/HeroLockupComponent":181,"../components/HeroLockup/HeroLockupNoGL":182,"../components/LazyIframe":187,"../components/LocalNavThemeDark":188,"../components/Manifesto":189,"../components/Marquee":190,"../components/MarqueeItem":191,"../components/MarqueeRow":192,"../components/PillarTrigger":193,"../components/PlaybackControl":194,"../components/ProgressiveImage":195,"../components/StubComponent":196,"../components/TimelineChapterPlayer":197,"../components/VideoViewportSource":198}],201:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("@marcom/ac-modal").createStandardModal,o=e("@marcom/ac-raf-emitter/update"),s=e("@marcom/ac-raf-emitter/draw"),u="#notify-me",l=function(){function e(t,r){var i=this;n(this,e),this.button=t,this._openModal=this._openModal.bind(this),o(function(){var e=r.getAttribute("data-modal-close-label");s(function(){i.modal=a(r);var t=i.element=i.modal.modalElement;i.element.classList.add("modal-notify"),e&&i.modal.closeButton.setAttribute("aria-label",e),i.element.setAttribute("aria-labelledby","modal-notify-headline"),i.element.tabIndex=-1,i.modal._giveModalFocus=function(){this.modalElement.removeAttribute("aria-hidden"),this._activeElement=document.activeElement,s(function(){return t.focus()}),this._circularTab.start()},i._onDeepLinkLoad()})}),this._addLocalNavButtonEvents()}return i(e,[{key:"_onDeepLinkLoad",value:function(){var e=window.location.hash,t=new RegExp(u,"i");t.test(e)&&this._openModal()}},{key:"_addLocalNavButtonEvents",value:function(){var e=this;s(function(){return e.button.setAttribute("role","button")}),this.button.addEventListener("click",this._openModal,!0)}},{key:"_openModal",value:function(e){var t=this;e&&e.preventDefault(),s(function(){t.modal.open()})}}]),e}();t.exports=l},{"@marcom/ac-modal":53,"@marcom/ac-raf-emitter/draw":86,"@marcom/ac-raf-emitter/update":90}],202:[function(e,t,r){"use strict";var n=e("@marcom/ac-raf-emitter/update");t.exports=function(e){var t=null,r=new Promise(function(e){return t=e});return n(function i(){--e<=0?t():n(i)}),r}},{"@marcom/ac-raf-emitter/update":90}]},{},[199]);