(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){'use strict';var getBoundingClientRect=require('./utils/getBoundingClientRect');module.exports=function getContentDimensions(el,rendered){var scale=1;if(rendered){scale=getBoundingClientRect(el).width/el.offsetWidth}
return{width:el.scrollWidth*scale,height:el.scrollHeight*scale}}},{"./utils/getBoundingClientRect":3}],2:[function(require,module,exports){'use strict';var getBoundingClientRect=require('./utils/getBoundingClientRect');module.exports=function getDimensions(el,rendered){var rect;if(rendered){rect=getBoundingClientRect(el);return{width:rect.width,height:rect.height}}
return{width:el.offsetWidth,height:el.offsetHeight}}},{"./utils/getBoundingClientRect":3}],3:[function(require,module,exports){'use strict';module.exports=function getBoundingClientRect(el){var rect=el.getBoundingClientRect();return{top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.width||rect.right-rect.left,height:rect.height||rect.bottom-rect.top}}},{}],4:[function(require,module,exports){'use strict';var cache=require('./shared/stylePropertyCache');var getStyleProperty=require('./getStyleProperty');var getStyleValue=require('./getStyleValue');module.exports=function getStyleCSS(property,value){var css;property=getStyleProperty(property);if(!property){return!1}
css=cache[property].css;if(typeof value!=='undefined'){value=getStyleValue(property,value);if(value===!1){return!1}
css+=':'+value+';'}
return css}},{"./getStyleProperty":5,"./getStyleValue":6,"./shared/stylePropertyCache":9}],5:[function(require,module,exports){'use strict';var cache=require('./shared/stylePropertyCache');var getStyleTestElement=require('./shared/getStyleTestElement');var toCSS=require('./utils/toCSS');var toDOM=require('./utils/toDOM');var prefixHelper=require('./shared/prefixHelper');var memoizeStyleProperty=function(property,prefixed){var cssProperty=toCSS(property);var cssPrefixed=(prefixed===!1)?!1:toCSS(prefixed);cache[property]=cache[prefixed]=cache[cssProperty]=cache[cssPrefixed]={dom:prefixed,css:cssPrefixed};return prefixed};module.exports=function getStyleProperty(property){var properties;var ucProperty;var el;var i;property+='';if(property in cache){return cache[property].dom}
el=getStyleTestElement();property=toDOM(property);ucProperty=property.charAt(0).toUpperCase()+property.substring(1);if(property==='filter'){properties=['WebkitFilter','filter']}else{properties=(property+' '+prefixHelper.dom.join(ucProperty+' ')+ucProperty).split(' ')}
for(i=0;i<properties.length;i++){if(typeof el.style[properties[i]]!=='undefined'){if(i!==0){prefixHelper.reduce(i-1)}
return memoizeStyleProperty(property,properties[i])}}
return memoizeStyleProperty(property,!1)}},{"./shared/getStyleTestElement":7,"./shared/prefixHelper":8,"./shared/stylePropertyCache":9,"./utils/toCSS":12,"./utils/toDOM":13}],6:[function(require,module,exports){'use strict';var getStyleProperty=require('./getStyleProperty');var styleValueAvailable=require('./shared/styleValueAvailable');var prefixHelper=require('./shared/prefixHelper');var stylePropertyCache=require('./shared/stylePropertyCache');var styleValueCache={};var RE_CSS_FUNCTION_PARAMS=/(\([^\)]+\))/gi;var RE_CSS_VALUES=/([^ ,;\(]+(\([^\)]+\))?)/gi;module.exports=function getStyleValue(property,value){var cssProperty;value+='';property=getStyleProperty(property);if(!property){return!1}
if(styleValueAvailable(property,value)){return value}
cssProperty=stylePropertyCache[property].css;value=value.replace(RE_CSS_VALUES,function(match){var values;var valueKey;var key;var i;if(match[0]==='#'||!isNaN(match[0])){return match}
valueKey=match.replace(RE_CSS_FUNCTION_PARAMS,'');key=cssProperty+':'+valueKey;if(key in styleValueCache){if(styleValueCache[key]===!1){return''}
return match.replace(valueKey,styleValueCache[key])}
values=prefixHelper.css.map(function(prefix){return prefix+match});values=[match].concat(values);for(i=0;i<values.length;i++){if(styleValueAvailable(property,values[i])){if(i!==0){prefixHelper.reduce(i-1)}
styleValueCache[key]=values[i].replace(RE_CSS_FUNCTION_PARAMS,'');return values[i]}}
styleValueCache[key]=!1;return''});value=value.trim();return(value==='')?!1:value}},{"./getStyleProperty":5,"./shared/prefixHelper":8,"./shared/stylePropertyCache":9,"./shared/styleValueAvailable":10}],7:[function(require,module,exports){'use strict';var el;module.exports=function getStyleTestElement(){if(!el){el=document.createElement('_')}else{el.style.cssText='';el.removeAttribute('style')}
return el};module.exports.resetElement=function(){el=null}},{}],8:[function(require,module,exports){'use strict';var CSS_PREFIXES=['-webkit-','-moz-','-ms-'];var DOM_PREFIXES=['Webkit','Moz','ms'];var EVT_PREFIXES=['webkit','moz','ms'];var PrefixeHelper=function(){this.initialize()};var proto=PrefixeHelper.prototype;proto.initialize=function(){this.reduced=!1;this.css=CSS_PREFIXES;this.dom=DOM_PREFIXES;this.evt=EVT_PREFIXES};proto.reduce=function(index){if(!this.reduced){this.reduced=!0;this.css=[this.css[index]];this.dom=[this.dom[index]];this.evt=[this.evt[index]]}};module.exports=new PrefixeHelper()},{}],9:[function(require,module,exports){'use strict';module.exports={}},{}],10:[function(require,module,exports){'use strict';var cache=require('./stylePropertyCache');var getStyleTestElement=require('./getStyleTestElement');var flagsSet=!1;var supportsAvailable;var invalidStyleThrowsError;var prepareFlags=function(){var el;if(!flagsSet){flagsSet=!0;supportsAvailable=('CSS' in window&&'supports' in window.CSS);invalidStyleThrowsError=!1;el=getStyleTestElement();try{el.style.width='invalid'}catch(e){invalidStyleThrowsError=!0}}};module.exports=function styleValueAvailable(property,value){var before;var el;prepareFlags();if(supportsAvailable){property=cache[property].css;return CSS.supports(property,value)}
el=getStyleTestElement();before=el.style[property];if(invalidStyleThrowsError){try{el.style[property]=value}catch(e){return!1}}else{el.style[property]=value}
return(el.style[property]&&el.style[property]!==before)};module.exports.resetFlags=function(){flagsSet=!1}},{"./getStyleTestElement":7,"./stylePropertyCache":9}],11:[function(require,module,exports){'use strict';var RE_PREFIXES=/(-webkit-|-moz-|-ms-)|^(webkit|moz|ms)/gi;module.exports=function stripPrefixes(str){str=String.prototype.replace.call(str,RE_PREFIXES,'');return str.charAt(0).toLowerCase()+str.substring(1)}},{}],12:[function(require,module,exports){'use strict';var RE_DOM_PREFIXES=/^(webkit|moz|ms)/gi;module.exports=function toCSS(str){var i;if(str.toLowerCase()==='cssfloat'){return'float'}
if(RE_DOM_PREFIXES.test(str)){str='-'+str}
return str.replace(/([A-Z]+)([A-Z][a-z])/g,'$1-$2').replace(/([a-z\d])([A-Z])/g,'$1-$2').toLowerCase()}},{}],13:[function(require,module,exports){'use strict';var RE_CSS_WORD=/-([a-z])/g;module.exports=function toDOM(str){var i;if(str.toLowerCase()==='float'){return'cssFloat'}
str=str.replace(RE_CSS_WORD,function(str,m1){return m1.toUpperCase()});if(str.substr(0,2)==='Ms'){str='ms'+str.substring(2)}
return str}},{}],14:[function(require,module,exports){'use strict';module.exports={getStyle:require('./getStyle'),setStyle:require('./setStyle')}},{"./getStyle":15,"./setStyle":17}],15:[function(require,module,exports){'use strict';var getStyleProperty=require('@marcom/ac-prefixer/getStyleProperty');var stripPrefixes=require('@marcom/ac-prefixer/stripPrefixes');module.exports=function getStyle(){var properties=Array.prototype.slice.call(arguments);var target=properties.shift(properties);var computed=window.getComputedStyle(target);var styles={};var property;var prefixed;var value;var i;if(typeof properties[0]!=='string'){properties=properties[0]}
for(i=0;i<properties.length;i++){property=properties[i];prefixed=getStyleProperty(property);if(prefixed){property=stripPrefixes(prefixed);value=computed[prefixed];if(!value||value==='auto'){value=null}
if(value){value=stripPrefixes(value)}}else{value=null}
styles[property]=value}
return styles}},{"@marcom/ac-prefixer/getStyleProperty":5,"@marcom/ac-prefixer/stripPrefixes":11}],16:[function(require,module,exports){'use strict';module.exports=function normalizeValue(value){var combined;var partials;var i;if(!value&&value!==0){return''}
if(Array.isArray(value)){return value+''}
if(typeof value==='object'){combined='';partials=Object.keys(value);for(i=0;i<partials.length;i++){combined+=partials[i]+'('+value[partials[i]]+') '}
return combined.trim()}
return value}},{}],17:[function(require,module,exports){'use strict';var getStyleCSS=require('@marcom/ac-prefixer/getStyleCSS');var getStyleProperty=require('@marcom/ac-prefixer/getStyleProperty');var normalizeValue=require('./internal/normalizeValue');module.exports=function setStyle(target,styles){var cssText='';var cssRule;var property;var domProperty;var value;var targetCSSText;if(typeof styles!=='object'){throw new TypeError('setStyle: styles must be an Object')}
for(property in styles){value=normalizeValue(styles[property]);if(!value&&value!==0){domProperty=getStyleProperty(property);if('removeAttribute' in target.style){target.style.removeAttribute(domProperty)}else{target.style[domProperty]=''}}else{cssRule=getStyleCSS(property,value);if(cssRule!==!1){cssText+=' '+cssRule}}}
if(cssText.length){targetCSSText=target.style.cssText;if(targetCSSText.charAt(targetCSSText.length-1)!==';'){targetCSSText+=';'}
targetCSSText+=cssText;target.style.cssText=targetCSSText}
return target}},{"./internal/normalizeValue":16,"@marcom/ac-prefixer/getStyleCSS":4,"@marcom/ac-prefixer/getStyleProperty":5}],18:[function(require,module,exports){'use strict';module.exports=8},{}],19:[function(require,module,exports){'use strict';module.exports=11},{}],20:[function(require,module,exports){'use strict';module.exports=9},{}],21:[function(require,module,exports){'use strict';module.exports=1},{}],22:[function(require,module,exports){'use strict';module.exports=3},{}],23:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');require('@marcom/ac-polyfills/Array/prototype.filter');var isNodeType=require('./internal/isNodeType');var ELEMENT_NODE=require('./ELEMENT_NODE');module.exports=function filterByNodeType(nodes,nodeType){nodeType=nodeType||ELEMENT_NODE;nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(node){return isNodeType(node,nodeType)})}},{"./ELEMENT_NODE":21,"./internal/isNodeType":24,"@marcom/ac-polyfills/Array/prototype.filter":30,"@marcom/ac-polyfills/Array/prototype.slice":32}],24:[function(require,module,exports){'use strict';var isNode=require('../isNode');module.exports=function isNodeType(node,nodeType){if(!isNode(node)){return!1}
if(typeof nodeType==='number'){return(node.nodeType===nodeType)}
return(nodeType.indexOf(node.nodeType)!==-1)}},{"../isNode":28}],25:[function(require,module,exports){'use strict';var isNodeType=require('./isNodeType');var COMMENT_NODE=require('../COMMENT_NODE');var DOCUMENT_FRAGMENT_NODE=require('../DOCUMENT_FRAGMENT_NODE');var ELEMENT_NODE=require('../ELEMENT_NODE');var TEXT_NODE=require('../TEXT_NODE');var VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_INSERT_NODE=' must be an Element, TextNode, Comment, or Document Fragment';var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=' must be an Element, TextNode, or Comment';var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=' must be an Element, or Document Fragment';var ERR_NO_PARENT_NODE=' must have a parentNode';module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||'target';if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||'target';if(!node&&!required){return}
if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_CHILD_NODE)}},insertNode:function(node,required,funcName,paramName){paramName=paramName||'node';if(!node&&!required){return}
if(!isNodeType(node,VALID_INSERT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_INSERT_NODE)}},hasParentNode:function(node,funcName,paramName){paramName=paramName||'target';if(!node.parentNode){throw new TypeError(funcName+': '+paramName+ERR_NO_PARENT_NODE)}}}},{"../COMMENT_NODE":18,"../DOCUMENT_FRAGMENT_NODE":19,"../ELEMENT_NODE":21,"../TEXT_NODE":22,"./isNodeType":24}],26:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_FRAGMENT_NODE=require('./DOCUMENT_FRAGMENT_NODE');module.exports=function isDocumentFragment(obj){return isNodeType(obj,DOCUMENT_FRAGMENT_NODE)}},{"./DOCUMENT_FRAGMENT_NODE":19,"./internal/isNodeType":24}],27:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var ELEMENT_NODE=require('./ELEMENT_NODE');module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":21,"./internal/isNodeType":24}],28:[function(require,module,exports){'use strict';module.exports=function isNode(obj){return!!(obj&&obj.nodeType)}},{}],29:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function remove(node){validate.childNode(node,!0,'remove');if(!node.parentNode){return node}
return node.parentNode.removeChild(node)}},{"./internal/validate":25}],30:[function(require,module,exports){if(!Array.prototype.filter){Array.prototype.filter=function filter(callback,thisObj){var arrayObject=Object(this);var len=arrayObject.length>>>0;var i;var results=[];if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
for(i=0;i<len;i+=1){if(i in arrayObject&&callback.call(thisObj,arrayObject[i],i,arrayObject)){results.push(arrayObject[i])}}
return results}}},{}],31:[function(require,module,exports){if(!Array.prototype.indexOf){Array.prototype.indexOf=function indexOf(searchElement,fromIndex){var startIndex=fromIndex||0;var currentIndex=0;if(startIndex<0){startIndex=this.length+fromIndex-1;if(startIndex<0){throw 'Wrapped past beginning of array while looking up a negative start index.'}}
for(currentIndex=0;currentIndex<this.length;currentIndex++){if(this[currentIndex]===searchElement){return currentIndex}}
return(-1)}}},{}],32:[function(require,module,exports){(function(){'use strict';var _slice=Array.prototype.slice;try{_slice.call(document.documentElement)}catch(e){Array.prototype.slice=function(begin,end){end=(typeof end!=='undefined')?end:this.length;if(Object.prototype.toString.call(this)==='[object Array]'){return _slice.call(this,begin,end)}
var i,cloned=[],size,len=this.length;var start=begin||0;start=(start>=0)?start:len+start;var upTo=(end)?end:len;if(end<0){upTo=len+end}
size=upTo-start;if(size>0){cloned=new Array(size);if(this.charAt){for(i=0;i<size;i++){cloned[i]=this.charAt(start+i)}}else{for(i=0;i<size;i++){cloned[i]=this[start+i]}}}
return cloned}}}())},{}],33:[function(require,module,exports){'use strict';module.exports={ancestor:require('./ancestor'),ancestors:require('./ancestors'),children:require('./children'),filterBySelector:require('./filterBySelector'),firstChild:require('./firstChild'),lastChild:require('./lastChild'),matchesSelector:require('./matchesSelector'),nextSibling:require('./nextSibling'),nextSiblings:require('./nextSiblings'),previousSibling:require('./previousSibling'),previousSiblings:require('./previousSiblings'),querySelector:require('./querySelector'),querySelectorAll:require('./querySelectorAll'),siblings:require('./siblings')}},{"./ancestor":34,"./ancestors":35,"./children":36,"./filterBySelector":37,"./firstChild":38,"./lastChild":41,"./matchesSelector":42,"./nextSibling":43,"./nextSiblings":44,"./previousSibling":45,"./previousSiblings":46,"./querySelector":47,"./querySelectorAll":48,"./siblings":52}],34:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function ancestor(node,selector,inclusive){validate.childNode(node,!0,'ancestors');validate.selector(selector,!1,'ancestors');if(inclusive&&isElement(node)&&(!selector||matchesSelector(node,selector))){return node}
if(node!==document.body){while((node=node.parentNode)&&isElement(node)){if(!selector||matchesSelector(node,selector)){return node}
if(node===document.body){break}}}
return null}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-dom-nodes/isElement":27}],35:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function ancestors(node,selector,inclusive){var els=[];validate.childNode(node,!0,'ancestors');validate.selector(selector,!1,'ancestors');if(inclusive&&isElement(node)&&(!selector||matchesSelector(node,selector))){els.push(node)}
if(node!==document.body){while((node=node.parentNode)&&isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}
if(node===document.body){break}}}
return els}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-dom-nodes/isElement":27}],36:[function(require,module,exports){'use strict';var filterByNodeType=require('@marcom/ac-dom-nodes/filterByNodeType');var filterBySelector=require('./filterBySelector');var validate=require('./internal/validate');module.exports=function children(node,selector){var els;validate.parentNode(node,!0,'children');validate.selector(selector,!1,'children');els=node.children||node.childNodes;els=filterByNodeType(els);if(selector){els=filterBySelector(els,selector)}
return els}},{"./filterBySelector":37,"./internal/validate":40,"@marcom/ac-dom-nodes/filterByNodeType":23}],37:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');require('@marcom/ac-polyfills/Array/prototype.filter');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function filterBySelector(nodes,selector){validate.selector(selector,!0,'filterBySelector');nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(el){return matchesSelector(el,selector)})}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-polyfills/Array/prototype.filter":30,"@marcom/ac-polyfills/Array/prototype.slice":32}],38:[function(require,module,exports){'use strict';var children=require('./children');var validate=require('./internal/validate');module.exports=function firstChild(node,selector){var els;validate.parentNode(node,!0,'firstChild');validate.selector(selector,!1,'firstChild');if(node.firstElementChild&&!selector){return node.firstElementChild}
els=children(node,selector);if(els.length){return els[0]}
return null}},{"./children":36,"./internal/validate":40}],39:[function(require,module,exports){'use strict';module.exports=window.Element?(function(proto){return proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector}(Element.prototype)):null},{}],40:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');var isNode=require('@marcom/ac-dom-nodes/isNode');var COMMENT_NODE=require('@marcom/ac-dom-nodes/COMMENT_NODE');var DOCUMENT_FRAGMENT_NODE=require('@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE');var DOCUMENT_NODE=require('@marcom/ac-dom-nodes/DOCUMENT_NODE');var ELEMENT_NODE=require('@marcom/ac-dom-nodes/ELEMENT_NODE');var TEXT_NODE=require('@marcom/ac-dom-nodes/TEXT_NODE');var isNodeType=function(node,nodeType){if(!isNode(node)){return!1}
if(typeof nodeType==='number'){return(node.nodeType===nodeType)}
return(nodeType.indexOf(node.nodeType)!==-1)};var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=' must be an Element, Document, or Document Fragment';var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=' must be an Element, TextNode, or Comment';var ERR_INVALID_SELECTOR=' must be a string';module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||'node';if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||'node';if(!node&&!required){return}
if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_CHILD_NODE)}},selector:function(selector,required,funcName,paramName){paramName=paramName||'selector';if((selector||required)&&typeof selector!=='string'){throw new TypeError(funcName+': '+paramName+ERR_INVALID_SELECTOR)}}}},{"@marcom/ac-dom-nodes/COMMENT_NODE":18,"@marcom/ac-dom-nodes/DOCUMENT_FRAGMENT_NODE":19,"@marcom/ac-dom-nodes/DOCUMENT_NODE":20,"@marcom/ac-dom-nodes/ELEMENT_NODE":21,"@marcom/ac-dom-nodes/TEXT_NODE":22,"@marcom/ac-dom-nodes/isNode":28,"@marcom/ac-polyfills/Array/prototype.indexOf":31}],41:[function(require,module,exports){'use strict';var children=require('./children');var validate=require('./internal/validate');module.exports=function lastChild(node,selector){var els;validate.parentNode(node,!0,'lastChild');validate.selector(selector,!1,'lastChild');if(node.lastElementChild&&!selector){return node.lastElementChild}
els=children(node,selector);if(els.length){return els[els.length-1]}
return null}},{"./children":36,"./internal/validate":40}],42:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var validate=require('./internal/validate');var nativeMatches=require('./internal/nativeMatches');var matchesSelectorShim=require('./shims/matchesSelector');module.exports=function matchesSelector(node,selector){validate.selector(selector,!0,'matchesSelector');if(!isElement(node)){return!1}
if(!nativeMatches){return matchesSelectorShim(node,selector)}
return nativeMatches.call(node,selector)}},{"./internal/nativeMatches":39,"./internal/validate":40,"./shims/matchesSelector":49,"@marcom/ac-dom-nodes/isElement":27}],43:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function nextSibling(node,selector){validate.childNode(node,!0,'nextSibling');validate.selector(selector,!1,'nextSibling');if(node.nextElementSibling&&!selector){return node.nextElementSibling}
while(node=node.nextSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){return node}}}
return null}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-dom-nodes/isElement":27}],44:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function nextSiblings(node,selector){var els=[];validate.childNode(node,!0,'nextSiblings');validate.selector(selector,!1,'nextSiblings');while(node=node.nextSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}}}
return els}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-dom-nodes/isElement":27}],45:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function previousSibling(node,selector){validate.childNode(node,!0,'previousSibling');validate.selector(selector,!1,'previousSibling');if(node.previousElementSibling&&!selector){return node.previousElementSibling}
while(node=node.previousSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){return node}}}
return null}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-dom-nodes/isElement":27}],46:[function(require,module,exports){'use strict';var isElement=require('@marcom/ac-dom-nodes/isElement');var matchesSelector=require('./matchesSelector');var validate=require('./internal/validate');module.exports=function previousSiblings(node,selector){var els=[];validate.childNode(node,!0,'previousSiblings');validate.selector(selector,!1,'previousSiblings');while(node=node.previousSibling){if(isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}}}
return els.reverse()}},{"./internal/validate":40,"./matchesSelector":42,"@marcom/ac-dom-nodes/isElement":27}],47:[function(require,module,exports){'use strict';var validate=require('./internal/validate');var querySelectorShim=require('./shims/querySelector');var querySelectorAvailable=('querySelector' in document);module.exports=function querySelector(selector,context){context=context||document;validate.parentNode(context,!0,'querySelector','context');validate.selector(selector,!0,'querySelector');if(!querySelectorAvailable){return querySelectorShim(selector,context)}
return context.querySelector(selector)}},{"./internal/validate":40,"./shims/querySelector":50}],48:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');var validate=require('./internal/validate');var querySelectorAllShim=require('./shims/querySelectorAll');var querySelectorAllAvailable=('querySelectorAll' in document);module.exports=function querySelectorAll(selector,context){context=context||document;validate.parentNode(context,!0,'querySelectorAll','context');validate.selector(selector,!0,'querySelectorAll');if(!querySelectorAllAvailable){return querySelectorAllShim(selector,context)}
return Array.prototype.slice.call(context.querySelectorAll(selector))}},{"./internal/validate":40,"./shims/querySelectorAll":51,"@marcom/ac-polyfills/Array/prototype.slice":32}],49:[function(require,module,exports){'use strict';var querySelectorAll=require('../querySelectorAll');module.exports=function matchesSelector(node,selector){var context=node.parentNode||document;var nodes=querySelectorAll(selector,context);var i;for(i=0;i<nodes.length;i++){if(nodes[i]===node){return!0}}
return!1}},{"../querySelectorAll":48}],50:[function(require,module,exports){'use strict';var querySelectorAll=require('./querySelectorAll');module.exports=function querySelector(selector,context){var allResults=querySelectorAll(selector,context);return allResults.length?allResults[0]:null}},{"./querySelectorAll":51}],51:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');var isElement=require('@marcom/ac-dom-nodes/isElement');var isDocumentFragment=require('@marcom/ac-dom-nodes/isDocumentFragment');var removeElement=require('@marcom/ac-dom-nodes/remove');var COLLECTION_PREFIX='_ac_qsa_';var isElementInContext=function(el,context){var parent;if(context===document){return!0}
parent=el;while((parent=parent.parentNode)&&isElement(parent)){if(parent===context){return!0}}
return!1};var recalcStyles=function(context){if('recalc' in context){context.recalc(!1)}else{document.recalc(!1)}
window.scrollBy(0,0)};module.exports=function querySelectorAll(selector,context){var style=document.createElement('style');var id=COLLECTION_PREFIX+(Math.random()+'').slice(-6);var els=[];var el;context=context||document;document[id]=[];if(isDocumentFragment(context)){context.appendChild(style)}else{document.documentElement.firstChild.appendChild(style)}
style.styleSheet.cssText='*{display:recalc;}'+selector+'{ac-qsa:expression(document["'+id+'"] && document["'+id+'"].push(this));}';recalcStyles(context);while(document[id].length){el=document[id].shift();el.style.removeAttribute('ac-qsa');if(els.indexOf(el)===-1&&isElementInContext(el,context)){els.push(el)}}
document[id]=null;removeElement(style);recalcStyles(context);return els}},{"@marcom/ac-dom-nodes/isDocumentFragment":26,"@marcom/ac-dom-nodes/isElement":27,"@marcom/ac-dom-nodes/remove":29,"@marcom/ac-polyfills/Array/prototype.indexOf":31}],52:[function(require,module,exports){'use strict';var children=require('./children');var validate=require('./internal/validate');module.exports=function siblings(node,selector){var els=[];validate.childNode(node,!0,'siblings');validate.selector(selector,!1,'siblings');if(node.parentNode){els=children(node.parentNode,selector);els=els.filter(function(el){return(el!==node)})}
return els}},{"./children":36,"./internal/validate":40}],53:[function(require,module,exports){'use strict';module.exports={flatten:require('./flatten'),intersection:require('./intersection'),shuffle:require('./shuffle'),toArray:require('./toArray'),union:require('./union'),unique:require('./unique'),without:require('./without')}},{"./flatten":54,"./intersection":55,"./shuffle":56,"./toArray":57,"./union":58,"./unique":59,"./without":60}],54:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/isArray');require('@marcom/ac-polyfills/Array/prototype.forEach');module.exports=function flatten(array){var flattenedArray=[];var callback=function(item){if(Array.isArray(item)){item.forEach(callback)}else{flattenedArray.push(item)}};array.forEach(callback);return flattenedArray}},{"@marcom/ac-polyfills/Array/isArray":110,"@marcom/ac-polyfills/Array/prototype.forEach":112}],55:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');module.exports=function intersection(array){if(!array){return[]}
var argsLength=arguments.length;var i=0;var len=array.length;var result=[];var item;for(i;i<len;i++){item=array[i];if(result.indexOf(item)>-1){continue}
for(var j=1;j<argsLength;j++){if(arguments[j].indexOf(item)<0){break}}
if(j===argsLength){result.push(item)}}
return result}},{"@marcom/ac-polyfills/Array/prototype.indexOf":113}],56:[function(require,module,exports){'use strict';module.exports=function shuffle(array){var len=array.length;var index;var temp;while(len){index=Math.floor(Math.random()*len--);temp=array[len];array[len]=array[index];array[index]=temp}
return array}},{}],57:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');module.exports=function toArray(arrayLike){return Array.prototype.slice.call(arrayLike)}},{"@marcom/ac-polyfills/Array/prototype.slice":115}],58:[function(require,module,exports){'use strict';var flatten=require('./flatten');var toArray=require('./toArray');var unique=require('./unique');module.exports=function union(array){return unique(flatten(toArray(arguments)))}},{"./flatten":54,"./toArray":57,"./unique":59}],59:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');require('@marcom/ac-polyfills/Array/prototype.reduce');module.exports=function unique(array){var _unique=function(prev,current){if(prev.indexOf(current)<0){prev.push(current)}
return prev};return array.reduce(_unique,[])}},{"@marcom/ac-polyfills/Array/prototype.indexOf":113,"@marcom/ac-polyfills/Array/prototype.reduce":114}],60:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');require('@marcom/ac-polyfills/Array/prototype.slice');module.exports=function without(arr,value,recurse){var newArr;var index=arr.indexOf(value);var length=arr.length;if(index>=0){if(recurse){newArr=arr.slice(0,length);var i,amountRemoved=0;for(i=index;i<length;i++){if(arr[i]===value){newArr.splice(i-amountRemoved,1);amountRemoved++}}}else if(index===(length-1)){newArr=arr.slice(0,(length-1))}else if(index===0){newArr=arr.slice(1)}else{newArr=arr.slice(0,index);newArr=newArr.concat(arr.slice(index+1))}}else{return arr}
return newArr}},{"@marcom/ac-polyfills/Array/prototype.indexOf":113,"@marcom/ac-polyfills/Array/prototype.slice":115}],61:[function(require,module,exports){'use strict';var addEventListenerUtil=require('./utils/addEventListener');var getEventType=require('./shared/getEventType');module.exports=function addEventListener(target,type,listener,useCapture){type=getEventType(target,type);return addEventListenerUtil(target,type,listener,useCapture)}},{"./shared/getEventType":71,"./utils/addEventListener":75}],62:[function(require,module,exports){'use strict';var dispatchEventUtil=require('./utils/dispatchEvent');var getEventType=require('./shared/getEventType');module.exports=function dispatchEvent(target,type,options){type=getEventType(target,type);return dispatchEventUtil(target,type,options)}},{"./shared/getEventType":71,"./utils/dispatchEvent":76}],63:[function(require,module,exports){'use strict';module.exports={addEventListener:require('./addEventListener'),dispatchEvent:require('./dispatchEvent'),preventDefault:require('./preventDefault'),removeEventListener:require('./removeEventListener'),stop:require('./stop'),stopPropagation:require('./stopPropagation'),target:require('./target')}},{"./addEventListener":61,"./dispatchEvent":62,"./preventDefault":69,"./removeEventListener":70,"./stop":72,"./stopPropagation":73,"./target":74}],64:[function(require,module,exports){'use strict';var eventTypeAvailable=require('./utils/eventTypeAvailable');var camelCasedEventTypes=require('./shared/camelCasedEventTypes');var windowFallbackEventTypes=require('./shared/windowFallbackEventTypes');var prefixHelper=require('./shared/prefixHelper');var cache={};module.exports=function getEventType(type,tagName){var prefixedType;var tagNameCache;var i;tagName=tagName||'div';type=type.toLowerCase();if(!(tagName in cache)){cache[tagName]={}}
tagNameCache=cache[tagName];if(type in tagNameCache){return tagNameCache[type]}
if(eventTypeAvailable(type,tagName)){return tagNameCache[type]=type}
if(type in camelCasedEventTypes){for(i=0;i<camelCasedEventTypes[type].length;i++){prefixedType=camelCasedEventTypes[type][i];if(eventTypeAvailable(prefixedType.toLowerCase(),tagName)){return tagNameCache[type]=prefixedType}}}
for(i=0;i<prefixHelper.evt.length;i++){prefixedType=prefixHelper.evt[i]+type;if(eventTypeAvailable(prefixedType,tagName)){prefixHelper.reduce(i);return tagNameCache[type]=prefixedType}}
if(tagName!=='window'&&windowFallbackEventTypes.indexOf(type)){return tagNameCache[type]=getEventType(type,'window')}
return tagNameCache[type]=!1}},{"./shared/camelCasedEventTypes":65,"./shared/prefixHelper":66,"./shared/windowFallbackEventTypes":67,"./utils/eventTypeAvailable":68}],65:[function(require,module,exports){'use strict';module.exports={transitionend:['webkitTransitionEnd','MSTransitionEnd'],animationstart:['webkitAnimationStart','MSAnimationStart'],animationend:['webkitAnimationEnd','MSAnimationEnd'],animationiteration:['webkitAnimationIteration','MSAnimationIteration'],fullscreenchange:['MSFullscreenChange'],fullscreenerror:['MSFullscreenError']}},{}],66:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],67:[function(require,module,exports){'use strict';module.exports=['transitionend','animationstart','animationend','animationiteration',]},{}],68:[function(require,module,exports){'use strict';var testElements={'window':window,'document':document};module.exports=function eventTypeAvailable(type,tagName){var el;type='on'+type;if(!(tagName in testElements)){testElements[tagName]=document.createElement(tagName)}
el=testElements[tagName];if(type in el){return!0}
if('setAttribute' in el){el.setAttribute(type,'return;');return(typeof el[type]==='function')}
return!1}},{}],69:[function(require,module,exports){'use strict';module.exports=function preventDefault(evt){evt=evt||window.event;if(evt.preventDefault){evt.preventDefault()}else{evt.returnValue=!1}}},{}],70:[function(require,module,exports){'use strict';var removeEventListenerUtil=require('./utils/removeEventListener');var getEventType=require('./shared/getEventType');module.exports=function removeEventListener(target,type,listener,useCapture){type=getEventType(target,type);return removeEventListenerUtil(target,type,listener,useCapture)}},{"./shared/getEventType":71,"./utils/removeEventListener":77}],71:[function(require,module,exports){'use strict';var getPrefixedEventType=require('@marcom/ac-prefixer/getEventType');module.exports=function getEventType(target,type){var tagName;var prefixed;if('tagName' in target){tagName=target.tagName}else if(target===window){tagName='window'}else{tagName='document'}
prefixed=getPrefixedEventType(type,tagName);if(prefixed){return prefixed}
return type}},{"@marcom/ac-prefixer/getEventType":64}],72:[function(require,module,exports){'use strict';var stopPropagation=require('./stopPropagation');var preventDefault=require('./preventDefault');module.exports=function stop(evt){evt=evt||window.event;stopPropagation(evt);preventDefault(evt);evt.stopped=!0;evt.returnValue=!1}},{"./preventDefault":69,"./stopPropagation":73}],73:[function(require,module,exports){'use strict';module.exports=function stopPropagation(evt){evt=evt||window.event;if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=!0}}},{}],74:[function(require,module,exports){'use strict';module.exports=function target(evt){evt=evt||window.event;return(typeof evt.target!=='undefined')?evt.target:evt.srcElement}},{}],75:[function(require,module,exports){'use strict';module.exports=function addEventListener(target,type,listener,useCapture){if(target.addEventListener){target.addEventListener(type,listener,!!useCapture)}else{target.attachEvent('on'+type,listener)}
return target}},{}],76:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/CustomEvent');module.exports=function dispatchEvent(target,type,options){var evt;if(target.dispatchEvent){if(options){evt=new CustomEvent(type,options)}else{evt=new CustomEvent(type)}
target.dispatchEvent(evt)}else{evt=document.createEventObject();if(options&&'detail' in options){evt.detail=options.detail}
target.fireEvent('on'+type,evt)}
return target}},{"@marcom/ac-polyfills/CustomEvent":116}],77:[function(require,module,exports){'use strict';module.exports=function removeEventListener(target,type,listener,useCapture){if(target.removeEventListener){target.removeEventListener(type,listener,!!useCapture)}else{target.detachEvent('on'+type,listener)}
return target}},{}],78:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"./utils/getBoundingClientRect":82,"dup":2}],79:[function(require,module,exports){'use strict';var getDimensions=require('./getDimensions');var getBoundingClientRect=require('./utils/getBoundingClientRect');var getScrollX=require('./getScrollX');var getScrollY=require('./getScrollY');module.exports=function getPagePosition(el,rendered){var rect;var scrollX;var scrollY;var dimensions;if(rendered){rect=getBoundingClientRect(el);scrollX=getScrollX();scrollY=getScrollY();return{top:rect.top+scrollY,right:rect.right+scrollX,bottom:rect.bottom+scrollY,left:rect.left+scrollX}}
dimensions=getDimensions(el,rendered);rect={top:el.offsetTop,left:el.offsetLeft,width:dimensions.width,height:dimensions.height};while((el=el.offsetParent)){rect.top+=el.offsetTop;rect.left+=el.offsetLeft}
return{top:rect.top,right:rect.left+rect.width,bottom:rect.top+rect.height,left:rect.left}}},{"./getDimensions":78,"./getScrollX":80,"./getScrollY":81,"./utils/getBoundingClientRect":82}],80:[function(require,module,exports){'use strict';module.exports=function getScrollX(el){var offset;el=el||window;if(el===window){offset=window.pageXOffset;if(!offset){el=document.documentElement||document.body.parentNode||document.body}else{return offset}}
return el.scrollLeft}},{}],81:[function(require,module,exports){'use strict';module.exports=function getScrollY(el){var offset;el=el||window;if(el===window){offset=window.pageYOffset;if(!offset){el=document.documentElement||document.body.parentNode||document.body}else{return offset}}
return el.scrollTop}},{}],82:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"dup":3}],83:[function(require,module,exports){'use strict';module.exports=8},{}],84:[function(require,module,exports){'use strict';module.exports=11},{}],85:[function(require,module,exports){'use strict';module.exports=9},{}],86:[function(require,module,exports){'use strict';module.exports=10},{}],87:[function(require,module,exports){'use strict';module.exports=1},{}],88:[function(require,module,exports){'use strict';module.exports=3},{}],89:[function(require,module,exports){'use strict';module.exports={createDocumentFragment:require('./createDocumentFragment'),filterByNodeType:require('./filterByNodeType'),hasAttribute:require('./hasAttribute'),indexOf:require('./indexOf'),insertAfter:require('./insertAfter'),insertBefore:require('./insertBefore'),insertFirstChild:require('./insertFirstChild'),insertLastChild:require('./insertLastChild'),isComment:require('./isComment'),isDocument:require('./isDocument'),isDocumentFragment:require('./isDocumentFragment'),isDocumentType:require('./isDocumentType'),isElement:require('./isElement'),isNode:require('./isNode'),isNodeList:require('./isNodeList'),isTextNode:require('./isTextNode'),remove:require('./remove'),replace:require('./replace'),COMMENT_NODE:require('./COMMENT_NODE'),DOCUMENT_FRAGMENT_NODE:require('./DOCUMENT_FRAGMENT_NODE'),DOCUMENT_NODE:require('./DOCUMENT_NODE'),DOCUMENT_TYPE_NODE:require('./DOCUMENT_TYPE_NODE'),ELEMENT_NODE:require('./ELEMENT_NODE'),TEXT_NODE:require('./TEXT_NODE')}},{"./COMMENT_NODE":83,"./DOCUMENT_FRAGMENT_NODE":84,"./DOCUMENT_NODE":85,"./DOCUMENT_TYPE_NODE":86,"./ELEMENT_NODE":87,"./TEXT_NODE":88,"./createDocumentFragment":90,"./filterByNodeType":91,"./hasAttribute":92,"./indexOf":93,"./insertAfter":94,"./insertBefore":95,"./insertFirstChild":96,"./insertLastChild":97,"./isComment":100,"./isDocument":101,"./isDocumentFragment":102,"./isDocumentType":103,"./isElement":104,"./isNode":105,"./isNodeList":106,"./isTextNode":107,"./remove":108,"./replace":109}],90:[function(require,module,exports){'use strict';module.exports=function createDocumentFragment(html){var fragment=document.createDocumentFragment();var div;if(html){div=document.createElement('div');div.innerHTML=html;while(div.firstChild){fragment.appendChild(div.firstChild)}}
return fragment}},{}],91:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');require('@marcom/ac-polyfills/Array/prototype.filter');var isNodeType=require('./internal/isNodeType');var ELEMENT_NODE=require('./ELEMENT_NODE');module.exports=function filterByNodeType(nodes,nodeType){nodeType=nodeType||ELEMENT_NODE;nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(node){return isNodeType(node,nodeType)})}},{"./ELEMENT_NODE":87,"./internal/isNodeType":98,"@marcom/ac-polyfills/Array/prototype.filter":111,"@marcom/ac-polyfills/Array/prototype.slice":115}],92:[function(require,module,exports){'use strict';module.exports=function hasAttribute(el,attr){if('hasAttribute' in el){return el.hasAttribute(attr)}
return(el.attributes.getNamedItem(attr)!==null)}},{}],93:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');require('@marcom/ac-polyfills/Array/prototype.slice');var validate=require('./internal/validate');var filterByNodeType=require('./filterByNodeType');module.exports=function indexOf(node,nodeType){var parentNode=node.parentNode;var nodes;if(!parentNode){return 0}
nodes=parentNode.childNodes;if(nodeType!==!1){nodes=filterByNodeType(nodes,nodeType)}else{nodes=Array.prototype.slice.call(nodes)}
return nodes.indexOf(node)}},{"./filterByNodeType":91,"./internal/validate":99,"@marcom/ac-polyfills/Array/prototype.indexOf":113,"@marcom/ac-polyfills/Array/prototype.slice":115}],94:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertAfter(node,target){validate.insertNode(node,!0,'insertAfter');validate.childNode(target,!0,'insertAfter');validate.hasParentNode(target,'insertAfter');if(!target.nextSibling){return target.parentNode.appendChild(node)}
return target.parentNode.insertBefore(node,target.nextSibling)}},{"./internal/validate":99}],95:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertBefore(node,target){validate.insertNode(node,!0,'insertBefore');validate.childNode(target,!0,'insertBefore');validate.hasParentNode(target,'insertBefore');return target.parentNode.insertBefore(node,target)}},{"./internal/validate":99}],96:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertFirstChild(node,target){validate.insertNode(node,!0,'insertFirstChild');validate.parentNode(target,!0,'insertFirstChild');if(!target.firstChild){return target.appendChild(node)}
return target.insertBefore(node,target.firstChild)}},{"./internal/validate":99}],97:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertLastChild(node,target){validate.insertNode(node,!0,'insertLastChild');validate.parentNode(target,!0,'insertLastChild');return target.appendChild(node)}},{"./internal/validate":99}],98:[function(require,module,exports){'use strict';var isNode=require('../isNode');module.exports=function isNodeType(node,nodeType){if(!isNode(node)){return!1}
if(typeof nodeType==='number'){return(node.nodeType===nodeType)}
return(nodeType.indexOf(node.nodeType)!==-1)}},{"../isNode":105}],99:[function(require,module,exports){'use strict';var isNodeType=require('./isNodeType');var COMMENT_NODE=require('../COMMENT_NODE');var DOCUMENT_FRAGMENT_NODE=require('../DOCUMENT_FRAGMENT_NODE');var ELEMENT_NODE=require('../ELEMENT_NODE');var TEXT_NODE=require('../TEXT_NODE');var VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_INSERT_NODE=' must be an Element, TextNode, Comment, or Document Fragment';var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=' must be an Element, TextNode, or Comment';var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=' must be an Element, or Document Fragment';var ERR_NO_PARENT_NODE=' must have a parentNode';module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||'target';if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||'target';if(!node&&!required){return}
if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_CHILD_NODE)}},insertNode:function(node,required,funcName,paramName){paramName=paramName||'node';if(!node&&!required){return}
if(!isNodeType(node,VALID_INSERT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_INSERT_NODE)}},hasParentNode:function(node,funcName,paramName){paramName=paramName||'target';if(!node.parentNode){throw new TypeError(funcName+': '+paramName+ERR_NO_PARENT_NODE)}}}},{"../COMMENT_NODE":83,"../DOCUMENT_FRAGMENT_NODE":84,"../ELEMENT_NODE":87,"../TEXT_NODE":88,"./isNodeType":98}],100:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var COMMENT_NODE=require('./COMMENT_NODE');module.exports=function isComment(obj){return isNodeType(obj,COMMENT_NODE)}},{"./COMMENT_NODE":83,"./internal/isNodeType":98}],101:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_NODE=require('./DOCUMENT_NODE');module.exports=function isDocument(obj){return isNodeType(obj,DOCUMENT_NODE)}},{"./DOCUMENT_NODE":85,"./internal/isNodeType":98}],102:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_FRAGMENT_NODE=require('./DOCUMENT_FRAGMENT_NODE');module.exports=function isDocumentFragment(obj){return isNodeType(obj,DOCUMENT_FRAGMENT_NODE)}},{"./DOCUMENT_FRAGMENT_NODE":84,"./internal/isNodeType":98}],103:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_TYPE_NODE=require('./DOCUMENT_TYPE_NODE');module.exports=function isDocumentType(obj){return isNodeType(obj,DOCUMENT_TYPE_NODE)}},{"./DOCUMENT_TYPE_NODE":86,"./internal/isNodeType":98}],104:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var ELEMENT_NODE=require('./ELEMENT_NODE');module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":87,"./internal/isNodeType":98}],105:[function(require,module,exports){'use strict';module.exports=function isNode(obj){return!!(obj&&obj.nodeType)}},{}],106:[function(require,module,exports){'use strict';var nodeListToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;module.exports=function isNodeList(obj){if(!obj){return!1}
if(typeof obj.length!=='number'){return!1}
if(typeof obj[0]==='object'&&(!obj[0]||!obj[0].nodeType)){return!1}
return nodeListToStringPattern.test(Object.prototype.toString.call(obj))}},{}],107:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var TEXT_NODE=require('./TEXT_NODE');module.exports=function isTextNode(obj){return isNodeType(obj,TEXT_NODE)}},{"./TEXT_NODE":88,"./internal/isNodeType":98}],108:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function remove(node){validate.childNode(node,!0,'remove');if(!node.parentNode){return node}
return node.parentNode.removeChild(node)}},{"./internal/validate":99}],109:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function replace(newNode,oldNode){validate.insertNode(newNode,!0,'insertFirstChild','newNode');validate.childNode(oldNode,!0,'insertFirstChild','oldNode');validate.hasParentNode(oldNode,'insertFirstChild','oldNode');return oldNode.parentNode.replaceChild(newNode,oldNode)}},{"./internal/validate":99}],110:[function(require,module,exports){if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]'}}},{}],111:[function(require,module,exports){if(!Array.prototype.filter){Array.prototype.filter=function filter(callback,thisObj){var arrayObject=Object(this);var len=arrayObject.length>>>0;var i;var results=[];if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
for(i=0;i<len;i+=1){if(i in arrayObject&&callback.call(thisObj,arrayObject[i],i,arrayObject)){results.push(arrayObject[i])}}
return results}}},{}],112:[function(require,module,exports){if(!Array.prototype.forEach){Array.prototype.forEach=function forEach(callback,thisObj){var arrayObject=Object(this);var i;var currentValue;if(typeof callback!=='function'){throw new TypeError('No function object passed to forEach.')}
var length=this.length
for(i=0;i<length;i+=1){currentValue=arrayObject[i];callback.call(thisObj,currentValue,i,arrayObject)}}}},{}],113:[function(require,module,exports){if(!Array.prototype.indexOf){Array.prototype.indexOf=function indexOf(searchElement,fromIndex){var startIndex=fromIndex||0;var currentIndex=0;if(startIndex<0){startIndex=this.length+fromIndex-1;if(startIndex<0){throw 'Wrapped past beginning of array while looking up a negative start index.'}}
for(currentIndex=0;currentIndex<this.length;currentIndex++){if(this[currentIndex]===searchElement){return currentIndex}}
return(-1)}}},{}],114:[function(require,module,exports){if(!Array.prototype.reduce){Array.prototype.reduce=function reduce(callback,initialValue){var arrayObj=Object(this);var len=arrayObj.length>>>0;var i=0;var result;if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
if(typeof initialValue==='undefined'){if(!len){throw new TypeError('Reduce of empty array with no initial value')}
result=arrayObj[0];i=1}else{result=initialValue}
while(i<len){if(i in arrayObj){result=callback.call(undefined,result,arrayObj[i],i,arrayObj);i+=1}}
return result}}},{}],115:[function(require,module,exports){(function(){'use strict';var _slice=Array.prototype.slice;try{_slice.call(document.documentElement)}catch(e){Array.prototype.slice=function(begin,end){end=(typeof end!=='undefined')?end:this.length;if(Object.prototype.toString.call(this)==='[object Array]'){return _slice.call(this,begin,end)}
var i,cloned=[],size,len=this.length;var start=begin||0;start=(start>=0)?start:len+start;var upTo=(end)?end:len;if(end<0){upTo=len+end}
size=upTo-start;if(size>0){cloned=new Array(size);if(this.charAt){for(i=0;i<size;i++){cloned[i]=this.charAt(start+i)}}else{for(i=0;i<size;i++){cloned[i]=this[start+i]}}}
return cloned}}}())},{}],116:[function(require,module,exports){if(document.createEvent){try{new window.CustomEvent('click')}catch(err){window.CustomEvent=(function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}
CustomEvent.prototype=window.Event.prototype;return CustomEvent}())}}},{}],117:[function(require,module,exports){if(!Function.prototype.bind){Function.prototype.bind=function(originalContext){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable')}
var applicableArgs=Array.prototype.slice.call(arguments,1);var functionToBind=this;var fnOriginalPrototype=function(){};var fnBound=function(){return functionToBind.apply((this instanceof fnOriginalPrototype&&originalContext)?this:originalContext,applicableArgs.concat(Array.prototype.slice.call(arguments)))}
fnOriginalPrototype.prototype=this.prototype;fnBound.prototype=new fnOriginalPrototype();return fnBound}}},{}],118:[function(require,module,exports){var ElementTracker=require('./ac-element-tracker/ElementTracker');module.exports=new ElementTracker();module.exports.ElementTracker=ElementTracker},{"./ac-element-tracker/ElementTracker":119}],119:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Function/prototype.bind');var ac_Array=require('@marcom/ac-array');var ac_dom_nodes=require('@marcom/ac-dom-nodes');var ac_dom_metrics={getDimensions:require('@marcom/ac-dom-metrics/getDimensions'),getPagePosition:require('@marcom/ac-dom-metrics/getPagePosition'),getScrollY:require('@marcom/ac-dom-metrics/getScrollY')};var ac_dom_events=require('@marcom/ac-dom-events');var ac_Object=require('@marcom/ac-object');var TrackedElement=require('./TrackedElement');var defaultOptions={autoStart:!1,useRenderedPosition:!1};function ElementTracker(elements,options){this.options=ac_Object.clone(defaultOptions);this.options=typeof options==='object'?ac_Object.extend(this.options,options):this.options;this._scrollY=this._getScrollY();this._windowHeight=this._getWindowHeight();this.tracking=!1;this.elements=[];if(elements&&(Array.isArray(elements)||ac_dom_nodes.isNodeList(elements)||ac_dom_nodes.isElement(elements))){this.addElements(elements)}
this.refreshAllElementStates=this.refreshAllElementStates.bind(this);this.refreshAllElementMetrics=this.refreshAllElementMetrics.bind(this);if(this.options.autoStart){this.start()}}
var proto=ElementTracker.prototype;proto.destroy=function(){var i,len;this.stop();for(i=0,len=this.elements.length;i<len;i++){this.elements[i].destroy()}
this.elements=null;this.options=null};proto._registerElements=function(elements){elements=[].concat(elements);elements.forEach(function(element){if(this._elementInDOM(element)){var trackedElement=new TrackedElement(element,this.options.useRenderedPosition);trackedElement.offsetTop=trackedElement.element.offsetTop;this.elements.push(trackedElement)}},this)};proto._registerTrackedElements=function(trackedElements){var objects=[].concat(trackedElements);objects.forEach(function(object){if(this._elementInDOM(object.element)){object.offsetTop=object.element.offsetTop;this.elements.push(object)}},this)};proto._elementInDOM=function(element){var assertion=!1;var body=document.getElementsByTagName('body')[0];if(ac_dom_nodes.isElement(element)&&body.contains(element)){assertion=!0}
return assertion};proto._elementPercentInView=function(trackedElement){return trackedElement.pixelsInView/trackedElement.height};proto._elementPixelsInView=function(trackedElement){var elementTop=trackedElement.top-this._scrollY;var elementBottom=trackedElement.bottom-this._scrollY;if(elementTop>this._windowHeight||elementBottom<0){return 0}
return Math.min(elementBottom,this._windowHeight)-Math.max(elementTop,0)};proto._ifInView=function(trackedElement,alreadyInView){if(!alreadyInView){trackedElement.trigger('enterview',trackedElement)}};proto._ifAlreadyInView=function(trackedElement){if(!trackedElement.inView){trackedElement.trigger('exitview',trackedElement)}};proto.addElements=function(collection,useRenderedPosition){if(typeof useRenderedPosition==='undefined'){useRenderedPosition=this.options.useRenderedPosition}
collection=ac_dom_nodes.isNodeList(collection)?ac_Array.toArray(collection):[].concat(collection);for(var i=0,len=collection.length;i<len;i++){this.addElement(collection[i],useRenderedPosition)}};proto.addElement=function(element,useRenderedPosition){var trackedElement=null;if(typeof useRenderedPosition==='undefined'){useRenderedPosition=this.options.useRenderedPosition}
if(ac_dom_nodes.isElement(element)){trackedElement=new TrackedElement(element,useRenderedPosition);this._registerTrackedElements(trackedElement);this.refreshElementMetrics(trackedElement);this.refreshElementState(trackedElement)}else{throw new TypeError('ElementTracker: '+element+' is not a valid DOM element')}
return trackedElement};proto.removeElement=function(element){var indexes=[];var filtered;this.elements.forEach(function(trackedElement,i){if(trackedElement===element||trackedElement.element===element){indexes.push(i)}});filtered=this.elements.filter(function(element,i){return indexes.indexOf(i)<0});this.elements=filtered};proto.start=function(){if(this.tracking===!1){this.tracking=!0;ac_dom_events.addEventListener(window,'resize',this.refreshAllElementMetrics);ac_dom_events.addEventListener(window,'orientationchange',this.refreshAllElementMetrics);ac_dom_events.addEventListener(window,'scroll',this.refreshAllElementStates);this.refreshAllElementMetrics()}};proto.stop=function(){if(this.tracking===!0){this.tracking=!1;ac_dom_events.removeEventListener(window,'resize',this.refreshAllElementMetrics);ac_dom_events.removeEventListener(window,'orientationchange',this.refreshAllElementMetrics);ac_dom_events.removeEventListener(window,'scroll',this.refreshAllElementStates)}};proto.refreshAllElementMetrics=function(currentScrollY,windowHeight){if(typeof currentScrollY!=='number'){currentScrollY=this._getScrollY()}
if(typeof windowHeight!=='number'){windowHeight=this._getWindowHeight()}
this._scrollY=currentScrollY;this._windowHeight=windowHeight;this.elements.forEach(this.refreshElementMetrics,this)};proto.refreshElementMetrics=function(trackedElement){var dimensions=ac_dom_metrics.getDimensions(trackedElement.element,trackedElement.useRenderedPosition);var position=ac_dom_metrics.getPagePosition(trackedElement.element,trackedElement.useRenderedPosition);trackedElement=ac_Object.extend(trackedElement,dimensions,position);return this.refreshElementState(trackedElement)};proto.refreshAllElementStates=function(currentScrollY){if(typeof currentScrollY!=='number'){currentScrollY=this._getScrollY()}
this._scrollY=currentScrollY;this.elements.forEach(this.refreshElementState,this)};proto.refreshElementState=function(trackedElement){var alreadyInView=trackedElement.inView;trackedElement.pixelsInView=this._elementPixelsInView(trackedElement);trackedElement.percentInView=this._elementPercentInView(trackedElement);trackedElement.inView=trackedElement.pixelsInView>0;if(trackedElement.inView){this._ifInView(trackedElement,alreadyInView)}
if(alreadyInView){this._ifAlreadyInView(trackedElement)}
return trackedElement};proto._getWindowHeight=function(){return document.documentElement.clientHeight||window.innerHeight};proto._getScrollY=function(){return ac_dom_metrics.getScrollY()};module.exports=ElementTracker},{"./TrackedElement":120,"@marcom/ac-array":53,"@marcom/ac-dom-events":63,"@marcom/ac-dom-metrics/getDimensions":78,"@marcom/ac-dom-metrics/getPagePosition":79,"@marcom/ac-dom-metrics/getScrollY":81,"@marcom/ac-dom-nodes":89,"@marcom/ac-object":130,"@marcom/ac-polyfills/Function/prototype.bind":117}],120:[function(require,module,exports){'use strict';var objCreate=require('@marcom/ac-object').create;var ac_dom_nodes=require('@marcom/ac-dom-nodes');var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var superclass=EventEmitterMicro.prototype;function TrackedElement(element,useRenderedPosition){if(!ac_dom_nodes.isElement(element)){throw new TypeError('TrackedElement: '+element+' is not a valid DOM element')}
EventEmitterMicro.call(this);this.element=element;this.inView=!1;this.percentInView=0;this.pixelsInView=0;this.offsetTop=0;this.top=0;this.right=0;this.bottom=0;this.left=0;this.width=0;this.height=0;this.useRenderedPosition=useRenderedPosition||!1}
var proto=TrackedElement.prototype=objCreate(superclass);proto.destroy=function(){this.element=null;superclass.destroy.call(this)};module.exports=TrackedElement},{"@marcom/ac-dom-nodes":89,"@marcom/ac-event-emitter-micro":121,"@marcom/ac-object":130}],121:[function(require,module,exports){'use strict';module.exports={EventEmitterMicro:require('./ac-event-emitter-micro/EventEmitterMicro')}},{"./ac-event-emitter-micro/EventEmitterMicro":122}],122:[function(require,module,exports){'use strict';function EventEmitterMicro(){this._events={}}
var proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){this._events[eventName]=this._events[eventName]||[];this._events[eventName].unshift(callback)};proto.once=function(eventName,callback){var that=this;function fn(data){that.off(eventName,fn);if(data!==undefined)callback(data);else callback()}
this.on(eventName,fn)};proto.off=function(eventName,callback){if(!this.has(eventName))return;var index=this._events[eventName].indexOf(callback);if(index===-1)return;this._events[eventName].splice(index,1)};proto.trigger=function(eventName,data){if(!this.has(eventName))return;for(var i=this._events[eventName].length-1;i>=0;i--){if(data!==undefined)this._events[eventName][i](data);else this._events[eventName][i]()}};proto.has=function(eventName){if(eventName in this._events===!1||this._events[eventName].length===0){return!1}
return!0};proto.destroy=function(){for(var eventName in this._events){this._events[eventName]=null}
this._events=null};module.exports=EventEmitterMicro},{}],123:[function(require,module,exports){arguments[4][110][0].apply(exports,arguments)},{"dup":110}],124:[function(require,module,exports){arguments[4][112][0].apply(exports,arguments)},{"dup":112}],125:[function(require,module,exports){'use strict';var qs=require('qs');module.exports=function joinSearchParams(obj,questionMark){var str=qs.stringify(obj,{strictNullHandling:!0});if(str&&questionMark!==!1){str='?'+str}
return str}},{"qs":126}],126:[function(require,module,exports){var Stringify=require('./stringify');var Parse=require('./parse');var internals={};module.exports={stringify:Stringify,parse:Parse}},{"./parse":127,"./stringify":128}],127:[function(require,module,exports){var Utils=require('./utils');var internals={delimiter:'&',depth:5,arrayLimit:20,parameterLimit:1000,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1};internals.parseValues=function(str,options){var obj={};var parts=str.split(options.delimiter,options.parameterLimit===Infinity?undefined:options.parameterLimit);for(var i=0,il=parts.length;i<il;++i){var part=parts[i];var pos=part.indexOf(']=')===-1?part.indexOf('='):part.indexOf(']=')+1;if(pos===-1){obj[Utils.decode(part)]='';if(options.strictNullHandling){obj[Utils.decode(part)]=null}}
else{var key=Utils.decode(part.slice(0,pos));var val=Utils.decode(part.slice(pos+1));if(!Object.prototype.hasOwnProperty.call(obj,key)){obj[key]=val}
else{obj[key]=[].concat(obj[key]).concat(val)}}}
return obj};internals.parseObject=function(chain,val,options){if(!chain.length){return val}
var root=chain.shift();var obj;if(root==='[]'){obj=[];obj=obj.concat(internals.parseObject(chain,val,options))}
else{obj=options.plainObjects?Object.create(null):{};var cleanRoot=root[0]==='['&&root[root.length-1]===']'?root.slice(1,root.length-1):root;var index=parseInt(cleanRoot,10);var indexString=''+index;if(!isNaN(index)&&root!==cleanRoot&&indexString===cleanRoot&&index>=0&&(options.parseArrays&&index<=options.arrayLimit)){obj=[];obj[index]=internals.parseObject(chain,val,options)}
else{obj[cleanRoot]=internals.parseObject(chain,val,options)}}
return obj};internals.parseKeys=function(key,val,options){if(!key){return}
if(options.allowDots){key=key.replace(/\.([^\.\[]+)/g,'[$1]')}
var parent=/^([^\[\]]*)/;var child=/(\[[^\[\]]*\])/g;var segment=parent.exec(key);var keys=[];if(segment[1]){if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1])){if(!options.allowPrototypes){return}}
keys.push(segment[1])}
var i=0;while((segment=child.exec(key))!==null&&i<options.depth){++i;if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,''))){if(!options.allowPrototypes){continue}}
keys.push(segment[1])}
if(segment){keys.push('['+key.slice(segment.index)+']')}
return internals.parseObject(keys,val,options)};module.exports=function(str,options){options=options||{};options.delimiter=typeof options.delimiter==='string'||Utils.isRegExp(options.delimiter)?options.delimiter:internals.delimiter;options.depth=typeof options.depth==='number'?options.depth:internals.depth;options.arrayLimit=typeof options.arrayLimit==='number'?options.arrayLimit:internals.arrayLimit;options.parseArrays=options.parseArrays!==!1;options.allowDots=options.allowDots!==!1;options.plainObjects=typeof options.plainObjects==='boolean'?options.plainObjects:internals.plainObjects;options.allowPrototypes=typeof options.allowPrototypes==='boolean'?options.allowPrototypes:internals.allowPrototypes;options.parameterLimit=typeof options.parameterLimit==='number'?options.parameterLimit:internals.parameterLimit;options.strictNullHandling=typeof options.strictNullHandling==='boolean'?options.strictNullHandling:internals.strictNullHandling;if(str===''||str===null||typeof str==='undefined'){return options.plainObjects?Object.create(null):{}}
var tempObj=typeof str==='string'?internals.parseValues(str,options):str;var obj=options.plainObjects?Object.create(null):{};var keys=Object.keys(tempObj);for(var i=0,il=keys.length;i<il;++i){var key=keys[i];var newObj=internals.parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj,options)}
return Utils.compact(obj)}},{"./utils":129}],128:[function(require,module,exports){var Utils=require('./utils');var internals={delimiter:'&',arrayPrefixGenerators:{brackets:function(prefix,key){return prefix+'[]'},indices:function(prefix,key){return prefix+'['+key+']'},repeat:function(prefix,key){return prefix}},strictNullHandling:!1};internals.stringify=function(obj,prefix,generateArrayPrefix,strictNullHandling,filter){if(typeof filter==='function'){obj=filter(prefix,obj)}
else if(Utils.isBuffer(obj)){obj=obj.toString()}
else if(obj instanceof Date){obj=obj.toISOString()}
else if(obj===null){if(strictNullHandling){return Utils.encode(prefix)}
obj=''}
if(typeof obj==='string'||typeof obj==='number'||typeof obj==='boolean'){return[Utils.encode(prefix)+'='+Utils.encode(obj)]}
var values=[];if(typeof obj==='undefined'){return values}
var objKeys=Array.isArray(filter)?filter:Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];if(Array.isArray(obj)){values=values.concat(internals.stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,filter))}
else{values=values.concat(internals.stringify(obj[key],prefix+'['+key+']',generateArrayPrefix,strictNullHandling,filter))}}
return values};module.exports=function(obj,options){options=options||{};var delimiter=typeof options.delimiter==='undefined'?internals.delimiter:options.delimiter;var strictNullHandling=typeof options.strictNullHandling==='boolean'?options.strictNullHandling:internals.strictNullHandling;var objKeys;var filter;if(typeof options.filter==='function'){filter=options.filter;obj=filter('',obj)}
else if(Array.isArray(options.filter)){objKeys=filter=options.filter}
var keys=[];if(typeof obj!=='object'||obj===null){return''}
var arrayFormat;if(options.arrayFormat in internals.arrayPrefixGenerators){arrayFormat=options.arrayFormat}
else if('indices' in options){arrayFormat=options.indices?'indices':'repeat'}
else{arrayFormat='indices'}
var generateArrayPrefix=internals.arrayPrefixGenerators[arrayFormat];if(!objKeys){objKeys=Object.keys(obj)}
for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];keys=keys.concat(internals.stringify(obj[key],key,generateArrayPrefix,strictNullHandling,filter))}
return keys.join(delimiter)}},{"./utils":129}],129:[function(require,module,exports){var internals={};internals.hexTable=new Array(256);for(var h=0;h<256;++h){internals.hexTable[h]='%'+((h<16?'0':'')+h.toString(16)).toUpperCase()}
exports.arrayToObject=function(source,options){var obj=options.plainObjects?Object.create(null):{};for(var i=0,il=source.length;i<il;++i){if(typeof source[i]!=='undefined'){obj[i]=source[i]}}
return obj};exports.merge=function(target,source,options){if(!source){return target}
if(typeof source!=='object'){if(Array.isArray(target)){target.push(source)}
else if(typeof target==='object'){target[source]=!0}
else{target=[target,source]}
return target}
if(typeof target!=='object'){target=[target].concat(source);return target}
if(Array.isArray(target)&&!Array.isArray(source)){target=exports.arrayToObject(target,options)}
var keys=Object.keys(source);for(var k=0,kl=keys.length;k<kl;++k){var key=keys[k];var value=source[key];if(!Object.prototype.hasOwnProperty.call(target,key)){target[key]=value}
else{target[key]=exports.merge(target[key],value,options)}}
return target};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g,' '))}catch(e){return str}};exports.encode=function(str){if(str.length===0){return str}
if(typeof str!=='string'){str=''+str}
var out='';for(var i=0,il=str.length;i<il;++i){var c=str.charCodeAt(i);if(c===0x2D||c===0x2E||c===0x5F||c===0x7E||(c>=0x30&&c<=0x39)||(c>=0x41&&c<=0x5A)||(c>=0x61&&c<=0x7A)){out+=str[i];continue}
if(c<0x80){out+=internals.hexTable[c];continue}
if(c<0x800){out+=internals.hexTable[0xC0|(c>>6)]+internals.hexTable[0x80|(c&0x3F)];continue}
if(c<0xD800||c>=0xE000){out+=internals.hexTable[0xE0|(c>>12)]+internals.hexTable[0x80|((c>>6)&0x3F)]+internals.hexTable[0x80|(c&0x3F)];continue}
++i;c=0x10000+(((c&0x3FF)<<10)|(str.charCodeAt(i)&0x3FF));out+=internals.hexTable[0xF0|(c>>18)]+internals.hexTable[0x80|((c>>12)&0x3F)]+internals.hexTable[0x80|((c>>6)&0x3F)]+internals.hexTable[0x80|(c&0x3F)]}
return out};exports.compact=function(obj,refs){if(typeof obj!=='object'||obj===null){return obj}
refs=refs||[];var lookup=refs.indexOf(obj);if(lookup!==-1){return refs[lookup]}
refs.push(obj);if(Array.isArray(obj)){var compacted=[];for(var i=0,il=obj.length;i<il;++i){if(typeof obj[i]!=='undefined'){compacted.push(obj[i])}}
return compacted}
var keys=Object.keys(obj);for(i=0,il=keys.length;i<il;++i){var key=keys[i];obj[key]=exports.compact(obj[key],refs)}
return obj};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==='[object RegExp]'};exports.isBuffer=function(obj){if(obj===null||typeof obj==='undefined'){return!1}
return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],130:[function(require,module,exports){'use strict';module.exports={clone:require('./clone'),create:require('./create'),defaults:require('./defaults'),extend:require('./extend'),getPrototypeOf:require('./getPrototypeOf'),isDate:require('./isDate'),isEmpty:require('./isEmpty'),isRegExp:require('./isRegExp'),toQueryParameters:require('./toQueryParameters')}},{"./clone":131,"./create":132,"./defaults":133,"./extend":134,"./getPrototypeOf":135,"./isDate":136,"./isEmpty":137,"./isRegExp":138,"./toQueryParameters":139}],131:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/isArray');var extend=require('./extend');var hasOwnProp=Object.prototype.hasOwnProperty;var deepClone=function(dest,source){var prop;for(prop in source){if(hasOwnProp.call(source,prop)){if(source[prop]===null){dest[prop]=null}
else if(typeof source[prop]==='object'){dest[prop]=Array.isArray(source[prop])?[]:{};deepClone(dest[prop],source[prop])}
else{dest[prop]=source[prop]}}}
return dest};module.exports=function clone(object,deep){if(deep){return deepClone({},object)}
return extend({},object)}},{"./extend":134,"@marcom/ac-polyfills/Array/isArray":123}],132:[function(require,module,exports){'use strict';var F=function(){};module.exports=function create(proto){if(arguments.length>1){throw new Error('Second argument not supported')}
if(proto===null||typeof proto!=='object'){throw new TypeError('Object prototype may only be an Object.')}
if(typeof Object.create==='function'){return Object.create(proto)}else{F.prototype=proto;return new F()}}},{}],133:[function(require,module,exports){'use strict';var extend=require('./extend');module.exports=function defaults(defaultsObj,options){if(typeof defaultsObj!=='object'){throw new TypeError('defaults: must provide a defaults object')}
options=options||{};if(typeof options!=='object'){throw new TypeError('defaults: options must be a typeof object')}
return extend({},defaultsObj,options)}},{"./extend":134}],134:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.forEach');var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args;var dest;if(arguments.length<2){args=[{},arguments[0]]}else{args=[].slice.call(arguments)}
dest=args.shift();args.forEach(function(source){if(source!=null){for(var property in source){if(hasOwnProp.call(source,property)){dest[property]=source[property]}}}});return dest}},{"@marcom/ac-polyfills/Array/prototype.forEach":124}],135:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function getPrototypeOf(obj){if(Object.getPrototypeOf){return Object.getPrototypeOf(obj)}
else{if(typeof obj!=='object'){throw new Error('Requested prototype of a value that is not an object.')}
else if(typeof this.__proto__==='object'){return obj.__proto__}
else{var constructor=obj.constructor;var oldConstructor;if(hasOwnProp.call(obj,'constructor')){oldConstructor=constructor;if(!(delete obj.constructor)){return null}
constructor=obj.constructor;obj.constructor=oldConstructor}
return constructor?constructor.prototype:null}}}},{}],136:[function(require,module,exports){'use strict';module.exports=function isDate(date){return Object.prototype.toString.call(date)==='[object Date]'}},{}],137:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function isEmpty(object){var prop;if(typeof object!=='object'){throw new TypeError('ac-base.Object.isEmpty : Invalid parameter - expected object')}
for(prop in object){if(hasOwnProp.call(object,prop)){return!1}}
return!0}},{}],138:[function(require,module,exports){'use strict';module.exports=function isRegExp(obj){return window.RegExp?obj instanceof RegExp:!1}},{}],139:[function(require,module,exports){'use strict';var joinSearchParams=require('@marcom/ac-url/joinSearchParams');module.exports=function toQueryParameters(object){if(typeof object!=='object'){throw new TypeError('toQueryParameters error: argument is not an object')}
return joinSearchParams(object,!1)}},{"@marcom/ac-url/joinSearchParams":125}],140:[function(require,module,exports){var ElementEngagement=require('./ac-element-engagement/ElementEngagement');module.exports=new ElementEngagement();module.exports.ElementEngagement=ElementEngagement},{"./ac-element-engagement/ElementEngagement":141}],141:[function(require,module,exports){'use strict';var proto;var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var ac_Object={create:require('@marcom/ac-object/create'),defaults:require('@marcom/ac-object/defaults'),extend:require('@marcom/ac-object/extend')};var Super=require('@marcom/ac-element-tracker').ElementTracker;var trackedElementDefaults={timeToEngage:500,inViewThreshold:0.75,stopOnEngaged:!0};var extendedTrackedElementProps={thresholdEnterTime:0,thresholdExitTime:0,inThreshold:!1,engaged:!1,tracking:!0};var ElementEngagement=function(options){Super.call(this,null,options);EventEmitterMicro.call(this);this._thresholdEnter=this._thresholdEnter.bind(this);this._thresholdExit=this._thresholdExit.bind(this);this._enterView=this._enterView.bind(this);this._exitView=this._exitView.bind(this)};proto=ElementEngagement.prototype=ac_Object.create(Super.prototype);proto=ac_Object.extend(proto,EventEmitterMicro.prototype);proto._decorateTrackedElement=function(trackedElement,options){var extendedDefaults;extendedDefaults=ac_Object.defaults(trackedElementDefaults,options||{});ac_Object.extend(trackedElement,extendedDefaults);ac_Object.extend(trackedElement,extendedTrackedElementProps)};proto._attachElementListeners=function(trackedElement){trackedElement.on('thresholdenter',this._thresholdEnter,this);trackedElement.on('thresholdexit',this._thresholdExit,this);trackedElement.on('enterview',this._enterView,this);trackedElement.on('exitview',this._exitView,this)};proto._removeElementListeners=function(trackedElement){trackedElement.off('thresholdenter',this._thresholdEnter);trackedElement.off('thresholdexit',this._thresholdExit);trackedElement.off('enterview',this._enterView);trackedElement.off('exitview',this._exitView)};proto._attachAllElementListeners=function(){this.elements.forEach(function(trackedElement){if(!trackedElement.stopOnEngaged){this._attachElementListeners(trackedElement)}else if(!trackedElement.engaged){this._attachElementListeners(trackedElement)}},this)};proto._removeAllElementListeners=function(){this.elements.forEach(function(trackedElement){this._removeElementListeners(trackedElement)},this)};proto._elementInViewPastThreshold=function(trackedElement){var winHeight=document.documentElement.clientHeight||window.innerHeight;var isIt=!1;if(trackedElement.pixelsInView===winHeight){isIt=!0}else{isIt=(trackedElement.percentInView>trackedElement.inViewThreshold)}
return isIt};proto._ifInView=function(trackedElement,alreadyInView){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifInView.apply(this,arguments);if(!alreadyInThreshold&&this._elementInViewPastThreshold(trackedElement)){trackedElement.inThreshold=!0;trackedElement.trigger('thresholdenter',trackedElement);if(typeof trackedElement.timeToEngage==='number'&&trackedElement.timeToEngage>=0){trackedElement.engagedTimeout=window.setTimeout(this._engaged.bind(this,trackedElement),trackedElement.timeToEngage)}}};proto._ifAlreadyInView=function(trackedElement){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifAlreadyInView.apply(this,arguments);if(alreadyInThreshold&&!this._elementInViewPastThreshold(trackedElement)){trackedElement.inThreshold=!1;trackedElement.trigger('thresholdexit',trackedElement);if(trackedElement.engagedTimeout){window.clearTimeout(trackedElement.engagedTimeout);trackedElement.engagedTimeout=null}}};proto._engaged=function(trackedElement){trackedElement.engagedTimeout=null;this._elementEngaged(trackedElement);trackedElement.trigger('engaged',trackedElement);this.trigger('engaged',trackedElement)};proto._thresholdEnter=function(trackedElement){trackedElement.thresholdEnterTime=Date.now();trackedElement.thresholdExitTime=0;this.trigger('thresholdenter',trackedElement)};proto._thresholdExit=function(trackedElement){trackedElement.thresholdExitTime=Date.now();this.trigger('thresholdexit',trackedElement)};proto._enterView=function(trackedElement){this.trigger('enterview',trackedElement)};proto._exitView=function(trackedElement){this.trigger('exitview',trackedElement)};proto._elementEngaged=function(trackedElement){trackedElement.engaged=!0;if(trackedElement.stopOnEngaged){this.stop(trackedElement)}};proto.stop=function(trackedElement){if(this.tracking&&!trackedElement){this._removeAllElementListeners();Super.prototype.stop.call(this)}
if(trackedElement&&trackedElement.tracking){trackedElement.tracking=!1;this._removeElementListeners(trackedElement)}};proto.start=function(trackedElement){if(!trackedElement){this._attachAllElementListeners()}
if(trackedElement&&!trackedElement.tracking){if(!trackedElement.stopOnEngaged){trackedElement.tracking=!0;this._attachElementListeners(trackedElement)}else if(!trackedElement.engaged){trackedElement.tracking=!0;this._attachElementListeners(trackedElement)}}
if(!this.tracking){Super.prototype.start.call(this)}else{this.refreshAllElementMetrics();this.refreshAllElementStates()}};proto.addElement=function(element,options){options=options||{};var trackedElement=Super.prototype.addElement.call(this,element,options.useRenderedPosition);this._decorateTrackedElement(trackedElement,options);return trackedElement};proto.addElements=function(collection,options){[].forEach.call(collection,function(element){this.addElement(element,options)},this)};module.exports=ElementEngagement},{"@marcom/ac-element-tracker":118,"@marcom/ac-event-emitter-micro":121,"@marcom/ac-object/create":132,"@marcom/ac-object/defaults":133,"@marcom/ac-object/extend":134}],142:[function(require,module,exports){arguments[4][121][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":143,"dup":121}],143:[function(require,module,exports){arguments[4][122][0].apply(exports,arguments)},{"dup":122}],144:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"./shared/getStyleTestElement":146,"./shared/prefixHelper":147,"./shared/stylePropertyCache":148,"./utils/toCSS":150,"./utils/toDOM":151,"dup":5}],145:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"./getStyleProperty":144,"./shared/prefixHelper":147,"./shared/stylePropertyCache":148,"./shared/styleValueAvailable":149,"dup":6}],146:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{"dup":7}],147:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],148:[function(require,module,exports){arguments[4][9][0].apply(exports,arguments)},{"dup":9}],149:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{"./getStyleTestElement":146,"./stylePropertyCache":148,"dup":10}],150:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{"dup":12}],151:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{"dup":13}],152:[function(require,module,exports){'use strict';var getStyleValue=require('@marcom/ac-prefixer/getStyleValue');var getStyleProperty=require('@marcom/ac-prefixer/getStyleProperty');var memoize=require('@marcom/ac-function/memoize');function cssPropertyAvailable(property,value){if(typeof value!=='undefined'){return!!getStyleValue(property,value)}else{return!!getStyleProperty(property)}}
module.exports=memoize(cssPropertyAvailable);module.exports.original=cssPropertyAvailable},{"@marcom/ac-function/memoize":162,"@marcom/ac-prefixer/getStyleProperty":144,"@marcom/ac-prefixer/getStyleValue":145}],153:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"dup":69}],154:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"dup":75}],155:[function(require,module,exports){arguments[4][133][0].apply(exports,arguments)},{"./extend":156,"dup":133}],156:[function(require,module,exports){arguments[4][134][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":157,"dup":134}],157:[function(require,module,exports){arguments[4][112][0].apply(exports,arguments)},{"dup":112}],158:[function(require,module,exports){arguments[4][117][0].apply(exports,arguments)},{"dup":117}],159:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Function/prototype.bind');var defaults=require('@marcom/ac-object/defaults');var ac_querySelector=require('@marcom/ac-dom-traversal/querySelector');var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var nextSibling=require('@marcom/ac-dom-traversal/nextSibling');var CheckboxMenu=require('./internal/CheckboxMenu');var DEFAULT_OPTIONS={className:'footer'};function Footer(el,options){options=defaults(DEFAULT_OPTIONS,options||{});this.el=el;this._selectors={wrapper:'.'+options.className,directory:options.directorySelector||'.'+options.className+'-directory',mini:options.miniSelector||'.'+options.className+'-mini'};this._initializeDirectory();this._initializeLangLink()}
var proto=Footer.prototype;proto._initializeDirectory=function(){this._directory=ac_querySelector(this._selectors.directory,this.el);if(!this._directory){return}
var checkboxes=ac_querySelectorAll(this._selectors.directory+'-column-section-state',this.directory);var section;var anchorOpen;var anchorClose;for(var i=0;i<checkboxes.length;i++){section=nextSibling(checkboxes[i]);anchorOpen=ac_querySelector(this._selectors.directory+'-column-section-anchor-open',section);anchorClose=ac_querySelector(this._selectors.directory+'-column-section-anchor-close',section);CheckboxMenu.create(checkboxes[i],anchorOpen,anchorClose)}};proto._initializeLangLink=function(){var current;var find;var replace;this._langLink=ac_querySelector(this._selectors.mini+'-locale-lang',this.el);if(!this._langLink){return}
current=window.location.pathname;find=this._langLink.getAttribute('data-locale-current');replace=this._langLink.pathname;if(current.indexOf(find)!==-1){current=current.replace(find,replace);if(current.charAt(0)!=='https://www.apple.com/'){current='/'+current}
this._langLink.href=current}};module.exports=Footer},{"./internal/CheckboxMenu":161,"@marcom/ac-dom-traversal/nextSibling":43,"@marcom/ac-dom-traversal/querySelector":47,"@marcom/ac-dom-traversal/querySelectorAll":48,"@marcom/ac-object/defaults":155,"@marcom/ac-polyfills/Function/prototype.bind":158}],160:[function(require,module,exports){'use strict';var Footer=require('./Footer');var el=document.getElementById('footer');module.exports=new Footer(el)},{"./Footer":159}],161:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Function/prototype.bind');var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var preventDefault=require('@marcom/ac-dom-events/preventDefault');function CheckboxMenu(el,anchorOpen,anchorClose){this.el=el;this.anchorOpen=anchorOpen;this.anchorClose=anchorClose;this._lastOpen=this.el.checked;ac_addEventListener(this.el,'change',this.update.bind(this));ac_addEventListener(this.anchorOpen,'click',this._anchorOpenClick.bind(this));ac_addEventListener(this.anchorClose,'click',this._anchorCloseClick.bind(this));if(window.location.hash==='#'+el.id){window.location.hash=''}}
CheckboxMenu.create=function(el,anchorOpen,anchorClose){return new CheckboxMenu(el,anchorOpen,anchorClose)};var proto=CheckboxMenu.prototype;proto.update=function(){var open=this.isOpen();if(open!==this._lastOpen){this._lastOpen=open}};proto.isOpen=function(){return this.el.checked};proto.toggle=function(){if(this.isOpen()){this.close()}else{this.open()}};proto.open=function(){if(!this.el.checked){this.el.checked=!0;this.update()}};proto.close=function(){if(this.el.checked){this.el.checked=!1;this.update()}};proto._anchorOpenClick=function(evt){preventDefault(evt);this.open();this.anchorClose.focus()};proto._anchorCloseClick=function(evt){preventDefault(evt);this.close();this.anchorOpen.focus()};module.exports=CheckboxMenu},{"@marcom/ac-dom-events/preventDefault":153,"@marcom/ac-dom-events/utils/addEventListener":154,"@marcom/ac-polyfills/Function/prototype.bind":158}],162:[function(require,module,exports){'use strict';var defaultHashFunction=function(){var key='';var i;for(i=0;i<arguments.length;i++){if(i>0){key+=','}
key+=arguments[i]}
return key};module.exports=function memoize(func,hashFunction){hashFunction=hashFunction||defaultHashFunction;var memoized=function(){var args=arguments;var key=hashFunction.apply(this,args);if(!(key in memoized.cache)){memoized.cache[key]=func.apply(this,args)}
return memoized.cache[key]};memoized.cache={};return memoized}},{}],163:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');require('@marcom/ac-polyfills/Element/prototype.classList');var classNameAdd=require('./className/add');module.exports=function add(){var tokens=Array.prototype.slice.call(arguments);var el=tokens.shift(tokens);var i;if(el.classList&&el.classList.add){el.classList.add.apply(el.classList,tokens);return}
for(i=0;i<tokens.length;i++){classNameAdd(el,tokens[i])}}},{"./className/add":165,"@marcom/ac-polyfills/Array/prototype.slice":250,"@marcom/ac-polyfills/Element/prototype.classList":253}],164:[function(require,module,exports){'use strict';module.exports={add:require('./className/add'),contains:require('./className/contains'),remove:require('./className/remove')}},{"./className/add":165,"./className/contains":166,"./className/remove":168}],165:[function(require,module,exports){'use strict';var classNameContains=require('./contains');module.exports=function add(el,token){if(!classNameContains(el,token)){el.className+=' '+token}}},{"./contains":166}],166:[function(require,module,exports){'use strict';var getTokenRegExp=require('./getTokenRegExp');module.exports=function classNameAdd(el,token){return getTokenRegExp(token).test(el.className)}},{"./getTokenRegExp":167}],167:[function(require,module,exports){'use strict';module.exports=function getTokenRegExp(token){return new RegExp('(\\s|^)'+token+'(\\s|$)')}},{}],168:[function(require,module,exports){'use strict';var classNameContains=require('./contains');var getTokenRegExp=require('./getTokenRegExp');module.exports=function remove(el,token){if(classNameContains(el,token)){el.className=el.className.replace(getTokenRegExp(token),'$1').trim()}}},{"./contains":166,"./getTokenRegExp":167}],169:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Element/prototype.classList');var classNameContains=require('./className/contains');module.exports=function contains(el,token){if(el.classList&&el.classList.contains){return el.classList.contains(token)}
return classNameContains(el,token)}},{"./className/contains":166,"@marcom/ac-polyfills/Element/prototype.classList":253}],170:[function(require,module,exports){'use strict';module.exports={add:require('./add'),contains:require('./contains'),remove:require('./remove'),toggle:require('./toggle')}},{"./add":163,"./contains":169,"./remove":171,"./toggle":172}],171:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');require('@marcom/ac-polyfills/Element/prototype.classList');var classNameRemove=require('./className/remove');module.exports=function remove(){var tokens=Array.prototype.slice.call(arguments);var el=tokens.shift(tokens);var i;if(el.classList&&el.classList.remove){el.classList.remove.apply(el.classList,tokens);return}
for(i=0;i<tokens.length;i++){classNameRemove(el,tokens[i])}}},{"./className/remove":168,"@marcom/ac-polyfills/Array/prototype.slice":250,"@marcom/ac-polyfills/Element/prototype.classList":253}],172:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Element/prototype.classList');var className=require('./className');module.exports=function toggle(el,token,force){var hasForce=(typeof force!=='undefined');var addToken;if(el.classList&&el.classList.toggle){if(hasForce){return el.classList.toggle(token,force)}
return el.classList.toggle(token)}
if(hasForce){addToken=!!force}else{addToken=!className.contains(el,token)}
if(addToken){className.add(el,token)}else{className.remove(el,token)}
return addToken}},{"./className":164,"@marcom/ac-polyfills/Element/prototype.classList":253}],173:[function(require,module,exports){arguments[4][61][0].apply(exports,arguments)},{"./shared/getEventType":183,"./utils/addEventListener":187,"dup":61}],174:[function(require,module,exports){arguments[4][62][0].apply(exports,arguments)},{"./shared/getEventType":183,"./utils/dispatchEvent":188,"dup":62}],175:[function(require,module,exports){arguments[4][63][0].apply(exports,arguments)},{"./addEventListener":173,"./dispatchEvent":174,"./preventDefault":181,"./removeEventListener":182,"./stop":184,"./stopPropagation":185,"./target":186,"dup":63}],176:[function(require,module,exports){arguments[4][64][0].apply(exports,arguments)},{"./shared/camelCasedEventTypes":177,"./shared/prefixHelper":178,"./shared/windowFallbackEventTypes":179,"./utils/eventTypeAvailable":180,"dup":64}],177:[function(require,module,exports){arguments[4][65][0].apply(exports,arguments)},{"dup":65}],178:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],179:[function(require,module,exports){arguments[4][67][0].apply(exports,arguments)},{"dup":67}],180:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{"dup":68}],181:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"dup":69}],182:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{"./shared/getEventType":183,"./utils/removeEventListener":189,"dup":70}],183:[function(require,module,exports){arguments[4][71][0].apply(exports,arguments)},{"@marcom/ac-prefixer/getEventType":176,"dup":71}],184:[function(require,module,exports){arguments[4][72][0].apply(exports,arguments)},{"./preventDefault":181,"./stopPropagation":185,"dup":72}],185:[function(require,module,exports){arguments[4][73][0].apply(exports,arguments)},{"dup":73}],186:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{"dup":74}],187:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"dup":75}],188:[function(require,module,exports){arguments[4][76][0].apply(exports,arguments)},{"@marcom/ac-polyfills/CustomEvent":252,"dup":76}],189:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"dup":77}],190:[function(require,module,exports){arguments[4][1][0].apply(exports,arguments)},{"./utils/getBoundingClientRect":200,"dup":1}],191:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"./utils/getBoundingClientRect":200,"dup":2}],192:[function(require,module,exports){arguments[4][79][0].apply(exports,arguments)},{"./getDimensions":191,"./getScrollX":196,"./getScrollY":197,"./utils/getBoundingClientRect":200,"dup":79}],193:[function(require,module,exports){'use strict';var getDimensions=require('./getDimensions');var getPixelsInViewport=require('./getPixelsInViewport');module.exports=function getPercentInViewport(el,rendered){var inViewport=getPixelsInViewport(el,rendered);var height=getDimensions(el,rendered).height;return(inViewport/height)}},{"./getDimensions":191,"./getPixelsInViewport":194}],194:[function(require,module,exports){'use strict';var getViewportPosition=require('./getViewportPosition');module.exports=function getPixelsInViewport(el,rendered){var vh=document.documentElement.clientHeight;var position=getViewportPosition(el,rendered);var pixels;if(position.top>=vh||position.bottom<=0){return 0}
pixels=(position.bottom-position.top);if(position.top<0){pixels+=position.top}
if(position.bottom>vh){pixels-=position.bottom-vh}
return pixels}},{"./getViewportPosition":198}],195:[function(require,module,exports){'use strict';var getDimensions=require('./getDimensions');var getBoundingClientRect=require('./utils/getBoundingClientRect');module.exports=function getPosition(el,rendered){var rect;var parentRect;var dimensions;if(rendered){rect=getBoundingClientRect(el);if(el.offsetParent){parentRect=getBoundingClientRect(el.offsetParent);rect.top-=parentRect.top;rect.left-=parentRect.left}}else{dimensions=getDimensions(el,rendered);rect={top:el.offsetTop,left:el.offsetLeft,width:dimensions.width,height:dimensions.height}}
return{top:rect.top,right:rect.left+rect.width,bottom:rect.top+rect.height,left:rect.left}}},{"./getDimensions":191,"./utils/getBoundingClientRect":200}],196:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{"dup":80}],197:[function(require,module,exports){arguments[4][81][0].apply(exports,arguments)},{"dup":81}],198:[function(require,module,exports){'use strict';var getPagePosition=require('./getPagePosition');var getBoundingClientRect=require('./utils/getBoundingClientRect');var getScrollX=require('./getScrollX');var getScrollY=require('./getScrollY');module.exports=function getViewportPosition(el,rendered){var position;var scrollX;var scrollY;if(rendered){position=getBoundingClientRect(el);return{top:position.top,right:position.right,bottom:position.bottom,left:position.left}}
position=getPagePosition(el);scrollX=getScrollX();scrollY=getScrollY();return{top:position.top-scrollY,right:position.right-scrollX,bottom:position.bottom-scrollY,left:position.left-scrollX}}},{"./getPagePosition":192,"./getScrollX":196,"./getScrollY":197,"./utils/getBoundingClientRect":200}],199:[function(require,module,exports){'use strict';var getPixelsInViewport=require('./getPixelsInViewport');var getPercentInViewport=require('./getPercentInViewport');module.exports=function isInViewport(el,rendered,threshold){var inViewport;threshold=threshold||0;if(typeof threshold==='string'&&threshold.slice(-2)==='px'){threshold=parseInt(threshold,10);inViewport=getPixelsInViewport(el,rendered)}else{inViewport=getPercentInViewport(el,rendered)}
return(inViewport>0&&inViewport>=threshold)}},{"./getPercentInViewport":193,"./getPixelsInViewport":194}],200:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"dup":3}],201:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./getStyleProperty":202,"./getStyleValue":203,"./shared/stylePropertyCache":206,"dup":4}],202:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"./shared/getStyleTestElement":204,"./shared/prefixHelper":205,"./shared/stylePropertyCache":206,"./utils/toCSS":209,"./utils/toDOM":210,"dup":5}],203:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"./getStyleProperty":202,"./shared/prefixHelper":205,"./shared/stylePropertyCache":206,"./shared/styleValueAvailable":207,"dup":6}],204:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{"dup":7}],205:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],206:[function(require,module,exports){arguments[4][9][0].apply(exports,arguments)},{"dup":9}],207:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{"./getStyleTestElement":204,"./stylePropertyCache":206,"dup":10}],208:[function(require,module,exports){arguments[4][11][0].apply(exports,arguments)},{"dup":11}],209:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{"dup":12}],210:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{"dup":13}],211:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{"./getStyle":212,"./setStyle":214,"dup":14}],212:[function(require,module,exports){arguments[4][15][0].apply(exports,arguments)},{"@marcom/ac-prefixer/getStyleProperty":202,"@marcom/ac-prefixer/stripPrefixes":208,"dup":15}],213:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{"dup":16}],214:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{"./internal/normalizeValue":213,"@marcom/ac-prefixer/getStyleCSS":201,"@marcom/ac-prefixer/getStyleProperty":202,"dup":17}],215:[function(require,module,exports){arguments[4][121][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":216,"dup":121}],216:[function(require,module,exports){arguments[4][122][0].apply(exports,arguments)},{"dup":122}],217:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{"./shared/getStyleTestElement":219,"./shared/prefixHelper":220,"./shared/stylePropertyCache":221,"./utils/toCSS":223,"./utils/toDOM":224,"dup":5}],218:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"./getStyleProperty":217,"./shared/prefixHelper":220,"./shared/stylePropertyCache":221,"./shared/styleValueAvailable":222,"dup":6}],219:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{"dup":7}],220:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],221:[function(require,module,exports){arguments[4][9][0].apply(exports,arguments)},{"dup":9}],222:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{"./getStyleTestElement":219,"./stylePropertyCache":221,"dup":10}],223:[function(require,module,exports){arguments[4][12][0].apply(exports,arguments)},{"dup":12}],224:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{"dup":13}],225:[function(require,module,exports){arguments[4][152][0].apply(exports,arguments)},{"@marcom/ac-function/memoize":228,"@marcom/ac-prefixer/getStyleProperty":217,"@marcom/ac-prefixer/getStyleValue":218,"dup":152}],226:[function(require,module,exports){'use strict';module.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],227:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function touchAvailable(){var windowObj=globalsHelper.getWindow();var documentObj=globalsHelper.getDocument();var navigatorObj=globalsHelper.getNavigator();return!!(('ontouchstart' in windowObj)||(windowObj.DocumentTouch&&documentObj instanceof windowObj.DocumentTouch)||(navigatorObj.maxTouchPoints>0)||(navigatorObj.msMaxTouchPoints>0))}
module.exports=once(touchAvailable);module.exports.original=touchAvailable},{"./helpers/globals":226,"@marcom/ac-function/once":229}],228:[function(require,module,exports){arguments[4][162][0].apply(exports,arguments)},{"dup":162}],229:[function(require,module,exports){'use strict';module.exports=function once(func){var result;return function(){if(typeof result==='undefined'){result=func.apply(this,arguments)}
return result}}},{}],230:[function(require,module,exports){'use strict';module.exports=function throttle(func,wait){var timeout=null;return function(){if(timeout===null){func.apply(this,arguments);timeout=setTimeout(function(){timeout=null},wait)}}}},{}],231:[function(require,module,exports){'use strict';var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var ac_removeEventListener=require('@marcom/ac-dom-events/utils/removeEventListener');var create=require('@marcom/ac-object/create');var KeyEvent=require('./internal/KeyEvent');var KEYDOWN='keydown';var KEYUP='keyup';function Keyboard(contextElement){this._keysDown={};this._DOMKeyDown=this._DOMKeyDown.bind(this);this._DOMKeyUp=this._DOMKeyUp.bind(this);this._context=contextElement||document;ac_addEventListener(this._context,KEYDOWN,this._DOMKeyDown,!0);ac_addEventListener(this._context,KEYUP,this._DOMKeyUp,!0);EventEmitterMicro.call(this)}
var proto=Keyboard.prototype=create(EventEmitterMicro.prototype);proto.onDown=function(keyCode,callback){return this.on(KEYDOWN+':'+keyCode,callback)};proto.onceDown=function(keyCode,callback){return this.once(KEYDOWN+':'+keyCode,callback)};proto.offDown=function(keyCode,callback){return this.off(KEYDOWN+':'+keyCode,callback)};proto.onUp=function(keyCode,callback){return this.on(KEYUP+':'+keyCode,callback)};proto.onceUp=function(keyCode,callback){return this.once(KEYUP+':'+keyCode,callback)};proto.offUp=function(keyCode,callback){return this.off(KEYUP+':'+keyCode,callback)};proto.isDown=function(keyCode){keyCode+='';return this._keysDown[keyCode]||!1};proto.isUp=function(keyCode){return!this.isDown(keyCode)};proto.destroy=function(){ac_removeEventListener(this._context,KEYDOWN,this._DOMKeyDown,!0);ac_removeEventListener(this._context,KEYUP,this._DOMKeyUp,!0);this._keysDown=null;this._context=null;EventEmitterMicro.prototype.destroy.call(this);return this};proto._DOMKeyDown=function(keyboardEvent){var evt=this._normalizeKeyboardEvent(keyboardEvent);var keyCode=evt.keyCode+='';this._trackKeyDown(keyCode);this.trigger(KEYDOWN+':'+keyCode,evt)};proto._DOMKeyUp=function(keyboardEvent){var evt=this._normalizeKeyboardEvent(keyboardEvent);var keyCode=evt.keyCode+='';this._trackKeyUp(keyCode);this.trigger(KEYUP+':'+keyCode,evt)};proto._normalizeKeyboardEvent=function(keyboardEvent){return new KeyEvent(keyboardEvent)};proto._trackKeyUp=function(keyCode){if(this._keysDown[keyCode]){this._keysDown[keyCode]=!1}};proto._trackKeyDown=function(keyCode){if(!this._keysDown[keyCode]){this._keysDown[keyCode]=!0}};module.exports=Keyboard},{"./internal/KeyEvent":233,"@marcom/ac-dom-events/utils/addEventListener":187,"@marcom/ac-dom-events/utils/removeEventListener":189,"@marcom/ac-event-emitter-micro":215,"@marcom/ac-object/create":236}],232:[function(require,module,exports){'use strict';var Keyboard=require('./Keyboard');module.exports=new Keyboard()},{"./Keyboard":231}],233:[function(require,module,exports){'use strict';var blackList=['keyLocation'];function KeyEvent(originalEvt){this.originalEvent=originalEvt;var prop;for(prop in originalEvt){if(blackList.indexOf(prop)===-1&&typeof originalEvt[prop]!=='function'){this[prop]=originalEvt[prop]}}
this.location=(this.originalEvent.location!==undefined)?this.originalEvent.location:this.originalEvent.keyLocation}
KeyEvent.prototype={preventDefault:function(){if(typeof this.originalEvent.preventDefault!=='function'){this.originalEvent.returnValue=!1;return}
return this.originalEvent.preventDefault()},stopPropagation:function(){return this.originalEvent.stopPropagation()}};module.exports=KeyEvent},{}],234:[function(require,module,exports){'use strict';module.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTRAPHE:222,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191}},{}],235:[function(require,module,exports){arguments[4][131][0].apply(exports,arguments)},{"./extend":237,"@marcom/ac-polyfills/Array/isArray":246,"dup":131}],236:[function(require,module,exports){arguments[4][132][0].apply(exports,arguments)},{"dup":132}],237:[function(require,module,exports){arguments[4][134][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":249,"dup":134}],238:[function(require,module,exports){'use strict';module.exports={PageVisibilityManager:require('./ac-page-visibility/PageVisibilityManager')}},{"./ac-page-visibility/PageVisibilityManager":239}],239:[function(require,module,exports){'use strict';var create=require('@marcom/ac-object/create');var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;function PageVisibilityManager(){if(typeof document.addEventListener==='undefined'){return}
var visibilityChange;if(typeof document.hidden!=='undefined'){this._hidden='hidden';visibilityChange='visibilitychange'}
else if(typeof document.mozHidden!=='undefined'){this._hidden='mozHidden';visibilityChange='mozvisibilitychange'}
else if(typeof document.msHidden!=='undefined'){this._hidden='msHidden';visibilityChange='msvisibilitychange'}
else if(typeof document.webkitHidden!=='undefined'){this._hidden='webkitHidden';visibilityChange='webkitvisibilitychange'}
if(typeof document[this._hidden]==="undefined"){this.isHidden=!1}
else{this.isHidden=document[this._hidden]}
if(visibilityChange){document.addEventListener(visibilityChange,this._handleVisibilityChange.bind(this),!1)}
EventEmitterMicro.call(this)}
var proto=PageVisibilityManager.prototype=create(EventEmitterMicro.prototype);proto.CHANGED='changed';proto._handleVisibilityChange=function(evt){this.isHidden=document[this._hidden];this.trigger(this.CHANGED,{isHidden:this.isHidden})};module.exports=new PageVisibilityManager()},{"@marcom/ac-event-emitter-micro":215,"@marcom/ac-object/create":236}],240:[function(require,module,exports){'use strict';var BrowserData=require('./ac-browser/BrowserData');var webkitRegExp=/applewebkit/i;var IE=require('./ac-browser/IE');var browser=BrowserData.create();browser.isWebKit=function(userAgentString){var userAgent=userAgentString||window.navigator.userAgent;return userAgent?!!webkitRegExp.test(userAgent):!1};browser.lowerCaseUserAgent=navigator.userAgent.toLowerCase();if(browser.name==='IE'){browser.IE={documentMode:IE.getDocumentMode()}}
module.exports=browser},{"./ac-browser/BrowserData":241,"./ac-browser/IE":242}],241:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.filter');require('@marcom/ac-polyfills/Array/prototype.some');var _data=require('./data');function BrowserData(){}
BrowserData.prototype={__getBrowserVersion:function(stringToSearch,identity){var version;if(!stringToSearch||!identity){return}
var filteredData=_data.browser.filter(function(item){return item.identity===identity});filteredData.some(function(item){var versionSearchString=item.versionSearch||identity;var index=stringToSearch.indexOf(versionSearchString);if(index>-1){version=parseFloat(stringToSearch.substring(index+versionSearchString.length+1));return!0}});return version},__getName:function(dataBrowser){return this.__getIdentityStringFromArray(dataBrowser)},__getIdentity:function(item){if(item.string){return this.__matchSubString(item)}else if(item.prop){return item.identity}},__getIdentityStringFromArray:function(dataArray){for(var i=0,l=dataArray.length,identity;i<l;i++){identity=this.__getIdentity(dataArray[i]);if(identity){return identity}}},__getOS:function(dataOS){return this.__getIdentityStringFromArray(dataOS)},__getOSVersion:function(stringToSearch,osIdentity){if(!stringToSearch||!osIdentity){return}
var filteredData=_data.os.filter(function(item){return item.identity===osIdentity})[0];var versionSearchString=filteredData.versionSearch||osIdentity;var regex=new RegExp(versionSearchString+' ([\\d_\\.]+)','i');var version=stringToSearch.match(regex);if(version!==null){return version[1].replace(/_/g,'.')}},__matchSubString:function(item){var subString=item.subString;if(subString){var matches=subString.test?!!subString.test(item.string):item.string.indexOf(subString)>-1;if(matches){return item.identity}}}};BrowserData.create=function(){var instance=new BrowserData();var out={};out.name=instance.__getName(_data.browser);out.version=instance.__getBrowserVersion(_data.versionString,out.name);out.os=instance.__getOS(_data.os);out.osVersion=instance.__getOSVersion(_data.versionString,out.os);return out};module.exports=BrowserData},{"./data":243,"@marcom/ac-polyfills/Array/prototype.filter":248,"@marcom/ac-polyfills/Array/prototype.some":251}],242:[function(require,module,exports){'use strict';module.exports={getDocumentMode:function(){var ie;if(document.documentMode){ie=parseInt(document.documentMode,10)}else{ie=5;if(document.compatMode){if(document.compatMode==="CSS1Compat"){ie=7}}}
return ie}}},{}],243:[function(require,module,exports){'use strict';module.exports={browser:[{string:window.navigator.userAgent,subString:"Edge",identity:"Edge"},{string:window.navigator.userAgent,subString:/silk/i,identity:"Silk"},{string:window.navigator.userAgent,subString:/(android).*(version\/[0-9+].[0-9+])/i,identity:"Android"},{string:window.navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:window.navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:window.navigator.userAgent,subString:/mobile\/[^\s]*\ssafari\//i,identity:"Safari Mobile",versionSearch:"Version"},{string:window.navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:window.navigator.vendor,subString:"iCab",identity:"iCab"},{string:window.navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:window.navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:window.navigator.vendor,subString:"Camino",identity:"Camino"},{string:window.navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:window.navigator.userAgent,subString:"MSIE",identity:"IE",versionSearch:"MSIE"},{string:window.navigator.userAgent,subString:"Trident",identity:"IE",versionSearch:"rv"},{string:window.navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:window.navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:window.navigator.platform,subString:"Win",identity:"Windows",versionSearch:"Windows NT"},{string:window.navigator.platform,subString:"Mac",identity:"OS X"},{string:window.navigator.userAgent,subString:"iPhone",identity:"iOS",versionSearch:"iPhone OS"},{string:window.navigator.userAgent,subString:"iPad",identity:"iOS",versionSearch:"CPU OS"},{string:window.navigator.userAgent,subString:/android/i,identity:"Android"},{string:window.navigator.platform,subString:"Linux",identity:"Linux"}],versionString:window.navigator.userAgent||window.navigator.appVersion||undefined}},{}],244:[function(require,module,exports){'use strict';module.exports={PointerTracker:require('./ac-pointer-tracker/PointerTracker')}},{"./ac-pointer-tracker/PointerTracker":245}],245:[function(require,module,exports){'use strict';var ac_browser=require('@marcom/ac-browser');var ac_dom_events=require('@marcom/ac-dom-events');var ac_dom_styles=require('@marcom/ac-dom-styles');var create=require('@marcom/ac-object/create');var isLowThreshold=ac_browser.os==='Android'||(ac_browser.name==='IE'&&ac_browser.version<=8);var touchAvailable=require('@marcom/ac-feature/touchAvailable')();var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;function PointerTracker(el,pointerEvents,options){this._el=el;options=options||{};this._lockVertical=options.lockVertical!==!1;this._swipeThreshold=options.swipeThreshold||PointerTracker.DEFAULT_SWIPE_THRESHOLD;this._pointerEvents=pointerEvents||{};this._pointerEvents.down=this._pointerEvents.down||((touchAvailable)?PointerTracker.TOUCH_EVENTS.down:PointerTracker.MOUSE_EVENTS.down);this._pointerEvents.up=this._pointerEvents.up||((touchAvailable)?PointerTracker.TOUCH_EVENTS.up:PointerTracker.MOUSE_EVENTS.up);this._pointerEvents.out=this._pointerEvents.out||((touchAvailable)?PointerTracker.TOUCH_EVENTS.out:PointerTracker.MOUSE_EVENTS.out);this._pointerEvents.move=this._pointerEvents.move||((touchAvailable)?PointerTracker.TOUCH_EVENTS.move:PointerTracker.MOUSE_EVENTS.move);this._onMouseDown=this._onMouseDown.bind(this);this._onMouseUp=this._onMouseUp.bind(this);this._onMouseOut=this._onMouseOut.bind(this);this._onMouseMove=this._onMouseMove.bind(this);EventEmitterMicro.call(this);ac_dom_events.addEventListener(this._el,this._pointerEvents.down,this._onMouseDown);this._setCursorStyle('grab')}
PointerTracker.START='start';PointerTracker.END='end';PointerTracker.UPDATE='update';PointerTracker.SWIPE_RIGHT='swiperight';PointerTracker.SWIPE_LEFT='swipeleft';PointerTracker.DEFAULT_SWIPE_THRESHOLD=(isLowThreshold)?2:8;PointerTracker.TOUCH_EVENTS={down:'touchstart',up:'touchend',out:'mouseout',move:'touchmove'};PointerTracker.MOUSE_EVENTS={down:'mousedown',up:'mouseup',out:'mouseout',move:'mousemove'};var Super=EventEmitterMicro.prototype;var proto=PointerTracker.prototype=create(Super);proto.destroy=function(){if(this._isDragging){this._onMouseUp()}
ac_dom_events.removeEventListener(this._el,this._pointerEvents.down,this._onMouseDown);this._setCursorStyle(null);this._el=null;this._pointerEvents=null;this._lockVertical=null;this._swipeThreshold=null;this._checkForTouchScrollY=null;this._isDragging=null;this._currentX=null;this._currentY=null;this._velocityX=null;this._velocityY=null;this._lastX=null;this._lastY=null;return Super.destroy.call(this)};proto._onMouseDown=function(evt){if(this._isDragging){return}
this._isDragging=!0;this._setCursorStyle('grabbing');ac_dom_events.removeEventListener(this._el,this._pointerEvents.down,this._onMouseDown);ac_dom_events.addEventListener(document.body,this._pointerEvents.up,this._onMouseUp);ac_dom_events.addEventListener(document,this._pointerEvents.out,this._onMouseOut);ac_dom_events.addEventListener(document.body,this._pointerEvents.move,this._onMouseMove);this._checkForTouchScrollY=this._lockVertical&&!!(evt.touches&&evt.touches[0]);if(this._checkForTouchScrollY){this._lastY=this._getTouchY(evt)}
var values=this._storeAndGetValues(evt);this._velocityX=values.diffX=0;this._velocityY=values.diffY=0;this.trigger(PointerTracker.START,values)};proto._onMouseUp=function(evt){if(!this._isDragging){return}
this._isDragging=!1;this._setCursorStyle('grab');ac_dom_events.addEventListener(this._el,this._pointerEvents.down,this._onMouseDown);ac_dom_events.removeEventListener(document.body,this._pointerEvents.up,this._onMouseUp);ac_dom_events.removeEventListener(document,this._pointerEvents.out,this._onMouseOut);ac_dom_events.removeEventListener(document.body,this._pointerEvents.move,this._onMouseMove);var swipe;if(this._checkForTouchScrollY){swipe=null}else if(this._velocityX>this._swipeThreshold){swipe=PointerTracker.SWIPE_LEFT}else if((this._velocityX*-1)>this._swipeThreshold){swipe=PointerTracker.SWIPE_RIGHT}
var values=this._storeAndGetValues(evt);values.swipe=swipe;this.trigger(PointerTracker.END,values);if(swipe){this.trigger(swipe,values)}};proto._onMouseOut=function(evt){evt=(evt)?evt:window.event;var from=evt.relatedTarget||evt.toElement;if(!from||from.nodeName==='HTML'){this._onMouseUp(evt)}};proto._onMouseMove=function(evt){if(this._checkForTouchScrollY&&this._isVerticalTouchMove(evt)){this._onMouseUp(evt);return}
ac_dom_events.preventDefault(evt);this.trigger(PointerTracker.UPDATE,this._storeAndGetValues(evt))};proto._storeAndGetValues=function(evt){if(evt===undefined){return{}}
this._currentX=this._getPointerX(evt);this._currentY=this._getPointerY(evt);this._velocityX=this._lastX-this._currentX;this._velocityY=this._lastY-this._currentY;var values={x:this._currentX,y:this._currentY,lastX:this._lastX,lastY:this._lastY,diffX:this._velocityX,diffY:this._velocityY,interactionEvent:evt};this._lastX=this._currentX;this._lastY=this._currentY;return values};proto._getPointerX=function(evt){if(evt.pageX){return evt.pageX}else if(evt.touches&&evt.touches[0]){return evt.touches[0].pageX}else if(evt.clientX){return evt.clientX}
return 0};proto._getPointerY=function(evt){if(evt.pageY){return evt.pageY}else if(evt.touches&&evt.touches[0]){return evt.touches[0].pageY}else if(evt.clientY){return evt.clientY}
return 0};proto._getTouchX=function(evt){if(evt.touches&&evt.touches[0]){return evt.touches[0].pageX}
return 0};proto._getTouchY=function(evt){if(evt.touches&&evt.touches[0]){return evt.touches[0].pageY}
return 0};proto._isVerticalTouchMove=function(evt){var x=this._getTouchX(evt);var y=this._getTouchY(evt);var diffX=Math.abs(x-this._lastX);var diffY=Math.abs(y-this._lastY);this._checkForTouchScrollY=(diffX<diffY);return this._checkForTouchScrollY};proto._setCursorStyle=function(cursor){ac_dom_styles.setStyle(this._el,{cursor:cursor})};module.exports=PointerTracker},{"@marcom/ac-browser":240,"@marcom/ac-dom-events":175,"@marcom/ac-dom-styles":211,"@marcom/ac-event-emitter-micro":215,"@marcom/ac-feature/touchAvailable":227,"@marcom/ac-object/create":236}],246:[function(require,module,exports){arguments[4][110][0].apply(exports,arguments)},{"dup":110}],247:[function(require,module,exports){if(!Array.prototype.every){Array.prototype.every=function every(callback,thisObj){var arrayObject=Object(this);var len=arrayObject.length>>>0;var i;if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
for(i=0;i<len;i+=1){if(i in arrayObject&&!callback.call(thisObj,arrayObject[i],i,arrayObject)){return!1}}
return!0}}},{}],248:[function(require,module,exports){arguments[4][111][0].apply(exports,arguments)},{"dup":111}],249:[function(require,module,exports){arguments[4][112][0].apply(exports,arguments)},{"dup":112}],250:[function(require,module,exports){arguments[4][115][0].apply(exports,arguments)},{"dup":115}],251:[function(require,module,exports){if(!Array.prototype.some){Array.prototype.some=function some(callback,thisObj){var arrayObj=Object(this);var len=arrayObj.length>>>0;var i;if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
for(i=0;i<len;i+=1){if(i in arrayObj&&callback.call(thisObj,arrayObj[i],i,arrayObj)===!0){return!0}}
return!1}}},{}],252:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"dup":116}],253:[function(require,module,exports){if("document" in self){if(!("classList" in document.createElement("_"))){(function(view){"use strict";if(!('Element' in view))return;var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){var
i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i}}
return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}
if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}
return arrIndexOf.call(classList,token)},ClassList=function(elem){var
trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i])}
this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1};classListProto.add=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=!1;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=!0}}
while(++i<l);if(updated){this._updateClassName()}};classListProto.remove=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=!1,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=!0;index=checkTokenAndGetIndex(this,token)}}
while(++i<l);if(updated){this._updateClassName()}};classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==!0&&"remove":force!==!1&&"add";if(method){this[method](token)}
if(force===!0||force===!1){return force}else{return!result}};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){if(ex.number===-0x7FF5EC54){classListPropDesc.enumerable=!1;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter)}}(self))}else{(function(){"use strict";var testElement=document.createElement("_");testElement.classList.add("c1","c2");if(!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i++){token=arguments[i];original.call(this,token)}}};createMethod('add');createMethod('remove')}
testElement.classList.toggle("c3",!1);if(testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){if(1 in arguments&&!this.contains(token)===!force){return force}else{return _toggle.call(this,token)}}}
testElement=null}())}}},{}],254:[function(require,module,exports){arguments[4][117][0].apply(exports,arguments)},{"dup":117}],255:[function(require,module,exports){(function(){var lastTime=0;var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame']}
if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=Date.now();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)}}())},{}],256:[function(require,module,exports){var Clock=require("./ac-clock/Clock"),ThrottledClock=require("./ac-clock/ThrottledClock"),sharedClockInstance=require("./ac-clock/sharedClockInstance");sharedClockInstance.Clock=Clock;sharedClockInstance.ThrottledClock=ThrottledClock;module.exports=sharedClockInstance},{"./ac-clock/Clock":257,"./ac-clock/ThrottledClock":258,"./ac-clock/sharedClockInstance":259}],257:[function(require,module,exports){"use strict";require('@marcom/ac-polyfills/Function/prototype.bind');require('@marcom/ac-polyfills/requestAnimationFrame');var proto;var EventEmitter=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var pageLoadTime=new Date().getTime();function Clock(){EventEmitter.call(this);this.lastFrameTime=null;this._animationFrame=null;this._active=!1;this._startTime=null;this._boundOnAnimationFrame=this._onAnimationFrame.bind(this);this._getTime=Date.now||function(){return new Date().getTime()}}
proto=Clock.prototype=new EventEmitter(null);proto.start=function(){if(this._active){return}
this._tick()};proto.stop=function(){if(this._active){window.cancelAnimationFrame(this._animationFrame)}
this._animationFrame=null;this.lastFrameTime=null;this._active=!1};proto.destroy=function(){this.stop();this.off();var i;for(i in this){if(this.hasOwnProperty(i)){this[i]=null}}};proto.isRunning=function(){return this._active};proto._tick=function(){if(!this._active){this._active=!0}
this._animationFrame=window.requestAnimationFrame(this._boundOnAnimationFrame)};proto._onAnimationFrame=function(time){if(this.lastFrameTime===null){this.lastFrameTime=time}
var delta=time-this.lastFrameTime;var fps=0;if(delta>=1000){delta=0}
if(delta!==0){fps=1000/delta}
if(this._firstFrame===!0){delta=0;this._firstFrame=!1}
if(fps===0){this._firstFrame=!0}else{var data={time:time,delta:delta,fps:fps,naturalFps:fps,timeNow:this._getTime()};this.trigger('update',data);this.trigger('draw',data)}
this._animationFrame=null;this.lastFrameTime=time;if(this._active!==!1){this._tick()}else{this.lastFrameTime=null}};module.exports=Clock},{"@marcom/ac-event-emitter-micro":290,"@marcom/ac-polyfills/Function/prototype.bind":254,"@marcom/ac-polyfills/requestAnimationFrame":255}],258:[function(require,module,exports){"use strict";require('@marcom/ac-polyfills/requestAnimationFrame');var proto;var sharedClockInstance=require('./sharedClockInstance'),EventEmitter=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;function ThrottledClock(fps,options){if(fps===null){return}
EventEmitter.call(this);options=options||{};this._fps=fps||null;this._clock=options.clock||sharedClockInstance;this._lastThrottledTime=null;this._clockEvent=null;this._boundOnClockDraw=this._onClockDraw.bind(this);this._boundOnClockUpdate=this._onClockUpdate.bind(this);this._clock.on('update',this._boundOnClockUpdate)}
proto=ThrottledClock.prototype=new EventEmitter(null);proto.setFps=function(fps){this._fps=fps;return this};proto.getFps=function(){return this._fps};proto.start=function(){this._clock.start();return this};proto.stop=function(){this._clock.stop();return this};proto.isRunning=function(){return this._clock.isRunning()};proto.destroy=function(){this._clock.off('update',this._boundOnClockUpdate);this._clock.destroy.call(this)};proto._onClockUpdate=function(e){if(this._lastThrottledTime===null){this._lastThrottledTime=this._clock.lastFrameTime}
var delta=e.time-this._lastThrottledTime;if(!this._fps){throw new TypeError('FPS is not defined.')}
if(Math.ceil(1000/delta)>=this._fps+2){return}
this._clockEvent=e;this._clockEvent.delta=delta;this._clockEvent.fps=1000/delta;this._lastThrottledTime=this._clockEvent.time;this._clock.once('draw',this._boundOnClockDraw);this.trigger('update',this._clockEvent)};proto._onClockDraw=function(){this.trigger('draw',this._clockEvent)};module.exports=ThrottledClock},{"./sharedClockInstance":259,"@marcom/ac-event-emitter-micro":290,"@marcom/ac-polyfills/requestAnimationFrame":255}],259:[function(require,module,exports){'use strict';var Clock=require('./Clock');module.exports=new Clock()},{"./Clock":257}],260:[function(require,module,exports){'use strict';module.exports={Clip:require('./ac-clip/Clip')}},{"./ac-clip/Clip":261}],261:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/isArray');var create=require('@marcom/ac-object/create');var createPredefined=require('@marcom/ac-easing').createPredefined;var Clock=require('@marcom/ac-clock');var Ease=require('@marcom/ac-easing').Ease;var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var DEFAULT_EASE='ease';function Clip(target,duration,propsTo,options){options=options||{};this._options=options;this._isYoyo=options.yoyo;this._direction=1;this._timeScale=1;this._loop=options.loop||0;this._loopCount=0;this._target=target;this.duration(duration);this._delay=(options.delay||0)*1000;this._remainingDelay=this._delay;this._progress=0;this._clock=options.clock||Clock;this._playing=!1;this._getTime=Date.now||function(){return new Date().getTime()};this._propsTo=propsTo||{};this._propsFrom=options.propsFrom||{};this._onStart=options.onStart||null;this._onUpdate=options.onUpdate||null;this._onDraw=options.onDraw||null;this._onComplete=options.onComplete||null;var ease=options.ease||DEFAULT_EASE;this._ease=(typeof ease==='function')?new Ease(ease):createPredefined(ease);this._start=this._start.bind(this);this._update=this._update.bind(this);this._draw=this._draw.bind(this);this._isPrepared=!1;Clip._add(this);EventEmitterMicro.call(this)}
var proto=Clip.prototype=create(EventEmitterMicro.prototype);Clip.COMPLETE='complete';Clip.PAUSE='pause';Clip.PLAY='play';proto.play=function(){if(!this._playing){this._playing=!0;if(this._delay===0||this._remainingDelay===0){this._start()}
else{if(!this._isPrepared){this._setDiff();this._updateProps()}
this._startTimeout=setTimeout(this._start,this._remainingDelay/this._timeScale);this._delayStart=this._getTime()}}
return this};proto.pause=function(){if(this._playing){if(this._startTimeout){this._remainingDelay=this._getTime()-this._delayStart;clearTimeout(this._startTimeout)}
this._stop();this.trigger(Clip.PAUSE,this)}
return this};proto.destroy=function(){this.pause();this._options=null;this._target=null;this._storeTarget=null;this._ease=null;this._clock=null;this._propsTo=null;this._propsFrom=null;this._storePropsTo=null;this._storePropsFrom=null;this._propsDiff=null;this._propsEase=null;this._onStart=null;this._onUpdate=null;this._onDraw=null;this._onComplete=null;Clip._remove(this);EventEmitterMicro.prototype.destroy.call(this);return this};proto.reset=function(){if(!this._isPrepared){return}
this._stop();this._resetLoop(this._target,this._storeTarget);this._direction=1;this._loop=this._options.loop||0;this._loopCount=0;this._propsFrom=this._storePropsFrom;this._propsTo=this._storePropsTo;this._progress=0;this._setStartTime();if(this._onUpdate){this._onUpdate.call(this,this)}
if(this._onDraw){this._onDraw.call(this,this)}
return this};proto.playing=function(){return this._playing};proto.target=function(){return this._target};proto.duration=function(duration){if(duration!==undefined){this._duration=duration;this._durationMs=(duration*1000)/this._timeScale;if(this._playing){this._setStartTime()}}
return this._duration};proto.timeScale=function(timeScale){if(timeScale!==undefined){this._timeScale=timeScale;this.duration(this._duration)}
return this._timeScale};proto.currentTime=function(time){if(time!==undefined){return this.progress(time/this._duration)*this._duration}
return(this.progress()*this._duration)};proto.progress=function(progress){if(progress!==undefined){this._progress=Math.min(1,Math.max(0,progress));this._setStartTime();if(!this._isPrepared){this._setDiff()}
if(this._playing&&progress===1){this._completeProps();if(this._onUpdate){this._onUpdate.call(this,this)}
if(this._onDraw){this._onDraw.call(this,this)}
this._complete()}
else{this._updateProps();if(this._onUpdate){this._onUpdate.call(this,this)}
if(this._onDraw){this._onDraw.call(this,this)}}}
return this._progress};proto._resetLoop=function(target,stored){var prop;for(prop in stored){if(stored.hasOwnProperty(prop)){if(stored[prop]!==null){if(typeof stored[prop]==='object'){this._resetLoop(target[prop],stored[prop])}
else{target[prop]=stored[prop]}}}}};proto._cloneObjects=function(){var cloneTarget={};var clonePropsTo={};var clonePropsFrom={};this._cloneObjectsLoop(this._target,this._propsTo,this._propsFrom,cloneTarget,clonePropsTo,clonePropsFrom);return{target:cloneTarget,propsTo:clonePropsTo,propsFrom:clonePropsFrom}};proto._cloneObjectsLoop=function(target,to,from,cloneTarget,clonePropsTo,clonePropsFrom){var type;var prop;for(prop in from){if(from.hasOwnProperty(prop)&&to[prop]===undefined&&target[prop]!==undefined){cloneTarget[prop]=target[prop];clonePropsTo[prop]=target[prop];clonePropsFrom[prop]=from[prop]}}
for(prop in to){if(target.hasOwnProperty(prop)){type=typeof target[prop];if(target[prop]!==null&&type==='object'){if(Array.isArray(target[prop])){cloneTarget[prop]=[];clonePropsTo[prop]=[];clonePropsFrom[prop]=[]}
else{cloneTarget[prop]={};clonePropsTo[prop]={};clonePropsFrom[prop]={}}
this._cloneObjectsLoop(target[prop],to[prop]||{},from[prop]||{},cloneTarget[prop],clonePropsTo[prop],clonePropsFrom[prop])}
else if(to[prop]!==null&&type==='number'){cloneTarget[prop]=target[prop];clonePropsTo[prop]=to[prop];if(from&&from[prop]!==undefined){clonePropsFrom[prop]=from[prop]}}}}};proto._prepareProperties=function(){if(!this._isPrepared){var clones=this._cloneObjects();this._storeTarget=clones.target;this._propsTo=clones.propsTo;this._storePropsTo=this._propsTo;this._propsFrom=clones.propsFrom;this._storePropsFrom=this._propsFrom;this._isPrepared=!0}};proto._setStartTime=function(){this._startTime=this._getTime()-(this.progress()*this._durationMs)};proto._setDiff=function(){if(!this._isPrepared){this._prepareProperties()}
this._propsDiff={};this._setDiffLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff)};proto._setDiffLoop=function(to,from,target,diff){var type;var prop;for(prop in to){if(to.hasOwnProperty(prop)){type=typeof to[prop];if(to[prop]!==null&&type==='object'){from[prop]=from[prop]||{};diff[prop]=diff[prop]||{};this._setDiffLoop(to[prop],from[prop],target[prop],diff[prop])}
else if(type==='number'&&target[prop]!==undefined){if(from[prop]!==undefined){target[prop]=from[prop]}
else{from[prop]=target[prop]}
diff[prop]=to[prop]-target[prop]}
else{to[prop]=null;from[prop]=null}}}};proto._start=function(){this._startTimeout=null;this._remainingDelay=0;this._setStartTime();this._clock.on('update',this._update);this._clock.on('draw',this._draw);if(!this._clock.isRunning()){this._clock.start()}
this._setDiff();this._playing=!0;this._running=!0;if(this._onStart){this._onStart.call(this,this)}
this.trigger(Clip.PLAY,this)};proto._stop=function(){this._playing=!1;this._running=!1;this._clock.off('update',this._update);this._clock.off('draw',this._draw)};proto._updateProps=function(){var eased;if(this._direction===1){eased=this._ease.getValue(this._progress)}
else{eased=1-this._ease.getValue(1-this._progress)}
this._updatePropsLoop(this._propsTo,this._propsFrom,this._target,this._propsDiff,eased)};proto._updatePropsLoop=function(to,from,target,diff,eased){var prop;for(prop in to){if(to.hasOwnProperty(prop)&&to[prop]!==null){if(typeof to[prop]!=='number'){this._updatePropsLoop(to[prop],from[prop],target[prop],diff[prop],eased)}
else{target[prop]=from[prop]+(diff[prop]*eased)}}}};proto._completeProps=function(){this._completePropsLoop(this._propsTo,this._target)};proto._completePropsLoop=function(to,target){var prop;for(prop in to){if(to.hasOwnProperty(prop)&&to[prop]!==null){if(typeof to[prop]!=='number'){this._completePropsLoop(to[prop],target[prop])}
else{target[prop]=to[prop]}}}};proto._complete=function(){if(this._isYoyo&&((this._loop>0&&this._loopCount<=this._loop)||(this._loop===0&&this._loopCount===0))){this._propsFrom=(this._direction===1)?this._storePropsTo:this._storePropsFrom;this._propsTo=(this._direction===1)?this._storePropsFrom:this._storePropsTo;this._direction*=-1;if(this._direction===-1){++this._loopCount}
this.progress(0);this._start()}
else if(this._loopCount<this._loop){++this._loopCount;this.progress(0);this._start()}
else{this.trigger(Clip.COMPLETE,this);if(this._onComplete){this._onComplete.call(this,this)}
if(this._options&&this._options.destroyOnComplete){this.destroy()}}};proto._update=function(evt){if(this._running){this._progress=(evt.timeNow-this._startTime)/this._durationMs;if(this._progress>=1){this._progress=1;this._running=!1;this._completeProps()}
else{this._updateProps()}
if(this._onUpdate){this._onUpdate.call(this,this)}}};proto._draw=function(evt){if(this._onDraw){this._onDraw.call(this,this)}
if(!this._running){this._stop();if(this._progress===1){this._complete()}}};Clip._instantiate=function(){this._clips=[];return this};Clip._add=function(clip){this._clips.push(clip)};Clip._remove=function(clip){var index=this._clips.indexOf(clip);if(index>-1){this._clips.splice(index,1)}};Clip.getAll=function(target){if(target!==undefined){var clips=[];var i=this._clips.length;while(i--){if(this._clips[i].target()===target){clips.push(this._clips[i])}}
return clips}
return Array.prototype.slice.call(this._clips)};Clip.destroyAll=function(target){var clips=this.getAll(target);if(this._clips.length===clips.length){this._clips=[]}
var i=clips.length;while(i--){clips[i].destroy()}
return clips};Clip.to=function(target,duration,propsTo,options){options=options||{};if(options.destroyOnComplete===undefined){options.destroyOnComplete=!0}
return new Clip(target,duration,propsTo,options).play()};Clip.from=function(target,duration,propsFrom,options){options=options||{};options.propsFrom=propsFrom;if(options.destroyOnComplete===undefined){options.destroyOnComplete=!0}
return new Clip(target,duration,options.propsTo,options).play()};module.exports=Clip._instantiate()},{"@marcom/ac-clock":256,"@marcom/ac-easing":282,"@marcom/ac-event-emitter-micro":290,"@marcom/ac-object/create":236,"@marcom/ac-polyfills/Array/isArray":246}],262:[function(require,module,exports){'use strict';var Color=require('./ac-color/Color');Color.decimalToHex=require('./ac-color/static/decimalToHex');Color.hexToDecimal=require('./ac-color/static/hexToDecimal');Color.hexToRgb=require('./ac-color/static/hexToRgb');Color.isColor=require('./ac-color/static/isColor');Color.isHex=require('./ac-color/static/isHex');Color.isRgb=require('./ac-color/static/isRgb');Color.isRgba=require('./ac-color/static/isRgba');Color.mixColors=require('./ac-color/static/mixColors');Color.rgbaToArray=require('./ac-color/static/rgbaToArray');Color.rgbToArray=require('./ac-color/static/rgbToArray');Color.rgbToDecimal=require('./ac-color/static/rgbToDecimal');Color.rgbToHex=require('./ac-color/static/rgbToHex');Color.rgbToHsl=require('./ac-color/static/rgbToHsl');Color.rgbToHsv=require('./ac-color/static/rgbToHsv');Color.rgbaToObject=require('./ac-color/static/rgbaToObject');Color.rgbToObject=require('./ac-color/static/rgbToObject');Color.shortToLongHex=require('./ac-color/static/shortToLongHex');module.exports={Color:Color}},{"./ac-color/Color":263,"./ac-color/static/decimalToHex":265,"./ac-color/static/hexToDecimal":266,"./ac-color/static/hexToRgb":267,"./ac-color/static/isColor":268,"./ac-color/static/isHex":269,"./ac-color/static/isRgb":270,"./ac-color/static/isRgba":271,"./ac-color/static/mixColors":272,"./ac-color/static/rgbToArray":273,"./ac-color/static/rgbToDecimal":274,"./ac-color/static/rgbToHex":275,"./ac-color/static/rgbToHsl":276,"./ac-color/static/rgbToHsv":277,"./ac-color/static/rgbToObject":278,"./ac-color/static/rgbaToArray":279,"./ac-color/static/rgbaToObject":280,"./ac-color/static/shortToLongHex":281}],263:[function(require,module,exports){'use strict';var cssColorNames=require('./helpers/cssColorNames');var hexToRgb=require('./static/hexToRgb');var isColor=require('./static/isColor');var isHex=require('./static/isHex');var isRgba=require('./static/isRgba');var mixColors=require('./static/mixColors');var rgbaToArray=require('./static/rgbaToArray');var rgbToArray=require('./static/rgbToArray');var rgbToDecimal=require('./static/rgbToDecimal');var rgbToHex=require('./static/rgbToHex');var rgbaToObject=require('./static/rgbaToObject');var rgbToObject=require('./static/rgbToObject');var shortToLongHex=require('./static/shortToLongHex');function Color(color){if(!isColor(color)&&!cssColorNames.nameToRgbObject[color]){throw new Error(color+' is not a supported color.')}
this._setColor(color)}
var proto=Color.prototype;proto._setColor=function(color){this._color={};if(isHex(color)){this._color.hex=shortToLongHex(color);this._color.rgb={color:hexToRgb(color)}}
else if(isRgba(color)){this._color.rgba={color:color};var rgbaObject=this.rgbaObject();this._color.rgb={color:'rgb('+rgbaObject.r+', '+rgbaObject.g+', '+rgbaObject.b+')'}}
else if(cssColorNames.nameToRgbObject[color]){var rgbObject=cssColorNames.nameToRgbObject[color];this._color.rgb={object:rgbObject,color:'rgb('+rgbObject.r+', '+rgbObject.g+', '+rgbObject.b+')'}}
else{this._color.rgb={color:color}}};proto.rgb=function(){return this._color.rgb.color};proto.rgba=function(){if(this._color.rgba===undefined){var rgbObject=this.rgbObject();this._color.rgba={color:'rgba('+rgbObject.r+', '+rgbObject.g+', '+rgbObject.b+', 1)'}}
return this._color.rgba.color};proto.hex=function(){if(this._color.hex===undefined){this._color.hex=rgbToHex.apply(this,this.rgbArray())}
return this._color.hex};proto.decimal=function(){if(this._color.decimal===undefined){this._color.decimal=rgbToDecimal(this.rgb())}
return this._color.decimal};proto.cssName=function(){return cssColorNames.rgbToName[this.rgb()]||null};proto.rgbArray=function(){if(this._color.rgb.array===undefined){this._color.rgb.array=rgbToArray(this.rgb())}
return this._color.rgb.array};proto.rgbaArray=function(){if(this._color.rgba===undefined){this.rgba()}
if(this._color.rgba.array===undefined){this._color.rgba.array=rgbaToArray(this.rgba())}
return this._color.rgba.array};proto.rgbObject=function(){if(this._color.rgb.object===undefined){this._color.rgb.object=rgbToObject(this.rgb())}
return this._color.rgb.object};proto.rgbaObject=function(){if(this._color.rgba===undefined){this.rgba()}
if(this._color.rgba.object===undefined){this._color.rgba.object=rgbaToObject(this.rgba())}
return this._color.rgba.object};proto.getRed=function(){return this.rgbObject().r};proto.getGreen=function(){return this.rgbObject().g};proto.getBlue=function(){return this.rgbObject().b};proto.getAlpha=function(){if(this._color.rgba===undefined){return 1}
return this.rgbaObject().a};proto.setRed=function(red){if(red!==this.getRed()){this._setColor('rgba('+red+', '+this.getGreen()+', '+this.getBlue()+', '+this.getAlpha()+')')}
return this.rgbObject().r};proto.setGreen=function(green){if(green!==this.getGreen()){this._setColor('rgba('+this.getRed()+', '+green+', '+this.getBlue()+', '+this.getAlpha()+')')}
return this.rgbObject().g};proto.setBlue=function(blue){if(blue!==this.getBlue()){this._setColor('rgba('+this.getRed()+', '+this.getGreen()+', '+blue+', '+this.getAlpha()+')')}
return this.rgbObject().b};proto.setAlpha=function(alpha){if(alpha!==this.getAlpha()){this._setColor('rgba('+this.getRed()+', '+this.getGreen()+', '+this.getBlue()+', '+alpha+')')}
return this.rgbaObject().a};proto.mix=function(color,percent){var rgbObject=rgbToObject(mixColors(this.rgb(),color,percent));this._setColor('rgba('+rgbObject.r+', '+rgbObject.g+', '+rgbObject.b+', '+this.getAlpha()+')');return this.rgb()};proto.clone=function(){return new Color(this.rgb())};module.exports=Color},{"./helpers/cssColorNames":264,"./static/hexToRgb":267,"./static/isColor":268,"./static/isHex":269,"./static/isRgba":271,"./static/mixColors":272,"./static/rgbToArray":273,"./static/rgbToDecimal":274,"./static/rgbToHex":275,"./static/rgbToObject":278,"./static/rgbaToArray":279,"./static/rgbaToObject":280,"./static/shortToLongHex":281}],264:[function(require,module,exports){'use strict';var rgbToName={'rgb(240, 248, 255)':'aliceblue','rgb(250, 235, 215)':'antiquewhite','rgb(0, 0, 0)':'black','rgb(0, 0, 255)':'blue','rgb(0, 255, 255)':'cyan','rgb(0, 0, 139)':'darkblue','rgb(0, 139, 139)':'darkcyan','rgb(0, 100, 0)':'darkgreen','rgb(0, 206, 209)':'darkturquoise','rgb(0, 191, 255)':'deepskyblue','rgb(0, 128, 0)':'green','rgb(0, 255, 0)':'lime','rgb(0, 0, 205)':'mediumblue','rgb(0, 250, 154)':'mediumspringgreen','rgb(0, 0, 128)':'navy','rgb(0, 255, 127)':'springgreen','rgb(0, 128, 128)':'teal','rgb(25, 25, 112)':'midnightblue','rgb(30, 144, 255)':'dodgerblue','rgb(32, 178, 170)':'lightseagreen','rgb(34, 139, 34)':'forestgreen','rgb(46, 139, 87)':'seagreen','rgb(47, 79, 79)':'darkslategray','rgb(50, 205, 50)':'limegreen','rgb(60, 179, 113)':'mediumseagreen','rgb(64, 224, 208)':'turquoise','rgb(65, 105, 225)':'royalblue','rgb(70, 130, 180)':'steelblue','rgb(72, 61, 139)':'darkslateblue','rgb(72, 209, 204)':'mediumturquoise','rgb(75, 0, 130)':'indigo','rgb(85, 107, 47)':'darkolivegreen','rgb(95, 158, 160)':'cadetblue','rgb(100, 149, 237)':'cornflowerblue','rgb(102, 205, 170)':'mediumaquamarine','rgb(105, 105, 105)':'dimgray','rgb(106, 90, 205)':'slateblue','rgb(107, 142, 35)':'olivedrab','rgb(112, 128, 144)':'slategray','rgb(119, 136, 153)':'lightslategray','rgb(123, 104, 238)':'mediumslateblue','rgb(124, 252, 0)':'lawngreen','rgb(127, 255, 212)':'aquamarine','rgb(127, 255, 0)':'chartreuse','rgb(128, 128, 128)':'gray','rgb(128, 0, 0)':'maroon','rgb(128, 128, 0)':'olive','rgb(128, 0, 128)':'purple','rgb(135, 206, 250)':'lightskyblue','rgb(135, 206, 235)':'skyblue','rgb(138, 43, 226)':'blueviolet','rgb(139, 0, 139)':'darkmagenta','rgb(139, 0, 0)':'darkred','rgb(139, 69, 19)':'saddlebrown','rgb(143, 188, 143)':'darkseagreen','rgb(144, 238, 144)':'lightgreen','rgb(147, 112, 219)':'mediumpurple','rgb(148, 0, 211)':'darkviolet','rgb(152, 251, 152)':'palegreen','rgb(153, 50, 204)':'darkorchid','rgb(154, 205, 50)':'yellowgreen','rgb(160, 82, 45)':'sienna','rgb(165, 42, 42)':'brown','rgb(169, 169, 169)':'darkgray','rgb(173, 255, 47)':'greenyellow','rgb(173, 216, 230)':'lightblue','rgb(175, 238, 238)':'paleturquoise','rgb(176, 196, 222)':'lightsteelblue','rgb(176, 224, 230)':'powderblue','rgb(178, 34, 34)':'firebrick','rgb(184, 134, 11)':'darkgoldenrod','rgb(186, 85, 211)':'mediumorchid','rgb(188, 143, 143)':'rosybrown','rgb(189, 183, 107)':'darkkhaki','rgb(192, 192, 192)':'silver','rgb(199, 21, 133)':'mediumvioletred','rgb(205, 92, 92)':'indianred','rgb(205, 133, 63)':'peru','rgb(210, 105, 30)':'chocolate','rgb(210, 180, 140)':'tan','rgb(211, 211, 211)':'lightgray','rgb(216, 191, 216)':'thistle','rgb(218, 165, 32)':'goldenrod','rgb(218, 112, 214)':'orchid','rgb(219, 112, 147)':'palevioletred','rgb(220, 20, 60)':'crimson','rgb(220, 220, 220)':'gainsboro','rgb(221, 160, 221)':'plum','rgb(222, 184, 135)':'burlywood','rgb(224, 255, 255)':'lightcyan','rgb(230, 230, 250)':'lavender','rgb(233, 150, 122)':'darksalmon','rgb(238, 232, 170)':'palegoldenrod','rgb(238, 130, 238)':'violet','rgb(240, 255, 255)':'azure','rgb(240, 255, 240)':'honeydew','rgb(240, 230, 140)':'khaki','rgb(240, 128, 128)':'lightcoral','rgb(244, 164, 96)':'sandybrown','rgb(245, 245, 220)':'beige','rgb(245, 255, 250)':'mintcream','rgb(245, 222, 179)':'wheat','rgb(245, 245, 245)':'whitesmoke','rgb(248, 248, 255)':'ghostwhite','rgb(250, 250, 210)':'lightgoldenrodyellow','rgb(250, 240, 230)':'linen','rgb(250, 128, 114)':'salmon','rgb(253, 245, 230)':'oldlace','rgb(255, 228, 196)':'bisque','rgb(255, 235, 205)':'blanchedalmond','rgb(255, 127, 80)':'coral','rgb(255, 248, 220)':'cornsilk','rgb(255, 140, 0)':'darkorange','rgb(255, 20, 147)':'deeppink','rgb(255, 250, 240)':'floralwhite','rgb(255, 215, 0)':'gold','rgb(255, 105, 180)':'hotpink','rgb(255, 255, 240)':'ivory','rgb(255, 240, 245)':'lavenderblush','rgb(255, 250, 205)':'lemonchiffon','rgb(255, 182, 193)':'lightpink','rgb(255, 160, 122)':'lightsalmon','rgb(255, 255, 224)':'lightyellow','rgb(255, 0, 255)':'magenta','rgb(255, 228, 225)':'mistyrose','rgb(255, 228, 181)':'moccasin','rgb(255, 222, 173)':'navajowhite','rgb(255, 165, 0)':'orange','rgb(255, 69, 0)':'orangered','rgb(255, 239, 213)':'papayawhip','rgb(255, 218, 185)':'peachpuff','rgb(255, 192, 203)':'pink','rgb(255, 0, 0)':'red','rgb(255, 245, 238)':'seashell','rgb(255, 250, 250)':'snow','rgb(255, 99, 71)':'tomato','rgb(255, 255, 255)':'white','rgb(255, 255, 0)':'yellow','rgb(102, 51, 153)':'rebeccapurple'};var nameToRgbObject={aqua:{r:0,g:255,b:255},aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},black:{r:0,g:0,b:0},blue:{r:0,g:0,b:255},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgreen:{r:0,g:100,b:0},darkturquoise:{r:0,g:206,b:209},deepskyblue:{r:0,g:191,b:255},green:{r:0,g:128,b:0},lime:{r:0,g:255,b:0},mediumblue:{r:0,g:0,b:205},mediumspringgreen:{r:0,g:250,b:154},navy:{r:0,g:0,b:128},springgreen:{r:0,g:255,b:127},teal:{r:0,g:128,b:128},midnightblue:{r:25,g:25,b:112},dodgerblue:{r:30,g:144,b:255},lightseagreen:{r:32,g:178,b:170},forestgreen:{r:34,g:139,b:34},seagreen:{r:46,g:139,b:87},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},limegreen:{r:50,g:205,b:50},mediumseagreen:{r:60,g:179,b:113},turquoise:{r:64,g:224,b:208},royalblue:{r:65,g:105,b:225},steelblue:{r:70,g:130,b:180},darkslateblue:{r:72,g:61,b:139},mediumturquoise:{r:72,g:209,b:204},indigo:{r:75,g:0,b:130},darkolivegreen:{r:85,g:107,b:47},cadetblue:{r:95,g:158,b:160},cornflowerblue:{r:100,g:149,b:237},mediumaquamarine:{r:102,g:205,b:170},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},slateblue:{r:106,g:90,b:205},olivedrab:{r:107,g:142,b:35},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},mediumslateblue:{r:123,g:104,b:238},lawngreen:{r:124,g:252,b:0},aquamarine:{r:127,g:255,b:212},chartreuse:{r:127,g:255,b:0},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},maroon:{r:128,g:0,b:0},olive:{r:128,g:128,b:0},purple:{r:128,g:0,b:128},lightskyblue:{r:135,g:206,b:250},skyblue:{r:135,g:206,b:235},blueviolet:{r:138,g:43,b:226},darkmagenta:{r:139,g:0,b:139},darkred:{r:139,g:0,b:0},saddlebrown:{r:139,g:69,b:19},darkseagreen:{r:143,g:188,b:143},lightgreen:{r:144,g:238,b:144},mediumpurple:{r:147,g:112,b:219},darkviolet:{r:148,g:0,b:211},palegreen:{r:152,g:251,b:152},darkorchid:{r:153,g:50,b:204},yellowgreen:{r:154,g:205,b:50},sienna:{r:160,g:82,b:45},brown:{r:165,g:42,b:42},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},greenyellow:{r:173,g:255,b:47},lightblue:{r:173,g:216,b:230},paleturquoise:{r:175,g:238,b:238},lightsteelblue:{r:176,g:196,b:222},powderblue:{r:176,g:224,b:230},firebrick:{r:178,g:34,b:34},darkgoldenrod:{r:184,g:134,b:11},mediumorchid:{r:186,g:85,b:211},rosybrown:{r:188,g:143,b:143},darkkhaki:{r:189,g:183,b:107},silver:{r:192,g:192,b:192},mediumvioletred:{r:199,g:21,b:133},indianred:{r:205,g:92,b:92},peru:{r:205,g:133,b:63},chocolate:{r:210,g:105,b:30},tan:{r:210,g:180,b:140},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},thistle:{r:216,g:191,b:216},goldenrod:{r:218,g:165,b:32},orchid:{r:218,g:112,b:214},palevioletred:{r:219,g:112,b:147},crimson:{r:220,g:20,b:60},gainsboro:{r:220,g:220,b:220},plum:{r:221,g:160,b:221},burlywood:{r:222,g:184,b:135},lightcyan:{r:224,g:255,b:255},lavender:{r:230,g:230,b:250},darksalmon:{r:233,g:150,b:122},palegoldenrod:{r:238,g:232,b:170},violet:{r:238,g:130,b:238},azure:{r:240,g:255,b:255},honeydew:{r:240,g:255,b:240},khaki:{r:240,g:230,b:140},lightcoral:{r:240,g:128,b:128},sandybrown:{r:244,g:164,b:96},beige:{r:245,g:245,b:220},mintcream:{r:245,g:255,b:250},wheat:{r:245,g:222,b:179},whitesmoke:{r:245,g:245,b:245},ghostwhite:{r:248,g:248,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},linen:{r:250,g:240,b:230},salmon:{r:250,g:128,b:114},oldlace:{r:253,g:245,b:230},bisque:{r:255,g:228,b:196},blanchedalmond:{r:255,g:235,b:205},coral:{r:255,g:127,b:80},cornsilk:{r:255,g:248,b:220},darkorange:{r:255,g:140,b:0},deeppink:{r:255,g:20,b:147},floralwhite:{r:255,g:250,b:240},fuchsia:{r:255,g:0,b:255},gold:{r:255,g:215,b:0},hotpink:{r:255,g:105,b:180},ivory:{r:255,g:255,b:240},lavenderblush:{r:255,g:240,b:245},lemonchiffon:{r:255,g:250,b:205},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightyellow:{r:255,g:255,b:224},magenta:{r:255,g:0,b:255},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},pink:{r:255,g:192,b:203},red:{r:255,g:0,b:0},seashell:{r:255,g:245,b:238},snow:{r:255,g:250,b:250},tomato:{r:255,g:99,b:71},white:{r:255,g:255,b:255},yellow:{r:255,g:255,b:0},rebeccapurple:{r:102,g:51,b:153}};module.exports={rgbToName:rgbToName,nameToRgbObject:nameToRgbObject}},{}],265:[function(require,module,exports){'use strict';module.exports=function decimalToHex(decimal){return'#'+(decimal).toString(16)}},{}],266:[function(require,module,exports){'use strict';module.exports=function hexToDecimal(hex){return parseInt(hex.substr(1),16)}},{}],267:[function(require,module,exports){'use strict';var shortToLongHex=require('./shortToLongHex');module.exports=function hexToRgb(hex){hex=shortToLongHex(hex);var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?'rgb('+parseInt(result[1],16)+', '+parseInt(result[2],16)+', '+parseInt(result[3],16)+')':null}},{"./shortToLongHex":281}],268:[function(require,module,exports){'use strict';var isRgb=require('./isRgb');var isRgba=require('./isRgba');var isHex=require('./isHex');module.exports=function isColor(str){return isHex(str)||isRgb(str)||isRgba(str)}},{"./isHex":269,"./isRgb":270,"./isRgba":271}],269:[function(require,module,exports){'use strict';module.exports=function isHex(str){var regex=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;return regex.test(str)}},{}],270:[function(require,module,exports){'use strict';module.exports=function isRgb(str){var regex=/^rgb\(\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\s*\)$/;return regex.exec(str)!==null}},{}],271:[function(require,module,exports){'use strict';module.exports=function isRgba(str){var regex=/^rgba\(\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]),\s*(0(\.\d+)?|1(\.0+)?)\s*\)$/;return regex.exec(str)!==null}},{}],272:[function(require,module,exports){'use strict';var isHex=require('./isHex');var hexToRgb=require('./hexToRgb');var rgbToObject=require('./rgbToObject');module.exports=function mixColors(from,to,percent){from=isHex(from)?hexToRgb(from):from;to=isHex(to)?hexToRgb(to):to;from=rgbToObject(from);to=rgbToObject(to);var r=from.r+((to.r-from.r)*percent);var g=from.g+((to.g-from.g)*percent);var b=from.b+((to.b-from.b)*percent);return'rgb('+Math.round(r)+', '+Math.round(g)+', '+Math.round(b)+')'}},{"./hexToRgb":267,"./isHex":269,"./rgbToObject":278}],273:[function(require,module,exports){'use strict';var rgbToObject=require('./rgbToObject');module.exports=function rgbToArray(rgb){var o=rgbToObject(rgb);return[o.r,o.g,o.b]}},{"./rgbToObject":278}],274:[function(require,module,exports){'use strict';var hexToDecimal=require('./hexToDecimal');var rgbToArray=require('./rgbToArray');var rgbToHex=require('./rgbToHex');module.exports=function rgbToDecimal(rgb){var hex=rgbToHex.apply(this,rgbToArray(rgb));return hexToDecimal(hex)}},{"./hexToDecimal":266,"./rgbToArray":273,"./rgbToHex":275}],275:[function(require,module,exports){'use strict';module.exports=function rgbToHex(r,g,b){return'#'+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1)}},{}],276:[function(require,module,exports){'use strict';module.exports=function rgbToHsl(r,g,b){if(arguments.length!==3){return!1}
r/=255;g/=255;b/=255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var sum=max+min;var diff=max-min;var h;var s;var l=(sum/2);if(max===min){h=s=0}else{s=l>0.5?diff/(2-max-min):diff/sum;switch(max){case r:h=(g-b)/diff;break;case g:h=2+((b-r)/diff);break;case b:h=4+((r-g)/diff);break}
h*=60;if(h<0){h+=360}}
return([h,Math.round(100*s),Math.round(100*l)])}},{}],277:[function(require,module,exports){'use strict';module.exports=function rgbToHsv(r,g,b){if(arguments.length!==3){return!1}
var red=r/255;var green=g/255;var blue=b/255;var max=Math.max(red,green,blue);var min=Math.min(red,green,blue);var h;var s;var v=max;var delta=max-min;s=max===0?0:delta/max;if(max===min){h=0}else{switch(max){case red:h=(green-blue)/delta+(green<blue?6:0);break;case green:h=(blue-red)/delta+2;break;case blue:h=(red-green)/delta+4;break}
h/=6}
return[Math.round(360*h),Math.round(100*s),Math.round(100*v)]}},{}],278:[function(require,module,exports){'use strict';module.exports=function rgbToObject(rgb){var regex=/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/;var match=regex.exec(rgb);return{r:Number(match[1]),g:Number(match[2]),b:Number(match[3])}}},{}],279:[function(require,module,exports){'use strict';var rgbaToObject=require('./rgbaToObject');module.exports=function rgbaToArray(rgba){var o=rgbaToObject(rgba);return[o.r,o.g,o.b,o.a]}},{"./rgbaToObject":280}],280:[function(require,module,exports){'use strict';module.exports=function rgbaToObject(rgba){var regex=/rgba\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(0(\.\d+)?|1(\.0+)?)\s*\)/;var match=regex.exec(rgba);return{r:Number(match[1]),g:Number(match[2]),b:Number(match[3]),a:Number(match[4])}}},{}],281:[function(require,module,exports){'use strict';module.exports=function shortToLongHex(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return'#'+r+r+g+g+b+b});return hex}},{}],282:[function(require,module,exports){'use strict';module.exports={createBezier:require('./ac-easing/createBezier'),createPredefined:require('./ac-easing/createPredefined'),createStep:require('./ac-easing/createStep'),Ease:require('./ac-easing/Ease')}},{"./ac-easing/Ease":283,"./ac-easing/createBezier":284,"./ac-easing/createPredefined":285,"./ac-easing/createStep":286}],283:[function(require,module,exports){'use strict';var ERR_FUNCTION_REQUIRE='Ease expects an easing function.';function Ease(func,cssString){if(typeof func!=='function'){throw new TypeError(ERR_FUNCTION_REQUIRE)}
this.easingFunction=func;this.cssString=cssString||null}
var proto=Ease.prototype;proto.getValue=function(value){return this.easingFunction(value,0,1,1)};module.exports=Ease},{}],284:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.every');var Ease=require('./Ease');var KeySpline=require('./helpers/KeySpline');var ERR_BEZIER_VALUES='Bezier curve expects exactly four (4) numbers. Given: ';module.exports=function createBezier(x1,y1,x2,y2){var pts=Array.prototype.slice.call(arguments);var allNums=pts.every(function(pt){return(typeof pt==='number')});if(pts.length!==4||!allNums){throw new TypeError(ERR_BEZIER_VALUES+pts)}
var keySpline=new KeySpline(x1,y1,x2,y2);var easingFn=function(time,begin,change,duration){return keySpline.get(time/duration)*change+begin};var cssString='cubic-bezier('+pts.join(', ')+')';return new Ease(easingFn,cssString)}},{"./Ease":283,"./helpers/KeySpline":287,"@marcom/ac-polyfills/Array/prototype.every":247}],285:[function(require,module,exports){'use strict';var createStep=require('./createStep');var cssAliases=require('./helpers/cssAliases');var easingFunctions=require('./helpers/easingFunctions');var Ease=require('./Ease');var ERR_PREDEFINED='Easing function "%TYPE%" not recognized among the following: '+Object.keys(easingFunctions).join(', ');module.exports=function createPredefined(type){var easingFn;if(type==='step-start'){return createStep(1,'start')}
else if(type==='step-end'){return createStep(1,'end')}
else{easingFn=easingFunctions[type]}
if(!easingFn){throw new Error(ERR_PREDEFINED.replace('%TYPE%',type))}
return new Ease(easingFn,cssAliases[type])}},{"./Ease":283,"./createStep":286,"./helpers/cssAliases":288,"./helpers/easingFunctions":289}],286:[function(require,module,exports){'use strict';var Ease=require('./Ease');var ERR_STEP_TYPE='Step function expects a numeric value greater than zero. Given: ';var ERR_STEP_DIRECTION='Step function direction must be either "start" or "end" (default). Given: ';module.exports=function createStep(steps,direction){direction=direction||'end';if(typeof steps!=='number'||steps<1){throw new TypeError(ERR_STEP_TYPE+steps)}
if(direction!=='start'&&direction!=='end'){throw new TypeError(ERR_STEP_DIRECTION+direction)}
var easingFn=function(time,begin,change,duration){var length=change/steps;var step=Math[(direction==='start')?'floor':'ceil'](time/duration*steps);return begin+length*step};var cssString='steps('+steps+', '+direction+')';return new Ease(easingFn,cssString)}},{"./Ease":283}],287:[function(require,module,exports){function KeySpline(mX1,mY1,mX2,mY2){this.get=function(aX){if(mX1===mY1&&mX2===mY2){return aX}
return CalcBezier(GetTForX(aX),mY1,mY2)};function A(aA1,aA2){return 1.0-3.0*aA2+3.0*aA1}
function B(aA1,aA2){return 3.0*aA2-6.0*aA1}
function C(aA1){return 3.0*aA1}
function CalcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}
function GetSlope(aT,aA1,aA2){return 3.0*A(aA1,aA2)*aT*aT+2.0*B(aA1,aA2)*aT+C(aA1)}
function GetTForX(aX){var aGuessT=aX;for(var i=0;i<4;++i){var currentSlope=GetSlope(aGuessT,mX1,mX2);if(currentSlope===0.0){return aGuessT}
var currentX=CalcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope}
return aGuessT}}
module.exports=KeySpline},{}],288:[function(require,module,exports){'use strict';var aliases={'linear':'cubic-bezier(0, 0, 1, 1)','ease':'cubic-bezier(0.25, 0.1, 0.25, 1)','ease-in':'cubic-bezier(0.42, 0, 1, 1)','ease-out':'cubic-bezier(0, 0, 0.58, 1)','ease-in-out':'cubic-bezier(0.42, 0, 0.58, 1)','ease-in-cubic':'cubic-bezier(0.55, 0.055, 0.675, 0.19)','ease-out-cubic':'cubic-bezier(0.215, 0.61, 0.355, 1)','ease-in-out-cubic':'cubic-bezier(0.645, 0.045, 0.355, 1)','ease-in-quad':'cubic-bezier(0.55, 0.085, 0.68, 0.53)','ease-out-quad':'cubic-bezier(0.25, 0.46, 0.45, 0.94)','ease-in-out-quad':'cubic-bezier(0.455, 0.03, 0.515, 0.955)','ease-in-quart':'cubic-bezier(0.895, 0.03, 0.685, 0.22)','ease-out-quart':'cubic-bezier(0.165, 0.84, 0.44, 1)','ease-in-out-quart':'cubic-bezier(0.77, 0, 0.175, 1)','ease-in-quint':'cubic-bezier(0.755, 0.05, 0.855, 0.06)','ease-out-quint':'cubic-bezier(0.23, 1, 0.32, 1)','ease-in-out-quint':'cubic-bezier(0.86, 0, 0.07, 1)','ease-in-sine':'cubic-bezier(0.47, 0, 0.745, 0.715)','ease-out-sine':'cubic-bezier(0.39, 0.575, 0.565, 1)','ease-in-out-sine':'cubic-bezier(0.445, 0.05, 0.55, 0.95)','ease-in-expo':'cubic-bezier(0.95, 0.05, 0.795, 0.035)','ease-out-expo':'cubic-bezier(0.19, 1, 0.22, 1)','ease-in-out-expo':'cubic-bezier(1, 0, 0, 1)','ease-in-circ':'cubic-bezier(0.6, 0.04, 0.98, 0.335)','ease-out-circ':'cubic-bezier(0.075, 0.82, 0.165, 1)','ease-in-out-circ':'cubic-bezier(0.785, 0.135, 0.15, 0.86)','ease-in-back':'cubic-bezier(0.6, -0.28, 0.735, 0.045)','ease-out-back':'cubic-bezier(0.175, 0.885, 0.32, 1.275)','ease-in-out-back':'cubic-bezier(0.68, -0.55, 0.265, 1.55)'};aliases.easeIn=aliases['ease-in'];aliases.easeOut=aliases['ease-out'];aliases.easeInOut=aliases['ease-in-out'];aliases.easeInCubic=aliases['ease-in-cubic'];aliases.easeOutCubic=aliases['ease-out-cubic'];aliases.easeInOutCubic=aliases['ease-in-out-cubic'];aliases.easeInQuad=aliases['ease-in-quad'];aliases.easeOutQuad=aliases['ease-out-quad'];aliases.easeInOutQuad=aliases['ease-in-out-quad'];aliases.easeInQuart=aliases['ease-in-quart'];aliases.easeOutQuart=aliases['ease-out-quart'];aliases.easeInOutQuart=aliases['ease-in-out-quart'];aliases.easeInQuint=aliases['ease-in-quint'];aliases.easeOutQuint=aliases['ease-out-quint'];aliases.easeInOutQuint=aliases['ease-in-out-quint'];aliases.easeInSine=aliases['ease-in-sine'];aliases.easeOutSine=aliases['ease-out-sine'];aliases.easeInOutSine=aliases['ease-in-out-sine'];aliases.easeInExpo=aliases['ease-in-expo'];aliases.easeOutExpo=aliases['ease-out-expo'];aliases.easeInOutExpo=aliases['ease-in-out-expo'];aliases.easeInCirc=aliases['ease-in-circ'];aliases.easeOutCirc=aliases['ease-out-circ'];aliases.easeInOutCirc=aliases['ease-in-out-circ'];aliases.easeInBack=aliases['ease-in-back'];aliases.easeOutBack=aliases['ease-out-back'];aliases.easeInOutBack=aliases['ease-in-out-back'];module.exports=aliases},{}],289:[function(require,module,exports){'use strict';var createBezier=require('../createBezier');var ease=createBezier(0.25,0.1,0.25,1.0).easingFunction;var easeIn=createBezier(0.42,0.0,1.00,1.0).easingFunction;var easeOut=createBezier(0.00,0.0,0.58,1.0).easingFunction;var easeInOut=createBezier(0.42,0.0,0.58,1.0).easingFunction;var linear=function(time,begin,change,duration){return change*time/duration+begin};var easeInQuad=function(time,begin,change,duration){return change*(time/=duration)*time+begin};var easeOutQuad=function(time,begin,change,duration){return-change*(time/=duration)*(time-2)+begin};var easeInOutQuad=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time+begin}
return-change/2*((--time)*(time-2)-1)+begin};var easeInCubic=function(time,begin,change,duration){return change*(time/=duration)*time*time+begin};var easeOutCubic=function(time,begin,change,duration){return change*((time=time/duration-1)*time*time+1)+begin};var easeInOutCubic=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time+begin}
return change/2*((time-=2)*time*time+2)+begin};var easeInQuart=function(time,begin,change,duration){return change*(time/=duration)*time*time*time+begin};var easeOutQuart=function(time,begin,change,duration){return-change*((time=time/duration-1)*time*time*time-1)+begin};var easeInOutQuart=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time*time+begin}
return-change/2*((time-=2)*time*time*time-2)+begin};var easeInQuint=function(time,begin,change,duration){return change*(time/=duration)*time*time*time*time+begin};var easeOutQuint=function(time,begin,change,duration){return change*((time=time/duration-1)*time*time*time*time+1)+begin};var easeInOutQuint=function(time,begin,change,duration){if((time/=duration/2)<1){return change/2*time*time*time*time*time+begin}
return change/2*((time-=2)*time*time*time*time+2)+begin};var easeInSine=function(time,begin,change,duration){return-change*Math.cos(time/duration*(Math.PI/2))+change+begin};var easeOutSine=function(time,begin,change,duration){return change*Math.sin(time/duration*(Math.PI/2))+begin};var easeInOutSine=function(time,begin,change,duration){return-change/2*(Math.cos(Math.PI*time/duration)-1)+begin};var easeInExpo=function(time,begin,change,duration){return(time===0)?begin:change*Math.pow(2,10*(time/duration-1))+begin};var easeOutExpo=function(time,begin,change,duration){return(time===duration)?begin+change:change*(-Math.pow(2,-10*time/duration)+1)+begin};var easeInOutExpo=function(time,begin,change,duration){if(time===0){return begin}
else if(time===duration){return begin+change}
else if((time/=duration/2)<1){return change/2*Math.pow(2,10*(time-1))+begin}
return change/2*(-Math.pow(2,-10*--time)+2)+begin};var easeInCirc=function(time,begin,change,duration){return-change*(Math.sqrt(1-(time/=duration)*time)-1)+begin};var easeOutCirc=function(time,begin,change,duration){return change*Math.sqrt(1-(time=time/duration-1)*time)+begin};var easeInOutCirc=function(time,begin,change,duration){if((time/=duration/2)<1){return-change/2*(Math.sqrt(1-time*time)-1)+begin}
return change/2*(Math.sqrt(1-(time-=2)*time)+1)+begin};var easeInElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}
else if((time/=duration)===1){return begin+change}
if(!period){period=duration*0.3}
if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}
else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}
return-(amplitude*Math.pow(2,10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period))+begin};var easeOutElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}
else if((time/=duration)===1){return begin+change}
if(!period){period=duration*0.3}
if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}
else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}
return amplitude*Math.pow(2,-10*time)*Math.sin((time*duration-shootover)*(2*Math.PI)/period)+change+begin};var easeInOutElastic=function(time,begin,change,duration){var shootover=1.70158;var period=0;var amplitude=change;if(time===0){return begin}
else if((time/=duration/2)===2){return begin+change}
if(!period){period=duration*(0.3*1.5)}
if(amplitude<Math.abs(change)){amplitude=change;shootover=period/4}
else{shootover=period/(2*Math.PI)*Math.asin(change/amplitude)}
if(time<1){return-0.5*(amplitude*Math.pow(2,10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period))+begin}
return amplitude*Math.pow(2,-10*(time-=1))*Math.sin((time*duration-shootover)*(2*Math.PI)/period)*0.5+change+begin};var easeInBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}
return change*(time/=duration)*time*((shootover+1)*time-shootover)+begin};var easeOutBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}
return change*((time=time/duration-1)*time*((shootover+1)*time+shootover)+1)+begin};var easeInOutBack=function(time,begin,change,duration,shootover){if(shootover===undefined){shootover=1.70158}
if((time/=duration/2)<1){return change/2*(time*time*(((shootover*=(1.525))+1)*time-shootover))+begin}
return change/2*((time-=2)*time*(((shootover*=(1.525))+1)*time+shootover)+2)+begin};var easeOutBounce=function(time,begin,change,duration){if((time/=duration)<(1/2.75)){return change*(7.5625*time*time)+begin}
else if(time<(2/2.75)){return change*(7.5625*(time-=(1.5/2.75))*time+0.75)+begin}
else if(time<(2.5/2.75)){return change*(7.5625*(time-=(2.25/2.75))*time+0.9375)+begin}
return change*(7.5625*(time-=(2.625/2.75))*time+0.984375)+begin};var easeInBounce=function(time,begin,change,duration){return change-easeOutBounce(duration-time,0,change,duration)+begin};var easeInOutBounce=function(time,begin,change,duration){if(time<duration/2){return easeInBounce(time*2,0,change,duration)*0.5+begin}
return easeOutBounce(time*2-duration,0,change,duration)*0.5+change*0.5+begin};module.exports={'linear':linear,'ease':ease,'easeIn':easeIn,'ease-in':easeIn,'easeOut':easeOut,'ease-out':easeOut,'easeInOut':easeInOut,'ease-in-out':easeInOut,'easeInCubic':easeInCubic,'ease-in-cubic':easeInCubic,'easeOutCubic':easeOutCubic,'ease-out-cubic':easeOutCubic,'easeInOutCubic':easeInOutCubic,'ease-in-out-cubic':easeInOutCubic,'easeInQuad':easeInQuad,'ease-in-quad':easeInQuad,'easeOutQuad':easeOutQuad,'ease-out-quad':easeOutQuad,'easeInOutQuad':easeInOutQuad,'ease-in-out-quad':easeInOutQuad,'easeInQuart':easeInQuart,'ease-in-quart':easeInQuart,'easeOutQuart':easeOutQuart,'ease-out-quart':easeOutQuart,'easeInOutQuart':easeInOutQuart,'ease-in-out-quart':easeInOutQuart,'easeInQuint':easeInQuint,'ease-in-quint':easeInQuint,'easeOutQuint':easeOutQuint,'ease-out-quint':easeOutQuint,'easeInOutQuint':easeInOutQuint,'ease-in-out-quint':easeInOutQuint,'easeInSine':easeInSine,'ease-in-sine':easeInSine,'easeOutSine':easeOutSine,'ease-out-sine':easeOutSine,'easeInOutSine':easeInOutSine,'ease-in-out-sine':easeInOutSine,'easeInExpo':easeInExpo,'ease-in-expo':easeInExpo,'easeOutExpo':easeOutExpo,'ease-out-expo':easeOutExpo,'easeInOutExpo':easeInOutExpo,'ease-in-out-expo':easeInOutExpo,'easeInCirc':easeInCirc,'ease-in-circ':easeInCirc,'easeOutCirc':easeOutCirc,'ease-out-circ':easeOutCirc,'easeInOutCirc':easeInOutCirc,'ease-in-out-circ':easeInOutCirc,'easeInBack':easeInBack,'ease-in-back':easeInBack,'easeOutBack':easeOutBack,'ease-out-back':easeOutBack,'easeInOutBack':easeInOutBack,'ease-in-out-back':easeInOutBack,'easeInElastic':easeInElastic,'ease-in-elastic':easeInElastic,'easeOutElastic':easeOutElastic,'ease-out-elastic':easeOutElastic,'easeInOutElastic':easeInOutElastic,'ease-in-out-elastic':easeInOutElastic,'easeInBounce':easeInBounce,'ease-in-bounce':easeInBounce,'easeOutBounce':easeOutBounce,'ease-out-bounce':easeOutBounce,'easeInOutBounce':easeInOutBounce,'ease-in-out-bounce':easeInOutBounce}},{"../createBezier":284}],290:[function(require,module,exports){'use strict';module.exports={EventEmitterMicro:require('./ac-event-emitter-micro/EventEmitterMicro')}},{"./ac-event-emitter-micro/EventEmitterMicro":291}],291:[function(require,module,exports){'use strict';function EventEmitterMicro(){this._events={}}
var proto=EventEmitterMicro.prototype;proto.on=function(eventName,callback){this._events[eventName]=this._events[eventName]||[];this._events[eventName].unshift(callback)};proto.once=function(eventName,callback){var that=this;function fn(data){that.off(eventName,fn);if(data!==undefined)callback(data);else callback()}
this.on(eventName,fn)};proto.off=function(eventName,callback){if(!this.has(eventName))return;var index=this._events[eventName].indexOf(callback);if(index===-1)return;this._events[eventName].splice(index,1)};proto.trigger=function(eventName,data){if(!this.has(eventName))return;for(var i=this._events[eventName].length-1;i>=0;i--){if(data!==undefined)this._events[eventName][i](data);else this._events[eventName][i]()}};proto.has=function(eventName){if(eventName in this._events===!1||this._events[eventName].length===0){return!1}
return!0};proto.destroy=function(){for(var eventName in this._events){this._events[eventName]=null}
this._events=null};module.exports=EventEmitterMicro},{}],292:[function(require,module,exports){'use strict';module.exports={Transform:require('./ac-transform/Transform')}},{"./ac-transform/Transform":293}],293:[function(require,module,exports){'use strict';var mat4=require("./gl-matrix/mat4");var vec3=require("./gl-matrix/vec3");var vec4=require("./gl-matrix/vec4");var degToRad=Math.PI/180;var radToDeg=180/Math.PI;var m11=0,mA=0,m12=1,mB=1,m13=2,m14=3;var m21=4,mC=4,m22=5,mD=5,m23=6,m24=7;var m31=8,m32=9,m33=10,m34=11;var m41=12,mE=12,m42=13,mF=13,m43=14,m44=15;function Transform(){this.m=mat4.create()}
var proto=Transform.prototype;proto.rotateX=function(deg){var rad=degToRad*deg;mat4.rotateX(this.m,this.m,rad);return this};proto.rotateY=function(deg){var rad=degToRad*deg;mat4.rotateY(this.m,this.m,rad);return this};proto.rotateZ=function(deg){var rad=degToRad*deg;mat4.rotateZ(this.m,this.m,rad);return this};proto.rotate=proto.rotateZ;proto.rotate3d=function(x,y,z,deg){if(y===null||y===undefined)y=x;if(z===null||y===undefined)z=x;var rad=degToRad*deg;mat4.rotate(this.m,this.m,rad,[x,y,z]);return this};proto.rotateAxisAngle=proto.rotate3d;proto.scale=function(sx,sy){sy=sy||sx;mat4.scale(this.m,this.m,[sx,sy,1]);return this};proto.scaleX=function(sx){mat4.scale(this.m,this.m,[sx,1,1]);return this};proto.scaleY=function(sy){mat4.scale(this.m,this.m,[1,sy,1]);return this};proto.scaleZ=function(sz){mat4.scale(this.m,this.m,[1,1,sz]);return this};proto.scale3d=function(sx,sy,sz){mat4.scale(this.m,this.m,[sx,sy,sz]);return this};proto.skew=function(ax,ay){if(ay===null||ay===undefined){return this.skewX(ax)}
ax=degToRad*ax;ay=degToRad*ay;var transform=mat4.create();transform[mC]=Math.tan(ax);transform[mB]=Math.tan(ay);mat4.multiply(this.m,this.m,transform);return this};proto.skewX=function(ax){ax=degToRad*ax;var transform=mat4.create();transform[mC]=Math.tan(ax);mat4.multiply(this.m,this.m,transform);return this};proto.skewY=function(ay){ay=degToRad*ay;var transform=mat4.create();transform[mB]=Math.tan(ay);mat4.multiply(this.m,this.m,transform);return this};proto.translate=function(tx,ty){ty=ty||0;mat4.translate(this.m,this.m,[tx,ty,0]);return this};proto.translate3d=function(tx,ty,tz){mat4.translate(this.m,this.m,[tx,ty,tz]);return this};proto.translateX=function(tx){mat4.translate(this.m,this.m,[tx,0,0]);return this};proto.translateY=function(ty){mat4.translate(this.m,this.m,[0,ty,0]);return this};proto.translateZ=function(tz){mat4.translate(this.m,this.m,[0,0,tz]);return this};proto.perspective=function(depth){var t=mat4.create();if(depth!==0){t[m34]=-1.0/depth}
mat4.multiply(this.m,this.m,t)};proto.inverse=function(){var t=this.clone();t.m=mat4.invert(t.m,this.m);return t};proto.reset=function(){mat4.identity(this.m);return this};proto.getTranslateXY=function(){var m=this.m;if(this.isAffine()){return[m[mE],m[mF]]}
return[m[m41],m[m42]]};proto.getTranslateXYZ=function(){var m=this.m;if(this.isAffine()){return[m[mE],m[mF],0]}
return[m[m41],m[m42],m[m43]]};proto.getTranslateX=function(){var m=this.m;if(this.isAffine()){return m[mE]}
return m[m41]};proto.getTranslateY=function(){var m=this.m;if(this.isAffine()){return m[mF]}
return m[m42]};proto.getTranslateZ=function(){var m=this.m;if(this.isAffine()){return 0}
return m[m43]};proto.clone=function(){var t=new Transform();t.m=mat4.clone(this.m);return t};proto.toArray=function(){var m=this.m;if(this.isAffine()){return[m[mA],m[mB],m[mC],m[mD],m[mE],m[mF]]}
return[m[m11],m[m12],m[m13],m[m14],m[m21],m[m22],m[m23],m[m24],m[m31],m[m32],m[m33],m[m34],m[m41],m[m42],m[m43],m[m44]]};proto.fromArray=function(arr){this.m=Array.prototype.slice.call(arr);return this};proto.setMatrixValue=function(string){string=String(string).trim();var m=mat4.create();if(string==='none'){this.m=m;return this}
var type=string.slice(0,string.indexOf('(')),parts,i;if(type==='matrix3d'){parts=string.slice(9,-1).split(',');for(i=0;i<parts.length;i++){m[i]=parseFloat(parts[i])}}else if(type==='matrix'){parts=string.slice(7,-1).split(',');for(i=parts.length;i--;)parts[i]=parseFloat(parts[i]);m[m11]=parts[0];m[m12]=parts[1];m[m41]=parts[4];m[m21]=parts[2];m[m22]=parts[3];m[m42]=parts[5]}else{throw new TypeError('Invalid Matrix Value')}
this.m=m;return this};var isZero=function(val){return Math.abs(val)<1e-4};proto.decompose=function(convertToDegrees){convertToDegrees=convertToDegrees||!1;var matrix=mat4.clone(this.m);var translation=vec3.create();var scale=vec3.create();var skew=vec3.create();var perspective=vec4.create();var quaternion=vec4.create();var eulerRotation=vec3.create();for(var i=0;i<16;i++)
matrix[i]/=matrix[m44];var perspectiveMatrix=mat4.clone(matrix);perspectiveMatrix[m14]=0;perspectiveMatrix[m24]=0;perspectiveMatrix[m34]=0;perspectiveMatrix[m44]=1;var a03=matrix[3],a13=matrix[7],a23=matrix[11],a30=matrix[12],a31=matrix[13],a32=matrix[14],a33=matrix[15];var rightHandSide=vec4.create();if(!isZero(matrix[m14])||!isZero(matrix[m24])||!isZero(matrix[m34])){rightHandSide[0]=matrix[m14];rightHandSide[1]=matrix[m24];rightHandSide[2]=matrix[m34];rightHandSide[3]=matrix[m44];var inversePerspectiveMatrix=mat4.invert(mat4.create(),perspectiveMatrix);var transposedInversePerspectiveMatrix=mat4.transpose(mat4.create(),inversePerspectiveMatrix);perspective=vec4.transformMat4(perspective,rightHandSide,transposedInversePerspectiveMatrix)}else{perspective=vec4.fromValues(0,0,0,1)}
translation[0]=a30;translation[1]=a31;translation[2]=a32;var row=[vec3.create(),vec3.create(),vec3.create()];row[0][0]=matrix[0];row[0][1]=matrix[1];row[0][2]=matrix[2];row[1][0]=matrix[4];row[1][1]=matrix[5];row[1][2]=matrix[6];row[2][0]=matrix[8];row[2][1]=matrix[9];row[2][2]=matrix[10];scale[0]=vec3.length(row[0]);vec3.normalize(row[0],row[0]);skew[0]=vec3.dot(row[0],row[1]);row[1]=this._combine(row[1],row[0],1.0,-skew[0]);scale[1]=vec3.length(row[1]);vec3.normalize(row[1],row[1]);skew[0]/=scale[1];skew[1]=vec3.dot(row[0],row[2]);row[2]=this._combine(row[2],row[0],1.0,-skew[1]);skew[2]=vec3.dot(row[1],row[2]);row[2]=this._combine(row[2],row[1],1.0,-skew[2]);scale[2]=vec3.length(row[2]);vec3.normalize(row[2],row[2]);skew[1]/=scale[2];skew[2]/=scale[2];var pdum3=vec3.cross(vec3.create(),row[1],row[2]);if(vec3.dot(row[0],pdum3)<0){for(i=0;i<3;i++){scale[i]*=-1;row[i][0]*=-1;row[i][1]*=-1;row[i][2]*=-1}}
quaternion[0]=0.5*Math.sqrt(Math.max(1+row[0][0]-row[1][1]-row[2][2],0));quaternion[1]=0.5*Math.sqrt(Math.max(1-row[0][0]+row[1][1]-row[2][2],0));quaternion[2]=0.5*Math.sqrt(Math.max(1-row[0][0]-row[1][1]+row[2][2],0));quaternion[3]=0.5*Math.sqrt(Math.max(1+row[0][0]+row[1][1]+row[2][2],0));if(row[2][1]>row[1][2])
quaternion[0]=-quaternion[0];if(row[0][2]>row[2][0])
quaternion[1]=-quaternion[1];if(row[1][0]>row[0][1])
quaternion[2]=-quaternion[2];var axisAngle=vec4.fromValues(quaternion[0],quaternion[1],quaternion[2],2*Math.acos(quaternion[3]));var rotation=this._rotationFromQuat(quaternion);if(convertToDegrees){skew[0]=Math.round(skew[0]*radToDeg*100)/100;skew[1]=Math.round(skew[1]*radToDeg*100)/100;skew[2]=Math.round(skew[2]*radToDeg*100)/100;rotation[0]=Math.round(rotation[0]*radToDeg*100)/100;rotation[1]=Math.round(rotation[1]*radToDeg*100)/100;rotation[2]=Math.round(rotation[2]*radToDeg*100)/100;axisAngle[3]=Math.round(axisAngle[3]*radToDeg*100)/100}
return{translation:translation,scale:scale,skew:skew,perspective:perspective,quaternion:quaternion,eulerRotation:rotation,axisAngle:axisAngle}};proto.recompose=function(translation,scale,skew,perspective,quaternion){translation=translation||vec3.create();scale=scale||vec3.create();skew=skew||vec3.create();perspective=perspective||vec4.create();quaternion=quaternion||vec4.create();var matrix=mat4.fromRotationTranslation(mat4.create(),quaternion,translation);matrix[m14]=perspective[0];matrix[m24]=perspective[1];matrix[m34]=perspective[2];matrix[m44]=perspective[3];var temp=mat4.create();if(skew[2]!==0){temp[m32]=skew[2];mat4.multiply(matrix,matrix,temp)}
if(skew[1]!==0){temp[m32]=0;temp[m31]=skew[1];mat4.multiply(matrix,matrix,temp)}
if(skew[0]){temp[m31]=0;temp[4]=skew[0];mat4.multiply(matrix,matrix,temp)}
mat4.scale(matrix,matrix,scale);this.m=matrix;return this};proto.isAffine=function(){return(this.m[m13]===0&&this.m[m14]===0&&this.m[m23]===0&&this.m[m24]===0&&this.m[m31]===0&&this.m[m32]===0&&this.m[m33]===1&&this.m[m34]===0&&this.m[m43]===0&&this.m[m44]===1)};proto.toString=function(){var m=this.m;if(this.isAffine()){return'matrix('+m[mA]+', '+m[mB]+', '+m[mC]+', '+m[mD]+', '+m[mE]+', '+m[mF]+')'}
return'matrix3d('+m[m11]+', '+m[m12]+', '+m[m13]+', '+m[m14]+', '+m[m21]+', '+m[m22]+', '+m[m23]+', '+m[m24]+', '+m[m31]+', '+m[m32]+', '+m[m33]+', '+m[m34]+', '+m[m41]+', '+m[m42]+', '+m[m43]+', '+m[m44]+')'};proto.toCSSString=proto.toString;proto._combine=function(A,B,ascl,bscl){var result=vec3.create();result[0]=(ascl*A[0])+(bscl*B[0]);result[1]=(ascl*A[1])+(bscl*B[1]);result[2]=(ascl*A[2])+(bscl*B[2]);return result};proto._matrix2dToMat4=function(matrix){var out=mat4.create();for(var i=0;i<4;i++){for(var j=0;j<4;j++){out[i*4+j]=matrix[i][j]}}
return out};proto._mat4ToMatrix2d=function(ref){var matrix=[];for(var i=0;i<4;i++){matrix[i]=[];for(var j=0;j<4;j++){matrix[i][j]=ref[i*4+j]}}
return matrix};proto._rotationFromQuat=function(q){var sqw=q[3]*q[3];var sqx=q[0]*q[0];var sqy=q[1]*q[1];var sqz=q[2]*q[2];var unit=sqx+sqy+sqz+sqw;var test=q[0]*q[1]+q[2]*q[3];var x,y,z;if(test>0.499*unit){y=2*Math.atan2(q[0],q[3]);z=Math.PI/2;x=0;return vec3.fromValues(x,y,z)}
if(test<-0.499*unit){y=-2*Math.atan2(q[0],q[3]);z=-Math.PI/2;x=0;return vec3.fromValues(x,y,z)}
y=Math.atan2(2*q[1]*q[3]-2*q[0]*q[2],sqx-sqy-sqz+sqw);z=Math.asin(2*test/unit);x=Math.atan2(2*q[0]*q[3]-2*q[1]*q[2],-sqx+sqy-sqz+sqw);return vec3.fromValues(x,y,z)};module.exports=Transform},{"./gl-matrix/mat4":294,"./gl-matrix/vec3":295,"./gl-matrix/vec4":296}],294:[function(require,module,exports){var mat4={create:require('gl-mat4/create'),rotate:require('gl-mat4/rotate'),rotateX:require('gl-mat4/rotateX'),rotateY:require('gl-mat4/rotateY'),rotateZ:require('gl-mat4/rotateZ'),scale:require('gl-mat4/scale'),multiply:require('gl-mat4/multiply'),translate:require('gl-mat4/translate'),invert:require('gl-mat4/invert'),clone:require('gl-mat4/clone'),transpose:require('gl-mat4/transpose'),identity:require('gl-mat4/identity'),fromRotationTranslation:require('gl-mat4/fromRotationTranslation')};module.exports=mat4},{"gl-mat4/clone":958,"gl-mat4/create":959,"gl-mat4/fromRotationTranslation":960,"gl-mat4/identity":961,"gl-mat4/invert":962,"gl-mat4/multiply":963,"gl-mat4/rotate":964,"gl-mat4/rotateX":965,"gl-mat4/rotateY":966,"gl-mat4/rotateZ":967,"gl-mat4/scale":968,"gl-mat4/translate":969,"gl-mat4/transpose":970}],295:[function(require,module,exports){var vec3={create:require("gl-vec3/create"),dot:require("gl-vec3/dot"),normalize:require("gl-vec3/normalize"),length:require("gl-vec3/length"),cross:require("gl-vec3/cross"),fromValues:require("gl-vec3/fromValues")};module.exports=vec3},{"gl-vec3/create":971,"gl-vec3/cross":972,"gl-vec3/dot":973,"gl-vec3/fromValues":974,"gl-vec3/length":975,"gl-vec3/normalize":976}],296:[function(require,module,exports){var vec4={create:require('gl-vec4/create'),transformMat4:require('gl-vec4/transformMat4'),fromValues:require('gl-vec4/fromValues')};module.exports=vec4},{"gl-vec4/create":977,"gl-vec4/fromValues":978,"gl-vec4/transformMat4":979}],297:[function(require,module,exports){'use strict';require('./helpers/Float32Array');var transitionEnd=require('./helpers/transitionEnd');var Clip=require('@marcom/ac-clip').Clip;var ClipEasing=require('./clips/ClipEasing');var ClipInlineCss=require('./clips/ClipInlineCss');var ClipTransitionCss=require('./clips/ClipTransitionCss');function ClipFactory(target,duration,propsTo,options){if(target.nodeType){if(transitionEnd===undefined||(options&&options.inlineStyles)){return new ClipInlineCss(target,duration,propsTo,options)}
return new ClipTransitionCss(target,duration,propsTo,options)}
return new ClipEasing(target,duration,propsTo,options)}
for(var prop in Clip){if(typeof Clip[prop]==='function'&&prop.substr(0,1)!=='_'){ClipFactory[prop]=Clip[prop].bind(Clip)}}
ClipFactory.to=function(target,duration,propsTo,options){options=options||{};if(options.destroyOnComplete===undefined){options.destroyOnComplete=!0}
return new ClipFactory(target,duration,propsTo,options).play()};ClipFactory.from=function(target,duration,propsFrom,options){options=options||{};options.propsFrom=propsFrom;if(options.destroyOnComplete===undefined){options.destroyOnComplete=!0}
return new ClipFactory(target,duration,options.propsTo,options).play()};module.exports=ClipFactory},{"./clips/ClipEasing":300,"./clips/ClipInlineCss":301,"./clips/ClipTransitionCss":302,"./helpers/Float32Array":305,"./helpers/transitionEnd":314,"@marcom/ac-clip":260}],298:[function(require,module,exports){'use strict';module.exports=require('./timeline/Timeline')},{"./timeline/Timeline":316}],299:[function(require,module,exports){'use strict';module.exports={Clip:require('./Clip'),Timeline:require('./Timeline')}},{"./Clip":297,"./Timeline":298}],300:[function(require,module,exports){'use strict';var clone=require('@marcom/ac-object/clone');var create=require('@marcom/ac-object/create');var createPredefined=require('@marcom/ac-easing').createPredefined;var isCssCubicBezierString=require('../helpers/isCssCubicBezierString');var BezierCurveCssManager=require('../helpers/BezierCurveCssManager');var Clip=require('@marcom/ac-clip').Clip;var Ease=require('@marcom/ac-easing').Ease;function ClipEasing(target,duration,propsTo,options){if(options&&isCssCubicBezierString(options.ease)){options.ease=BezierCurveCssManager.create(options.ease).toEasingFunction()}
options=options||{};this._propsEase=options.propsEase||{};Clip.call(this,target,duration,propsTo,options)}
var Super=Clip.prototype;var proto=ClipEasing.prototype=create(Super);proto.reset=function(){var returnValue=Super.reset.call(this);if(this._clips){var i=this._clips.length;while(i--){this._clips[i].reset()}}
return returnValue};proto.destroy=function(){if(this._clips){var i=this._clips.length;while(i--){this._clips[i].destroy()}
this._clips=null}
this._eases=null;this._storeOnUpdate=null;return Super.destroy.call(this)};proto._prepareProperties=function(){var easeCount=0;var groupsTo={};var groupsFrom={};var eases={};var prop;var ease;if(this._propsEase){for(prop in this._propsTo){if(this._propsTo.hasOwnProperty(prop)){ease=this._propsEase[prop];if(isCssCubicBezierString(ease)){ease=BezierCurveCssManager.create(ease).toEasingFunction()}
if(ease===undefined){if(groupsTo[this._ease]===undefined){groupsTo[this._ease]={};groupsFrom[this._ease]={};eases[this._ease]=this._ease.easingFunction;easeCount++}
groupsTo[this._ease][prop]=this._propsTo[prop];groupsFrom[this._ease][prop]=this._propsFrom[prop]}else if(typeof ease==='function'){groupsTo[easeCount]={};groupsFrom[easeCount]={};groupsTo[easeCount][prop]=this._propsTo[prop];groupsFrom[easeCount][prop]=this._propsFrom[prop];eases[easeCount]=ease;easeCount++}else{if(groupsTo[ease]===undefined){groupsTo[ease]={};groupsFrom[ease]={};eases[ease]=ease;easeCount++}
groupsTo[ease][prop]=this._propsTo[prop];groupsFrom[ease][prop]=this._propsFrom[prop]}}}
if(easeCount>1){var optionsClone=clone(this._options||{},!0);var duration=this._duration*0.001;this._storeOnUpdate=this._onUpdate;this._onUpdate=this._onUpdateClips;optionsClone.onStart=null;optionsClone.onUpdate=null;optionsClone.onDraw=null;optionsClone.onComplete=null;this._clips=[];for(ease in groupsTo){if(groupsTo.hasOwnProperty(ease)){optionsClone.ease=eases[ease];optionsClone.propsFrom=groupsFrom[ease];this._clips.push(new Clip(this._target,duration,groupsTo[ease],optionsClone))}}
ease='linear';this._propsTo={};this._propsFrom={}}else{for(prop in eases){if(eases.hasOwnProperty(prop)){ease=eases[prop]}}}
if(ease!==undefined){this._ease=(typeof ease==='function')?new Ease(ease):createPredefined(ease)}}
return Super._prepareProperties.call(this)};proto._onUpdateClips=function(clip){var progress=(this._direction===1)?clip.progress():1-clip.progress();var i=this._clips.length;while(i--){this._clips[i].progress(progress)}
if(typeof this._storeOnUpdate==='function'){this._storeOnUpdate.call(this,this)}};module.exports=ClipEasing},{"../helpers/BezierCurveCssManager":304,"../helpers/isCssCubicBezierString":310,"@marcom/ac-clip":260,"@marcom/ac-easing":282,"@marcom/ac-object/clone":235,"@marcom/ac-object/create":236}],301:[function(require,module,exports){'use strict';var setStyle=require('@marcom/ac-dom-styles/setStyle');var convertToStyleObject=require('../helpers/convertToStyleObject');var convertToTransitionableObjects=require('../helpers/convertToTransitionableObjects');var create=require('@marcom/ac-object/create');var removeTransitions=require('../helpers/removeTransitions');var ClipEasing=require('./ClipEasing');function ClipInlineCss(target,duration,propsTo,options){options=options||{};this._el=target;this._storeOnStart=options.onStart||null;this._storeOnDraw=options.onDraw||null;this._storeOnComplete=options.onComplete||null;options.onStart=this._onStart;options.onDraw=this._onDraw;options.onComplete=this._onComplete;ClipEasing.call(this,{},duration,propsTo,options)}
var Super=ClipEasing.prototype;var proto=ClipInlineCss.prototype=create(Super);proto.play=function(){var returnValue=Super.play.call(this);if(this._remainingDelay!==0){setStyle(this._el,convertToStyleObject(this._target))}
return returnValue};proto.reset=function(){var returnValue=Super.reset.call(this);setStyle(this._el,convertToStyleObject(this._target));return returnValue};proto.destroy=function(){this._el=null;this._completeStyles=null;this._storeOnStart=null;this._storeOnDraw=null;this._storeOnComplete=null;return Super.destroy.call(this)};proto.target=function(){return this._el};proto._prepareProperties=function(){var converted=convertToTransitionableObjects(this._el,this._propsTo,this._propsFrom);this._target=converted.target;this._propsFrom=converted.propsFrom;this._propsTo=converted.propsTo;removeTransitions(this._el,this._target);var completeStyles=(this._isYoyo)?this._propsFrom:this._propsTo;this._completeStyles=convertToStyleObject(completeStyles);if(this._options.removeStylesOnComplete!==undefined){var prop;var removeStyles=this._options.removeStylesOnComplete;if(typeof removeStyles==='boolean'&&removeStyles){for(prop in this._completeStyles){if(this._completeStyles.hasOwnProperty(prop)){this._completeStyles[prop]=null}}}else if(typeof removeStyles==='object'&&removeStyles.length){var i=removeStyles.length;while(i--){prop=removeStyles[i];if(this._completeStyles.hasOwnProperty(prop)){this._completeStyles[prop]=null}}}}
return Super._prepareProperties.call(this)};proto._onStart=function(clip){if(this.playing()&&this._direction===1&&this._delay===0){setStyle(this._el,convertToStyleObject(this._propsFrom))}
if(typeof this._storeOnStart==='function'){this._storeOnStart.call(this,this)}};proto._onDraw=function(clip){setStyle(this._el,convertToStyleObject(this._target));if(typeof this._storeOnDraw==='function'){this._storeOnDraw.call(this,this)}};proto._onComplete=function(clip){setStyle(this._el,this._completeStyles);if(typeof this._storeOnComplete==='function'){this._storeOnComplete.call(this,this)}};module.exports=ClipInlineCss},{"../helpers/convertToStyleObject":307,"../helpers/convertToTransitionableObjects":308,"../helpers/removeTransitions":311,"./ClipEasing":300,"@marcom/ac-dom-styles/setStyle":214,"@marcom/ac-object/create":236}],302:[function(require,module,exports){'use strict';var setStyle=require('@marcom/ac-dom-styles/setStyle');var getStyle=require('@marcom/ac-dom-styles/getStyle');var convertToStyleObject=require('../helpers/convertToStyleObject');var convertToTransitionableObjects=require('../helpers/convertToTransitionableObjects');var clone=require('@marcom/ac-object/clone');var create=require('@marcom/ac-object/create');var createPredefined=require('@marcom/ac-easing').createPredefined;var isCssCubicBezierString=require('../helpers/isCssCubicBezierString');var removeTransitions=require('../helpers/removeTransitions');var transitionEnd=require('../helpers/transitionEnd');var waitAnimationFrames=require('../helpers/waitAnimationFrames');var BezierCurveCssManager=require('../helpers/BezierCurveCssManager');var Clip=require('@marcom/ac-clip').Clip;var ClipEasing=require('./ClipEasing');var PageVisibilityManager=require('@marcom/ac-page-visibility').PageVisibilityManager;var DEFAULT_EASE='ease';var ERROR_EASE_NOT_SUPPORTED='%EASE% is not a supported predefined ease when transitioning with Elements '+'and CSS transition. If you need to use %EASE% then pass the inlineStyle:true option.';var ERROR_EASE_IS_FUNCTION='Function eases are not supported when using CSS transitions with Elements. '+'Either use a cubic-bezier string (e.g. \'cubic-bezier(0, 0, 1, 1)\' or pass the '+'inlineStyle option as `true` to render styles each frame instead of using CSS transitions.';function ClipTransitionCss(target,duration,propsTo,options){options=options||{};this._el=target;this._storeEase=options.ease;if(typeof this._storeEase==='function'){throw new Error(ERROR_EASE_IS_FUNCTION)}
this._storeOnStart=options.onStart||null;this._storeOnComplete=options.onComplete||null;options.onStart=this._onStart.bind(this);options.onComplete=this._onComplete.bind(this);this._stylesTo=clone(propsTo,!0);this._stylesFrom=(options.propsFrom)?clone(options.propsFrom,!0):{};this._propsEase=(options.propsEase)?clone(options.propsEase,!0):{};if(isCssCubicBezierString(options.ease)){options.ease=BezierCurveCssManager.create(options.ease).toEasingFunction()}
Clip.call(this,{},duration,{},options);this._propsFrom={}}
var Super=Clip.prototype;var proto=ClipTransitionCss.prototype=create(Super);proto.play=function(){var returnValue=Super.play.call(this);if(this._direction===1&&this.progress()===0&&this._remainingDelay!==0){this._applyStyles(0,convertToStyleObject(this._stylesFrom))}
return returnValue};proto.reset=function(){var returnValue=Super.reset.call(this);this._stylesClip.reset();this._applyStyles(0,convertToStyleObject(this._styles));return returnValue};proto.destroy=function(){PageVisibilityManager.off('changed',this._onVisibilityChanged);this._removeTransitionListener();this.off('pause',this._onPaused);this._onPaused();this._stylesClip.destroy();this._stylesClip=null;this._el=null;this._propsArray=null;this._styles=null;this._stylesFrom=null;this._stylesTo=null;this._completeStyles=null;this._storeOnStart=null;this._storeOnComplete=null;this._onTransitionEnded=null;return Super.destroy.call(this)};proto.target=function(){return this._el};proto.duration=function(duration){var returnValue=Super.duration.call(this,duration);if(duration===undefined){return returnValue}
if(this.playing()){this.progress(this._progress)}
return returnValue};proto.progress=function(progress){var returnValue=Super.progress.call(this,progress);if(progress===undefined){return returnValue}
progress=(this._direction===1)?progress:1-progress;this._stylesClip.progress(progress);this._applyStyles(0,convertToStyleObject(this._styles));if(this.playing()){this._isWaitingForStylesToBeApplied=!0;waitAnimationFrames(this._setStylesAfterWaiting,2)}
return returnValue};proto._prepareProperties=function(){var converted=convertToTransitionableObjects(this._el,this._stylesTo,this._stylesFrom);this._styles=converted.target;this._stylesTo=converted.propsTo;this._stylesFrom=converted.propsFrom;var ease=this._storeEase||DEFAULT_EASE;this._eases={};this._propsArray=[];var convertedEase;this._styleCompleteTo=convertToStyleObject(this._stylesTo);this._styleCompleteFrom=convertToStyleObject(this._stylesFrom);this._propsEaseKeys={};var prop;for(prop in this._stylesTo){if(this._stylesTo.hasOwnProperty(prop)){this._propsArray[this._propsArray.length]=prop;if(this._propsEase[prop]===undefined){if(this._eases[ease]===undefined){convertedEase=this._convertEase(ease);this._eases[ease]=convertedEase.css}
this._propsEaseKeys[prop]=ease}else if(this._eases[this._propsEase[prop]]===undefined){convertedEase=this._convertEase(this._propsEase[prop]);this._eases[this._propsEase[prop]]=convertedEase.css;this._propsEaseKeys[prop]=this._propsEase[prop];this._propsEase[prop]=convertedEase.js}else if(isCssCubicBezierString(this._propsEase[prop])){this._propsEaseKeys[prop]=this._propsEase[prop];this._propsEase[prop]=this._eases[this._propsEase[prop]]['1'].toEasingFunction()}}}
this._onPaused=this._onPaused.bind(this);this.on('pause',this._onPaused);this._setOtherTransitions();this._currentTransitionStyles=this._otherTransitions;this._completeStyles=convertToStyleObject((this._isYoyo)?this._stylesFrom:this._stylesTo);if(this._options.removeStylesOnComplete!==undefined){var removeStyles=this._options.removeStylesOnComplete;if(typeof removeStyles==='boolean'&&removeStyles){for(prop in this._stylesTo){this._completeStyles[prop]=null}}else if(typeof removeStyles==='object'&&removeStyles.length){var i=removeStyles.length;while(i--){this._completeStyles[removeStyles[i]]=null}}}
this._onTransitionEnded=this._onTransitionEnded.bind(this);this._setStylesAfterWaiting=this._setStylesAfterWaiting.bind(this);this._onVisibilityChanged=this._onVisibilityChanged.bind(this);PageVisibilityManager.on(PageVisibilityManager.CHANGED,this._onVisibilityChanged);this._stylesClip=new ClipEasing(this._styles,1,this._stylesTo,{ease:this._options.ease,propsFrom:this._stylesFrom,propsEase:this._options.propsEase});Clip._remove(this._stylesClip);return Super._prepareProperties.call(this)};proto._convertEase=function(ease){if(typeof ease==='function'){throw new Error(ERROR_EASE_IS_FUNCTION)}
var bezierCurve;var jsEase;if(isCssCubicBezierString(ease)){bezierCurve=BezierCurveCssManager.create(ease);jsEase=bezierCurve.toEasingFunction()}else{var predefinedEase=createPredefined(ease);if(predefinedEase.cssString===null){throw new Error(ERROR_EASE_NOT_SUPPORTED.replace(/%EASE%/g,ease))}
bezierCurve=BezierCurveCssManager.create(predefinedEase.cssString);jsEase=ease}
return{css:{'1':bezierCurve,'-1':bezierCurve.reversed()},js:jsEase}};proto._complete=function(){if((this._isWaitingForStylesToBeApplied||this._isTransitionEnded||!this._isListeningForTransitionEnd)&&this.progress()===1){this._isWaitingForStylesToBeApplied=!1;Super._complete.call(this)}};proto._onTransitionEnded=function(){this._isTransitionEnded=!0;this._complete()};proto._addTransitionListener=function(){if(!this._isListeningForTransitionEnd&&this._el&&this._onTransitionEnded){this._isListeningForTransitionEnd=!0;this._isTransitionEnded=!1;this._el.addEventListener(transitionEnd,this._onTransitionEnded)}};proto._removeTransitionListener=function(){if(this._isListeningForTransitionEnd&&this._el&&this._onTransitionEnded){this._isListeningForTransitionEnd=!1;this._isTransitionEnded=!1;this._el.removeEventListener(transitionEnd,this._onTransitionEnded)}};proto._applyStyles=function(duration,styles){if(duration>0){var transition='';var eases={};var prop;for(prop in this._eases){if(this._eases.hasOwnProperty(prop)){eases[prop]=this._eases[prop][this._direction].splitAt(this.progress()).toCSSString()}}
for(prop in this._stylesTo){if(this._stylesTo.hasOwnProperty(prop)){transition+=prop+' '+duration+'ms '+eases[this._propsEaseKeys[prop]]+' 0ms, '}}
this._currentTransitionStyles=transition.substr(0,transition.length-2);if(!this._doStylesMatchCurrentStyles(styles)){this._addTransitionListener()}else{this._removeTransitionListener()}}else{this._currentTransitionStyles='';this._removeTransitionListener()}
styles.transition=this._getOtherClipTransitionStyles()+this._currentTransitionStyles;setStyle(this._el,styles)};proto._doStylesMatchCurrentStyles=function(newStyles){var currentStyles=getStyle.apply(this,[this._el].concat([this._propsArray]));var style;for(style in newStyles){if(newStyles.hasOwnProperty(style)&&currentStyles.hasOwnProperty(style)&&newStyles[style]!==currentStyles[style]){return!1}}
return!0};proto._setStylesAfterWaiting=function(){this._isWaitingForStylesToBeApplied=!1;if(this.playing()){var duration=this._durationMs*(1-this.progress());var styles=(this._direction>0)?this._styleCompleteTo:this._styleCompleteFrom;this._applyStyles(duration,styles)}};proto._setOtherTransitions=function(){removeTransitions(this._el,this._stylesTo);var clips=Clip.getAll(this._el);var i=clips.length;while(i--){if(clips[i]!==this&&clips[i].playing()&&clips[i]._otherTransitions&&clips[i]._otherTransitions.length){this._otherTransitions=clips[i]._otherTransitions;return}}
this._otherTransitions=getStyle(this._el,'transition').transition;if(this._otherTransitions===null||this._otherTransitions==='all 0s ease 0s'){this._otherTransitions=''}};proto._getTransitionStyles=function(){var transition=this._getOtherClipTransitionStyles();if(this._otherTransitions.length){transition+=this._otherTransitions}else if(transition.length){transition=transition.substr(0,transition.length-2)}
return transition};proto._getOtherClipTransitionStyles=function(){var transition='';var clips=Clip.getAll(this._el);var i=clips.length;while(i--){if(clips[i]!==this&&clips[i].playing()&&clips[i]._currentTransitionStyles&&clips[i]._currentTransitionStyles.length){transition+=clips[i]._currentTransitionStyles+', '}}
return transition};proto._onVisibilityChanged=function(evt){if(this.playing()&&!evt.isHidden){this._update({timeNow:this._getTime()});var progress=this.progress();if(progress<1){this.progress(progress)}}};proto._onPaused=function(clip){var styles=getStyle.apply(this,[this._el].concat([this._propsArray]));styles.transition=this._getTransitionStyles();this._removeTransitionListener();setStyle(this._el,styles)};proto._onStart=function(clip){var waitFrames=(this._direction===1&&this.progress()===0&&this._delay===0)?2:0;if(waitFrames){this._isWaitingForStylesToBeApplied=!0;this._applyStyles(0,this._styleCompleteFrom)}
waitAnimationFrames(this._setStylesAfterWaiting,waitFrames);if(typeof this._storeOnStart==='function'){this._storeOnStart.call(this,this)}};proto._onComplete=function(clip){this._removeTransitionListener();this._completeStyles.transition=this._getTransitionStyles();setStyle(this._el,this._completeStyles);if(typeof this._storeOnComplete==='function'){this._storeOnComplete.call(this,this)}};module.exports=ClipTransitionCss},{"../helpers/BezierCurveCssManager":304,"../helpers/convertToStyleObject":307,"../helpers/convertToTransitionableObjects":308,"../helpers/isCssCubicBezierString":310,"../helpers/removeTransitions":311,"../helpers/transitionEnd":314,"../helpers/waitAnimationFrames":315,"./ClipEasing":300,"@marcom/ac-clip":260,"@marcom/ac-dom-styles/getStyle":212,"@marcom/ac-dom-styles/setStyle":214,"@marcom/ac-easing":282,"@marcom/ac-object/clone":235,"@marcom/ac-object/create":236,"@marcom/ac-page-visibility":238}],303:[function(require,module,exports){'use strict';var createBezier=require('@marcom/ac-easing').createBezier;function BezierCurveCss(curve,manager){this.manager=manager;this.p1={x:curve[0],y:curve[1]};this.p2={x:curve[2],y:curve[3]};this._isLinear=(this.p1.x===this.p1.y)&&(this.p2.x===this.p2.y);this._cacheSplits={}}
var proto=BezierCurveCss.prototype;proto.splitAt=function(percent){if(this._isLinear){return this}
percent=Math.round(percent*40)/40;if(percent===0){return this}else if(this._cacheSplits[percent]!==undefined){return this._cacheSplits[percent]}
var x=[this.p1.x,this.p2.x];var y=[this.p1.y,this.p2.y];var maxIterations=0;var targetX=percent;var min=0;var max=1;var startX=this._getStartX(percent,x);while(targetX!==startX&&maxIterations<1000){if(targetX<startX){max=percent}else{min=percent}
percent=min+((max-min)*0.5);startX=this._getStartX(percent,x);++maxIterations}
var split=this._splitBezier(percent,x,y);var normalized=this._normalize(split);var newBezierCurve=this.manager.create(normalized);this._cacheSplits[targetX]=newBezierCurve;return newBezierCurve};proto.reversed=function(){var arr=this.toArray();return this.manager.create([0.5-(arr[2]-0.5),0.5-(arr[3]-0.5),0.5-(arr[0]-0.5),0.5-(arr[1]-0.5)])};proto.toArray=function(){return[this.p1.x,this.p1.y,this.p2.x,this.p2.y]};proto.toCSSString=function(){return'cubic-bezier('+this.p1.x+', '+this.p1.y+', '+this.p2.x+', '+this.p2.y+')'};proto.toEasingFunction=function(){return createBezier.apply(this,this.toArray()).easingFunction};proto._getStartX=function(p,x){var cp=p-1;var p2=p*p;var cp2=cp*cp;var p3=p2*p;return p3-3*p2*cp*x[1]+3*p*cp2*x[0]};proto._splitBezier=function(p,x,y){var cp=p-1;var p2=p*p;var cp2=cp*cp;var p3=p2*p;return[p3-3*p2*cp*x[1]+3*p*cp2*x[0],p3-3*p2*cp*y[1]+3*p*cp2*y[0],p2-2*p*cp*x[1]+cp2*x[0],p2-2*p*cp*y[1]+cp2*y[0],p-cp*x[1],p-cp*y[1]]};proto._normalize=function(array){return[(array[2]-array[0])/(1-array[0]),(array[3]-array[1])/(1-array[1]),(array[4]-array[0])/(1-array[0]),(array[5]-array[1])/(1-array[1])]};module.exports=BezierCurveCss},{"@marcom/ac-easing":282}],304:[function(require,module,exports){'use strict';var BezierCurveCss=require('./BezierCurveCss');function BezierCurveCssManager(){this._instances={}}
var proto=BezierCurveCssManager.prototype;proto.create=function(curve){var key;if(typeof curve==='string'){key=curve.replace(/ /g,'')}else{key='cubic-bezier('+curve.join(',')+')'}
if(this._instances[key]===undefined){if(typeof curve==='string'){curve=curve.match(/\d*\.?\d+/g);var i=curve.length;while(i--){curve[i]=Number(curve[i])}}
this._instances[key]=new BezierCurveCss(curve,this)}
return this._instances[key]};module.exports=new BezierCurveCssManager()},{"./BezierCurveCss":303}],305:[function(require,module,exports){'use strict';if(typeof window.Float32Array==='undefined'){window.Float32Array=function(){}}},{}],306:[function(require,module,exports){'use strict';var getDimensions=require('@marcom/ac-dom-metrics/getDimensions');var splitUnits=require('./splitUnits');var percentagePropToDimention={translateX:'width',translateY:'height'};function TransformMatrix(transform,el,styles){this._transform=transform;var split;var value;var prop;for(prop in styles){if(styles.hasOwnProperty(prop)&&typeof this._transform[prop]==='function'){split=splitUnits(styles[prop]);if(split.unit==='%'){value=this._convertPercentToPixelValue(prop,split.value,el)}else{value=split.value}
this._transform[prop].call(this._transform,value)}}}
var proto=TransformMatrix.prototype;proto._convertPercentToPixelValue=function(prop,value,el){prop=percentagePropToDimention[prop];var dimentions=getDimensions(el);if(dimentions[prop]){value*=0.01;return dimentions[prop]*value}
return value};proto.toArray=function(){return this._transform.toArray()};proto.toCSSString=function(){return this._transform.toCSSString()};module.exports=TransformMatrix},{"./splitUnits":312,"@marcom/ac-dom-metrics/getDimensions":191}],307:[function(require,module,exports){'use strict';module.exports=function convertToStyleObject(target){var styles={};var matrix;var prop;for(prop in target){if(target.hasOwnProperty(prop)&&target[prop]!==null){if(target[prop].isColor){if(target[prop].isRgb){styles[prop]='rgb('+Math.round(target[prop].r)+', '+Math.round(target[prop].g)+', '+Math.round(target[prop].b)+')'}else if(target[prop].isRgba){styles[prop]='rgba('+Math.round(target[prop].r)+', '+Math.round(target[prop].g)+', '+Math.round(target[prop].b)+', '+target[prop].a+')'}}else if(prop==='transform'){matrix=(target[prop].length===6)?'matrix':'matrix3d';styles[prop]=matrix+'('+target[prop].join(',')+')'}else if(!target[prop].unit){styles[prop]=target[prop].value}else{styles[prop]=target[prop].value+target[prop].unit}}}
return styles}},{}],308:[function(require,module,exports){'use strict';var getStyle=require('@marcom/ac-dom-styles/getStyle');var clone=require('@marcom/ac-object/clone');var splitUnits=require('./splitUnits');var toCamCase=require('./toCamCase');var Color=require('@marcom/ac-color').Color;var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');var Transform=require('@marcom/ac-transform').Transform;var TransformMatrix=require('./TransformMatrix');var toColorObject=function(color){if(Color.isRgba(color)){color=new Color(color).rgbaObject();color.isRgba=!0}else{color=new Color(color).rgbObject();color.isRgb=!0}
color.isColor=!0;return color};var convertRgbToRgbaObject=function(obj){if(obj.isRgb){obj.isRgb=!1;obj.isRgba=!0;obj.a=1}};var standardizeColors=function(target,propsFrom,propsTo){if(target.isRgba||propsFrom.isRgba||propsTo.isRgba){convertRgbToRgbaObject(target);convertRgbToRgbaObject(propsFrom);convertRgbToRgbaObject(propsTo)}};var convertMatrixTo3d=function(matrix){return[matrix[0],matrix[1],0,0,matrix[2],matrix[3],0,0,0,0,1,0,matrix[4],matrix[5],0,1]};var standardizeMatrices=function(target,propsFrom,propsTo){if(target.transform.length===16||propsFrom.transform.length===16||propsTo.transform.length===16){if(target.transform.length===6){target.transform=convertMatrixTo3d(target.transform)}
if(propsFrom.transform.length===6){propsFrom.transform=convertMatrixTo3d(propsFrom.transform)}
if(propsTo.transform.length===6){propsTo.transform=convertMatrixTo3d(propsTo.transform)}}};module.exports=function convertToTransitionableObjects(el,propsTo,propsFrom){var target={};propsTo=clone(propsTo,!0);propsFrom=clone(propsFrom,!0);var style;var mTarget;var mTo;var mFrom;var isTransformSupported=cssPropertyAvailable('transform');var prop;for(prop in propsTo){if(propsTo.hasOwnProperty(prop)&&propsTo[prop]!==null){if(prop==='transform'){if(isTransformSupported){mTarget=new Transform();style=getStyle(el,'transform')['transform']||'none';mTarget.setMatrixValue(style);mTo=new TransformMatrix(new Transform(),el,propsTo[prop])}
if(mTo&&mTo.toCSSString()!==mTarget.toCSSString()){mFrom=new TransformMatrix(propsFrom[prop]?new Transform():mTarget.clone(),el,propsFrom[prop]);target[prop]=mTarget.toArray();propsTo[prop]=mTo.toArray();propsFrom[prop]=mFrom.toArray()}else{target[prop]=null;propsTo[prop]=null}}else{style=getStyle(el,prop)[toCamCase(prop)]||propsFrom[prop];if(Color.isColor(style)){target[prop]=toColorObject(style);propsFrom[prop]=(propsFrom[prop]!==undefined)?toColorObject(propsFrom[prop]):clone(target[prop],!0);propsTo[prop]=toColorObject(propsTo[prop])}else{target[prop]=splitUnits(style);propsFrom[prop]=(propsFrom[prop]!==undefined)?splitUnits(propsFrom[prop]):clone(target[prop],!0);propsTo[prop]=splitUnits(propsTo[prop])}}}}
for(prop in propsFrom){if(propsFrom.hasOwnProperty(prop)&&propsFrom[prop]!==null&&(propsTo[prop]===undefined||propsTo[prop]===null)){if(prop==='transform'){if(isTransformSupported){mTarget=new Transform();mTarget.setMatrixValue(getComputedStyle(el).transform||getComputedStyle(el).webkitTransform||'none');mFrom=new TransformMatrix(new Transform(),el,propsFrom[prop])}
if(mFrom&&mFrom.toCSSString()!==mTarget.toCSSString()){mTo=new TransformMatrix(mTarget.clone());target[prop]=mTarget.toArray();propsTo[prop]=mTo.toArray();propsFrom[prop]=mFrom.toArray()}else{target[prop]=null;propsTo[prop]=null;propsFrom[prop]=null}}else{style=getStyle(el,prop)[toCamCase(prop)];if(Color.isColor(style)){target[prop]=toColorObject(style);propsTo[prop]=clone(target[prop],!0);propsFrom[prop]=toColorObject(propsFrom[prop])}else{target[prop]=splitUnits(style);propsFrom[prop]=splitUnits(propsFrom[prop]);propsTo[prop]=clone(target[prop],!0)}}}
if(target[prop]&&target[prop].isColor){standardizeColors(target[prop],propsFrom[prop],propsTo[prop])}}
if(target.transform){standardizeMatrices(target,propsFrom,propsTo)}
return{target:target,propsTo:propsTo,propsFrom:propsFrom}}},{"./TransformMatrix":306,"./splitUnits":312,"./toCamCase":313,"@marcom/ac-color":262,"@marcom/ac-dom-styles/getStyle":212,"@marcom/ac-feature/cssPropertyAvailable":225,"@marcom/ac-object/clone":235,"@marcom/ac-transform":292}],309:[function(require,module,exports){'use strict';module.exports=function getShorthandTransition(styles){if(styles.transitionProperty){var transition='';var props=styles.transitionProperty.split(', ');var duration=styles.transitionDuration.split(', ');var ease=styles.transitionTimingFunction.replace(/\d+[,]+[\s]/gi,function(match){return match.substr(0,match.length-1)}).split(', ');var delay=styles.transitionDelay.split(', ');var i=props.length;while(i--){transition+=props[i]+' '+duration[i]+' '+ease[i]+' '+delay[i]+', '}
return transition.substr(0,transition.length-2)}
return!1}},{}],310:[function(require,module,exports){'use strict';module.exports=function isCssCubicBezierString(str){return typeof str==='string'&&str.substr(0,13)==='cubic-bezier('}},{}],311:[function(require,module,exports){'use strict';var setStyle=require('@marcom/ac-dom-styles/setStyle');var getStyle=require('@marcom/ac-dom-styles/getStyle');var getShorthandTransition=require('./getShorthandTransition');module.exports=function removeTransitions(el,propsTo){var transition=getStyle(el,'transition','transition-property','transition-duration','transition-timing-function','transition-delay');transition=transition.transition||getShorthandTransition(transition);if(transition&&transition.length){transition=transition.split(',');var deleteCount=0;var prop;var i=transition.length;while(i--){prop=transition[i].trim().split(' ')[0];if(propsTo[prop]!==undefined){transition.splice(i,1);++deleteCount}}
if(deleteCount){if(transition.length===0){transition=['all']}
setStyle(el,{'transition':transition.join(',').trim()})}}}},{"./getShorthandTransition":309,"@marcom/ac-dom-styles/getStyle":212,"@marcom/ac-dom-styles/setStyle":214}],312:[function(require,module,exports){'use strict';module.exports=function splitUnits(value){value=String(value);if(value.indexOf(' ')>-1){throw new Error('Shorthand CSS is not supported. Please use longhand CSS only.')}
var regex=/(\d*\.?\d*)(.*)/;var multipler=1;if(value&&value.substr(0,1)==='-'){value=value.substr(1);multipler=-1}
var match=String(value).match(regex);return{value:Number(match[1])*multipler,unit:match[2]}}},{}],313:[function(require,module,exports){'use strict';module.exports=function toCamCase(str){var camelCaseReplace=function(match,group,offset,string){return(offset===0)&&(string.substr(1,3)!=='moz')?group:group.toUpperCase()};return str.replace(/-(\w)/g,camelCaseReplace)}},{}],314:[function(require,module,exports){'use strict';var transitionEnd;module.exports=(function transitionEndEvent(){if(transitionEnd){return transitionEnd}
var t;var el=document.createElement('fakeelement');var transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(t in transitions){if(el.style[t]!==undefined){transitionEnd=transitions[t];return transitionEnd}}})()},{}],315:[function(require,module,exports){'use strict';var PageVisibilityManager=require('@marcom/ac-page-visibility').PageVisibilityManager;module.exports=function waitAnimationFrames(callback,frames){if(frames){var rAF=function(cb){if(PageVisibilityManager.isHidden){setTimeout(cb,16)}else{window.requestAnimationFrame(cb)}};var count=0;var waitFunc=function(){if(count===frames){callback.call(this)}else{++count;rAF(waitFunc)}};waitFunc()}else{callback.call(this)}}},{"@marcom/ac-page-visibility":238}],316:[function(require,module,exports){'use strict';var create=require('@marcom/ac-object/create');var Clip=require('@marcom/ac-clip').Clip;var TimelineClip=require('./TimelineClip');var TimelineCallback=require('./TimelineCallback');var TimelineItemList=require('./TimelineItemList');var superProto=Clip.prototype;function Timeline(options){options=options||{};options.ease=options.ease||'linear';options.destroyOnComplete=!1;this.options=options;Clip.call(this,{t:0},0,{t:1},options);this._itemList=new TimelineItemList()}
var proto=Timeline.prototype=create(superProto);Timeline.prototype.constructor=Timeline;proto._update=function(evt){superProto._update.call(this,evt);this._render()};proto.progress=function(progress){superProto.progress.call(this,progress);if(progress!==undefined){this._render()}
return this._progress};proto._render=function(){if(this._itemList.length===0){return}
var renderTime=this._target.t*this._duration;var aClip=this._itemList.head;var next=aClip;while(next){next=aClip.next;var offsetTime=(renderTime-aClip.position);aClip.currentTime(offsetTime);aClip=next}};proto.addClip=function(clip,position){position=(position===undefined)?this.duration():position;var builtInDelay=clip._delay/1000;this._itemList.append(new TimelineClip(clip,position+builtInDelay));this._updateDuration()};proto.addCallback=function(fn,position){position=(position===undefined)?this.duration():position;this._itemList.append(new TimelineCallback(fn,position));this._updateDuration()};proto.remove=function(clipOrFunction){var item=this._itemList.getItem(clipOrFunction);if(item){this._itemList.remove(item);this._updateDuration()}};proto._updateDuration=function(){var lastClip=this._itemList.head;var duration=lastClip.position+lastClip.duration();this._itemList.forEach(function(clip){var newDuration=clip.position+clip.duration();if(newDuration>=duration){lastClip=clip;duration=newDuration}});this.duration(duration)};proto.destroy=function(){var next=this._itemList.head;while(next){var timelineClip=next;next=timelineClip.next;this._itemList.remove(timelineClip)}
this._duration=0;return superProto.destroy.call(this)};module.exports=Timeline},{"./TimelineCallback":317,"./TimelineClip":318,"./TimelineItemList":319,"@marcom/ac-clip":260,"@marcom/ac-object/create":236}],317:[function(require,module,exports){'use strict';function TimelineCallback(fn,position){this.callback=fn;this._delay=0;this.position=position;this._hasTriggered=!1;this.prev=null;this.next=null}
var proto=TimelineCallback.prototype;proto.duration=function(){return 0};proto.currentTime=function(offsetTime){if(offsetTime>=0&&!this._hasTriggered){this.callback();this._hasTriggered=!0}
if(offsetTime<0&&this._hasTriggered){this.callback();this._hasTriggered=!1}
return 0};module.exports=TimelineCallback},{}],318:[function(require,module,exports){'use strict';function TimelineClip(clip,position){this.clip=clip;this.position=position;this.duration=this.clip.duration.bind(this.clip);this.lastProgress=-1;this.prev=null;this.next=null}
var proto=TimelineClip.prototype;proto.currentTime=function(offsetTime){var clampedProgress=Math.min(1,Math.max(0,offsetTime/this.clip._duration));if(clampedProgress!==clampedProgress){clampedProgress=1}
if(this.lastProgress===clampedProgress){return this.lastProgress}
if(this.lastProgress===0||clampedProgress===0||this.lastProgress===-1){if(this.clip._storeOnStart){this.clip._storeOnStart(this.clip)}}
this.clip._playing=(clampedProgress*this.clip._duration===this.clip._duration);this.lastProgress=this.clip.progress(clampedProgress);return this.lastProgress};proto.destroy=function(){this.clip.destroy();this.prev=null;this.next=null;this.duration=null};module.exports=TimelineClip},{}],319:[function(require,module,exports){'use strict';var TimelineClip=require('./TimelineClip');var TimelineCallback=require('./TimelineCallback');var TimelineItemList=function(){this.head=null;this.tail=null;this.length=0};var proto=TimelineItemList.prototype;proto.append=function(clip){clip.prev=null;clip.next=null;if(this.tail){this.tail.next=clip;clip.prev=this.tail}else{this.head=clip}
this.tail=clip;this.length++};proto.remove=function(clip){if(clip===this.head){this.head=this.head.next}else if(clip===this.tail){this.tail=this.tail.prev}
if(clip.prev){clip.prev.next=clip.next}
if(clip.next){clip.next.prev=clip.prev}
clip.next=clip.prev=null;if(this.head===null){this.tail=null}
this.length--};proto.getItem=function(clipOrFunction){var next=this.head;while(next){var item=next;if((item instanceof TimelineClip&&item.clip===clipOrFunction)||(item instanceof TimelineCallback&&item.callback===clipOrFunction)){return item}
next=item.next}
return null};proto.forEach=function(callback){var i=0;var next=this.head;while(next){var clip=next;callback(clip,i,this.length);next=clip.next}};proto.destroy=function(){while(this.head){var item=this.head;this.remove(item);item.destroy()}};module.exports=TimelineItemList},{"./TimelineCallback":317,"./TimelineClip":318}],320:[function(require,module,exports){'use strict';var Clip=require('@marcom/ac-eclipse').Clip;var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');module.exports=function fade(el,from,to,duration,options){if(cssPropertyAvailable('opacity')){options=options||{};if(duration){options.propsFrom=options.propsFrom||{};options.propsFrom.opacity=from;return Clip.to(el,duration,{opacity:to},options)}
else{el.style.opacity=to;if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}
else{el.style.visibility=(to)?'visible':'hidden';if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}},{"@marcom/ac-eclipse":299,"@marcom/ac-feature/cssPropertyAvailable":225}],321:[function(require,module,exports){'use strict';var Clip=require('@marcom/ac-eclipse').Clip;var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');module.exports=function fadeIn(el,duration,options){options=options||{};if(cssPropertyAvailable('opacity')){if(duration){return Clip.to(el,duration,{opacity:1},options)}
else{el.style.opacity=1;if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}
else{el.style.visibility='visible';if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}},{"@marcom/ac-eclipse":299,"@marcom/ac-feature/cssPropertyAvailable":225}],322:[function(require,module,exports){'use strict';var Clip=require('@marcom/ac-eclipse').Clip;var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');module.exports=function fadeOut(el,duration,options){options=options||{};if(cssPropertyAvailable('opacity')){if(duration){return Clip.to(el,duration,{opacity:0},options)}
else{el.style.opacity=0;if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}
else{el.style.visibility='hidden';if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}},{"@marcom/ac-eclipse":299,"@marcom/ac-feature/cssPropertyAvailable":225}],323:[function(require,module,exports){'use strict';var Clip=require('@marcom/ac-eclipse').Clip;var ac_dom_styles=require('@marcom/ac-dom-styles');var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');module.exports=function move(el,x,y,duration,options){options=options||{};var to;if(cssPropertyAvailable('transition')){to={transform:{translateX:x+'px',translateY:y+'px'}}}else{to={left:x+'px',top:y+'px'}}
if(duration){return Clip.to(el,duration,to,options)}
else{ac_dom_styles.setStyle(el,to);if(typeof options.onStart==='function'){options.onStart()}
if(typeof options.onComplete==='function'){options.onComplete()}}}},{"@marcom/ac-dom-styles":211,"@marcom/ac-eclipse":299,"@marcom/ac-feature/cssPropertyAvailable":225}],324:[function(require,module,exports){'use strict';var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');var move=require('./move');module.exports=function moveX(el,x,duration,options){return move(el,x,0,duration,options)}},{"./move":323,"@marcom/ac-feature/cssPropertyAvailable":225}],325:[function(require,module,exports){'use strict';var Clip=require('@marcom/ac-eclipse').Clip;module.exports=function scroll(el,x,y,duration,options){options=options||{};var isWindow=el===window;var currentScrollPositionX;var currentScrollPositionY;if(isWindow){currentScrollPositionX=el.scrollX;currentScrollPositionY=el.scrollY}else{currentScrollPositionX=el.scrollLeft;currentScrollPositionY=el.scrollTop}
var scrollPosition={x:currentScrollPositionX,y:currentScrollPositionY};var to={x:x,y:y};if(typeof options.onDraw==='function'){var storeOnDraw=options.onDraw}
var newOnDraw=function(evt){if(isWindow){el.scrollTo(scrollPosition.x,scrollPosition.y)}else{el.scrollLeft=scrollPosition.x;el.scrollTop=scrollPosition.y}
if(storeOnDraw){storeOnDraw.call(this,evt)}};options.onDraw=newOnDraw;return Clip.to(scrollPosition,duration,to,options)}},{"@marcom/ac-eclipse":299}],326:[function(require,module,exports){'use strict';var scroll=require('./scroll');module.exports=function scrollX(el,x,duration,options){var isWindow=el===window;var currentScrollPositionY;if(isWindow){currentScrollPositionY=el.scrollY}else{currentScrollPositionY=el.scrollTop}
return scroll(el,x,currentScrollPositionY,duration,options)}},{"./scroll":325}],327:[function(require,module,exports){'use strict';var ac_classList=require('@marcom/ac-classlist');var analyticsManager=require('./singletons/analyticsManager');var create=require('@marcom/ac-object/create');var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var Item=require('./Item');function Gallery(options){options=options||{};this._wrapAround=options.wrapAround||!1;this._itemType=options.itemType||Item;this._items=[];this._itemsIdLookup={};this.showNext=this.showNext.bind(this);this.showPrevious=this.showPrevious.bind(this);this._update=this._update.bind(this);this._updateItems=this._updateItems.bind(this);EventEmitterMicro.call(this);if(options.startAt){this._startAt(options.startAt)}
Gallery._add(this,options.analyticsOptions)}
Gallery.FADE='fade';Gallery.FADE_SELECTOR='[data-ac-gallery-fade]';Gallery.SLIDE='slide';Gallery.SLIDE_SELECTOR='[data-ac-gallery-slide]';Gallery.UPDATE='update';Gallery.UPDATE_COMPLETE='update:complete';var superProto=EventEmitterMicro.prototype;var proto=Gallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}else if(this._items.indexOf(item)>-1){return item}
if(typeof index==='number'){this._items.splice(index,0,item)}else{this._items.push(item)}
if(this._items.length===1){item.show();this._setCurrentItem(item)}else{item.hide();if(this.getNextItem()===item){this._setNextItem(item)}
if(this.getPreviousItem()===item){this._setPreviousItem(item)}}
if(item.getElementId()!==null){this._itemsIdLookup[item.getElementId()]=item}
item.on(Item.SELECTED,this._update);return item};proto.removeItem=function(item,options){options=options||{};if(typeof item==='number'){item=this._items[item]}
var index=this._items.indexOf(item);if(index>-1){var nextItem=this.getNextItem();var previousItem=this.getPreviousItem();this._items.splice(index,1);item.off(Item.SELECTED,this._update);if(nextItem===item){this._setNextItem(this.getNextItem())}
if(previousItem===item){this._setPreviousItem(this.getPreviousItem())}}
if(item===this._currentItem&&this._items.length&&options.setCurrentItem!==!1){this._update({item:this._items[0]});this._setLastItem(null)}
if(options.destroyItem&&item.getElement()){item.destroy()}
return item};proto.show=function(item,options){if(typeof item==='number'){item=this._items[item]}else if(typeof item==='string'){item=this._itemsIdLookup[item]}
if(item){options=options||{};this._update({item:item,interactionEvent:options.interactionEvent})}
return item||null};proto.showNext=function(options){var item=this.getNextItem();if(item){this.show(item,options)}
return item};proto.showPrevious=function(options){var item=this.getPreviousItem();if(item){this.show(item,options)}
return item};proto.isInView=function(){return this._currentItem&&this._currentItem.isInView()};proto.getTotalItems=function(){return this._items.length};proto.getItems=function(){return this._items};proto.getItem=function(key){if(typeof key==='number'){return this.getItemAt(key)}else if(typeof key==='string'){return this.getItemById(key)}};proto.getItemAt=function(index){return this._items[index]||null};proto.getItemById=function(id){return this._itemsIdLookup[id]||null};proto.getItemIndex=function(item){return this._items.indexOf(item)};proto.getCurrentItem=function(){return this._currentItem||null};proto.getLastItem=function(){return this._lastItem||null};proto.getNextItem=function(){var item;var index=this._items.indexOf(this._currentItem);if(index<this._items.length-1){item=this._items[index+1]}else if(this._wrapAround){item=this._items[0]}
return item||null};proto.getPreviousItem=function(){var item;var index=this._items.indexOf(this._currentItem);if(index>0){item=this._items[index-1]}else if(this._wrapAround){item=this._items[this._items.length-1]}
return item||null};proto.getId=function(){return this._id};proto.destroy=function(options){options=options||{};if(options.destroyItems===undefined){options.destroyItems=!0}
this._setCurrentItem(null);if(options.destroyItems){var item;while(this._items.length){item=this._items[0];item.off(Item.SELECTED,this._update);this.removeItem(item,{destroyItem:!0,setCurrentItem:!1})}}
this._items=null;this._itemsIdLookup=null;Gallery._remove(this);return superProto.destroy.call(this)};proto._startAt=function(index){var item=this._items[index];if(item&&(this._currentItem!==item)){this._currentItem.hide();this._setCurrentItem(item);this._currentItem.show();this.trigger(Gallery.UPDATE,this._items)}};proto._setCurrentItem=function(item){if(this._currentItem&&this._currentItem.getElement()&&this._currentItem!==item){ac_classList.remove(this._currentItem.getElement(),Item.CSS_CURRENT_ITEM);this._setLastItem(this._currentItem)}
this._currentItem=item;if(this._currentItem&&this._currentItem.getElement()){ac_classList.add(this._currentItem.getElement(),Item.CSS_CURRENT_ITEM);this._setNextItem(this.getNextItem());this._setPreviousItem(this.getPreviousItem())}};proto._setLastItem=function(item){if(this._lastItem&&this._lastItem.getElement()&&this._lastItem!==item){ac_classList.remove(this._lastItem.getElement(),Item.CSS_LAST_ITEM)}
this._lastItem=item;if(this._lastItem&&this._lastItem.getElement()){ac_classList.add(this._lastItem.getElement(),Item.CSS_LAST_ITEM)}};proto._setNextItem=function(item){if(this._nextItem&&this._nextItem.getElement()&&this._nextItem!==item){ac_classList.remove(this._nextItem.getElement(),Item.CSS_NEXT_ITEM)}
this._nextItem=item;if(this._nextItem&&this._nextItem.getElement()){ac_classList.add(this._nextItem.getElement(),Item.CSS_NEXT_ITEM)}};proto._setPreviousItem=function(item){if(this._previousItem&&this._previousItem.getElement()&&this._previousItem!==item){ac_classList.remove(this._previousItem.getElement(),Item.CSS_PREVIOUS_ITEM)}
this._previousItem=item;if(this._previousItem&&this._previousItem.getElement()){ac_classList.add(this._previousItem.getElement(),Item.CSS_PREVIOUS_ITEM)}};proto._updateItems=function(items,silent){if(items.outgoing[0]){items.outgoing[0].hide()}
items.incoming[0].show();if(!silent){this.trigger(Gallery.UPDATE_COMPLETE,items)}};proto._update=function(evt){var hasChanged=this._currentItem!==evt.item;if(hasChanged){this._setCurrentItem(evt.item)}
var items={incoming:[evt.item],outgoing:(this._lastItem)?[this._lastItem]:[],interactionEvent:evt.interactionEvent||null};if(hasChanged){this.trigger(Gallery.UPDATE,items)}
this._updateItems(items,!hasChanged)};Gallery._instantiate=function(){this._galleries=[];this._idCounter=0;return this};Gallery._add=function(gallery,analyticsOptions){this._galleries.push(gallery);gallery._id=++this._idCounter;analyticsManager.add(gallery,analyticsOptions)};Gallery._remove=function(gallery){var index=this._galleries.indexOf(gallery);if(index>-1){this._galleries.splice(index,1);analyticsManager.remove(gallery)}};Gallery.getAll=function(){return Array.prototype.slice.call(this._galleries)};Gallery.getAllInView=function(){var inView=[];var index=this._galleries.length;while(index--){if(this._galleries[index].isInView()){inView.push(this._galleries[index])}}
return inView};Gallery.destroyAll=function(){var i=this._galleries.length;while(i--){this._galleries[i].destroy()}
this._galleries=[]};module.exports=Gallery._instantiate()},{"./Item":328,"./singletons/analyticsManager":342,"@marcom/ac-classlist":170,"@marcom/ac-event-emitter-micro":215,"@marcom/ac-object/create":236}],328:[function(require,module,exports){'use strict';var ac_classList=require('@marcom/ac-classlist');var ac_addEventListener=require('@marcom/ac-dom-events/addEventListener');var ac_removeEventListener=require('@marcom/ac-dom-events/removeEventListener');var preventDefault=require('@marcom/ac-dom-events/preventDefault');var isInViewport=require('@marcom/ac-dom-metrics/isInViewport');var getPercentInViewport=require('@marcom/ac-dom-metrics/getPercentInViewport');var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var create=require('@marcom/ac-object/create');var tabManager=require('./singletons/tabManager');var keyMap=require('@marcom/ac-keyboard/keyMap');var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var Keyboard=require('@marcom/ac-keyboard');var CSS_CURRENT='current';function Item(el,options){this._el=el;options=options||{};this._triggerKeys=[];this._triggerEls={};this._isShown=!1;this._isACaption=(options.isACaption===undefined)?!1:options.isACaption;this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this);this._onTriggered=this._onTriggered.bind(this);if(!this._isACaption){this._el.setAttribute('role','tabpanel')}
this._focusableEls=ac_querySelectorAll(tabManager.focusableSelectors,el);EventEmitterMicro.call(this)}
Item.CSS_CURRENT_ITEM='ac-gallery-currentitem';Item.CSS_LAST_ITEM='ac-gallery-lastitem';Item.CSS_NEXT_ITEM='ac-gallery-nextitem';Item.CSS_PREVIOUS_ITEM='ac-gallery-previousitem';Item.SELECTED='selected';Item.SHOW='show';Item.HIDE='hide';var proto=Item.prototype=create(EventEmitterMicro.prototype);proto.show=function(){this._isShown=!0;this._addCurrentClassToTriggers();this._setTabIndexOnFocusableItems(null);this._el.removeAttribute('aria-hidden');this.trigger(Item.SHOW,this)};proto.hide=function(){this._isShown=!1;this._removeCurrentClassFromTriggers();this._setTabIndexOnFocusableItems('-1');this._el.setAttribute('aria-hidden','true');this.trigger(Item.HIDE,this)};proto.addElementTrigger=function(el,eventType){eventType=eventType||'click';if(this._triggerEls[eventType]===undefined){this._triggerEls[eventType]=[]}
var index=this._triggerEls[eventType].indexOf(el);if(index<0){el.setAttribute('role','tab');el.setAttribute('tabindex','0');var id=this.getElementId();if(id){el.setAttribute('aria-controls',id)}
id=el.getAttribute('id');if(id&&this._el.getAttribute('aria-labelledby')===null){this._el.setAttribute('aria-labelledby',id)}
ac_addEventListener(el,eventType,this._onTriggered);this._triggerEls[eventType].push(el);if(this._isShown){el.setAttribute('aria-selected','true');ac_classList.add(el,CSS_CURRENT)}else{el.setAttribute('aria-selected','false')}}};proto.removeElementTrigger=function(el,eventType){eventType=eventType||'click';if(this._triggerEls[eventType]===undefined){return}
var index=this._triggerEls[eventType].indexOf(el);if(index>-1){this._cleanElementTrigger(el,eventType)}
if(this._triggerEls[eventType].length===0){this._triggerEls[eventType]=undefined}};proto.addKeyTrigger=function(key){if(typeof key==='string'){key=keyMap[key.toUpperCase()]}
if(typeof key==='number'){var index=this._triggerKeys.indexOf(key);if(index<0){Keyboard.onDown(key,this._onKeyboardInteraction);this._triggerKeys.push(key)}}};proto.removeKeyTrigger=function(key){if(typeof key==='string'){key=keyMap[key.toUpperCase()]}
if(typeof key==='number'){var index=this._triggerKeys.indexOf(key);if(index>-1){Keyboard.offDown(key,this._onKeyboardInteraction);this._triggerKeys.splice(index,1)}}};proto.removeAllTriggers=function(){var key;var index=this._triggerKeys.length;while(index--){key=this._triggerKeys[index];Keyboard.offDown(key,this._onKeyboardInteraction)}
this._triggerKeys=[];var el;var type;for(type in this._triggerEls){index=this._triggerEls[type].length;while(index--){el=this._triggerEls[type][index];this._cleanElementTrigger(el,type)}}
this._triggerEls={}};proto.isInView=function(){if(this._el){return isInViewport(this._el)}
return!1};proto.percentageInView=function(){if(this._el){return getPercentInViewport(this._el)}
return 0};proto.getElement=function(){return this._el};proto.getElementId=function(){if(this._elId!==undefined){return this._elId}
this._elId=this._el.getAttribute('id')||null;return this._elId};proto.destroy=function(){if(this._isShown){this._isShown=null;ac_classList.remove(this._el,Item.CSS_CURRENT_ITEM,Item.CSS_LAST_ITEM,Item.CSS_NEXT_ITEM,Item.CSS_PREVIOUS_ITEM);this._removeCurrentClassFromTriggers()}
this.removeAllTriggers();this._setTabIndexOnFocusableItems(null);this._el.removeAttribute('aria-hidden');this._el.removeAttribute('role');this._el.removeAttribute('aria-labelledby');this._isACaption=null;this._triggerKeys=null;this._triggerEls=null;this._el=null};proto._addCurrentClassToTriggers=function(){var el;var type;var index;for(type in this._triggerEls){index=this._triggerEls[type].length;while(index--){el=this._triggerEls[type][index];el.setAttribute('aria-selected','true');ac_classList.add(el,CSS_CURRENT)}}};proto._removeCurrentClassFromTriggers=function(){var el;var type;var index;for(type in this._triggerEls){index=this._triggerEls[type].length;while(index--){el=this._triggerEls[type][index];el.setAttribute('aria-selected','false');ac_classList.remove(el,CSS_CURRENT)}}};proto._cleanElementTrigger=function(el,type){el.removeAttribute('aria-selected');el.removeAttribute('role');el.removeAttribute('tabindex');el.removeAttribute('aria-controls');ac_removeEventListener(el,type,this._onTriggered);if(this._isShown){ac_classList.remove(el,CSS_CURRENT)}};proto._onKeyboardInteraction=function(evt){if(this.isInView()){this._onTriggered(evt)}};proto._setTabIndexOnFocusableItems=function(index){var remove=index===null;var tabbableEls=[];this._currentTabbableEls=this._currentTabbableEls||tabManager.getTabbable(this._focusableEls);if(!remove){tabbableEls=tabManager.getTabbable(this._focusableEls);this._currentTabbableEls=tabbableEls}
var i=this._currentTabbableEls.length;while(i--){if(remove){this._currentTabbableEls[i].removeAttribute('tabindex')}else{this._currentTabbableEls[i].setAttribute('tabindex',index)}}};proto._onTriggered=function(evt){preventDefault(evt);this.trigger(Item.SELECTED,{item:this,interactionEvent:evt})};module.exports=Item},{"./singletons/tabManager":343,"@marcom/ac-classlist":170,"@marcom/ac-dom-events/addEventListener":173,"@marcom/ac-dom-events/preventDefault":181,"@marcom/ac-dom-events/removeEventListener":182,"@marcom/ac-dom-metrics/getPercentInViewport":193,"@marcom/ac-dom-metrics/isInViewport":199,"@marcom/ac-dom-traversal/querySelectorAll":48,"@marcom/ac-event-emitter-micro":215,"@marcom/ac-keyboard":232,"@marcom/ac-keyboard/keyMap":234,"@marcom/ac-object/create":236}],329:[function(require,module,exports){'use strict';var extendProto=require('./helpers/extendProto');var Gallery=require('./Gallery');var AutoGallery=require('./auto/AutoGallery');var FadeGallery=require('./fade/FadeGallery');var FadeGalleryItem=require('./fade/FadeItem');var SlideGallery=require('./slide/SlideGallery');var SlideGalleryItem=require('./slide/SlideItem');var Item=require('./Item');Gallery.create=require('./factories/create');Gallery.autoCreate=require('./factories/autoCreate');Gallery.extend=extendProto;AutoGallery.extend=extendProto;FadeGallery.extend=extendProto;FadeGalleryItem.extend=extendProto;SlideGallery.extend=extendProto;SlideGalleryItem.extend=extendProto;Item.extend=extendProto;module.exports={Gallery:Gallery,AutoGallery:AutoGallery,FadeGallery:FadeGallery,FadeGalleryItem:FadeGalleryItem,SlideGallery:SlideGallery,SlideGalleryItem:SlideGalleryItem,Item:Item,ToggleNav:require('./navigation/ToggleNav')}},{"./Gallery":327,"./Item":328,"./auto/AutoGallery":331,"./factories/autoCreate":332,"./factories/create":333,"./fade/FadeGallery":334,"./fade/FadeItem":335,"./helpers/extendProto":336,"./navigation/ToggleNav":341,"./slide/SlideGallery":344,"./slide/SlideItem":345}],330:[function(require,module,exports){'use strict';var GalleryAnalyticsObserver;try{GalleryAnalyticsObserver=require('ac-analytics').observer.Gallery}catch(e){}
var DEFAULT_ID_DATA_ATTRIBUTE='data-analytics-gallery-id';function AnalyticsManager(){this._observers={}}
var proto=AnalyticsManager.prototype;proto.add=function(gallery,options){var id=gallery.getId();if(!GalleryAnalyticsObserver||this._observers[id]){return}
options=options||{};if(!options.galleryName){options.galleryName=this._getAnalyticsId(gallery,options.dataAttribute)||id}
if(!options.beforeUpdateEvent){options.beforeUpdateEvent='update'}
if(!options.afterUpdateEvent){options.afterUpdateEvent='update:complete'}
var observer=new GalleryAnalyticsObserver(gallery,options);if(observer.gallery){this._observers[id]=observer}};proto.remove=function(gallery){var id=gallery.getId();if(!GalleryAnalyticsObserver||!this._observers[id]){return}
if(typeof this._observers[id].destroy==='function'){this._observers[id].destroy()}
this._observers[id]=null};proto._getAnalyticsId=function(gallery,dataAttribute){if(typeof gallery.getElement==='function'){dataAttribute=dataAttribute||DEFAULT_ID_DATA_ATTRIBUTE;var el=gallery.getElement();return el.getAttribute(dataAttribute)||el.getAttribute('id')}
return null};module.exports=AnalyticsManager},{"ac-analytics":893}],331:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/requestAnimationFrame');var ac_classList=require('@marcom/ac-classlist');var ac_addEventListener=require('@marcom/ac-dom-events/addEventListener');var ac_removeEventListener=require('@marcom/ac-dom-events/removeEventListener');var preventDefault=require('@marcom/ac-dom-events/preventDefault');var ac_dom_styles=require('@marcom/ac-dom-styles');var ac_querySelector=require('@marcom/ac-dom-traversal/querySelector');var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var create=require('@marcom/ac-object/create');var getContentDimensions=require('@marcom/ac-dom-metrics/getContentDimensions');var keyMap=require('@marcom/ac-keyboard/keyMap');var selectElementFromDataAttributeValue=require('./../helpers/selectElementFromDataAttributeValue');var selectElementThatHasDataAttribute=require('./../helpers/selectElementThatHasDataAttribute');var inputHasFocus=require('./../helpers/inputHasFocus');var throttle=require('@marcom/ac-function/throttle');var touchAvailable=require('@marcom/ac-feature/touchAvailable');var Gallery=require('./../Gallery');var Keyboard=require('@marcom/ac-keyboard');var PageVisibilityManager=require('@marcom/ac-page-visibility').PageVisibilityManager;var PointerTracker=require('@marcom/ac-pointer-tracker').PointerTracker;var ToggleNav=require('./../navigation/ToggleNav');var CSS_DISABLED_CLASS='disabled';var DEFAULT_AUTO_PLAY_DELAY=3;var DEFAULT_CONTAINER_RESIZE_DURATION=0.5;var DEFAULT_ITEM_SELECTOR='[data-ac-gallery-item]';var DEFAULT_KEYBOARD_THROTTLE_DELAY=0.12;var DEFAULT_PADDLENAV_TEMPLATE=require('https://www.apple.com/jobs/templates/paddlenav.js');var ERROR_NO_ELEMENT_SUPPLIED='No element supplied.';var ERROR_NO_CONTAINER_ELEMENT_SUPPLIED='Container element needed when autoPlay is on. Use the "container" option when you instantiate your gallery.';function AutoGallery(el,options){options=options||{};if(!el||el.nodeType===undefined){throw new Error(ERROR_NO_ELEMENT_SUPPLIED)}
this._el=el;Gallery.call(this,options);this._itemHeights=[];this._itemHeightsLookup={};this._toggleNavDuration=options.toggleNavDuration;this._isRightToLeft=(options.rightToLeft===undefined)?ac_dom_styles.getStyle(el,'direction').direction==='rtl':options.rightToLeft;this._keyboardThrottleDelay=((options.keyboardThrottleDelay===undefined)?DEFAULT_KEYBOARD_THROTTLE_DELAY:options.keyboardThrottleDelay)*1000;this._resizeContainer=!!options.resizeContainer;this._setUpContainerAutoResize(options.resizeContainerOnUpdate);this._createToggleNav();this._addPaddleNav(options.addPaddleNav);this._isACaptionsGallery=el.getAttribute('data-ac-gallery-captions')==='';this._addItems(options.itemSelector||DEFAULT_ITEM_SELECTOR);if(!this._wrapAround){this._updatePaddleNavState()}
if(options.enableArrowKeys!==!1){this._enableArrowKeys=!0;this._addKeyboardListener()}
if(options.updateOnWindowResize!==!1){this._onWindowResize=this._onWindowResize.bind(this);ac_addEventListener(window,'resize',this._onWindowResize)}
this._componentsContainer=document.getElementById(options.container);if(options.startAt){this._startAt(options.startAt)}
this.stopAutoPlay=this.stopAutoPlay.bind(this);if(options.autoPlay){if(!this._componentsContainer){throw new Error(ERROR_NO_CONTAINER_ELEMENT_SUPPLIED)}
var delay=(typeof options.autoPlay==='number')?options.autoPlay:DEFAULT_AUTO_PLAY_DELAY;this.startAutoPlay(delay)}
if(options.deeplink!==!1){var item=this._getDeeplinkedItem();if(item&&item!==this._currentItem){this.show(item)}}
if(this._containerResizeDuration!==!1){var height=this._itemHeightsLookup[this._currentItem.getElementId()];if(height){this._setElHeight(height)}}
if(this._toggleNav){this._toggleNav.start()}
this._setUpSwiping(options.touch&&touchAvailable(),options.desktopSwipe);if(this._componentsContainer){this._componentsContainer.setAttribute('tabIndex',-1)}}
AutoGallery.RESIZED='resized';AutoGallery.UPDATE=Gallery.UPDATE;AutoGallery.UPDATE_COMPLETE=Gallery.UPDATE_COMPLETE;var superProto=Gallery.prototype;var proto=AutoGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){var isACaption=this._isACaptionsGallery;item=new this._itemType(item,{isACaption:isACaption})}else if(this._items.indexOf(item)>-1){return item}
if(this._resizeContainer){this._storeItemHeight(item,this._containerResizeDuration===!1)}
this._addItemTriggers(item);return superProto.addItem.call(this,item,index)};proto.removeItem=function(item,options){if(this._resizeContainer){var index=this._itemHeights.length;while(index--){if(this._itemHeights[index].item===item){this._itemHeights.splice(index,1);if(index===0&&this._itemHeights.length){this._setElHeight(this._itemHeights[0].height)}}}}
return superProto.removeItem.call(this,item,options)};proto.startAutoPlay=function(delay,options){options=options||{};this._isAutoPlaying=!0;this._autoPlayDelay=(delay||DEFAULT_AUTO_PLAY_DELAY)*1000;this._cancelAutoPlayOnInteraction=(options.cancelOnInteraction===undefined)?!0:options.cancelOnInteraction;setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay);if(this._cancelAutoPlayOnInteraction){this.on(Gallery.UPDATE,this.stopAutoPlay)}
if(this._componentsContainer){ac_addEventListener(this._componentsContainer,'focus',this.stopAutoPlay,!0);ac_addEventListener(this._componentsContainer,'touchend',this.stopAutoPlay,!0);ac_addEventListener(this._componentsContainer,'click',this.stopAutoPlay,!0)}else{throw new Error(ERROR_NO_CONTAINER_ELEMENT_SUPPLIED)}};proto.stopAutoPlay=function(){this._isAutoPlaying=!1;if(this._cancelAutoPlayOnInteraction){this.off(Gallery.UPDATE,this.stopAutoPlay)}
if(this._componentsContainer){ac_removeEventListener(this._componentsContainer,'focus',this.stopAutoPlay,!0);ac_removeEventListener(this._componentsContainer,'touchend',this.stopAutoPlay,!0);ac_removeEventListener(this._componentsContainer,'click',this.stopAutoPlay,!0)}};proto.getElement=function(){return this._el};proto.getToggleNav=function(){return this._toggleNav||null};proto.resize=function(winWidth,winHeight){if(this._resizeContainer){this._itemHeights=[];var index=this._items.length;while(index--){this._storeItemHeight(this._items[index],!1)}
if(this._containerResizeDuration!==!1){this._setElHeight(this._itemHeightsLookup[this._currentItem.getElementId()])}else{this._setElHeight(this._itemHeights[0].height)}}
if(this._toggleNav){this._toggleNav.resize()}
this.trigger(AutoGallery.RESIZED,this)};proto.enableKeyboard=function(){if(!this._enableArrowKeys){this._enableArrowKeys=!0;this._addKeyboardListener()}};proto.disableKeyboard=function(){if(this._enableArrowKeys){this._enableArrowKeys=!1;Keyboard.offDown(keyMap.ARROW_RIGHT,this._rightArrowFunc);Keyboard.offDown(keyMap.ARROW_LEFT,this._leftArrowFunc)}};proto.enableTouch=function(){if(!this._touchSwipe){this._setUpSwiping(!0,!1)}};proto.disableTouch=function(){if(this._touchSwipe){this._touchSwipe.off(PointerTracker.END,this._onSwipeEnd);this._touchSwipe.destroy();this._touchSwipe=null}};proto.enableDesktopSwipe=function(){if(!this._clickSwipe){this._setUpSwiping(!1,!0)}};proto.disableDesktopSwipe=function(){if(this._clickSwipe){this._clickSwipe.off(PointerTracker.END,this._onSwipeEnd);this._clickSwipe.destroy();this._clickSwipe=null}};proto.destroy=function(options){if(this._isAutoPlaying){this.stopAutoPlay()}
if(this._componentsContainer){ac_removeEventListener(this._componentsContainer,'focus',this.stopAutoPlay,!0);ac_removeEventListener(this._componentsContainer,'touchend',this.stopAutoPlay,!0);ac_removeEventListener(this._componentsContainer,'click',this.stopAutoPlay,!0)}
if(this._resizeContainer){ac_dom_styles.setStyle(this._el,{height:null,transition:null})}
if(this._enableArrowKeys){Keyboard.offDown(keyMap.ARROW_RIGHT,this._rightArrowFunc);Keyboard.offDown(keyMap.ARROW_LEFT,this._leftArrowFunc)}
var index;if(this._previousButtons){index=this._previousButtons.length;while(index--){ac_removeEventListener(this._previousButtons[index],'click',this._onPaddlePrevious)}
this._setPaddleDisabledState(this._previousButtons,!1)}
if(this._nextButtons){index=this._nextButtons.length;while(index--){ac_removeEventListener(this._nextButtons[index],'click',this._onPaddleNext)}
this._setPaddleDisabledState(this._nextButtons,!1)}
if(this._dynamicPaddleNav){this._el.removeChild(this._dynamicPaddleNav)}
if(this._hasPaddleNavStateHandler){this.off(Gallery.UPDATE,this._updatePaddleNavState)}
this.disableTouch();this.disableDesktopSwipe();if(this._toggleNav){this._toggleNav.destroy();this._toggleNav=null}
ac_removeEventListener(window,'resize',this._onWindowResize);this._el=null;this._itemHeights=null;this._itemHeightsLookup=null;this._resizeContainer=null;this._isRightToLeft=null;this._enableArrowKeys=null;this._previousButtons=null;this._onPaddlePrevious=null;this._nextButtons=null;this._onPaddleNext=null;this._isACaptionsGallery=null;this._componentsContainer=null;return superProto.destroy.call(this,options)};proto._getDeeplinkedItem=function(){var path=window.location.hash.substr(1);var item;var index=this._items.length;while(index--){item=this._items[index];if(path===item.getElementId()){return item}}
return null};proto._addItems=function(itemSelector){var item;var items;var isDataAttribute=/(^\[).*(\]$)/.test(itemSelector);if(isDataAttribute){itemSelector=itemSelector.replace(/\[|\]/g,'');items=selectElementThatHasDataAttribute(itemSelector,this._el)}else{items=ac_querySelectorAll(itemSelector,this._el)}
var index=0;var length=items.length;var isACaption=this._isACaptionsGallery;for(index;index<length;index++){item=new this._itemType(items[index],{isACaption:isACaption});this.addItem(item);this._addItemTriggers(item)}};proto._createToggleNav=function(){var id=this._getElementId();var selector='[data-ac-gallery-togglenav="'+id+'"], [data-ac-gallery-tabnav="'+id+'"]';var toggleNavEl=ac_querySelector(selector);if(toggleNavEl){this._toggleNav=new ToggleNav(toggleNavEl,this,{duration:this._toggleNavDuration})}};proto._addItemTriggers=function(item,additionalTriggers){var triggers=selectElementFromDataAttributeValue('data-ac-gallery-trigger',item.getElementId());if(additionalTriggers&&additionalTriggers.length){triggers=triggers.concat(additionalTriggers)}
var index=0;var length=triggers.length;for(index;index<length;index++){item.addElementTrigger(triggers[index]);if(this._toggleNav){this._toggleNav.addTrigger(triggers[index],item)}}};proto._addPaddleNav=function(autoAdd){var index;var id=this._getElementId();if(autoAdd){var template=(typeof autoAdd==='string')?autoAdd:DEFAULT_PADDLENAV_TEMPLATE;template=template.replace(/%ID%/g,this._getElementId());this._dynamicPaddleNav=document.createElement('div');this._dynamicPaddleNav.innerHTML=template;this._el.insertBefore(this._dynamicPaddleNav,this._el.firstChild)}
this._previousButtons=selectElementFromDataAttributeValue('data-ac-gallery-previous-trigger',id);this._nextButtons=selectElementFromDataAttributeValue('data-ac-gallery-next-trigger',id);var galleryLabel=this._el.getAttribute('aria-label')||'';if(galleryLabel.length){galleryLabel='('+galleryLabel+')'}
this._onPaddlePrevious=this._onPaddleInteraction.bind(null,this.showPrevious);index=this._previousButtons.length;if(index){var previousAriaLabel=this._el.getAttribute('data-ac-gallery-previouslabel');if(previousAriaLabel&&galleryLabel.length){if(this._isRightToLeft){previousAriaLabel=galleryLabel+' '+previousAriaLabel}else{previousAriaLabel+=' '+galleryLabel}}
while(index--){if(previousAriaLabel&&this._previousButtons[index].getAttribute('aria-label')===null){this._previousButtons[index].setAttribute('aria-label',previousAriaLabel)}
ac_addEventListener(this._previousButtons[index],'click',this._onPaddlePrevious)}}
this._onPaddleNext=this._onPaddleInteraction.bind(null,this.showNext);index=this._nextButtons.length;if(index){var nextAriaLabel=this._el.getAttribute('data-ac-gallery-nextlabel');if(nextAriaLabel&&galleryLabel.length){if(this._isRightToLeft){nextAriaLabel=galleryLabel+' '+nextAriaLabel}else{nextAriaLabel+=' '+galleryLabel}}
while(index--){if(nextAriaLabel&&this._nextButtons[index].getAttribute('aria-label')===null){this._nextButtons[index].setAttribute('aria-label',nextAriaLabel)}
ac_addEventListener(this._nextButtons[index],'click',this._onPaddleNext)}}
if(this._nextButtons.length||this._previousButtons.length){this._hasPaddleNavStateHandler=!0;this._updatePaddleNavState=this._updatePaddleNavState.bind(this);this.on(Gallery.UPDATE,this._updatePaddleNavState)}};proto._onPaddleInteraction=function(method,evt){preventDefault(evt);method.call(null,{interactionEvent:evt})};proto._updatePaddleNavState=function(){if(!this._wrapAround){var index=this._items.indexOf(this._currentItem);if(index===0&&this._previousButtons.length){this._setPaddleDisabledState(this._previousButtons,!0);this._setPaddleDisabledState(this._nextButtons,!1)}else if(index===this._items.length-1&&this._nextButtons.length){this._setPaddleDisabledState(this._nextButtons,!0);this._setPaddleDisabledState(this._previousButtons,!1)}else{this._setPaddleDisabledState(this._previousButtons,!1);this._setPaddleDisabledState(this._nextButtons,!1)}}else{this._setPaddleDisabledState(this._previousButtons,!1);this._setPaddleDisabledState(this._nextButtons,!1)}};proto._setPaddleDisabledState=function(paddles,isDisabled){var index=paddles.length;while(index--){paddles[index].disabled=isDisabled;if(isDisabled){ac_classList.add(paddles[index],CSS_DISABLED_CLASS)}else{ac_classList.remove(paddles[index],CSS_DISABLED_CLASS)}}};proto._addKeyboardListener=function(){if(this._enableArrowKeys){this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this);var rightArrowFunc;var leftArrowFunc;if(this._isRightToLeft){rightArrowFunc=this.showPrevious;leftArrowFunc=this.showNext}else{rightArrowFunc=this.showNext;leftArrowFunc=this.showPrevious}
this._rightArrowFunc=throttle(this._onKeyboardInteraction.bind(null,rightArrowFunc),this._keyboardThrottleDelay);this._leftArrowFunc=throttle(this._onKeyboardInteraction.bind(null,leftArrowFunc),this._keyboardThrottleDelay);Keyboard.onDown(keyMap.ARROW_RIGHT,this._rightArrowFunc);Keyboard.onDown(keyMap.ARROW_LEFT,this._leftArrowFunc)}};proto._onKeyboardInteraction=function(method,evt){if(this.isInView()&&!inputHasFocus()){var galleries=Gallery.getAllInView();if(galleries.length>1){galleries.sort(function(a,b){a=(a._enableArrowKeys)?a.getCurrentItem().percentageInView():0;b=(b._enableArrowKeys)?b.getCurrentItem().percentageInView():0;return b-a});if(this!==galleries[0]){return}}
method.call(null,{interactionEvent:evt})}};proto._setUpSwiping=function(forTouch,forClick){this._onSwipeEnd=this._onSwipeEnd.bind(this);if(forTouch){this._touchSwipe=new PointerTracker(this._el,PointerTracker.TOUCH_EVENTS);this._touchSwipe.on(PointerTracker.END,this._onSwipeEnd)}
if(forClick){this._clickSwipe=new PointerTracker(this._el,PointerTracker.MOUSE_EVENTS);this._clickSwipe.on(PointerTracker.END,this._onSwipeEnd)}};proto._onSwipeEnd=function(evt){var method;var interactionEvent=evt.interactionEvent;var clickSwipe=interactionEvent.type!=='touchend'||interactionEvent.type!=='touchstart'||interactionEvent.type!=='touchmove';if(clickSwipe){var clickSwipeEvent={type:'touchmove',target:interactionEvent.target,srcElement:interactionEvent.srcElement}}
var options={interactionEvent:clickSwipeEvent||interactionEvent};if(evt.swipe===PointerTracker.SWIPE_RIGHT){method=(this._isRightToLeft)?this.showNext:this.showPrevious}else if(evt.swipe===PointerTracker.SWIPE_LEFT){method=(this._isRightToLeft)?this.showPrevious:this.showNext}
if(method){return method.call(this,options)}
interactionEvent=null;return null};proto._getElementId=function(){if(this._elementId===undefined){this._elementId=this._el.getAttribute('id')}
return this._elementId};proto._setUpContainerAutoResize=function(resizeContainerOnUpdate){if(typeof resizeContainerOnUpdate==='number'){this._containerResizeDuration=resizeContainerOnUpdate}else if(resizeContainerOnUpdate){this._containerResizeDuration=DEFAULT_CONTAINER_RESIZE_DURATION}else{this._containerResizeDuration=!1}
if(this._containerResizeDuration!==!1){this._resizeContainer=!0;this._updateContainerSize=this._updateContainerSize.bind(this);this.on(Gallery.UPDATE,this._updateContainerSize)}};proto._updateContainerSize=function(items){var height=this._itemHeightsLookup[items.incoming[0].getElementId()];if(height){this._setElHeight(height,this._containerResizeDuration)}};proto._storeItemHeight=function(item,resizeEl){var bounds=getContentDimensions(item.getElement());this._itemHeights.push({item:item,height:bounds.height});this._itemHeightsLookup[item.getElementId()]=bounds.height;this._itemHeights.sort(function(a,b){return b.height-a.height});if(resizeEl&&this._itemHeights[0].item===item){this._setElHeight(bounds.height)}};proto._setElHeight=function(height,duration){var styles={height:height+'px'};if(duration){styles.transition='height '+duration+'s'}else{styles.transition=null}
ac_dom_styles.setStyle(this._el,styles)};proto._onAutoPlayToNextItem=function(){if(this._isAutoPlaying){if(!PageVisibilityManager.isHidden&&this._currentItem.isInView()){if(this._cancelAutoPlayOnInteraction){this.off(Gallery.UPDATE,this.stopAutoPlay)}
var item=this.showNext();if(item!==null){if(this._cancelAutoPlayOnInteraction){this.on(Gallery.UPDATE,this.stopAutoPlay)}
setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay)}}else{setTimeout(this._onAutoPlayToNextItem.bind(this),this._autoPlayDelay)}}};proto._onWindowResize=function(evt){window.requestAnimationFrame(function(){if(this._el){this.resize()}}.bind(this))};module.exports=AutoGallery},{"../templates/paddlenav.js":347,"./../Gallery":327,"./../helpers/inputHasFocus":338,"./../helpers/selectElementFromDataAttributeValue":339,"./../helpers/selectElementThatHasDataAttribute":340,"./../navigation/ToggleNav":341,"@marcom/ac-classlist":170,"@marcom/ac-dom-events/addEventListener":173,"@marcom/ac-dom-events/preventDefault":181,"@marcom/ac-dom-events/removeEventListener":182,"@marcom/ac-dom-metrics/getContentDimensions":190,"@marcom/ac-dom-styles":211,"@marcom/ac-dom-traversal/querySelector":47,"@marcom/ac-dom-traversal/querySelectorAll":48,"@marcom/ac-feature/touchAvailable":227,"@marcom/ac-function/throttle":230,"@marcom/ac-keyboard":232,"@marcom/ac-keyboard/keyMap":234,"@marcom/ac-object/create":236,"@marcom/ac-page-visibility":238,"@marcom/ac-pointer-tracker":244,"@marcom/ac-polyfills/requestAnimationFrame":255}],332:[function(require,module,exports){'use strict';var create=require('./create');var selectElementThatHasDataAttribute=require('./../helpers/selectElementThatHasDataAttribute');var Gallery=require('./../Gallery');var FADE_DATA_ATTRIBUTE=Gallery.FADE_SELECTOR.replace(/\[|\]/g,'');var SLIDE_DATA_ATTRIBUTE=Gallery.SLIDE_SELECTOR.replace(/\[|\]/g,'');module.exports=function autoCreate(options){options=options||{};var context=options.context||document.body;var elements;var index;elements=selectElementThatHasDataAttribute(SLIDE_DATA_ATTRIBUTE,context);index=elements.length;while(index--){create(elements[index],Gallery.SLIDE,options)}
elements=selectElementThatHasDataAttribute(FADE_DATA_ATTRIBUTE,context);index=elements.length;while(index--){create(elements[index],Gallery.FADE,options)}
return Gallery.getAll()}},{"./../Gallery":327,"./../helpers/selectElementThatHasDataAttribute":340,"./create":333}],333:[function(require,module,exports){'use strict';var FadeGallery=require('./../fade/FadeGallery');var Gallery=require('./../Gallery');var SlideGallery=require('./../slide/SlideGallery');var ERROR_GALLERY_TYPE_UNSUPPORTED='%TYPE% is not a supported gallery type and el has no gallery data attribute.';var FADE_DATA_ATTRIBUTE=Gallery.FADE_SELECTOR.replace(/\[|\]/g,'');var SLIDE_DATA_ATTRIBUTE=Gallery.SLIDE_SELECTOR.replace(/\[|\]/g,'');module.exports=function create(el,type,options){var GalleryType;if(typeof type==='string'){if(type===Gallery.SLIDE){GalleryType=SlideGallery}else if(type===Gallery.FADE){GalleryType=FadeGallery}}
if(GalleryType===undefined){if(el.getAttribute(SLIDE_DATA_ATTRIBUTE)!==null){GalleryType=SlideGallery}else if(el.getAttribute(FADE_DATA_ATTRIBUTE)!==null){GalleryType=FadeGallery}}
if(GalleryType===undefined){throw new Error(ERROR_GALLERY_TYPE_UNSUPPORTED.replace(/%TYPE%/g,type))}
return new GalleryType(el,options)}},{"./../Gallery":327,"./../fade/FadeGallery":334,"./../slide/SlideGallery":344}],334:[function(require,module,exports){'use strict';var clone=require('@marcom/ac-object/clone');var create=require('@marcom/ac-object/create');var FadeItem=require('./FadeItem');var AutoGallery=require('./../auto/AutoGallery');var DEFAULT_FADE_DURATION=0.5;function FadeGallery(el,options){options=clone(options)||{};options.itemType=options.itemType||FadeItem;this._fadeDuration=options.duration||DEFAULT_FADE_DURATION;options.toggleNavDuration=(options.toggleNavDuration===undefined)?this._fadeDuration:options.toggleNavDuration;this._crossFade=options.crossFade;this._zIndexCount=options.startZIndex||1;this._ease=options.ease;if(options.resizeContainerOnUpdate===!0){options.resizeContainerOnUpdate=this._fadeDuration}
this._onItemShowComplete=this._onItemShowComplete.bind(this);AutoGallery.call(this,el,options);if(this._currentItem){this._currentItem.fadeIn(0)}}
FadeGallery.RESIZED=AutoGallery.RESIZED;FadeGallery.UPDATE=AutoGallery.UPDATE;FadeGallery.UPDATE_COMPLETE=AutoGallery.UPDATE_COMPLETE;var superProto=AutoGallery.prototype;var proto=FadeGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}
var returnValue=superProto.addItem.call(this,item,index);if(item!==this._currentItem){item.fadeOut()}else{item.fadeIn(0)}
return returnValue};proto.destroy=function(options){var returnValue=superProto.destroy.call(this,options);this._fadeDuration=null;this._crossFade=null;this._zIndexCount=null;this._ease=null;this._onItemShowComplete=null;return returnValue};proto._startAt=function(index){var item=this._items[index];if(item&&(this._currentItem!==item)){this._currentItem.fadeOut(0);this._currentItem.hide();this._setCurrentItem(item);this._currentItem.show();this._currentItem.fadeIn(0);this.trigger(FadeGallery.UPDATE,this._items)}};proto._onItemShowComplete=function(clip){if(clip&&clip.target()!==this._currentItem.getElement()){if(!this._currentItem.isFading()){this._currentItem.fadeIn(this._fadeDuration,this._ease,++this._zIndexCount,this._onItemShowComplete)}
return}
var item;var index=this._items.length;while(index--){item=this._items[index];if(item!==this._currentItem){item.fadeOut()}}
if(this._incomingOutgoingItems){this.trigger(FadeGallery.UPDATE_COMPLETE,this._incomingOutgoingItems)}};proto._updateItems=function(items,silent){if(silent){return}
if(this._crossFade){var callback=(silent)?null:this.trigger.bind(this,FadeGallery.UPDATE_COMPLETE,items);items.outgoing[0].fadeOut(this._fadeDuration*0.99,this._ease);items.incoming[0].fadeIn(this._fadeDuration,this._ease,++this._zIndexCount,callback)}else{this._incomingOutgoingItems=(silent)?!1:items;if(!items.outgoing[0].isFading()){items.incoming[0].fadeIn(this._fadeDuration,this._ease,++this._zIndexCount,this._onItemShowComplete)}}
items.outgoing[0].hide();items.incoming[0].show()};module.exports=FadeGallery},{"./../auto/AutoGallery":331,"./FadeItem":335,"@marcom/ac-object/clone":235,"@marcom/ac-object/create":236}],335:[function(require,module,exports){'use strict';var setStyle=require('@marcom/ac-dom-styles/setStyle');var create=require('@marcom/ac-object/create');var fade=require('@marcom/ac-solar/fade');var fadeIn=require('@marcom/ac-solar/fadeIn');var fadeOut=require('@marcom/ac-solar/fadeOut');var Item=require('./../Item');function FadeItem(el,options){Item.call(this,el,options);setStyle(el,{position:'absolute'})}
FadeItem.SELECTED=Item.SELECTED;FadeItem.SHOW=Item.SHOW;FadeItem.HIDE=Item.HIDE;var superProto=Item.prototype;var proto=FadeItem.prototype=create(superProto);proto.fadeIn=function(duration,ease,zIndex,callback){if(duration){setStyle(this._el,{zIndex:zIndex||1});this._destroyCurrentClip();this._clip=fade(this._el,0,1,duration,{ease:ease,onComplete:callback})}else{fadeIn(this._el,0);setStyle(this._el,{zIndex:zIndex||1})}};proto.fadeOut=function(duration,ease){if(duration){this._destroyCurrentClip();this._clip=fadeOut(this._el,duration,{ease:ease})}else{fadeOut(this._el,0)}};proto.isFading=function(){return!!(this._clip&&this._clip.playing())};proto.destroy=function(){setStyle(this._el,{position:null,opacity:null,zIndex:null});superProto.destroy.call(this);this._destroyCurrentClip();this._clip=null};proto._destroyCurrentClip=function(){if(this.isFading()){this._clip.destroy()}};module.exports=FadeItem},{"./../Item":328,"@marcom/ac-dom-styles/setStyle":214,"@marcom/ac-object/create":236,"@marcom/ac-solar/fade":320,"@marcom/ac-solar/fadeIn":321,"@marcom/ac-solar/fadeOut":322}],336:[function(require,module,exports){'use strict';var create=require('@marcom/ac-object/create');var extend=require('@marcom/ac-object/extend');module.exports=function extendProto(proto){var self=this;var Child=function(){self.apply(this,arguments)};var childProto=create(this.prototype);Child.prototype=extend(childProto,proto);extend(Child,this);return Child}},{"@marcom/ac-object/create":236,"@marcom/ac-object/extend":237}],337:[function(require,module,exports){'use strict';var getStyle=require('@marcom/ac-dom-styles/getStyle');var getContentDimensions=require('@marcom/ac-dom-metrics/getContentDimensions');module.exports=function getElementFullWidth(el){var styles=getStyle(el,'margin-right','margin-left');return Math.round(getContentDimensions(el).width)+parseInt(styles.marginRight,10)+parseInt(styles.marginLeft,10)}},{"@marcom/ac-dom-metrics/getContentDimensions":190,"@marcom/ac-dom-styles/getStyle":212}],338:[function(require,module,exports){'use strict';module.exports=function inputHasFocus(){var elements=['input','select','textarea'];return elements.indexOf(document.activeElement.nodeName.toLowerCase())>-1}},{}],339:[function(require,module,exports){'use strict';var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var selectInIE7=function(dataAttribute,value){var el;var elements=document.getElementsByTagName('*');var index=0;var length=elements.length;var matches=[];for(index;index<length;index++){el=elements[index];if(el.getAttribute(dataAttribute)!==null&&el.getAttribute(dataAttribute).split(' ').indexOf(value)>-1){matches[matches.length]=el}}
return matches};module.exports=function selectElementFromDataAttributeValue(dataAttribute,value){var elements=ac_querySelectorAll('['+dataAttribute+'*="'+value+'"]');if(elements.length===0&&document.documentMode===7){return selectInIE7(dataAttribute,value)}
var selectedElements=[];var index=0;var length=elements.length;var values;for(index;index<length;index++){values=elements[index].getAttribute(dataAttribute);if(values===value){selectedElements.push(elements[index])}else if(values&&values.length){values=values.split(' ');if(values.indexOf(value)>-1){selectedElements.push(elements[index])}}}
return selectedElements}},{"@marcom/ac-dom-traversal/querySelectorAll":48}],340:[function(require,module,exports){'use strict';var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var ancestors=require('@marcom/ac-dom-traversal/ancestors');var selectInIE7=function(dataAttribute,context){var el;var elements=document.getElementsByTagName('*');var index=0;var length=elements.length;var matches=[];for(index;index<length;index++){el=elements[index];if(el.getAttribute(dataAttribute)!==null&&(!context||ancestors(el).indexOf(context)>-1)){matches[matches.length]=el}}
return matches};module.exports=function selectElementThatHasDataAttribute(dataAttribute,context){context=context||document.body;var elements=ac_querySelectorAll('['+dataAttribute+']',context);if(elements.length===0&&document.documentMode===7){return selectInIE7(dataAttribute,context)}
return elements}},{"@marcom/ac-dom-traversal/ancestors":35,"@marcom/ac-dom-traversal/querySelectorAll":48}],341:[function(require,module,exports){'use strict';var ac_addEventListener=require('@marcom/ac-dom-events/addEventListener');var ac_removeEventListener=require('@marcom/ac-dom-events/removeEventListener');var getDimensions=require('@marcom/ac-dom-metrics/getDimensions');var getPosition=require('@marcom/ac-dom-metrics/getPosition');var getStyle=require('@marcom/ac-dom-styles/getStyle');var setStyle=require('@marcom/ac-dom-styles/setStyle');var ancestors=require('@marcom/ac-dom-traversal/ancestors');var create=require('@marcom/ac-object/create');var scrollX=require('@marcom/ac-solar/scrollX');var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var Gallery=require('./../Gallery');var DEFAULT_SLIDE_DURATION=0.5;function ToggleNav(el,gallery,options){options=options||{};this._el=el;this._isRightToLeft=(options.rightToLeft===undefined)?getStyle(el,'direction').direction==='rtl':options.rightToLeft;this._scrollType=this._scrollDirection();this._gallery=gallery;this._triggers={};this._ordered=[];this._containerEl=this._el.children[0];this._slideDuration=(options.duration===undefined)?DEFAULT_SLIDE_DURATION:options.duration;EventEmitterMicro.call(this)}
var superProto=EventEmitterMicro.prototype;var proto=ToggleNav.prototype=create(superProto);proto.start=function(){this._onWindowLoad=this._onWindowLoad.bind(this);this._onGalleryUpdated=this._onGalleryUpdated.bind(this);this._gallery.on(Gallery.UPDATE,this._onGalleryUpdated);this.resize();ac_addEventListener(window,'load',this._onWindowLoad)};proto.addTrigger=function(el,item){if(this._triggers[item.getElementId()]!==undefined){return}
var els=ancestors(el);if(els.indexOf(this._el)>-1){var triggerObject={el:el};this._triggers[item.getElementId()]=triggerObject;this._ordered.push(triggerObject)}};proto.resize=function(){if(!this._ordered.length){return}
setStyle(this._containerEl,{paddingLeft:null,paddingRight:null});this._containerWidth=getDimensions(this._containerEl).width;this._width=getDimensions(this._el).width;this._viewCenter=Math.round(this._width*0.5);var index=this._ordered.length;while(index--){this._setTriggerData(this._ordered[index])}
this._ordered.sort(function(a,b){return a.left-b.left});if(this._containerWidth>this._width){var firstItem=this._ordered[0];var lastItem=this._ordered[this._ordered.length-1];var paddingLeft=(this._width-firstItem.width)*0.5;var paddingRight=(this._width-lastItem.width)*0.5;setStyle(this._containerEl,{paddingLeft:paddingLeft+'px',paddingRight:paddingRight+'px'});var trigger=this._triggers[this._gallery.getCurrentItem().getElementId()];if(trigger){this._centerNav(trigger)}}};proto.destroy=function(){this._gallery.off(Gallery.UPDATE,this._onGalleryUpdated);ac_removeEventListener(window,'load',this._onWindowLoad);setStyle(this._containerEl,{paddingLeft:null,paddingRight:null});this._el=null;this._gallery=null;this._triggers=null;this._ordered=null;this._containerEl=null;this._destroyCurrentClip();this._clip=null;return superProto.destroy.call(this)};proto._onWindowLoad=function(){ac_removeEventListener(window,'load',this._onWindowLoad);this.resize()};proto._setTriggerData=function(trigger){trigger.width=getDimensions(trigger.el).width;var position=getPosition(trigger.el);trigger.left=position.left;trigger.right=position.right;trigger.center=trigger.left+(trigger.width*0.5)};proto._centerNav=function(trigger,duration){this._setTriggerData(trigger);this._width=getDimensions(this._el).width;this._viewCenter=Math.round(this._width*0.5);var xp=Math.round(trigger.center-this._viewCenter);if(this._isRightToLeft){if(this._scrollType!=='negative'){xp=Math.abs(xp)}
if(this._scrollType==='default'){xp=this._el.scrollWidth-this._el.clientWidth-xp}}
this._destroyCurrentClip();if(duration){this._clip=scrollX(this._el,xp,duration)}else{this._el.scrollLeft=xp}};proto._onGalleryUpdated=function(items){var trigger=this._triggers[items.incoming[0].getElementId()];if(trigger){this._centerNav(trigger,this._slideDuration)}};proto._destroyCurrentClip=function(){if(this._clip&&this._clip.playing()){this._clip.destroy()}};proto._scrollDirection=function(){var scrollType='reverse';var scrollTest=document.createElement('div');scrollTest.style.cssText='width:2px; height:1px; position:absolute; top:-1000px; overflow:scroll; font-size: 14px;';scrollTest.style.direction='rtl';scrollTest.innerHTML='test';document.body.appendChild(scrollTest);if(scrollTest.scrollLeft>0){scrollType='default'}else{scrollTest.scrollLeft=1;if(scrollTest.scrollLeft===0){scrollType='negative'}}
document.body.removeChild(scrollTest);return scrollType};module.exports=ToggleNav},{"./../Gallery":327,"@marcom/ac-dom-events/addEventListener":173,"@marcom/ac-dom-events/removeEventListener":182,"@marcom/ac-dom-metrics/getDimensions":191,"@marcom/ac-dom-metrics/getPosition":195,"@marcom/ac-dom-styles/getStyle":212,"@marcom/ac-dom-styles/setStyle":214,"@marcom/ac-dom-traversal/ancestors":35,"@marcom/ac-event-emitter-micro":215,"@marcom/ac-object/create":236,"@marcom/ac-solar/scrollX":326}],342:[function(require,module,exports){'use strict';var AnalyticsManager=require('./../analytics/AnalyticsManager');module.exports=new AnalyticsManager()},{"./../analytics/AnalyticsManager":330}],343:[function(require,module,exports){'use strict';var focusableElements=['input','select','textarea','button','object'];var focusableAttribute=['href','tabindex','contenteditable'];var TabManager=function(){this.focusableSelectors=focusableElements.concat(focusableAttribute.map(function(attribute){return(attribute==='href')?'a['+attribute+']':'*['+attribute+']'})).join(',')};var proto=TabManager.prototype;proto.isFocusable=function(element,tabIndex){var nodeName=element.nodeName.toLowerCase();var isFocusableElement=focusableElements.indexOf(nodeName)>-1;if(nodeName==='a'){return!0}
if(isFocusableElement){return!element.disabled}
if(!element.contentEditable){return!0}
tabIndex=tabIndex||element.tabIndex;return isNaN(tabIndex)};proto.isTabbable=function(element){var tabIndex=element.getAttribute('tabindex');if(!isNaN(tabIndex)){return(tabIndex>=0)}else{return this.isFocusable(element,tabIndex)}};proto.getTabbable=function(focusableElements){var l=focusableElements.length;var tabbableElements=[];for(var i=0;i<l;i++){if(this.isTabbable(focusableElements[i])){tabbableElements.push(focusableElements[i])}}
return tabbableElements};module.exports=new TabManager()},{}],344:[function(require,module,exports){'use strict';var ac_classList=require('@marcom/ac-classlist');var ac_dom_styles=require('@marcom/ac-dom-styles');var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var clone=require('@marcom/ac-object/clone');var create=require('@marcom/ac-object/create');var getElementFullWidth=require('./../helpers/getElementFullWidth');var moveX=require('@marcom/ac-solar/moveX');var selectElementFromDataAttributeValue=require('./../helpers/selectElementFromDataAttributeValue');var selectElementThatHasDataAttribute=require('./../helpers/selectElementThatHasDataAttribute');var AutoGallery=require('./../auto/AutoGallery');var PointerTracker=require('@marcom/ac-pointer-tracker').PointerTracker;var SlideItem=require('./SlideItem');var SlideItemWrapper=require('./SlideItemWrapper');var DEFAULT_ITEM_CENTER_POINT=0.5;var DEFAULT_SLIDE_DURATION=0.5;var DEFAULT_EDGE_PULL_RESISTANCE=!0;function SlideGallery(el,options){options=clone(options)||{};options.itemType=options.itemType||SlideItem;this._itemsPerSlide=options.itemsPerSlide||1;var deeplink=options.deeplink!==!1;options.deeplink=!1;this._slideDuration=(options.duration!==undefined)?options.duration:DEFAULT_SLIDE_DURATION;options.toggleNavDuration=(options.toggleNavDuration===undefined)?this._slideDuration:options.toggleNavDuration;this._itemCenterPoint=(options.itemCenterPoint!==undefined)?options.itemCenterPoint:DEFAULT_ITEM_CENTER_POINT;this._edgePullResistance=(options.edgePullResistance?options.edgePullResistance:DEFAULT_EDGE_PULL_RESISTANCE);this._slideOptions={ease:options.ease};if(options.resizeContainerOnUpdate===!0){options.resizeContainerOnUpdate=this._slideDuration}
options.touch=options.touch!==!1;this._originalWrapAround=options.wrapAround||!1;AutoGallery.call(this,el,options);if(deeplink){var item=this._getDeeplinkedItem();if(item){if(this._currentItem!==item){this._currentItem.hide();this._setCurrentItem(item);this._currentItem.show()}}}
this._positionItems=this._positionItems.bind(this);this._createContainer();if(this._items.length!==0){this._positionItems()}
this._isInstantiated=!0}
SlideGallery.RESIZED=AutoGallery.RESIZED;SlideGallery.UPDATE=AutoGallery.UPDATE;SlideGallery.UPDATE_COMPLETE=AutoGallery.UPDATE_COMPLETE;var superProto=AutoGallery.prototype;var proto=SlideGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}
var returnValue=superProto.addItem.call(this,item,index);if(this._containerEl!==undefined){this._addItemToContainer(item);this._positionItems()}
this._updateWrapAround();return returnValue};proto.removeItem=function(item,options){if(this._containerEl&&item.getElement().parentElement===this._containerEl){var parentElement=item.getOriginalParentElement();if(parentElement){parentElement.appendChild(item.getElement())}else if(typeof item.removeItems==='function'){item.removeItems();options.destroyItem=!0}
var returnValue=superProto.removeItem.call(this,item,options);if(this._currentItem){this._positionItems(this._currentItem)}
this._updateWrapAround();return returnValue}
return superProto.removeItem.call(this,item,options)};proto.resize=function(){this._positionItems();this._snapToPosition(this._currentItem.position());return superProto.resize.call(this)};proto.destroy=function(options){this._destroyCurrentClip();this._clip=null;var index=this._items.length;while(index--){this._items[index].off(SlideItem.CENTER_POINT_CHANGED,this._positionItems)}
if(this._touchSwipe){this._touchSwipe.off(PointerTracker.START,this._onSwipeStart);this._touchSwipe.off(PointerTracker.UPDATE,this._onSwipeUpdate)}
if(this._clickSwipe){this._clickSwipe.off(PointerTracker.START,this._onSwipeStart);this._clickSwipe.off(PointerTracker.UPDATE,this._onSwipeUpdate)}
var el=this._el;var returnValue=superProto.destroy.call(this,options);el.removeChild(this._containerEl);this._containerEl=null;this._slideDuration=null;this._itemCenterPoint=null;this._positionItems=null;this._slideOptions=null;return returnValue};proto._addItems=function(itemSelector){if(this._itemsPerSlide>1){var items;var isDataAttribute=/(^\[).*(\]$)/.test(itemSelector);if(isDataAttribute){items=selectElementThatHasDataAttribute(itemSelector.replace(/\[|\]/g,''),this._el)}else{items=ac_querySelectorAll(itemSelector,this._el)}
var itemWrapper;var triggers;var elementId;var count=0;var index=0;var length=items.length;for(index;index<length;index++){if(count===0){itemWrapper=new SlideItemWrapper()}
itemWrapper.addItem(items[index]);elementId=items[index].getAttribute('id');if(elementId){triggers=selectElementFromDataAttributeValue('data-ac-gallery-trigger',elementId);this._addItemTriggers(itemWrapper,triggers)}
if(++count===this._itemsPerSlide||index===length-1){count=0;itemWrapper.resize();this.addItem(itemWrapper)}}}else{superProto._addItems.call(this,itemSelector)}};proto._createContainer=function(){this._containerEl=document.createElement('div');ac_classList.add(this._containerEl,'ac-gallery-slidecontainer');ac_dom_styles.setStyle(this._containerEl,{position:'absolute',left:'0',top:'0',width:'100%',height:'100%'});this._el.appendChild(this._containerEl);var index=0;var length=this._items.length;for(index;index<length;index++){this._addItemToContainer(this._items[index])}};proto._addItemToContainer=function(item){this._containerEl.appendChild(item.getElement());item.on(SlideItem.CENTER_POINT_CHANGED,this._positionItems)};proto._positionItems=function(itemToSnapTo){itemToSnapTo=itemToSnapTo||this._currentItem;var items=this._items;if(this._wrapAround){items=this._shuffleItems()}
var diff=(this._getActualPositionX()-itemToSnapTo.position())||0;var containerWidth=parseInt(ac_dom_styles.getStyle(this._el,'width').width,10);var xPosition=0;var index=0;var length=items.length;var item;var el;var width;var offset;var centerPoint;for(index;index<length;index++){item=items[index];item.resize();el=item.getElement();ac_dom_styles.setStyle(el,{left:xPosition+'px'});width=getElementFullWidth(el);offset=containerWidth-width;centerPoint=(item.centerPoint&&item.centerPoint()!==null)?item.centerPoint():this._itemCenterPoint;item.position((xPosition*-1)+(offset*centerPoint));if(this._isRightToLeft){xPosition-=width}else{xPosition+=width}}
xPosition=itemToSnapTo.position()+diff;this._snapToPosition(xPosition)};proto._getActualPositionX=function(){var transformStyles=ac_dom_styles.getStyle(this._containerEl,'transform').transform;if(!transformStyles||transformStyles==='none'){var left=ac_dom_styles.getStyle(this._containerEl,'left').left;return parseInt(left,10)}else if(transformStyles===this._transformStyles&&this._actualPositionX!==undefined){return this._actualPositionX}
this._transformStyles=transformStyles;var spiltMatrix=this._transformStyles.split(',');this._actualPositionX=spiltMatrix[4]||this._currentItem.position();return this._actualPositionX*1};proto._snapToPosition=function(positionX){this._destroyCurrentClip();this._positionX=positionX;ac_dom_styles.setStyle(this._containerEl,{transition:'transform 0s, left 0s'});moveX(this._containerEl,positionX,0,this._slideOptions)};proto._slideToPosition=function(positionX,duration,callback){this._positionX=positionX;this._clip=moveX(this._containerEl,positionX,duration,{ease:this._slideOptions.ease,onComplete:callback})};proto._setUpSwiping=function(forTouch,forClick){var returnValue=superProto._setUpSwiping.call(this,forTouch,forClick);this._onSwipeStart=this._onSwipeStart.bind(this);this._onSwipeUpdate=this._onSwipeUpdate.bind(this);if(this._touchSwipe){this._touchSwipe.on(PointerTracker.START,this._onSwipeStart);this._touchSwipe.on(PointerTracker.UPDATE,this._onSwipeUpdate)}
if(this._clickSwipe){this._clickSwipe.on(PointerTracker.START,this._onSwipeStart);this._clickSwipe.on(PointerTracker.UPDATE,this._onSwipeUpdate)}
return returnValue};proto._onSwipeStart=function(evt){if(this._clip&&this._clip.playing()){this._destroyCurrentClip();this._positionX=this._getActualPositionX()}};proto._onSwipeUpdate=function(evt){this._destroyCurrentClip();var lastSlidePosition=this.getItems().slice(-1)[0].position();var isOverscrolled=this._positionX>0||this._positionX<lastSlidePosition;var diffX=evt.diffX;if(this._edgePullResistance&&!this._wrapAround&&isOverscrolled){diffX*=0.5}
this._snapToPosition(this._positionX-diffX)};proto._onSwipeEnd=function(evt){var item=superProto._onSwipeEnd.call(this,evt);if(item===null){item=this.show(this._currentItem,{interactionEvent:evt.interactionEvent})}
return item};proto._shuffleItems=function(){var twoItemGalleryIsEngaged=this._items.length===2&&!this._isAutoPlaying;if(twoItemGalleryIsEngaged){return this._items.slice()}
var totalItems=this._items.length;var currentIndex=this._items.indexOf(this._currentItem);var middleIndex=Math.floor(totalItems*0.5);var itemsToSlice;var removedItems;var remainingItems;if(currentIndex<middleIndex){itemsToSlice=middleIndex-currentIndex;var sliceIndex=totalItems-itemsToSlice;removedItems=this._items.slice(sliceIndex);remainingItems=this._items.slice(0,sliceIndex);return removedItems.concat(remainingItems)}else if(currentIndex>middleIndex){itemsToSlice=currentIndex-middleIndex;removedItems=this._items.slice(0,itemsToSlice);remainingItems=this._items.slice(itemsToSlice);return remainingItems.concat(removedItems)}
return this._items};proto._updateItems=function(items,silent){this._destroyCurrentClip();if(this._wrapAround){this._positionItems(items.outgoing[0])}
if(this.getItemIndex(items.outgoing[0])>-1){var callback=(silent)?null:this.trigger.bind(this,SlideGallery.UPDATE_COMPLETE,items);var duration=this._slideDuration;this._slideToPosition(items.incoming[0].position(),duration,callback);if(items.incoming[0]!==items.outgoing[0]){items.incoming[0].show();items.outgoing[0].hide()}}else{this._slideToPosition(this._currentItem.position(),this._slideDuration);items.incoming[0].show();if(!silent){this.trigger(SlideGallery.UPDATE_COMPLETE,items)}}};proto._updateWrapAround=function(){if(this._items.length<=2){this._wrapAround=!1}else if(this._originalWrapAround){this._wrapAround=this._originalWrapAround}
if(this._isInstantiated&&(this._previousButtons||this._nextButtons)){this._updatePaddleNavState()}};proto._destroyCurrentClip=function(){if(this._clip&&this._clip.playing()){this._clip.destroy()}};module.exports=SlideGallery},{"./../auto/AutoGallery":331,"./../helpers/getElementFullWidth":337,"./../helpers/selectElementFromDataAttributeValue":339,"./../helpers/selectElementThatHasDataAttribute":340,"./SlideItem":345,"./SlideItemWrapper":346,"@marcom/ac-classlist":170,"@marcom/ac-dom-styles":211,"@marcom/ac-dom-traversal/querySelectorAll":48,"@marcom/ac-object/clone":235,"@marcom/ac-object/create":236,"@marcom/ac-pointer-tracker":244,"@marcom/ac-solar/moveX":324}],345:[function(require,module,exports){'use strict';var setStyle=require('@marcom/ac-dom-styles/setStyle');var create=require('@marcom/ac-object/create');var Item=require('./../Item');function SlideItem(el,options){Item.call(this,el,options);setStyle(el,{position:'absolute',transform:{translateZ:0}});this._parentElement=el.parentElement}
SlideItem.CENTER_POINT_CHANGED='centerpointchanged';SlideItem.SELECTED=Item.SELECTED;SlideItem.SHOW=Item.SHOW;SlideItem.HIDE=Item.HIDE;var superProto=Item.prototype;var proto=SlideItem.prototype=create(superProto);proto.position=function(pos){if(pos!==undefined){this._position=pos}
return this._position||0};proto.centerPoint=function(point){if(point!==undefined){this._centerPoint=point;this.trigger(SlideItem.CENTER_POINT_CHANGED)}
return(this._centerPoint!==undefined)?this._centerPoint:null};proto.getOriginalParentElement=function(){return this._parentElement};proto.resize=function(){};proto.destroy=function(){setStyle(this._el,{position:null,left:null,transform:null});superProto.destroy.call(this)};module.exports=SlideItem},{"./../Item":328,"@marcom/ac-dom-styles/setStyle":214,"@marcom/ac-object/create":236}],346:[function(require,module,exports){'use strict';var ac_classlist=require('@marcom/ac-classlist');var setStyle=require('@marcom/ac-dom-styles/setStyle');var ac_querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var create=require('@marcom/ac-object/create');var tabManager=require('./../singletons/tabManager');var getElementFullWidth=require('./../helpers/getElementFullWidth');var SlideItem=require('./SlideItem');var CSS_CLASSNAME='ac-gallery-slideitemwrapper';function SlideItemWrapper(){SlideItem.call(this,document.createElement('div'));this._items=[];this._currentWidth=0;ac_classlist.add(this._el,CSS_CLASSNAME)}
var superProto=SlideItem.prototype;var proto=SlideItemWrapper.prototype=create(superProto);proto.addItem=function(el){this._items.push({el:el,parentElement:el.parentElement});this._el.appendChild(el);var elId=el.getAttribute('id');if(elId){var id=this._el.getAttribute('id')||'';var seperator=(id.length)?'-':'';id+=seperator+elId;this._el.setAttribute('id',id)}
this._focusableEls=this._focusableEls.concat(ac_querySelectorAll(tabManager.focusableSelectors,el))};proto.removeItems=function(){var el;var parentElement;var index=0;var length=this._items.length;for(index;index<length;index++){el=this._items[index].el;setStyle(el,{position:null,left:null});parentElement=this._items[index].parentElement;if(parentElement){parentElement.appendChild(el)}}};proto.resize=function(){this._currentWidth=0;var el;var index=0;var length=this._items.length;for(index;index<length;index++){el=this._items[index].el;setStyle(el,{position:'absolute',left:this._currentWidth+'px'});this._currentWidth+=getElementFullWidth(el)}
setStyle(this._el,{width:this._currentWidth+'px'})};proto.destroy=function(){this.removeItems();this._items=null;this._currentWidth=null;var parentElement=this._el.parentElement;if(parentElement){parentElement.removeChild(this._el)}
superProto.destroy.call(this)};module.exports=SlideItemWrapper},{"./../helpers/getElementFullWidth":337,"./../singletons/tabManager":343,"./SlideItem":345,"@marcom/ac-classlist":170,"@marcom/ac-dom-styles/setStyle":214,"@marcom/ac-dom-traversal/querySelectorAll":48,"@marcom/ac-object/create":236}],347:[function(require,module,exports){'use strict';var template='';template+='<nav class="paddlenav">';template+='<ul>';template+='<li><button class="paddlenav-arrow paddlenav-arrow-previous" data-ac-gallery-previous-trigger="%ID%"></button></li>';template+='<li><button class="paddlenav-arrow paddlenav-arrow-next" data-ac-gallery-next-trigger="%ID%"></button></li>';template+='</ul>';template+='</nav>';module.exports=template},{}],348:[function(require,module,exports){arguments[4][163][0].apply(exports,arguments)},{"./className/add":350,"@marcom/ac-polyfills/Array/prototype.slice":390,"@marcom/ac-polyfills/Element/prototype.classList":391,"dup":163}],349:[function(require,module,exports){arguments[4][164][0].apply(exports,arguments)},{"./className/add":350,"./className/contains":351,"./className/remove":353,"dup":164}],350:[function(require,module,exports){arguments[4][165][0].apply(exports,arguments)},{"./contains":351,"dup":165}],351:[function(require,module,exports){arguments[4][166][0].apply(exports,arguments)},{"./getTokenRegExp":352,"dup":166}],352:[function(require,module,exports){arguments[4][167][0].apply(exports,arguments)},{"dup":167}],353:[function(require,module,exports){arguments[4][168][0].apply(exports,arguments)},{"./contains":351,"./getTokenRegExp":352,"dup":168}],354:[function(require,module,exports){arguments[4][169][0].apply(exports,arguments)},{"./className/contains":351,"@marcom/ac-polyfills/Element/prototype.classList":391,"dup":169}],355:[function(require,module,exports){arguments[4][170][0].apply(exports,arguments)},{"./add":348,"./contains":354,"./remove":356,"./toggle":357,"dup":170}],356:[function(require,module,exports){arguments[4][171][0].apply(exports,arguments)},{"./className/remove":353,"@marcom/ac-polyfills/Array/prototype.slice":390,"@marcom/ac-polyfills/Element/prototype.classList":391,"dup":171}],357:[function(require,module,exports){arguments[4][172][0].apply(exports,arguments)},{"./className":349,"@marcom/ac-polyfills/Element/prototype.classList":391,"dup":172}],358:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"dup":69}],359:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{"dup":74}],360:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"dup":75}],361:[function(require,module,exports){'use strict';module.exports=function getScrollY(el){var offset;el=el||window;if(el===window){offset=window.pageYOffset;if(!offset){el=document.documentElement||document.body.parentNode||document.body}else{return offset}}
return el.scrollTop}},{}],362:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{"dup":18}],363:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{"dup":19}],364:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{"dup":21}],365:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{"dup":22}],366:[function(require,module,exports){'use strict';module.exports=function hasAttribute(el,attr){if('hasAttribute' in el){return el.hasAttribute(attr)}
return(el.attributes.getNamedItem(attr)!==null)}},{}],367:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertBefore(node,target){validate.insertNode(node,!0,'insertBefore');validate.childNode(target,!0,'insertBefore');validate.hasParentNode(target,'insertBefore');return target.parentNode.insertBefore(node,target)}},{"./internal/validate":369}],368:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"../isNode":371,"dup":24}],369:[function(require,module,exports){arguments[4][25][0].apply(exports,arguments)},{"../COMMENT_NODE":362,"../DOCUMENT_FRAGMENT_NODE":363,"../ELEMENT_NODE":364,"../TEXT_NODE":365,"./isNodeType":368,"dup":25}],370:[function(require,module,exports){arguments[4][27][0].apply(exports,arguments)},{"./ELEMENT_NODE":364,"./internal/isNodeType":368,"dup":27}],371:[function(require,module,exports){arguments[4][28][0].apply(exports,arguments)},{"dup":28}],372:[function(require,module,exports){arguments[4][121][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":373,"dup":121}],373:[function(require,module,exports){arguments[4][122][0].apply(exports,arguments)},{"dup":122}],374:[function(require,module,exports){arguments[4][162][0].apply(exports,arguments)},{"dup":162}],375:[function(require,module,exports){arguments[4][229][0].apply(exports,arguments)},{"dup":229}],376:[function(require,module,exports){'use strict';var cache=require('./shared/stylePropertyCache');var getStyleTestElement=require('./shared/getStyleTestElement');var toCSS=require('./utils/toCSS');var toDOM=require('./utils/toDOM');var prefixHelper=require('./shared/prefixHelper');var memoizeStyleProperty=function(property,prefixed){var cssProperty=toCSS(property);var cssPrefixed=(prefixed===!1)?!1:toCSS(prefixed);cache[property]=cache[prefixed]=cache[cssProperty]=cache[cssPrefixed]={dom:prefixed,css:cssPrefixed};return prefixed};module.exports=function getStyleProperty(property){var properties;var ucProperty;var el;var i;property+='';if(property in cache){return cache[property].dom}
el=getStyleTestElement();property=toDOM(property);ucProperty=property.charAt(0).toUpperCase()+property.substring(1);if(property==='filter'){properties=['WebkitFilter','filter']}else{properties=(property+' '+prefixHelper.dom.join(ucProperty+' ')+ucProperty).split(' ')}
for(i=0;i<properties.length;i++){if(typeof el.style[properties[i]]!=='undefined'){if(i!==0){prefixHelper.reduce(i-1)}
return memoizeStyleProperty(property,properties[i])}}
return memoizeStyleProperty(property,!1)}},{"./shared/getStyleTestElement":378,"./shared/prefixHelper":379,"./shared/stylePropertyCache":380,"./utils/toCSS":382,"./utils/toDOM":383}],377:[function(require,module,exports){'use strict';var getStyleProperty=require('./getStyleProperty');var styleValueAvailable=require('./shared/styleValueAvailable');var prefixHelper=require('./shared/prefixHelper');var stylePropertyCache=require('./shared/stylePropertyCache');var styleValueCache={};var RE_CSS_FUNCTION_PARAMS=/(\([^\)]+\))/gi;var RE_CSS_VALUES=/([^ ,;\(]+(\([^\)]+\))?)/gi;module.exports=function getStyleValue(property,value){var cssProperty;value+='';property=getStyleProperty(property);if(!property){return!1}
if(styleValueAvailable(property,value)){return value}
cssProperty=stylePropertyCache[property].css;value=value.replace(RE_CSS_VALUES,function(match){var values;var valueKey;var key;var i;if(match[0]==='#'||!isNaN(match[0])){return match}
valueKey=match.replace(RE_CSS_FUNCTION_PARAMS,'');key=cssProperty+':'+valueKey;if(key in styleValueCache){if(styleValueCache[key]===!1){return''}
return match.replace(valueKey,styleValueCache[key])}
values=prefixHelper.css.map(function(prefix){return prefix+match});values=[match].concat(values);for(i=0;i<values.length;i++){if(styleValueAvailable(property,values[i])){if(i!==0){prefixHelper.reduce(i-1)}
styleValueCache[key]=values[i].replace(RE_CSS_FUNCTION_PARAMS,'');return values[i]}}
styleValueCache[key]=!1;return''});value=value.trim();return(value==='')?!1:value}},{"./getStyleProperty":376,"./shared/prefixHelper":379,"./shared/stylePropertyCache":380,"./shared/styleValueAvailable":381}],378:[function(require,module,exports){'use strict';var el;module.exports=function getStyleTestElement(){if(!el){el=document.createElement('_')}else{el.style.cssText='';el.removeAttribute('style')}
return el};module.exports.resetElement=function(){el=null}},{}],379:[function(require,module,exports){'use strict';var CSS_PREFIXES=['-webkit-','-moz-','-ms-'];var DOM_PREFIXES=['Webkit','Moz','ms'];var EVT_PREFIXES=['webkit','moz','ms'];var PrefixeHelper=function(){this.initialize()};var proto=PrefixeHelper.prototype;proto.initialize=function(){this.reduced=!1;this.css=CSS_PREFIXES;this.dom=DOM_PREFIXES;this.evt=EVT_PREFIXES};proto.reduce=function(index){if(!this.reduced){this.reduced=!0;this.css=[this.css[index]];this.dom=[this.dom[index]];this.evt=[this.evt[index]]}};module.exports=new PrefixeHelper()},{}],380:[function(require,module,exports){'use strict';module.exports={}},{}],381:[function(require,module,exports){'use strict';var cache=require('./stylePropertyCache');var getStyleTestElement=require('./getStyleTestElement');var flagsSet=!1;var supportsAvailable;var invalidStyleThrowsError;var prepareFlags=function(){var el;if(!flagsSet){flagsSet=!0;supportsAvailable=('CSS' in window&&'supports' in window.CSS);invalidStyleThrowsError=!1;el=getStyleTestElement();try{el.style.width='invalid'}catch(e){invalidStyleThrowsError=!0}}};module.exports=function styleValueAvailable(property,value){var before;var el;prepareFlags();if(supportsAvailable){property=cache[property].css;return CSS.supports(property,value)}
el=getStyleTestElement();before=el.style[property];if(invalidStyleThrowsError){try{el.style[property]=value}catch(e){return!1}}else{el.style[property]=value}
return(el.style[property]&&el.style[property]!==before)};module.exports.resetFlags=function(){flagsSet=!1}},{"./getStyleTestElement":378,"./stylePropertyCache":380}],382:[function(require,module,exports){'use strict';var RE_DOM_PREFIXES=/^(webkit|moz|ms)/gi;module.exports=function toCSS(str){var i;if(str.toLowerCase()==='cssfloat'){return'float'}
if(RE_DOM_PREFIXES.test(str)){str='-'+str}
return str.replace(/([A-Z]+)([A-Z][a-z])/g,'$1-$2').replace(/([a-z\d])([A-Z])/g,'$1-$2').toLowerCase()}},{}],383:[function(require,module,exports){'use strict';var RE_CSS_WORD=/-([a-z])/g;module.exports=function toDOM(str){var i;if(str.toLowerCase()==='float'){return'cssFloat'}
str=str.replace(RE_CSS_WORD,function(str,m1){return m1.toUpperCase()});if(str.substr(0,2)==='Ms'){str='ms'+str.substring(2)}
return str}},{}],384:[function(require,module,exports){'use strict';var getStyleValue=require('@marcom/ac-prefixer/getStyleValue');var getStyleProperty=require('@marcom/ac-prefixer/getStyleProperty');var memoize=require('@marcom/ac-function/memoize');function cssPropertyAvailable(property,value){if(typeof value!=='undefined'){return!!getStyleValue(property,value)}else{return!!getStyleProperty(property)}}
module.exports=memoize(cssPropertyAvailable);module.exports.original=cssPropertyAvailable},{"@marcom/ac-function/memoize":374,"@marcom/ac-prefixer/getStyleProperty":376,"@marcom/ac-prefixer/getStyleValue":377}],385:[function(require,module,exports){'use strict';module.exports={getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator}}},{}],386:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/matchMedia');var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function mediaQueriesAvailable(){var windowObj=globalsHelper.getWindow();var mql=windowObj.matchMedia('only all');return!!(mql&&mql.matches)}
module.exports=once(mediaQueriesAvailable);module.exports.original=mediaQueriesAvailable},{"./helpers/globals":385,"@marcom/ac-function/once":375,"@marcom/ac-polyfills/matchMedia":395}],387:[function(require,module,exports){'use strict';var extend=require('./extend');module.exports=function defaults(defaultsObj,options){if(typeof defaultsObj!=='object'){throw new TypeError('defaults: must provide a defaults object')}
options=options||{};if(typeof options!=='object'){throw new TypeError('defaults: options must be a typeof object')}
return extend({},defaultsObj,options)}},{"./extend":388}],388:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.forEach');var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args;var dest;if(arguments.length<2){args=[{},arguments[0]]}else{args=[].slice.call(arguments)}
dest=args.shift();args.forEach(function(source){if(source!=null){for(var property in source){if(hasOwnProp.call(source,property)){dest[property]=source[property]}}}});return dest}},{"@marcom/ac-polyfills/Array/prototype.forEach":389}],389:[function(require,module,exports){if(!Array.prototype.forEach){Array.prototype.forEach=function forEach(callback,thisObj){var arrayObject=Object(this);var i;var currentValue;if(typeof callback!=='function'){throw new TypeError('No function object passed to forEach.')}
for(i=0;i<this.length;i+=1){currentValue=arrayObject[i];callback.call(thisObj,currentValue,i,arrayObject)}}}},{}],390:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"dup":32}],391:[function(require,module,exports){if("document" in self){if(!("classList" in document.createElement("_"))){(function(view){"use strict";if(!('Element' in view))return;var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){var
i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i}}
return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}
if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}
return arrIndexOf.call(classList,token)},ClassList=function(elem){var
trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i])}
this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1};classListProto.add=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=!1;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=!0}}
while(++i<l);if(updated){this._updateClassName()}};classListProto.remove=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=!1,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=!0;index=checkTokenAndGetIndex(this,token)}}
while(++i<l);if(updated){this._updateClassName()}};classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==!0&&"remove":force!==!1&&"add";if(method){this[method](token)}
if(force===!0||force===!1){return force}else{return!result}};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){if(ex.number===-0x7FF5EC54){classListPropDesc.enumerable=!1;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter)}}(self))}else{(function(){"use strict";var testElement=document.createElement("_");testElement.classList.add("c1","c2");if(!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i++){token=arguments[i];original.call(this,token)}}};createMethod('add');createMethod('remove')}
testElement.classList.toggle("c3",!1);if(testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){if(1 in arguments&&!this.contains(token)===!force){return force}else{return _toggle.call(this,token)}}}
testElement=null}())}}},{}],392:[function(require,module,exports){if(!Function.prototype.bind){Function.prototype.bind=function(originalContext){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable')}
var applicableArgs=Array.prototype.slice.call(arguments,1);var functionToBind=this;var fnOriginalPrototype=function(){};var fnBound=function(){return functionToBind.apply((this instanceof fnOriginalPrototype&&originalContext)?this:originalContext,applicableArgs.concat(Array.prototype.slice.call(arguments)))}
fnOriginalPrototype.prototype=this.prototype;fnBound.prototype=new fnOriginalPrototype();return fnBound}}},{}],393:[function(require,module,exports){if(!Object.create){var F=function(){};Object.create=function(proto){if(arguments.length>1){throw new Error('Second argument not supported')}
if(proto===null||typeof proto!=='object'){throw new TypeError('Object prototype may only be an Object.')}
F.prototype=proto;return new F()}}},{}],394:[function(require,module,exports){if(!Object.keys){Object.keys=function keys(obj){var keysArray=[];var currentKey;if((!obj)||(typeof obj.hasOwnProperty!=='function')){throw 'Object.keys called on non-object.'}
for(currentKey in obj){if(obj.hasOwnProperty(currentKey)){keysArray.push(currentKey)}}
return keysArray}}},{}],395:[function(require,module,exports){window.matchMedia=window.matchMedia||(function(doc,undefined){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement('body'),div=doc.createElement('div');div.id='mq-test-1';div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);return function(q){div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width:42px; }</style>';docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:q}}}(document))},{}],396:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Function/prototype.bind');require('@marcom/ac-polyfills/Object/keys');require('@marcom/ac-polyfills/Object/create');var EventEmitter=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var mediaQueriesAvailable=require('@marcom/ac-feature/mediaQueriesAvailable');var DEFAULT_ID='viewport-emitter';var PSEUDO_SELECTOR='::before';var RETINA_QUERY='only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)';function ViewportEmitter(id){EventEmitter.call(this);this._initializeElement(id);if(mediaQueriesAvailable()){this._updateViewport=this._updateViewport.bind(this);ac_addEventListener(window,'resize',this._updateViewport);ac_addEventListener(window,'orientationchange',this._updateViewport);this._retinaQuery=window.matchMedia(RETINA_QUERY);this._updateRetina();if(this._retinaQuery.addListener){this._updateRetina=this._updateRetina.bind(this);this._retinaQuery.addListener(this._updateRetina)}}
this._updateViewport()}
var proto=ViewportEmitter.prototype=Object.create(EventEmitter.prototype);proto.viewport=!1;proto.retina=!1;proto._initializeElement=function(id){var el;id=id||DEFAULT_ID;el=document.getElementById(id);if(!el){el=document.createElement('div');el.id=id;el=document.body.appendChild(el)}
this._el=el};proto._getElementContent=function(){var content;if('currentStyle' in this._el){content=this._el.currentStyle['x-content']}else{this._invalidateStyles();content=window.getComputedStyle(this._el,PSEUDO_SELECTOR).content}
content=content.replace(/["']/g,'');if(content){return content}
return!1};proto._updateViewport=function(){var lastViewport=this.viewport;var style;var eventData;this.viewport=this._getElementContent();if(this.viewport){this.viewport=this.viewport.split(':').pop()}
if(lastViewport&&this.viewport!==lastViewport){eventData={from:lastViewport,to:this.viewport};this.trigger('change',eventData);this.trigger('from:'+lastViewport,eventData);this.trigger('to:'+this.viewport,eventData)}};proto._updateRetina=function(query){var lastRetina=this.retina;this.retina=this._retinaQuery.matches;if(lastRetina!==this.retina){this.trigger('retinachange',{from:lastRetina,to:this.retina})}};proto._invalidateStyles=function(){document.documentElement.clientWidth;this._el.innerHTML=(this._el.innerHTML===' ')?' ':' ';document.documentElement.clientWidth};module.exports=ViewportEmitter},{"@marcom/ac-dom-events/utils/addEventListener":360,"@marcom/ac-event-emitter-micro":372,"@marcom/ac-feature/mediaQueriesAvailable":386,"@marcom/ac-polyfills/Function/prototype.bind":392,"@marcom/ac-polyfills/Object/create":393,"@marcom/ac-polyfills/Object/keys":394}],397:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Function/prototype.bind');var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var preventDefault=require('@marcom/ac-dom-events/preventDefault');var getTarget=require('@marcom/ac-dom-events/target');var ac_querySelector=require('@marcom/ac-dom-traversal/querySelector');var ancestor=require('@marcom/ac-dom-traversal/ancestor');var ac_classList=require('@marcom/ac-classlist');var hasAttribute=require('@marcom/ac-dom-nodes/hasAttribute');var isElement=require('@marcom/ac-dom-nodes/isElement');var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');var ViewportEmitter=require('@marcom/ac-viewport-emitter/ViewportEmitter');var defaults=require('@marcom/ac-object/defaults');var CheckboxMenu=require('./internal/CheckboxMenu');var SimpleSticky=require('./internal/SimpleSticky');var ClickAway=require('./internal/ClickAway');var DEFAULT_OPTIONS={className:'localnav'};var Localnav=function(el,options){var selector;options=defaults(DEFAULT_OPTIONS,options||{});this.el=el;selector=options.selector||'.'+options.className;this._selectors={traySelector:options.traySelector||'.'+options.className+'-menu-tray',viewportEmitterID:options.viewportEmitterID||options.className+'-viewport-emitter',curtainID:options.curtainID||options.className+'-curtain',menuStateID:options.menuStateID||options.className+'-menustate',menuOpeningClassName:options.menuOpeningClassName||options.className+'-opening'};this._selectors.clickAwaySelector=selector+', #'+this._selectors.curtainID+', #'+this._selectors.menuStateID;this.tray=ac_querySelector(this._selectors.traySelector,this.el);this.stickyEnabled=this._getStickyEnabled();this._transitionsAvailable=cssPropertyAvailable('transition');this._viewports=new ViewportEmitter(this._selectors.viewportEmitterID);if(this.stickyEnabled){this._sticky=new SimpleSticky(this.el,options)}
this._initializeMenu()};Localnav.create=function(el,options){return new Localnav(el,options)};var proto=Localnav.prototype;proto._getStickyEnabled=function(){return hasAttribute(this.el,'data-sticky')};proto._initializeMenu=function(){var checkbox=document.getElementById(this._selectors.menuStateID);var anchorOpen=document.getElementById(this._selectors.menuStateID+'-open');var anchorClose=document.getElementById(this._selectors.menuStateID+'-close');var historyEvent=('onpopstate' in window)?'popstate':'beforeunload';var clickAway;if(checkbox&&anchorOpen&&anchorClose){this.menu=new CheckboxMenu(checkbox,anchorOpen,anchorClose);this.menu.on('open',this._onMenuOpen.bind(this));this._viewports.on('change',this._onViewportChange.bind(this));ac_addEventListener(window,'scroll',this._onScroll.bind(this));ac_addEventListener(window,'touchmove',this._onScroll.bind(this));ac_addEventListener(this.tray,'click',this._onTrayClick.bind(this));this._closeMenu=this._closeMenu.bind(this);ac_addEventListener(window,historyEvent,this._closeMenu);ac_addEventListener(window,'orientationchange',this._closeMenu);clickAway=new ClickAway(this._selectors.clickAwaySelector);clickAway.on('click',this._closeMenu);if(this._transitionsAvailable){ac_addEventListener(this.tray,'transitionend',this._enableMenuScroll.bind(this))}}};proto._onMenuOpen=function(){this._menuCollapseOnScroll=null;if(this._transitionsAvailable){this._disableMenuScrollbar()}};proto._onScroll=function(evt){var target;if(this.menu.isOpen()){if(this._menuCollapseOnScroll===null){this._menuCollapseOnScroll=(this.tray.offsetHeight>=this.tray.scrollHeight)}
if(this._menuCollapseOnScroll){this.menu.close()}else{target=getTarget(evt);if(!isElement(target)||!ancestor(target,this._selectors.traySelector,!0)){preventDefault(evt)}}}};proto._onTrayClick=function(evt){var target=getTarget(evt);if('href' in target){this._closeMenu()}};proto._onViewportChange=function(data){if(data.to==='medium'||data.to==='large'){this._closeMenu()}};proto._disableMenuScrollbar=function(){ac_classList.add(this.el,this._selectors.menuOpeningClassName)};proto._enableMenuScroll=function(){ac_classList.remove(this.el,this._selectors.menuOpeningClassName)};proto._closeMenu=function(){this.menu.close()};proto.destroy=function(){};module.exports=Localnav},{"./internal/CheckboxMenu":399,"./internal/ClickAway":400,"./internal/SimpleSticky":401,"@marcom/ac-classlist":355,"@marcom/ac-dom-events/preventDefault":358,"@marcom/ac-dom-events/target":359,"@marcom/ac-dom-events/utils/addEventListener":360,"@marcom/ac-dom-nodes/hasAttribute":366,"@marcom/ac-dom-nodes/isElement":370,"@marcom/ac-dom-traversal/ancestor":34,"@marcom/ac-dom-traversal/querySelector":47,"@marcom/ac-feature/cssPropertyAvailable":384,"@marcom/ac-object/defaults":387,"@marcom/ac-polyfills/Function/prototype.bind":392,"@marcom/ac-viewport-emitter/ViewportEmitter":396}],398:[function(require,module,exports){'use strict';var Localnav=require('./Localnav');var el=document.getElementById('localnav');if(el){module.exports=new Localnav(el)}},{"./Localnav":397}],399:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Object/create');var EventEmitter=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var preventDefault=require('@marcom/ac-dom-events/preventDefault');function CheckboxMenu(el,anchorOpen,anchorClose){EventEmitter.call(this);this.el=el;this.anchorOpen=anchorOpen;this.anchorClose=anchorClose;this._lastOpen=this.el.checked;ac_addEventListener(this.el,'change',this.update.bind(this));ac_addEventListener(this.anchorOpen,'click',this._anchorOpenClick.bind(this));ac_addEventListener(this.anchorClose,'click',this._anchorCloseClick.bind(this));if(window.location.hash==='#'+el.id){window.location.hash=''}}
CheckboxMenu.create=function(el,anchorOpen,anchorClose){return new CheckboxMenu(el,anchorOpen,anchorClose)};var superProto=EventEmitter.prototype;var proto=CheckboxMenu.prototype=Object.create(superProto);CheckboxMenu.prototype.constructor=CheckboxMenu;proto.update=function(){var open=this.isOpen();if(open!==this._lastOpen){this.trigger(open?'open':'close');this._lastOpen=open;this.anchorOpen.setAttribute("aria-hidden",open);this.anchorClose.setAttribute("aria-hidden",!open)}};proto.isOpen=function(){return this.el.checked};proto.toggle=function(){if(this.isOpen()){this.close()}else{this.open()}};proto.open=function(){if(!this.el.checked){this.el.checked=!0;this.update()}};proto.close=function(){if(this.el.checked){this.el.checked=!1;this.update()}};proto._anchorOpenClick=function(evt){preventDefault(evt);this.open();this.anchorClose.focus()};proto._anchorCloseClick=function(evt){preventDefault(evt);this.close();this.anchorOpen.focus()};module.exports=CheckboxMenu},{"@marcom/ac-dom-events/preventDefault":358,"@marcom/ac-dom-events/utils/addEventListener":360,"@marcom/ac-event-emitter-micro":372,"@marcom/ac-polyfills/Object/create":393}],400:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Function/prototype.bind');require('@marcom/ac-polyfills/Object/create');var EventEmitter=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var getTarget=require('@marcom/ac-dom-events/target');var ancestors=require('@marcom/ac-dom-traversal/ancestors');function ClickAway(selector){EventEmitter.call(this);this._selector=selector;this._touching=!1;ac_addEventListener(document,'click',this._onClick.bind(this));ac_addEventListener(document,'touchstart',this._onTouchStart.bind(this));ac_addEventListener(document,'touchend',this._onTouchEnd.bind(this))}
var superProto=EventEmitter.prototype;var proto=ClickAway.prototype=Object.create(superProto);ClickAway.prototype.constructor=ClickAway;proto._checkTarget=function(evt){var target=getTarget(evt);if(!ancestors(target,this._selector,!0).length){this.trigger('click',evt)}};proto._onClick=function(evt){if(!this._touching){this._checkTarget(evt)}};proto._onTouchStart=function(evt){this._touching=!0;this._checkTarget(evt)};proto._onTouchEnd=function(){this._touching=!1};module.exports=ClickAway},{"@marcom/ac-dom-events/target":359,"@marcom/ac-dom-events/utils/addEventListener":360,"@marcom/ac-dom-traversal/ancestors":35,"@marcom/ac-event-emitter-micro":372,"@marcom/ac-polyfills/Function/prototype.bind":392,"@marcom/ac-polyfills/Object/create":393}],401:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Object/create');var EventEmitter=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');var insertBefore=require('@marcom/ac-dom-nodes/insertBefore');var getScrollY=require('@marcom/ac-dom-metrics/getScrollY');var addClass=require('@marcom/ac-classlist/add');var removeClass=require('@marcom/ac-classlist/remove');var NATIVE_CLASS='css-sticky';var SimpleSticky=function(el,options){EventEmitter.call(this);this.el=el;this.stuck=!1;this._selectors={placeholderID:options.placeholderID||options.className+'-sticky-placeholder',stuckClassName:options.stuckClassName||options.className+'-sticking'};this._createPlaceholder();this._featureDetection();this._updatePosition=this._updatePosition.bind(this);this._updatePlaceholderOffset=this._updatePlaceholderOffset.bind(this);ac_addEventListener(window,'scroll',this._updatePosition);ac_addEventListener(document,'touchmove',this._updatePosition);ac_addEventListener(window,'resize',this._updatePlaceholderOffset);ac_addEventListener(window,'orientationchange',this._updatePlaceholderOffset);if('acStore' in window){window.acStore.getStorefront().then(this._updatePlaceholderOffset);window.acStore.on('storefrontChange',this._updatePlaceholderOffset)}};SimpleSticky.create=function(el,options){return new SimpleSticky(el,options)};var superProto=EventEmitter.prototype;var proto=SimpleSticky.prototype=Object.create(superProto);SimpleSticky.prototype.constructor=SimpleSticky;proto._featureDetection=function(){var available=cssPropertyAvailable('position','sticky');var className=NATIVE_CLASS;if(!available){className='no-'+className}
addClass(this.el,className);addClass(this.placeholder,className)};proto._createPlaceholder=function(){this.placeholder=document.createElement('div');this.placeholder.id=this._selectors.placeholderID;insertBefore(this.placeholder,this.el);this._updatePlaceholderOffset()};proto._updatePlaceholderOffset=function(){var offset=this.placeholder.offsetTop;offset+=document.documentElement.offsetTop+document.body.offsetTop;if(offset!==this._placeholderOffset){this._placeholderOffset=offset;this._updatePosition()}};proto._updatePosition=function(){var scrollY=getScrollY();if(scrollY>this._placeholderOffset){if(!this.stuck){addClass(this.el,this._selectors.stuckClassName);addClass(this.placeholder,this._selectors.stuckClassName);this.stuck=!0;this.trigger('stuck')}}else{if(this.stuck){removeClass(this.el,this._selectors.stuckClassName);removeClass(this.placeholder,this._selectors.stuckClassName);this.stuck=!1;this.trigger('unstuck')}}};module.exports=SimpleSticky},{"@marcom/ac-classlist/add":348,"@marcom/ac-classlist/remove":356,"@marcom/ac-dom-events/utils/addEventListener":360,"@marcom/ac-dom-metrics/getScrollY":361,"@marcom/ac-dom-nodes/insertBefore":367,"@marcom/ac-event-emitter-micro":372,"@marcom/ac-feature/cssPropertyAvailable":384,"@marcom/ac-polyfills/Object/create":393}],402:[function(require,module,exports){arguments[4][163][0].apply(exports,arguments)},{"./className/add":403,"@marcom/ac-polyfills/Array/prototype.slice":446,"@marcom/ac-polyfills/Element/prototype.classList":447,"dup":163}],403:[function(require,module,exports){arguments[4][165][0].apply(exports,arguments)},{"./contains":404,"dup":165}],404:[function(require,module,exports){arguments[4][166][0].apply(exports,arguments)},{"./getTokenRegExp":405,"dup":166}],405:[function(require,module,exports){arguments[4][167][0].apply(exports,arguments)},{"dup":167}],406:[function(require,module,exports){arguments[4][168][0].apply(exports,arguments)},{"./contains":404,"./getTokenRegExp":405,"dup":168}],407:[function(require,module,exports){arguments[4][169][0].apply(exports,arguments)},{"./className/contains":404,"@marcom/ac-polyfills/Element/prototype.classList":447,"dup":169}],408:[function(require,module,exports){arguments[4][171][0].apply(exports,arguments)},{"./className/remove":406,"@marcom/ac-polyfills/Array/prototype.slice":446,"@marcom/ac-polyfills/Element/prototype.classList":447,"dup":171}],409:[function(require,module,exports){arguments[4][61][0].apply(exports,arguments)},{"./shared/getEventType":416,"./utils/addEventListener":418,"dup":61}],410:[function(require,module,exports){arguments[4][64][0].apply(exports,arguments)},{"./shared/camelCasedEventTypes":411,"./shared/prefixHelper":412,"./shared/windowFallbackEventTypes":413,"./utils/eventTypeAvailable":414,"dup":64}],411:[function(require,module,exports){arguments[4][65][0].apply(exports,arguments)},{"dup":65}],412:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],413:[function(require,module,exports){arguments[4][67][0].apply(exports,arguments)},{"dup":67}],414:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{"dup":68}],415:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{"./shared/getEventType":416,"./utils/removeEventListener":419,"dup":70}],416:[function(require,module,exports){arguments[4][71][0].apply(exports,arguments)},{"@marcom/ac-prefixer/getEventType":410,"dup":71}],417:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{"dup":74}],418:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"dup":75}],419:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"dup":77}],420:[function(require,module,exports){arguments[4][121][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":421,"dup":121}],421:[function(require,module,exports){arguments[4][122][0].apply(exports,arguments)},{"dup":122}],422:[function(require,module,exports){arguments[4][231][0].apply(exports,arguments)},{"./internal/KeyEvent":424,"@marcom/ac-dom-events/utils/addEventListener":418,"@marcom/ac-dom-events/utils/removeEventListener":419,"@marcom/ac-event-emitter-micro":420,"@marcom/ac-object/create":442,"dup":231}],423:[function(require,module,exports){arguments[4][232][0].apply(exports,arguments)},{"./Keyboard":422,"dup":232}],424:[function(require,module,exports){arguments[4][233][0].apply(exports,arguments)},{"dup":233}],425:[function(require,module,exports){arguments[4][234][0].apply(exports,arguments)},{"dup":234}],426:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{"dup":80}],427:[function(require,module,exports){arguments[4][81][0].apply(exports,arguments)},{"dup":81}],428:[function(require,module,exports){arguments[4][83][0].apply(exports,arguments)},{"dup":83}],429:[function(require,module,exports){arguments[4][84][0].apply(exports,arguments)},{"dup":84}],430:[function(require,module,exports){arguments[4][87][0].apply(exports,arguments)},{"dup":87}],431:[function(require,module,exports){arguments[4][88][0].apply(exports,arguments)},{"dup":88}],432:[function(require,module,exports){arguments[4][98][0].apply(exports,arguments)},{"../isNode":435,"dup":98}],433:[function(require,module,exports){arguments[4][99][0].apply(exports,arguments)},{"../COMMENT_NODE":428,"../DOCUMENT_FRAGMENT_NODE":429,"../ELEMENT_NODE":430,"../TEXT_NODE":431,"./isNodeType":432,"dup":99}],434:[function(require,module,exports){arguments[4][104][0].apply(exports,arguments)},{"./ELEMENT_NODE":430,"./internal/isNodeType":432,"dup":104}],435:[function(require,module,exports){arguments[4][105][0].apply(exports,arguments)},{"dup":105}],436:[function(require,module,exports){arguments[4][108][0].apply(exports,arguments)},{"./internal/validate":433,"dup":108}],437:[function(require,module,exports){'use strict';module.exports={Modal:require('./ac-modal-basic/Modal'),Renderer:require('./ac-modal-basic/Renderer'),classNames:require('./ac-modal-basic/classNames'),dataAttributes:require('./ac-modal-basic/dataAttributes')}},{"./ac-modal-basic/Modal":438,"./ac-modal-basic/Renderer":439,"./ac-modal-basic/classNames":440,"./ac-modal-basic/dataAttributes":441}],438:[function(require,module,exports){'use strict';var ac_DomEvents={addEventListener:require('@marcom/ac-dom-events/addEventListener'),removeEventListener:require('@marcom/ac-dom-events/removeEventListener'),target:require('@marcom/ac-dom-events/target')};var ac_DomMetrics={getScrollX:require('@marcom/ac-dom-metrics/getScrollX'),getScrollY:require('@marcom/ac-dom-metrics/getScrollY')};var ac_Object={create:require('@marcom/ac-object/create'),defaults:require('@marcom/ac-object/defaults')};var ac_Keyboard=require('@marcom/ac-keyboard');var keys=require('@marcom/ac-keyboard/keyMap');var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var Renderer=require('./Renderer');var modalDefaults={retainScrollPosition:!1};function Modal(modalOptions,renderOptions){EventEmitterMicro.call(this);this.options=ac_Object.defaults(modalDefaults,modalOptions);this.renderer=new Renderer(renderOptions);this.opened=!1;this._keysToClose=[keys.ESCAPE];this._attachedKeysToClose=[];this.close=this.close.bind(this)}
var proto=Modal.prototype=ac_Object.create(EventEmitterMicro.prototype);proto.open=function(){if(this.options.retainScrollPosition){this._saveScrollPosition()}
if(!this.opened){this._attachEvents();this.trigger('willopen');this.renderer.open();this.opened=!0;this.trigger('open')}};proto.close=function(evt){var target;var closeAttribute;if(this.opened){if(evt&&evt.type==='click'){target=ac_DomEvents.target(evt);closeAttribute=this.renderer.options.dataAttributes.close;if(!target.hasAttribute(closeAttribute)){return}}
this.trigger('willclose');this._removeEvents();this.renderer.close();if(this.options.retainScrollPosition){this._restoreScrollPosition()}
this.opened=!1;this.trigger('close')}};proto.render=function(){this.renderer.render()};proto.appendContent=function(el,target){this.renderer.appendContent(el,target)};proto.removeContent=function(el){this.renderer.removeContent(el)};proto.destroy=function(){this._removeEvents();this.renderer.destroy();for(var prop in this){if(this.hasOwnProperty(prop)){this[prop]=null}}};proto.addKeyToClose=function(key){var index=this._keysToClose.indexOf(key);if(index===-1){this._keysToClose.push(key);this._bindKeyToClose(key)}};proto.removeKeyToClose=function(key){var index=this._keysToClose.indexOf(key);if(index!==-1){this._keysToClose.splice(index,1)}
this._releaseKeyToClose(key)};proto._bindKeyToClose=function(key){var index=this._attachedKeysToClose.indexOf(key);if(index===-1){ac_Keyboard.onUp(key,this.close);this._attachedKeysToClose.push(key)}};proto._releaseKeyToClose=function(key){var index=this._attachedKeysToClose.indexOf(key);if(index!==-1){ac_Keyboard.offUp(key,this.close);this._attachedKeysToClose.splice(index,1)}};proto._removeEvents=function(){if(this.renderer.modalElement){ac_DomEvents.removeEventListener(this.renderer.modalElement,'click',this.close)}
this._keysToClose.forEach(this._releaseKeyToClose,this)};proto._attachEvents=function(){if(this.renderer.modalElement){ac_DomEvents.addEventListener(this.renderer.modalElement,'click',this.close)}
this._keysToClose.forEach(this._bindKeyToClose,this)};proto._restoreScrollPosition=function(){window.scrollTo(this._scrollX||0,this._scrollY||0)};proto._saveScrollPosition=function(){this._scrollX=ac_DomMetrics.getScrollX();this._scrollY=ac_DomMetrics.getScrollY()};module.exports=Modal},{"./Renderer":439,"@marcom/ac-dom-events/addEventListener":409,"@marcom/ac-dom-events/removeEventListener":415,"@marcom/ac-dom-events/target":417,"@marcom/ac-dom-metrics/getScrollX":426,"@marcom/ac-dom-metrics/getScrollY":427,"@marcom/ac-event-emitter-micro":420,"@marcom/ac-keyboard":423,"@marcom/ac-keyboard/keyMap":425,"@marcom/ac-object/create":442,"@marcom/ac-object/defaults":443}],439:[function(require,module,exports){'use strict';var ac_Classlist={add:require('@marcom/ac-classlist/add'),remove:require('@marcom/ac-classlist/remove')};var ac_Object={defaults:require('@marcom/ac-object/defaults')};var ac_DomNodes={remove:require('@marcom/ac-dom-nodes/remove'),isElement:require('@marcom/ac-dom-nodes/isElement')};var modalClassNames=require('./classNames');var modalDataAttributes=require('./dataAttributes');var defaults={modalElement:null,contentElement:null,closeButton:null,classNames:modalClassNames,dataAttributes:modalDataAttributes};var Renderer=function(options){options=options||{};this.options=ac_Object.defaults(defaults,options);this.options.classNames=ac_Object.defaults(defaults.classNames,options.classNames);this.options.dataAttributes=ac_Object.defaults(defaults.dataAttributes,options.dataAttributes);this.modalElement=this.options.modalElement;this.contentElement=this.options.contentElement;this.closeButton=this.options.closeButton};var proto=Renderer.prototype;proto.render=function(){if(!ac_DomNodes.isElement(this.modalElement)){this.modalElement=this.renderModalElement(this.options.classNames.modalElement)}
if(!ac_DomNodes.isElement(this.contentElement)){this.contentElement=this.renderContentElement(this.options.classNames.contentElement)}
if(this.closeButton!==!1){if(!ac_DomNodes.isElement(this.closeButton)){this.closeButton=this.renderCloseButton(this.options.classNames.closeButton)}
this.modalElement.appendChild(this.closeButton)}
this.modalElement.appendChild(this.contentElement);document.body.appendChild(this.modalElement);return this.modalElement};proto.renderCloseButton=function(classNames){var closeButton;classNames=classNames||this.options.classNames.closeButton;closeButton=this._renderElement('button',classNames);closeButton.setAttribute(this.options.dataAttributes.close,'');return closeButton};proto.renderModalElement=function(classNames){classNames=classNames||this.options.classNames.modalElement;return this._renderElement('div',classNames)};proto.renderContentElement=function(classNames){classNames=classNames||this.options.classNames.contentElement;return this._renderElement('div',classNames)};proto.appendContent=function(el,target){if(!ac_DomNodes.isElement(el)){return}
if(arguments[1]===undefined){this.contentElement.appendChild(el)}else if(ac_DomNodes.isElement(target)){target.appendChild(el)}};proto.removeContent=function(el){if(el){if(this.modalElement.contains(el)){ac_DomNodes.remove(el)}}else{this._emptyContent()}};proto.open=function(){var docElArgs=[document.documentElement].concat(this.options.classNames.documentElement);var modalElArgs=[this.modalElement].concat(this.options.classNames.modalOpen);ac_Classlist.add.apply(null,docElArgs);ac_Classlist.add.apply(null,modalElArgs)};proto.close=function(){var docElArgs=[document.documentElement].concat(this.options.classNames.documentElement);var modalElArgs=[this.modalElement].concat(this.options.classNames.modalOpen);ac_Classlist.remove.apply(null,docElArgs);ac_Classlist.remove.apply(null,modalElArgs)};proto.destroy=function(){var docElArgs=[document.documentElement].concat(this.options.classNames.documentElement);if(this.modalElement&&document.body.contains(this.modalElement)){this.close();document.body.removeChild(this.modalElement)}
ac_Classlist.remove.apply(null,docElArgs);for(var prop in this){if(this.hasOwnProperty(prop)){this[prop]=null}}};proto._renderElement=function(type,classNames){var el=document.createElement(type);var args=[el];if(classNames){args=args.concat(classNames)}
ac_Classlist.add.apply(null,args);return el};proto._emptyContent=function(){this.contentElement.innerHTML=''};module.exports=Renderer},{"./classNames":440,"./dataAttributes":441,"@marcom/ac-classlist/add":402,"@marcom/ac-classlist/remove":408,"@marcom/ac-dom-nodes/isElement":434,"@marcom/ac-dom-nodes/remove":436,"@marcom/ac-object/defaults":443}],440:[function(require,module,exports){'use strict';module.exports={modalElement:'modal',modalOpen:'modal-open',documentElement:'has-modal',contentElement:'modal-content',closeButton:'modal-close'}},{}],441:[function(require,module,exports){'use strict';module.exports={close:'data-modal-close'}},{}],442:[function(require,module,exports){arguments[4][132][0].apply(exports,arguments)},{"dup":132}],443:[function(require,module,exports){arguments[4][133][0].apply(exports,arguments)},{"./extend":444,"dup":133}],444:[function(require,module,exports){arguments[4][134][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":445,"dup":134}],445:[function(require,module,exports){arguments[4][112][0].apply(exports,arguments)},{"dup":112}],446:[function(require,module,exports){arguments[4][115][0].apply(exports,arguments)},{"dup":115}],447:[function(require,module,exports){arguments[4][253][0].apply(exports,arguments)},{"dup":253}],448:[function(require,module,exports){'use strict';module.exports={Modal:require('./ac-modal/Modal'),createStandardModal:require('./ac-modal/factory/createStandardModal'),createFullViewportModal:require('./ac-modal/factory/createFullViewportModal')}},{"./ac-modal/Modal":449,"./ac-modal/factory/createFullViewportModal":450,"./ac-modal/factory/createStandardModal":451}],449:[function(require,module,exports){'use strict';var ac_Object={create:require('@marcom/ac-object/create'),defaults:require('@marcom/ac-object/defaults')};var ac_ModalBasic=require('@marcom/ac-modal-basic').Modal;var ac_ModalBasicClassNames=require('@marcom/ac-modal-basic').classNames;var ac_Classlist={add:require('@marcom/ac-classlist/add')};var EventEmitterMicro=require('@marcom/ac-event-emitter-micro').EventEmitterMicro;var CircularTab=require('./focus/CircularTab');var FocusManager=require('./focus/FocusManager');function Modal(options){EventEmitterMicro.call(this);this.options=options||{};this._modal=new ac_ModalBasic(options,this.options.renderer);this.opened=!1;this._render();this.closeButton=this._modal.renderer.closeButton;this.modalElement=this._modal.renderer.modalElement;this.contentElement=this._modal.renderer.contentElement;this._circularTab=new CircularTab(this.modalElement);this._onWillOpen=this._onWillOpen.bind(this);this._onOpen=this._onOpen.bind(this);this._onWillClose=this._onWillClose.bind(this);this._onClose=this._onClose.bind(this);this._bindEvents()}
var proto=Modal.prototype=ac_Object.create(EventEmitterMicro.prototype);proto.open=function(){this._modal.open();this.opened=this._modal.opened};proto.close=function(){this._modal.close()};proto.appendContent=function(el){this._modal.appendContent(el)};proto.removeContent=function(el){this._modal.removeContent(el)};proto.destroy=function(){this._releaseEvents();this._modal.destroy();this._removeModalFocus();this._circularTab.destroy();this._focusObj=null;for(var prop in this){if(this.hasOwnProperty(prop)){this[prop]=null}}};proto.addKeyToClose=function(key){this._modal.addKeyToClose(key)};proto.removeKeyToClose=function(key){this._modal.removeKeyToClose(key)};proto._render=function(){this._modal.render();this._modal.renderer.modalElement.setAttribute('aria-hidden','true')};proto._bindEvents=function(){this._modal.on('willopen',this._onWillOpen);this._modal.on('open',this._onOpen);this._modal.on('willclose',this._onWillClose);this._modal.on('close',this._onClose)};proto._releaseEvents=function(){this._modal.off('willopen',this._onWillOpen);this._modal.off('open',this._onOpen);this._modal.off('willclose',this._onWillClose);this._modal.off('close',this._onClose)};proto._onWillOpen=function(){this.trigger('willopen')};proto._onOpen=function(){this.opened=this._modal.opened;this._giveModalFocus();this.trigger('open')};proto._onWillClose=function(){this.trigger('willclose');this._removeModalFocus()};proto._onClose=function(){this.opened=this._modal.opened;this.trigger('close')};proto._giveModalFocus=function(){this.modalElement.setAttribute('aria-hidden','false');this._activeElement=document.activeElement;this.closeButton.focus();this._circularTab.start();this._focusObj=FocusManager.disableSiblingFocus(this.modalElement,document.body)};proto._removeModalFocus=function(){this._circularTab.stop();if(this._focusObj){this._focusObj.enableSiblingFocus();this._focusObj=null}
this.modalElement.setAttribute('aria-hidden','true');if(this._activeElement){this._activeElement.focus();this._activeElement=null}};module.exports=Modal},{"./focus/CircularTab":452,"./focus/FocusManager":453,"@marcom/ac-classlist/add":402,"@marcom/ac-event-emitter-micro":420,"@marcom/ac-modal-basic":437,"@marcom/ac-object/create":442,"@marcom/ac-object/defaults":443}],450:[function(require,module,exports){'use strict';var Modal=require('../Modal');var modalBasicClassNames=require('@marcom/ac-modal-basic').classNames;var options={retainScrollPosition:!0,renderer:{classNames:{documentElement:[modalBasicClassNames.documentElement].concat('has-modal-full-viewport'),modalElement:[modalBasicClassNames.modalElement].concat('modal-full-viewport')}}};function createFullViewportModal(contentElement){var modal=new Modal(options);if(contentElement){modal.appendContent(contentElement)}
return modal}
module.exports=createFullViewportModal},{"../Modal":449,"@marcom/ac-modal-basic":437}],451:[function(require,module,exports){'use strict';var Modal=require('../Modal');var modalBasicClassNames=require('@marcom/ac-modal-basic').classNames;var modalBasicDataAttributes=require('@marcom/ac-modal-basic').dataAttributes;var ac_Classlist={add:require('@marcom/ac-classlist/add')};var options={renderer:{classNames:{documentElement:[modalBasicClassNames.documentElement].concat('has-modal-standard'),modalElement:[modalBasicClassNames.modalElement].concat('modal-standard')}}};function createStandardModal(contentElement){var modal=new Modal(options);var closeButton;if(contentElement){modal.appendContent(contentElement)}
var contentTable=document.createElement('div');var contentCell=document.createElement('div');var contentWrapper=document.createElement('div');var contentPadding=document.createElement('div');ac_Classlist.add(contentTable,'content-table');ac_Classlist.add(contentCell,'content-cell');ac_Classlist.add(contentWrapper,'content-wrapper');ac_Classlist.add(contentPadding,'content-padding','large-8','medium-10');modal.modalElement.setAttribute(modalBasicDataAttributes.close,'');contentWrapper.setAttribute(modalBasicDataAttributes.close,'');contentCell.setAttribute(modalBasicDataAttributes.close,'');contentTable.appendChild(contentCell);contentCell.appendChild(contentWrapper);contentWrapper.appendChild(contentPadding);modal.modalElement.appendChild(contentTable);contentPadding.appendChild(modal.contentElement);contentPadding.appendChild(modal.closeButton);return modal}
module.exports=createStandardModal},{"../Modal":449,"@marcom/ac-classlist/add":402,"@marcom/ac-modal-basic":437}],452:[function(require,module,exports){'use strict';var TabManager=require('./TabManager');var ac_addEventListener=require('@marcom/ac-dom-events/utils/addEventListener');var ac_removeEventListener=require('@marcom/ac-dom-events/utils/removeEventListener');var CircularTab=function(parentElement){this.tabbables=null;this.firstTabbableElement=null;this.lastTabbableElement=null;this.relatedTarget=null;this.el=parentElement;this._handleOnFocus=this._handleOnFocus.bind(this)};var proto=CircularTab.prototype;proto.start=function(){this.findTabbables();ac_addEventListener(document,'focus',this._handleOnFocus,!0)};proto.stop=function(){ac_removeEventListener(document,'focus',this._handleOnFocus,!0)};proto.findTabbables=function(){this.tabbables=TabManager.getTabbable(this.el);this.firstTabbableElement=this.tabbables[0];this.lastTabbableElement=this.tabbables[this.tabbables.length-1]};proto._handleOnFocus=function(e){if(!this.el.contains(e.target)){e.preventDefault();this.findTabbables();if(this.relatedTarget===this.lastTabbableElement||this.relatedTarget===null){this.firstTabbableElement.focus();this.relatedTarget=this.firstTabbableElement;return}
if(this.relatedTarget===this.firstTabbableElement){this.lastTabbableElement.focus();this.relatedTarget=this.lastTabbableElement;return}}else{this.relatedTarget=e.target}};proto.destroy=function(){this.stop();this.el=null;this.tabbables=null;this.firstTabbableElement=null;this.lastTabbableElement=null;this.relatedTarget=null};module.exports=CircularTab},{"./TabManager":454,"@marcom/ac-dom-events/utils/addEventListener":418,"@marcom/ac-dom-events/utils/removeEventListener":419}],453:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');var addClass=require('@marcom/ac-classlist/add');var removeClass=require('@marcom/ac-classlist/remove');var containsClass=require('@marcom/ac-classlist/contains');var MODAL_CLASS='modal';var FocusManager=function(){this._elementCacheMap={}};var proto=FocusManager.prototype;proto.disableSiblingFocus=function(element,parentContext){var modalSiblings=Array.prototype.slice.call(parentContext.children);modalSiblings=modalSiblings.filter(function(el){var tagName=el.tagName.toLowerCase();return((el!==element)&&(el.getAttribute('aria-hidden')!=='true')&&(tagName!=='script')&&(tagName!=='style')&&(tagName!=='link'))}.bind(this));var i=0;var len=modalSiblings.length;for(;i<len;i++){modalSiblings[i].setAttribute('aria-hidden','true')}
return{enableSiblingFocus:this._enableSiblingFocus.bind(this,modalSiblings)}};proto._enableSiblingFocus=function(siblings){while(siblings.length){siblings.shift().setAttribute('aria-hidden','false')}};module.exports=new FocusManager()},{"@marcom/ac-classlist/add":402,"@marcom/ac-classlist/contains":407,"@marcom/ac-classlist/remove":408,"@marcom/ac-polyfills/Array/prototype.slice":446}],454:[function(require,module,exports){'use strict';var querySelectorAll=require('@marcom/ac-dom-traversal/querySelectorAll');var focusableElements=['input','select','textarea','button','optgroup','option','menuitem','fieldset','object'];var focusableAttribute=['href','tabindex','contenteditable'];var TabManager=function(){this.focusableSelectors=focusableElements.concat(focusableAttribute.map(function(attribute){return(attribute==='href')?'a['+attribute+']':'*['+attribute+']'})).join(',')};var proto=TabManager.prototype;proto.focusable=function(element,tabIndex){var nodeName=element.nodeName.toLowerCase();var focusableElement=focusableElements.indexOf(nodeName)>-1;if(nodeName==='a'){return!0}
if(focusableElement){return!element.disabled}
if(!element.contentEditable){return!0}
tabIndex=tabIndex||element.tabIndex;return isNaN(tabIndex)};proto.tabbable=function(element){var tabIndex=element.getAttribute('tabindex');if(!isNaN(tabIndex)){return(tabIndex>=0)}else{return this.focusable(element,tabIndex)}};proto.getTabbable=function(parentElement){var elements=querySelectorAll(this.focusableSelectors,parentElement);var l=elements.length;var tabbableElements=[];for(var i=0;i<l;i++){if(this.tabbable(elements[i])){tabbableElements.push(elements[i])}}
return tabbableElements};proto.getFocusable=function(parentElement){var elements=querySelectorAll(this.focusableSelectors,parentElement);var l=elements.length;var focusableElements=[];for(var i=0;i<l;i++){if(this.focusable(elements[i])){focusableElements.push(elements[i])}}
return focusableElements};module.exports=new TabManager()},{"@marcom/ac-dom-traversal/querySelectorAll":48}],455:[function(require,module,exports){arguments[4][131][0].apply(exports,arguments)},{"./extend":457,"@marcom/ac-polyfills/Array/isArray":460,"dup":131}],456:[function(require,module,exports){arguments[4][132][0].apply(exports,arguments)},{"dup":132}],457:[function(require,module,exports){arguments[4][134][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":462,"dup":134}],458:[function(require,module,exports){arguments[4][238][0].apply(exports,arguments)},{"./ac-page-visibility/PageVisibilityManager":459,"dup":238}],459:[function(require,module,exports){arguments[4][239][0].apply(exports,arguments)},{"@marcom/ac-event-emitter-micro":142,"@marcom/ac-object/create":456,"dup":239}],460:[function(require,module,exports){arguments[4][110][0].apply(exports,arguments)},{"dup":110}],461:[function(require,module,exports){arguments[4][247][0].apply(exports,arguments)},{"dup":247}],462:[function(require,module,exports){arguments[4][112][0].apply(exports,arguments)},{"dup":112}],463:[function(require,module,exports){arguments[4][117][0].apply(exports,arguments)},{"dup":117}],464:[function(require,module,exports){arguments[4][255][0].apply(exports,arguments)},{"dup":255}],465:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"dup":116}],466:[function(require,module,exports){arguments[4][64][0].apply(exports,arguments)},{"./shared/camelCasedEventTypes":467,"./shared/prefixHelper":468,"./shared/windowFallbackEventTypes":469,"./utils/eventTypeAvailable":470,"dup":64}],467:[function(require,module,exports){arguments[4][65][0].apply(exports,arguments)},{"dup":65}],468:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{"dup":8}],469:[function(require,module,exports){arguments[4][67][0].apply(exports,arguments)},{"dup":67}],470:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{"dup":68}],471:[function(require,module,exports){'use strict';module.exports={addEventListener:require('./addEventListener'),dispatchEvent:require('./dispatchEvent'),preventDefault:require('./preventDefault'),removeEventListener:require('./removeEventListener'),stop:require('./stop'),stopPropagation:require('./stopPropagation'),target:require('./target')}},{"./addEventListener":472,"./dispatchEvent":473,"./preventDefault":474,"./removeEventListener":475,"./stop":477,"./stopPropagation":478,"./target":479}],472:[function(require,module,exports){'use strict';var addEventListenerUtil=require('./utils/addEventListener');var getEventType=require('./shared/getEventType');module.exports=function addEventListener(target,type,listener,useCapture){type=getEventType(target,type);return addEventListenerUtil(target,type,listener,useCapture)}},{"./shared/getEventType":476,"./utils/addEventListener":480}],473:[function(require,module,exports){'use strict';var dispatchEventUtil=require('./utils/dispatchEvent');var getEventType=require('./shared/getEventType');module.exports=function dispatchEvent(target,type,options){type=getEventType(target,type);return dispatchEventUtil(target,type,options)}},{"./shared/getEventType":476,"./utils/dispatchEvent":481}],474:[function(require,module,exports){'use strict';module.exports=function preventDefault(evt){evt=evt||window.event;if(evt.preventDefault){evt.preventDefault()}else{evt.returnValue=!1}}},{}],475:[function(require,module,exports){'use strict';var removeEventListenerUtil=require('./utils/removeEventListener');var getEventType=require('./shared/getEventType');module.exports=function removeEventListener(target,type,listener,useCapture){type=getEventType(target,type);return removeEventListenerUtil(target,type,listener,useCapture)}},{"./shared/getEventType":476,"./utils/removeEventListener":482}],476:[function(require,module,exports){'use strict';var getPrefixedEventType=require('@marcom/ac-prefixer/getEventType');module.exports=function getEventType(target,type){var tagName;var prefixed;if('tagName' in target){tagName=target.tagName}else if(target===window){tagName='window'}else{tagName='document'}
prefixed=getPrefixedEventType(type,tagName);if(prefixed){return prefixed}
return type}},{"@marcom/ac-prefixer/getEventType":466}],477:[function(require,module,exports){'use strict';var stopPropagation=require('./stopPropagation');var preventDefault=require('./preventDefault');module.exports=function stop(evt){evt=evt||window.event;stopPropagation(evt);preventDefault(evt);evt.stopped=!0;evt.returnValue=!1}},{"./preventDefault":474,"./stopPropagation":478}],478:[function(require,module,exports){'use strict';module.exports=function stopPropagation(evt){evt=evt||window.event;if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=!0}}},{}],479:[function(require,module,exports){'use strict';module.exports=function target(evt){evt=evt||window.event;return(typeof evt.target!=='undefined')?evt.target:evt.srcElement}},{}],480:[function(require,module,exports){'use strict';module.exports=function addEventListener(target,type,listener,useCapture){if(target.addEventListener){target.addEventListener(type,listener,!!useCapture)}else{target.attachEvent('on'+type,listener)}
return target}},{}],481:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/CustomEvent');module.exports=function dispatchEvent(target,type,options){var evt;if(target.dispatchEvent){if(options){evt=new CustomEvent(type,options)}else{evt=new CustomEvent(type)}
target.dispatchEvent(evt)}else{evt=document.createEventObject();if(options&&'detail' in options){evt.detail=options.detail}
target.fireEvent('on'+type,evt)}
return target}},{"@marcom/ac-polyfills/CustomEvent":465}],482:[function(require,module,exports){'use strict';module.exports=function removeEventListener(target,type,listener,useCapture){if(target.removeEventListener){target.removeEventListener(type,listener,useCapture)}else{target.detachEvent('on'+type,listener)}
return target}},{}],483:[function(require,module,exports){module.exports=require('./lib/')},{"./lib/":484}],484:[function(require,module,exports){arguments[4][126][0].apply(exports,arguments)},{"./parse":485,"./stringify":486,"dup":126}],485:[function(require,module,exports){var Utils=require('./utils');var internals={delimiter:'&',depth:5,arrayLimit:20,parameterLimit:1000};internals.parseValues=function(str,options){var obj={};var parts=str.split(options.delimiter,options.parameterLimit===Infinity?undefined:options.parameterLimit);for(var i=0,il=parts.length;i<il;++i){var part=parts[i];var pos=part.indexOf(']=')===-1?part.indexOf('='):part.indexOf(']=')+1;if(pos===-1){obj[Utils.decode(part)]=''}
else{var key=Utils.decode(part.slice(0,pos));var val=Utils.decode(part.slice(pos+1));if(!obj.hasOwnProperty(key)){obj[key]=val}
else{obj[key]=[].concat(obj[key]).concat(val)}}}
return obj};internals.parseObject=function(chain,val,options){if(!chain.length){return val}
var root=chain.shift();var obj={};if(root==='[]'){obj=[];obj=obj.concat(internals.parseObject(chain,val,options))}
else{var cleanRoot=root[0]==='['&&root[root.length-1]===']'?root.slice(1,root.length-1):root;var index=parseInt(cleanRoot,10);var indexString=''+index;if(!isNaN(index)&&root!==cleanRoot&&indexString===cleanRoot&&index>=0&&index<=options.arrayLimit){obj=[];obj[index]=internals.parseObject(chain,val,options)}
else{obj[cleanRoot]=internals.parseObject(chain,val,options)}}
return obj};internals.parseKeys=function(key,val,options){if(!key){return}
var parent=/^([^\[\]]*)/;var child=/(\[[^\[\]]*\])/g;var segment=parent.exec(key);if(Object.prototype.hasOwnProperty(segment[1])){return}
var keys=[];if(segment[1]){keys.push(segment[1])}
var i=0;while((segment=child.exec(key))!==null&&i<options.depth){++i;if(!Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,''))){keys.push(segment[1])}}
if(segment){keys.push('['+key.slice(segment.index)+']')}
return internals.parseObject(keys,val,options)};module.exports=function(str,options){if(str===''||str===null||typeof str==='undefined'){return{}}
options=options||{};options.delimiter=typeof options.delimiter==='string'||Utils.isRegExp(options.delimiter)?options.delimiter:internals.delimiter;options.depth=typeof options.depth==='number'?options.depth:internals.depth;options.arrayLimit=typeof options.arrayLimit==='number'?options.arrayLimit:internals.arrayLimit;options.parameterLimit=typeof options.parameterLimit==='number'?options.parameterLimit:internals.parameterLimit;var tempObj=typeof str==='string'?internals.parseValues(str,options):str;var obj={};var keys=Object.keys(tempObj);for(var i=0,il=keys.length;i<il;++i){var key=keys[i];var newObj=internals.parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj)}
return Utils.compact(obj)}},{"./utils":487}],486:[function(require,module,exports){var Utils=require('./utils');var internals={delimiter:'&',indices:!0};internals.stringify=function(obj,prefix,options){if(Utils.isBuffer(obj)){obj=obj.toString()}
else if(obj instanceof Date){obj=obj.toISOString()}
else if(obj===null){obj=''}
if(typeof obj==='string'||typeof obj==='number'||typeof obj==='boolean'){return[encodeURIComponent(prefix)+'='+encodeURIComponent(obj)]}
var values=[];if(typeof obj==='undefined'){return values}
var objKeys=Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];if(!options.indices&&Array.isArray(obj)){values=values.concat(internals.stringify(obj[key],prefix,options))}
else{values=values.concat(internals.stringify(obj[key],prefix+'['+key+']',options))}}
return values};module.exports=function(obj,options){options=options||{};var delimiter=typeof options.delimiter==='undefined'?internals.delimiter:options.delimiter;options.indices=typeof options.indices==='boolean'?options.indices:internals.indices;var keys=[];if(typeof obj!=='object'||obj===null){return''}
var objKeys=Object.keys(obj);for(var i=0,il=objKeys.length;i<il;++i){var key=objKeys[i];keys=keys.concat(internals.stringify(obj[key],key,options))}
return keys.join(delimiter)}},{"./utils":487}],487:[function(require,module,exports){var internals={};exports.arrayToObject=function(source){var obj={};for(var i=0,il=source.length;i<il;++i){if(typeof source[i]!=='undefined'){obj[i]=source[i]}}
return obj};exports.merge=function(target,source){if(!source){return target}
if(typeof source!=='object'){if(Array.isArray(target)){target.push(source)}
else{target[source]=!0}
return target}
if(typeof target!=='object'){target=[target].concat(source);return target}
if(Array.isArray(target)&&!Array.isArray(source)){target=exports.arrayToObject(target)}
var keys=Object.keys(source);for(var k=0,kl=keys.length;k<kl;++k){var key=keys[k];var value=source[key];if(!target[key]){target[key]=value}
else{target[key]=exports.merge(target[key],value)}}
return target};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g,' '))}catch(e){return str}};exports.compact=function(obj,refs){if(typeof obj!=='object'||obj===null){return obj}
refs=refs||[];var lookup=refs.indexOf(obj);if(lookup!==-1){return refs[lookup]}
refs.push(obj);if(Array.isArray(obj)){var compacted=[];for(var i=0,il=obj.length;i<il;++i){if(typeof obj[i]!=='undefined'){compacted.push(obj[i])}}
return compacted}
var keys=Object.keys(obj);for(i=0,il=keys.length;i<il;++i){var key=keys[i];obj[key]=exports.compact(obj[key],refs)}
return obj};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==='[object RegExp]'};exports.isBuffer=function(obj){if(obj===null||typeof obj==='undefined'){return!1}
return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],488:[function(require,module,exports){'use strict';module.exports={Link:require('./ac-social/Link'),Dialog:require('./ac-social/Dialog'),Focus:require('./ac-social/Focus'),Debug:require('./ac-social/Debug')}},{"./ac-social/Debug":489,"./ac-social/Dialog":490,"./ac-social/Focus":491,"./ac-social/Link":492}],489:[function(require,module,exports){'use strict';var NetworkActions=require('./NetworkActions');function Debug(){this.types={};var i;for(i in NetworkActions){if(NetworkActions.hasOwnProperty(i)){proto[i]=i;this.addType(i,NetworkActions[i].getDialogDebugData.bind(NetworkActions[i]))}}}
var proto=Debug.prototype;proto.create=function(type,data){data=data||{};var func=this.types[type];if(!func){return}
return func(data)};proto.addType=function(name,func){this.types[name]=func;return this};proto.removeType=function(){this.types[name]=null;return this};module.exports=new Debug()},{"./NetworkActions":493}],490:[function(require,module,exports){'use strict';var NetworkActions=require('./NetworkActions');function Dialog(){this.types={};var i;for(i in NetworkActions){if(NetworkActions.hasOwnProperty(i)){proto[i]=i;this.addType(i,NetworkActions[i].generateDialog.bind(NetworkActions[i]))}}}
var proto=Dialog.prototype;proto.create=function(type,data){data=data||{};var func=this.types[type];if(!func){return}
return func(data)};proto.addType=function(name,func){this.types[name]=func;return this};proto.removeType=function(){this.types[name]=null;return this};module.exports=new Dialog()},{"./NetworkActions":493}],491:[function(require,module,exports){'use strict';module.exports=function(el){if(window.getSelection){var selection=window.getSelection();var range=document.createRange();range.selectNodeContents(el);selection.removeAllRanges();selection.addRange(range)}else if(el.setSelectionRange){el.setSelectionRange(0,el.value.length)}else if(document.body.createTextRange){var range=document.body.createTextRange();range.moveToElementText(el);range.select()}}},{}],492:[function(require,module,exports){'use strict';var NetworkActions=require('./NetworkActions'),DefaultNetworkAction=require('./network-actions/DefaultNetworkAction');function Link(){this.types={};var i;for(i in NetworkActions){if(NetworkActions.hasOwnProperty(i)){proto[i]=i;this.addType(i,NetworkActions[i].generateLink.bind(NetworkActions[i]))}}}
var proto=Link.prototype;proto.create=function(type,data,el){data=data||{};var func=this.types[type];if(!func){return}
return func(data,el)};proto.createFromAnchor=function(el){var elNetworkAction=el.getAttribute('data-network-action');var i;for(i in NetworkActions){if(NetworkActions.hasOwnProperty(i)){if(elNetworkAction===NetworkActions[i].id){NetworkActions[i].enhanceLinkEngagement(el);return}}}
DefaultNetworkAction.enhanceLinkEngagement(el)};proto.addType=function(name,func){this.types[name]=func;return this};proto.removeType=function(){this.types[name]=null;return this};module.exports=new Link()},{"./NetworkActions":493,"./network-actions/DefaultNetworkAction":494}],493:[function(require,module,exports){'use strict';var FacebookShare=require('./network-actions/FacebookShare'),PinterestShare=require('./network-actions/PinterestShare'),TumblrShare=require('./network-actions/TumblrShare'),TwitterFavorite=require('./network-actions/TwitterFavorite'),TwitterReply=require('./network-actions/TwitterReply'),TwitterRetweet=require('./network-actions/TwitterRetweet'),TwitterTweet=require('./network-actions/TwitterTweet'),LinkedinShare=require('./network-actions/LinkedinShare'),WeiboShare=require('./network-actions/WeiboShare'),QQWeiboShare=require('./network-actions/QQWeiboShare'),QZoneShare=require('./network-actions/QZoneShare'),RenrenShare=require('./network-actions/RenrenShare'),EMailShare=require('./network-actions/EMailShare');module.exports={'FACEBOOK_SHARE':FacebookShare,'PINTEREST_SHARE':PinterestShare,'TUMBLR_SHARE':TumblrShare,'TWITTER_FAVORITE':TwitterFavorite,'TWITTER_REPLY':TwitterReply,'TWITTER_RETWEET':TwitterRetweet,'TWITTER_TWEET':TwitterTweet,'LINKEDIN_SHARE':LinkedinShare,'WEIBO_SHARE':WeiboShare,'QQWEIBO_SHARE':QQWeiboShare,'QZONE_SHARE':QZoneShare,'RENREN_SHARE':RenrenShare,'EMAIL_SHARE':EMailShare}},{"./network-actions/EMailShare":495,"./network-actions/FacebookShare":496,"./network-actions/LinkedinShare":497,"./network-actions/PinterestShare":499,"./network-actions/QQWeiboShare":500,"./network-actions/QZoneShare":501,"./network-actions/RenrenShare":502,"./network-actions/TumblrShare":503,"./network-actions/TwitterFavorite":504,"./network-actions/TwitterReply":505,"./network-actions/TwitterRetweet":506,"./network-actions/TwitterTweet":507,"./network-actions/WeiboShare":508}],494:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return rawData};module.exports=new NetworkAction(normalizeData,{baseLinkPath:''})},{"./NetworkAction":498}],495:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={url:rawData.url};if(rawData.title){data.subject=rawData.title}
if(rawData.description){data.body=rawData.description+'\r\n\r\n'+rawData.url}else{data.body=rawData.url}
return data};module.exports=new NetworkAction(normalizeData,{id:'email-share',baseLinkPath:'mailto:',preventDialog:!0})},{"./NetworkAction":498}],496:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return{u:rawData.url}};module.exports=new NetworkAction(normalizeData,{id:'facebook-share',baseLinkPath:'https://www.facebook.com/sharer/sharer.php',dialogDimensions:{width:555,height:368}})},{"./NetworkAction":498}],497:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return{mini:'true',url:rawData.url,title:rawData.title,summary:rawData.description}};module.exports=new NetworkAction(normalizeData,{id:'linkedin-share',baseLinkPath:'https://www.linkedin.com/shareArticle',dialogDimensions:{width:520,height:570}})},{"./NetworkAction":498}],498:[function(require,module,exports){'use strict';var qs=require('qs'),ac_dom_events=require('@marcom/ac-dom-events');var proto;var NetworkAction=function(normalizeDataFunc,options){options=options||{};this.baseLinkPath=options.baseLinkPath;if(options.dialogDimensions){this.dialogDimensions=options.dialogDimensions}
if(options.id){this.id=options.id}
if(options.preventDialog){this.preventDialog=options.preventDialog}
this.normalizeData=normalizeDataFunc};proto=NetworkAction.prototype;proto.dataAttributeName='network-action';proto.id='network-action';proto.normalizeData=function(rawData){return rawData};proto.dialogDimensions={width:500,height:500};proto.generateLinkURL=function(rawData){var normalizedData=this.normalizeData(rawData),queryString=qs.stringify(normalizedData),linkPath=this.baseLinkPath;if(queryString.length>0){linkPath=linkPath+'?'+queryString}
return linkPath};proto.generateLink=function(rawData,el){var url=this.generateLinkURL(rawData);el=el||document.createElement('A');el.setAttribute('href',url);el.setAttribute('target','_blank');el.setAttribute('data-'+this.dataAttributeName,this.id);this.enhanceLinkEngagement(el,url);return el};proto.generateDialog=function(rawData){var linkPath=this.generateLinkURL(rawData);this._triggerDialog(linkPath)};proto.enhanceLinkEngagement=function(el,url){var scope=this||proto;url=url||el.getAttribute('href');ac_dom_events.addEventListener(el,'click',this._onLinkEngaged.bind(this,url))};proto.getDialogOptions=function(){var i,optionsStr='status=1',options={width:this.dialogDimensions.width,height:this.dialogDimensions.height};options.top=(window.screen.availHeight-options.height)/2;options.left=(window.screen.availWidth-options.width)/2;for(i in options){if(options.hasOwnProperty(i)){optionsStr+=', '+i+'='+options[i]}}
return optionsStr};proto.getDialogDebugData=function(rawData){return{data:this.normalizeData(rawData),dialogUrl:this.generateLinkURL(rawData)}};proto._triggerDialog=function(url){if(this.preventDialog){window.location.href=url;return}
window.open(url,'_blank',this.getDialogOptions())};proto._onLinkEngaged=function(url,e){ac_dom_events.preventDefault(e);this._triggerDialog(url)};module.exports=NetworkAction},{"@marcom/ac-dom-events":471,"qs":483}],499:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={url:rawData.url,description:rawData.description};if(rawData.media){data.media=rawData.media}
return data};module.exports=new NetworkAction(normalizeData,{id:'pinterest-share',baseLinkPath:'http://www.pinterest.com/pin/create/button',dialogDimensions:{width:750,height:450}})},{"./NetworkAction":498}],500:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return{url:rawData.url,title:rawData.title,pic:rawData.media}};module.exports=new NetworkAction(normalizeData,{id:'qq-weibo-share',baseLinkPath:'http://v.t.qq.com/share/share.php',dialogDimensions:{width:658,height:506}})},{"./NetworkAction":498}],501:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return{url:rawData.url,title:rawData.title,pics:rawData.media,summary:rawData.description}};module.exports=new NetworkAction(normalizeData,{id:'qzone-share',baseLinkPath:'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey',dialogDimensions:{width:620,height:645}})},{"./NetworkAction":498}],502:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return{url:rawData.url,title:rawData.title}};module.exports=new NetworkAction(normalizeData,{id:'renren-share',baseLinkPath:'http://www.connect.renren.com/share/sharer',dialogDimensions:{width:500,height:315}})},{"./NetworkAction":498}],503:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={clickthru:rawData.url,caption:rawData.description};if(rawData.media){data.source=rawData.media}
return data};module.exports=new NetworkAction(normalizeData,{id:'tumblr-share',baseLinkPath:'http://www.tumblr.com/share/photo',dialogDimensions:{width:450,height:432}})},{"./NetworkAction":498}],504:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={tweet_id:rawData.messageId};return data};module.exports=new NetworkAction(normalizeData,{id:'twitter-favorite',baseLinkPath:'https://twitter.com/intent/favorite',dialogDimensions:{width:550,height:420}})},{"./NetworkAction":498}],505:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={in_reply_to:rawData.messageId};if(rawData.hashtags){data.hashtags=rawData.hashtags}
return data};module.exports=new NetworkAction(normalizeData,{id:'twitter-reply',baseLinkPath:'https://twitter.com/intent/tweet',dialogDimensions:{width:550,height:420}})},{"./NetworkAction":498}],506:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={tweet_id:rawData.messageId};return data};module.exports=new NetworkAction(normalizeData,{id:'twitter-retweet',baseLinkPath:'https://twitter.com/intent/retweet',dialogDimensions:{width:550,height:420}})},{"./NetworkAction":498}],507:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){var data={url:rawData.url,text:rawData.description};if(rawData.hashtags){data.hashtags=rawData.hashtags}
return data};module.exports=new NetworkAction(normalizeData,{id:'twitter-tweet',baseLinkPath:'https://twitter.com/intent/tweet',dialogDimensions:{width:550,height:420}})},{"./NetworkAction":498}],508:[function(require,module,exports){'use strict';var NetworkAction=require('./NetworkAction');var normalizeData=function(rawData){return{url:rawData.url,title:rawData.title,pic:rawData.media}};module.exports=new NetworkAction(normalizeData,{id:'weibo-share',baseLinkPath:'http://service.weibo.com/share/share.php',dialogDimensions:{width:650,height:426}})},{"./NetworkAction":498}],509:[function(require,module,exports){arguments[4][256][0].apply(exports,arguments)},{"./ac-clock/Clock":510,"./ac-clock/ThrottledClock":511,"./ac-clock/sharedClockInstance":512,"dup":256}],510:[function(require,module,exports){arguments[4][257][0].apply(exports,arguments)},{"@marcom/ac-event-emitter-micro":543,"@marcom/ac-polyfills/Function/prototype.bind":463,"@marcom/ac-polyfills/requestAnimationFrame":464,"dup":257}],511:[function(require,module,exports){arguments[4][258][0].apply(exports,arguments)},{"./sharedClockInstance":512,"@marcom/ac-event-emitter-micro":543,"@marcom/ac-polyfills/requestAnimationFrame":464,"dup":258}],512:[function(require,module,exports){arguments[4][259][0].apply(exports,arguments)},{"./Clock":510,"dup":259}],513:[function(require,module,exports){arguments[4][260][0].apply(exports,arguments)},{"./ac-clip/Clip":514,"dup":260}],514:[function(require,module,exports){arguments[4][261][0].apply(exports,arguments)},{"@marcom/ac-clock":509,"@marcom/ac-easing":535,"@marcom/ac-event-emitter-micro":543,"@marcom/ac-object/create":456,"@marcom/ac-polyfills/Array/isArray":460,"dup":261}],515:[function(require,module,exports){arguments[4][262][0].apply(exports,arguments)},{"./ac-color/Color":516,"./ac-color/static/decimalToHex":518,"./ac-color/static/hexToDecimal":519,"./ac-color/static/hexToRgb":520,"./ac-color/static/isColor":521,"./ac-color/static/isHex":522,"./ac-color/static/isRgb":523,"./ac-color/static/isRgba":524,"./ac-color/static/mixColors":525,"./ac-color/static/rgbToArray":526,"./ac-color/static/rgbToDecimal":527,"./ac-color/static/rgbToHex":528,"./ac-color/static/rgbToHsl":529,"./ac-color/static/rgbToHsv":530,"./ac-color/static/rgbToObject":531,"./ac-color/static/rgbaToArray":532,"./ac-color/static/rgbaToObject":533,"./ac-color/static/shortToLongHex":534,"dup":262}],516:[function(require,module,exports){arguments[4][263][0].apply(exports,arguments)},{"./helpers/cssColorNames":517,"./static/hexToRgb":520,"./static/isColor":521,"./static/isHex":522,"./static/isRgba":524,"./static/mixColors":525,"./static/rgbToArray":526,"./static/rgbToDecimal":527,"./static/rgbToHex":528,"./static/rgbToObject":531,"./static/rgbaToArray":532,"./static/rgbaToObject":533,"./static/shortToLongHex":534,"dup":263}],517:[function(require,module,exports){arguments[4][264][0].apply(exports,arguments)},{"dup":264}],518:[function(require,module,exports){arguments[4][265][0].apply(exports,arguments)},{"dup":265}],519:[function(require,module,exports){arguments[4][266][0].apply(exports,arguments)},{"dup":266}],520:[function(require,module,exports){arguments[4][267][0].apply(exports,arguments)},{"./shortToLongHex":534,"dup":267}],521:[function(require,module,exports){arguments[4][268][0].apply(exports,arguments)},{"./isHex":522,"./isRgb":523,"./isRgba":524,"dup":268}],522:[function(require,module,exports){arguments[4][269][0].apply(exports,arguments)},{"dup":269}],523:[function(require,module,exports){arguments[4][270][0].apply(exports,arguments)},{"dup":270}],524:[function(require,module,exports){arguments[4][271][0].apply(exports,arguments)},{"dup":271}],525:[function(require,module,exports){arguments[4][272][0].apply(exports,arguments)},{"./hexToRgb":520,"./isHex":522,"./rgbToObject":531,"dup":272}],526:[function(require,module,exports){arguments[4][273][0].apply(exports,arguments)},{"./rgbToObject":531,"dup":273}],527:[function(require,module,exports){arguments[4][274][0].apply(exports,arguments)},{"./hexToDecimal":519,"./rgbToArray":526,"./rgbToHex":528,"dup":274}],528:[function(require,module,exports){arguments[4][275][0].apply(exports,arguments)},{"dup":275}],529:[function(require,module,exports){arguments[4][276][0].apply(exports,arguments)},{"dup":276}],530:[function(require,module,exports){arguments[4][277][0].apply(exports,arguments)},{"dup":277}],531:[function(require,module,exports){arguments[4][278][0].apply(exports,arguments)},{"dup":278}],532:[function(require,module,exports){arguments[4][279][0].apply(exports,arguments)},{"./rgbaToObject":533,"dup":279}],533:[function(require,module,exports){arguments[4][280][0].apply(exports,arguments)},{"dup":280}],534:[function(require,module,exports){arguments[4][281][0].apply(exports,arguments)},{"dup":281}],535:[function(require,module,exports){arguments[4][282][0].apply(exports,arguments)},{"./ac-easing/Ease":536,"./ac-easing/createBezier":537,"./ac-easing/createPredefined":538,"./ac-easing/createStep":539,"dup":282}],536:[function(require,module,exports){arguments[4][283][0].apply(exports,arguments)},{"dup":283}],537:[function(require,module,exports){arguments[4][284][0].apply(exports,arguments)},{"./Ease":536,"./helpers/KeySpline":540,"@marcom/ac-polyfills/Array/prototype.every":461,"dup":284}],538:[function(require,module,exports){arguments[4][285][0].apply(exports,arguments)},{"./Ease":536,"./createStep":539,"./helpers/cssAliases":541,"./helpers/easingFunctions":542,"dup":285}],539:[function(require,module,exports){arguments[4][286][0].apply(exports,arguments)},{"./Ease":536,"dup":286}],540:[function(require,module,exports){arguments[4][287][0].apply(exports,arguments)},{"dup":287}],541:[function(require,module,exports){arguments[4][288][0].apply(exports,arguments)},{"dup":288}],542:[function(require,module,exports){arguments[4][289][0].apply(exports,arguments)},{"../createBezier":537,"dup":289}],543:[function(require,module,exports){arguments[4][290][0].apply(exports,arguments)},{"./ac-event-emitter-micro/EventEmitterMicro":544,"dup":290}],544:[function(require,module,exports){arguments[4][291][0].apply(exports,arguments)},{"dup":291}],545:[function(require,module,exports){arguments[4][292][0].apply(exports,arguments)},{"./ac-transform/Transform":546,"dup":292}],546:[function(require,module,exports){arguments[4][293][0].apply(exports,arguments)},{"./gl-matrix/mat4":547,"./gl-matrix/vec3":548,"./gl-matrix/vec4":549,"dup":293}],547:[function(require,module,exports){arguments[4][294][0].apply(exports,arguments)},{"dup":294,"gl-mat4/clone":958,"gl-mat4/create":959,"gl-mat4/fromRotationTranslation":960,"gl-mat4/identity":961,"gl-mat4/invert":962,"gl-mat4/multiply":963,"gl-mat4/rotate":964,"gl-mat4/rotateX":965,"gl-mat4/rotateY":966,"gl-mat4/rotateZ":967,"gl-mat4/scale":968,"gl-mat4/translate":969,"gl-mat4/transpose":970}],548:[function(require,module,exports){arguments[4][295][0].apply(exports,arguments)},{"dup":295,"gl-vec3/create":971,"gl-vec3/cross":972,"gl-vec3/dot":973,"gl-vec3/fromValues":974,"gl-vec3/length":975,"gl-vec3/normalize":976}],549:[function(require,module,exports){arguments[4][296][0].apply(exports,arguments)},{"dup":296,"gl-vec4/create":977,"gl-vec4/fromValues":978,"gl-vec4/transformMat4":979}],550:[function(require,module,exports){arguments[4][297][0].apply(exports,arguments)},{"./clips/ClipEasing":553,"./clips/ClipInlineCss":554,"./clips/ClipTransitionCss":555,"./helpers/Float32Array":558,"./helpers/transitionEnd":567,"@marcom/ac-clip":513,"dup":297}],551:[function(require,module,exports){arguments[4][298][0].apply(exports,arguments)},{"./timeline/Timeline":569,"dup":298}],552:[function(require,module,exports){arguments[4][299][0].apply(exports,arguments)},{"./Clip":550,"./Timeline":551,"dup":299}],553:[function(require,module,exports){arguments[4][300][0].apply(exports,arguments)},{"../helpers/BezierCurveCssManager":557,"../helpers/isCssCubicBezierString":563,"@marcom/ac-clip":513,"@marcom/ac-easing":535,"@marcom/ac-object/clone":455,"@marcom/ac-object/create":456,"dup":300}],554:[function(require,module,exports){arguments[4][301][0].apply(exports,arguments)},{"../helpers/convertToStyleObject":560,"../helpers/convertToTransitionableObjects":561,"../helpers/removeTransitions":564,"./ClipEasing":553,"@marcom/ac-dom-styles/setStyle":17,"@marcom/ac-object/create":456,"dup":301}],555:[function(require,module,exports){arguments[4][302][0].apply(exports,arguments)},{"../helpers/BezierCurveCssManager":557,"../helpers/convertToStyleObject":560,"../helpers/convertToTransitionableObjects":561,"../helpers/isCssCubicBezierString":563,"../helpers/removeTransitions":564,"../helpers/transitionEnd":567,"../helpers/waitAnimationFrames":568,"./ClipEasing":553,"@marcom/ac-clip":513,"@marcom/ac-dom-styles/getStyle":15,"@marcom/ac-dom-styles/setStyle":17,"@marcom/ac-easing":535,"@marcom/ac-object/clone":455,"@marcom/ac-object/create":456,"@marcom/ac-page-visibility":458,"dup":302}],556:[function(require,module,exports){arguments[4][303][0].apply(exports,arguments)},{"@marcom/ac-easing":535,"dup":303}],557:[function(require,module,exports){arguments[4][304][0].apply(exports,arguments)},{"./BezierCurveCss":556,"dup":304}],558:[function(require,module,exports){arguments[4][305][0].apply(exports,arguments)},{"dup":305}],559:[function(require,module,exports){arguments[4][306][0].apply(exports,arguments)},{"./splitUnits":565,"@marcom/ac-dom-metrics/getDimensions":2,"dup":306}],560:[function(require,module,exports){arguments[4][307][0].apply(exports,arguments)},{"dup":307}],561:[function(require,module,exports){arguments[4][308][0].apply(exports,arguments)},{"./TransformMatrix":559,"./splitUnits":565,"./toCamCase":566,"@marcom/ac-color":515,"@marcom/ac-dom-styles/getStyle":15,"@marcom/ac-feature/cssPropertyAvailable":152,"@marcom/ac-object/clone":455,"@marcom/ac-transform":545,"dup":308}],562:[function(require,module,exports){arguments[4][309][0].apply(exports,arguments)},{"dup":309}],563:[function(require,module,exports){arguments[4][310][0].apply(exports,arguments)},{"dup":310}],564:[function(require,module,exports){arguments[4][311][0].apply(exports,arguments)},{"./getShorthandTransition":562,"@marcom/ac-dom-styles/getStyle":15,"@marcom/ac-dom-styles/setStyle":17,"dup":311}],565:[function(require,module,exports){arguments[4][312][0].apply(exports,arguments)},{"dup":312}],566:[function(require,module,exports){arguments[4][313][0].apply(exports,arguments)},{"dup":313}],567:[function(require,module,exports){arguments[4][314][0].apply(exports,arguments)},{"dup":314}],568:[function(require,module,exports){arguments[4][315][0].apply(exports,arguments)},{"@marcom/ac-page-visibility":458,"dup":315}],569:[function(require,module,exports){arguments[4][316][0].apply(exports,arguments)},{"./TimelineCallback":570,"./TimelineClip":571,"./TimelineItemList":572,"@marcom/ac-clip":513,"@marcom/ac-object/create":456,"dup":316}],570:[function(require,module,exports){arguments[4][317][0].apply(exports,arguments)},{"dup":317}],571:[function(require,module,exports){arguments[4][318][0].apply(exports,arguments)},{"dup":318}],572:[function(require,module,exports){arguments[4][319][0].apply(exports,arguments)},{"./TimelineCallback":570,"./TimelineClip":571,"dup":319}],573:[function(require,module,exports){arguments[4][323][0].apply(exports,arguments)},{"@marcom/ac-dom-styles":14,"@marcom/ac-eclipse":552,"@marcom/ac-feature/cssPropertyAvailable":152,"dup":323}],574:[function(require,module,exports){arguments[4][324][0].apply(exports,arguments)},{"./move":573,"@marcom/ac-feature/cssPropertyAvailable":152,"dup":324}],575:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/isArray');require('@marcom/ac-polyfills/Array/prototype.forEach');module.exports=function flatten(array){var flattenedArray=[];var callback=function(item){if(Array.isArray(item)){item.forEach(callback)}else{flattenedArray.push(item)}};array.forEach(callback);return flattenedArray}},{"@marcom/ac-polyfills/Array/isArray":578,"@marcom/ac-polyfills/Array/prototype.forEach":579}],576:[function(require,module,exports){'use strict';module.exports={flatten:require('./flatten'),intersection:require('./intersection'),shuffle:require('./shuffle'),toArray:require('./toArray'),union:require('./union'),unique:require('./unique'),without:require('./without')}},{"./flatten":575,"./intersection":577,"./shuffle":583,"./toArray":584,"./union":585,"./unique":586,"./without":587}],577:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');module.exports=function intersection(array){if(!array){return[]}
var argsLength=arguments.length;var i=0;var len=array.length;var result=[];var item;for(i;i<len;i++){item=array[i];if(result.indexOf(item)>-1){continue}
for(var j=1;j<argsLength;j++){if(arguments[j].indexOf(item)<0){break}}
if(j===argsLength){result.push(item)}}
return result}},{"@marcom/ac-polyfills/Array/prototype.indexOf":580}],578:[function(require,module,exports){if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]'}}},{}],579:[function(require,module,exports){arguments[4][389][0].apply(exports,arguments)},{"dup":389}],580:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"dup":31}],581:[function(require,module,exports){if(!Array.prototype.reduce){Array.prototype.reduce=function reduce(callback,initialValue){var arrayObj=Object(this);var len=arrayObj.length>>>0;var i=0;var result;if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
if(typeof initialValue==='undefined'){if(!len){throw new TypeError('Reduce of empty array with no initial value')}
result=arrayObj[0];i=1}else{result=initialValue}
while(i<len){if(i in arrayObj){result=callback.call(undefined,result,arrayObj[i],i,arrayObj);i+=1}}
return result}}},{}],582:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"dup":32}],583:[function(require,module,exports){'use strict';module.exports=function shuffle(array){var len=array.length;var index;var temp;while(len){index=Math.floor(Math.random()*len--);temp=array[len];array[len]=array[index];array[index]=temp}
return array}},{}],584:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.slice');module.exports=function toArray(arrayLike){return Array.prototype.slice.call(arrayLike)}},{"@marcom/ac-polyfills/Array/prototype.slice":582}],585:[function(require,module,exports){'use strict';var flatten=require('./flatten');var toArray=require('./toArray');var unique=require('./unique');module.exports=function union(array){return unique(flatten(toArray(arguments)))}},{"./flatten":575,"./toArray":584,"./unique":586}],586:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');require('@marcom/ac-polyfills/Array/prototype.reduce');module.exports=function unique(array){var _unique=function(prev,current){if(prev.indexOf(current)<0){prev.push(current)}
return prev};return array.reduce(_unique,[])}},{"@marcom/ac-polyfills/Array/prototype.indexOf":580,"@marcom/ac-polyfills/Array/prototype.reduce":581}],587:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');require('@marcom/ac-polyfills/Array/prototype.slice');module.exports=function without(arr,value,recurse){var newArr;var index=arr.indexOf(value);var length=arr.length;if(index>=0){if(recurse){newArr=arr.slice(0,length);var i,amountRemoved=0;for(i=index;i<length;i++){if(arr[i]===value){newArr.splice(i-amountRemoved,1);amountRemoved++}}}else if(index===(length-1)){newArr=arr.slice(0,(length-1))}else if(index===0){newArr=arr.slice(1)}else{newArr=arr.slice(0,index);newArr=newArr.concat(arr.slice(index+1))}}else{return arr}
return newArr}},{"@marcom/ac-polyfills/Array/prototype.indexOf":580,"@marcom/ac-polyfills/Array/prototype.slice":582}],588:[function(require,module,exports){'use strict';module.exports={log:require('./ac-console/log')}},{"./ac-console/log":589}],589:[function(require,module,exports){'use strict';var debugMessagingKey='f7c9180f-5c45-47b4-8de4-428015f096c0';var allowDebugMessaging=!!(function(){try{return window.localStorage.getItem(debugMessagingKey)}catch(err){}}());module.exports=function log(){if(window.console&&typeof console.log!=='undefined'&&allowDebugMessaging){console.log.apply(console,Array.prototype.slice.call(arguments,0))}}},{}],590:[function(require,module,exports){arguments[4][61][0].apply(exports,arguments)},{"./shared/getEventType":601,"./utils/addEventListener":605,"dup":61}],591:[function(require,module,exports){arguments[4][62][0].apply(exports,arguments)},{"./shared/getEventType":601,"./utils/dispatchEvent":606,"dup":62}],592:[function(require,module,exports){arguments[4][63][0].apply(exports,arguments)},{"./addEventListener":590,"./dispatchEvent":591,"./preventDefault":599,"./removeEventListener":600,"./stop":602,"./stopPropagation":603,"./target":604,"dup":63}],593:[function(require,module,exports){if(document.createEvent){try{new window.CustomEvent('click')}catch(err){window.CustomEvent=(function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}
CustomEvent.prototype=window.Event.prototype;return CustomEvent}())}}},{}],594:[function(require,module,exports){'use strict';var eventTypeAvailable=require('./utils/eventTypeAvailable');var camelCasedEventTypes=require('./shared/camelCasedEventTypes');var windowFallbackEventTypes=require('./shared/windowFallbackEventTypes');var prefixHelper=require('./shared/prefixHelper');var cache={};module.exports=function getEventType(type,tagName){var prefixedType;var tagNameCache;var i;tagName=tagName||'div';type=type.toLowerCase();if(!(tagName in cache)){cache[tagName]={}}
tagNameCache=cache[tagName];if(type in tagNameCache){return tagNameCache[type]}
if(eventTypeAvailable(type,tagName)){return tagNameCache[type]=type}
if(type in camelCasedEventTypes){for(i=0;i<camelCasedEventTypes[type].length;i++){prefixedType=camelCasedEventTypes[type][i];if(eventTypeAvailable(prefixedType.toLowerCase(),tagName)){return tagNameCache[type]=prefixedType}}}
for(i=0;i<prefixHelper.evt.length;i++){prefixedType=prefixHelper.evt[i]+type;if(eventTypeAvailable(prefixedType,tagName)){prefixHelper.reduce(i);return tagNameCache[type]=prefixedType}}
if(tagName!=='window'&&windowFallbackEventTypes.indexOf(type)){return tagNameCache[type]=getEventType(type,'window')}
return tagNameCache[type]=!1}},{"./shared/camelCasedEventTypes":595,"./shared/prefixHelper":596,"./shared/windowFallbackEventTypes":597,"./utils/eventTypeAvailable":598}],595:[function(require,module,exports){'use strict';module.exports={transitionend:['webkitTransitionEnd','MSTransitionEnd'],animationstart:['webkitAnimationStart','MSAnimationStart'],animationend:['webkitAnimationEnd','MSAnimationEnd'],animationiteration:['webkitAnimationIteration','MSAnimationIteration'],fullscreenchange:['MSFullscreenChange'],fullscreenerror:['MSFullscreenError']}},{}],596:[function(require,module,exports){arguments[4][379][0].apply(exports,arguments)},{"dup":379}],597:[function(require,module,exports){'use strict';module.exports=['transitionend','animationstart','animationend','animationiteration',]},{}],598:[function(require,module,exports){'use strict';var testElements={'window':window,'document':document};module.exports=function eventTypeAvailable(type,tagName){var el;type='on'+type;if(!(tagName in testElements)){testElements[tagName]=document.createElement(tagName)}
el=testElements[tagName];if(type in el){return!0}
if('setAttribute' in el){el.setAttribute(type,'return;');return(typeof el[type]==='function')}
return!1}},{}],599:[function(require,module,exports){arguments[4][69][0].apply(exports,arguments)},{"dup":69}],600:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{"./shared/getEventType":601,"./utils/removeEventListener":607,"dup":70}],601:[function(require,module,exports){arguments[4][71][0].apply(exports,arguments)},{"@marcom/ac-prefixer/getEventType":594,"dup":71}],602:[function(require,module,exports){arguments[4][72][0].apply(exports,arguments)},{"./preventDefault":599,"./stopPropagation":603,"dup":72}],603:[function(require,module,exports){arguments[4][73][0].apply(exports,arguments)},{"dup":73}],604:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{"dup":74}],605:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"dup":75}],606:[function(require,module,exports){arguments[4][76][0].apply(exports,arguments)},{"@marcom/ac-polyfills/CustomEvent":593,"dup":76}],607:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"dup":77}],608:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{"dup":18}],609:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{"dup":19}],610:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{"dup":20}],611:[function(require,module,exports){'use strict';module.exports=10},{}],612:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{"dup":21}],613:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{"dup":22}],614:[function(require,module,exports){'use strict';module.exports=function createDocumentFragment(html){var fragment=document.createDocumentFragment();var div;if(html){div=document.createElement('div');div.innerHTML=html;while(div.firstChild){fragment.appendChild(div.firstChild)}}
return fragment}},{}],615:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{"./ELEMENT_NODE":612,"./internal/isNodeType":623,"@marcom/ac-polyfills/Array/prototype.filter":633,"@marcom/ac-polyfills/Array/prototype.slice":635,"dup":23}],616:[function(require,module,exports){arguments[4][366][0].apply(exports,arguments)},{"dup":366}],617:[function(require,module,exports){'use strict';module.exports={createDocumentFragment:require('./createDocumentFragment'),filterByNodeType:require('./filterByNodeType'),hasAttribute:require('./hasAttribute'),indexOf:require('./indexOf'),insertAfter:require('./insertAfter'),insertBefore:require('./insertBefore'),insertFirstChild:require('./insertFirstChild'),insertLastChild:require('./insertLastChild'),isComment:require('./isComment'),isDocument:require('./isDocument'),isDocumentFragment:require('./isDocumentFragment'),isDocumentType:require('./isDocumentType'),isElement:require('./isElement'),isNode:require('./isNode'),isNodeList:require('./isNodeList'),isTextNode:require('./isTextNode'),remove:require('./remove'),replace:require('./replace'),COMMENT_NODE:require('./COMMENT_NODE'),DOCUMENT_FRAGMENT_NODE:require('./DOCUMENT_FRAGMENT_NODE'),DOCUMENT_NODE:require('./DOCUMENT_NODE'),DOCUMENT_TYPE_NODE:require('./DOCUMENT_TYPE_NODE'),ELEMENT_NODE:require('./ELEMENT_NODE'),TEXT_NODE:require('./TEXT_NODE')}},{"./COMMENT_NODE":608,"./DOCUMENT_FRAGMENT_NODE":609,"./DOCUMENT_NODE":610,"./DOCUMENT_TYPE_NODE":611,"./ELEMENT_NODE":612,"./TEXT_NODE":613,"./createDocumentFragment":614,"./filterByNodeType":615,"./hasAttribute":616,"./indexOf":618,"./insertAfter":619,"./insertBefore":620,"./insertFirstChild":621,"./insertLastChild":622,"./isComment":625,"./isDocument":626,"./isDocumentFragment":627,"./isDocumentType":628,"./isElement":629,"./isNode":630,"./isNodeList":631,"./isTextNode":632,"./remove":636,"./replace":637}],618:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/prototype.indexOf');require('@marcom/ac-polyfills/Array/prototype.slice');var validate=require('./internal/validate');var filterByNodeType=require('./filterByNodeType');module.exports=function indexOf(node,nodeType){var parentNode=node.parentNode;var nodes;if(!parentNode){return 0}
nodes=parentNode.childNodes;if(nodeType!==!1){nodes=filterByNodeType(nodes,nodeType)}else{nodes=Array.prototype.slice.call(nodes)}
return nodes.indexOf(node)}},{"./filterByNodeType":615,"./internal/validate":624,"@marcom/ac-polyfills/Array/prototype.indexOf":634,"@marcom/ac-polyfills/Array/prototype.slice":635}],619:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertAfter(node,target){validate.insertNode(node,!0,'insertAfter');validate.childNode(target,!0,'insertAfter');validate.hasParentNode(target,'insertAfter');if(!target.nextSibling){return target.parentNode.appendChild(node)}
return target.parentNode.insertBefore(node,target.nextSibling)}},{"./internal/validate":624}],620:[function(require,module,exports){arguments[4][367][0].apply(exports,arguments)},{"./internal/validate":624,"dup":367}],621:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertFirstChild(node,target){validate.insertNode(node,!0,'insertFirstChild');validate.parentNode(target,!0,'insertFirstChild');if(!target.firstChild){return target.appendChild(node)}
return target.insertBefore(node,target.firstChild)}},{"./internal/validate":624}],622:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertLastChild(node,target){validate.insertNode(node,!0,'insertLastChild');validate.parentNode(target,!0,'insertLastChild');return target.appendChild(node)}},{"./internal/validate":624}],623:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{"../isNode":630,"dup":24}],624:[function(require,module,exports){arguments[4][25][0].apply(exports,arguments)},{"../COMMENT_NODE":608,"../DOCUMENT_FRAGMENT_NODE":609,"../ELEMENT_NODE":612,"../TEXT_NODE":613,"./isNodeType":623,"dup":25}],625:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var COMMENT_NODE=require('./COMMENT_NODE');module.exports=function isComment(obj){return isNodeType(obj,COMMENT_NODE)}},{"./COMMENT_NODE":608,"./internal/isNodeType":623}],626:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_NODE=require('./DOCUMENT_NODE');module.exports=function isDocument(obj){return isNodeType(obj,DOCUMENT_NODE)}},{"./DOCUMENT_NODE":610,"./internal/isNodeType":623}],627:[function(require,module,exports){arguments[4][26][0].apply(exports,arguments)},{"./DOCUMENT_FRAGMENT_NODE":609,"./internal/isNodeType":623,"dup":26}],628:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_TYPE_NODE=require('./DOCUMENT_TYPE_NODE');module.exports=function isDocumentType(obj){return isNodeType(obj,DOCUMENT_TYPE_NODE)}},{"./DOCUMENT_TYPE_NODE":611,"./internal/isNodeType":623}],629:[function(require,module,exports){arguments[4][27][0].apply(exports,arguments)},{"./ELEMENT_NODE":612,"./internal/isNodeType":623,"dup":27}],630:[function(require,module,exports){arguments[4][28][0].apply(exports,arguments)},{"dup":28}],631:[function(require,module,exports){'use strict';var nodeListToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;module.exports=function isNodeList(obj){if(!obj){return!1}
if(typeof obj.length!=='number'){return!1}
if(typeof obj[0]==='object'&&(!obj[0]||!obj[0].nodeType)){return!1}
return nodeListToStringPattern.test(Object.prototype.toString.call(obj))}},{}],632:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var TEXT_NODE=require('./TEXT_NODE');module.exports=function isTextNode(obj){return isNodeType(obj,TEXT_NODE)}},{"./TEXT_NODE":613,"./internal/isNodeType":623}],633:[function(require,module,exports){arguments[4][30][0].apply(exports,arguments)},{"dup":30}],634:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"dup":31}],635:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"dup":32}],636:[function(require,module,exports){arguments[4][29][0].apply(exports,arguments)},{"./internal/validate":624,"dup":29}],637:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function replace(newNode,oldNode){validate.insertNode(newNode,!0,'insertFirstChild','newNode');validate.childNode(oldNode,!0,'insertFirstChild','oldNode');validate.hasParentNode(oldNode,'insertFirstChild','oldNode');return oldNode.parentNode.replaceChild(newNode,oldNode)}},{"./internal/validate":624}],638:[function(require,module,exports){arguments[4][240][0].apply(exports,arguments)},{"./ac-browser/BrowserData":639,"./ac-browser/IE":640,"dup":240}],639:[function(require,module,exports){arguments[4][241][0].apply(exports,arguments)},{"./data":641,"@marcom/ac-polyfills/Array/prototype.filter":644,"@marcom/ac-polyfills/Array/prototype.some":645,"dup":241}],640:[function(require,module,exports){arguments[4][242][0].apply(exports,arguments)},{"dup":242}],641:[function(require,module,exports){arguments[4][243][0].apply(exports,arguments)},{"dup":243}],642:[function(require,module,exports){arguments[4][162][0].apply(exports,arguments)},{"dup":162}],643:[function(require,module,exports){arguments[4][229][0].apply(exports,arguments)},{"dup":229}],644:[function(require,module,exports){arguments[4][30][0].apply(exports,arguments)},{"dup":30}],645:[function(require,module,exports){if(!Array.prototype.some){Array.prototype.some=function some(callback,thisObj){var arrayObj=Object(this);var len=arrayObj.length>>>0;var i;if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
for(i=0;i<len;i+=1){if(i in arrayObj&&callback.call(thisObj,arrayObj[i],i,arrayObj)===!0){return!0}}
return!1}}},{}],646:[function(require,module,exports){arguments[4][395][0].apply(exports,arguments)},{"dup":395}],647:[function(require,module,exports){arguments[4][594][0].apply(exports,arguments)},{"./shared/camelCasedEventTypes":650,"./shared/prefixHelper":652,"./shared/windowFallbackEventTypes":655,"./utils/eventTypeAvailable":656,"dup":594}],648:[function(require,module,exports){arguments[4][376][0].apply(exports,arguments)},{"./shared/getStyleTestElement":651,"./shared/prefixHelper":652,"./shared/stylePropertyCache":653,"./utils/toCSS":657,"./utils/toDOM":658,"dup":376}],649:[function(require,module,exports){arguments[4][377][0].apply(exports,arguments)},{"./getStyleProperty":648,"./shared/prefixHelper":652,"./shared/stylePropertyCache":653,"./shared/styleValueAvailable":654,"dup":377}],650:[function(require,module,exports){arguments[4][595][0].apply(exports,arguments)},{"dup":595}],651:[function(require,module,exports){arguments[4][378][0].apply(exports,arguments)},{"dup":378}],652:[function(require,module,exports){arguments[4][379][0].apply(exports,arguments)},{"dup":379}],653:[function(require,module,exports){arguments[4][380][0].apply(exports,arguments)},{"dup":380}],654:[function(require,module,exports){arguments[4][381][0].apply(exports,arguments)},{"./getStyleTestElement":651,"./stylePropertyCache":653,"dup":381}],655:[function(require,module,exports){arguments[4][597][0].apply(exports,arguments)},{"dup":597}],656:[function(require,module,exports){arguments[4][598][0].apply(exports,arguments)},{"dup":598}],657:[function(require,module,exports){arguments[4][382][0].apply(exports,arguments)},{"dup":382}],658:[function(require,module,exports){arguments[4][383][0].apply(exports,arguments)},{"dup":383}],659:[function(require,module,exports){'use strict';module.exports={canvasAvailable:require('./canvasAvailable'),continuousScrollEventsAvailable:require('./continuousScrollEventsAvailable'),cookiesAvailable:require('./cookiesAvailable'),cssLinearGradientAvailable:require('./cssLinearGradientAvailable'),cssPropertyAvailable:require('./cssPropertyAvailable'),cssViewportUnitsAvailable:require('./cssViewportUnitsAvailable'),elementAttributeAvailable:require('./elementAttributeAvailable'),eventTypeAvailable:require('./eventTypeAvailable'),isDesktop:require('./isDesktop'),isHandheld:require('./isHandheld'),isRetina:require('./isRetina'),isTablet:require('./isTablet'),localStorageAvailable:require('./localStorageAvailable'),mediaElementsAvailable:require('./mediaElementsAvailable'),mediaQueriesAvailable:require('./mediaQueriesAvailable'),sessionStorageAvailable:require('./sessionStorageAvailable'),svgAvailable:require('./svgAvailable'),threeDTransformsAvailable:require('./threeDTransformsAvailable'),touchAvailable:require('./touchAvailable'),webGLAvailable:require('./webGLAvailable')}},{"./canvasAvailable":660,"./continuousScrollEventsAvailable":661,"./cookiesAvailable":662,"./cssLinearGradientAvailable":663,"./cssPropertyAvailable":664,"./cssViewportUnitsAvailable":665,"./elementAttributeAvailable":666,"./eventTypeAvailable":667,"./isDesktop":669,"./isHandheld":670,"./isRetina":671,"./isTablet":672,"./localStorageAvailable":673,"./mediaElementsAvailable":674,"./mediaQueriesAvailable":675,"./sessionStorageAvailable":676,"./svgAvailable":677,"./threeDTransformsAvailable":678,"./touchAvailable":679,"./webGLAvailable":680}],660:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');var canvasAvailable=function(){var documentObj=globalsHelper.getDocument();var canvas=documentObj.createElement('canvas');return!!(typeof canvas.getContext==='function'&&canvas.getContext('2d'))};module.exports=once(canvasAvailable);module.exports.original=canvasAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],661:[function(require,module,exports){'use strict';var ac_browser=require('@marcom/ac-browser');var touchAvailable=require('./touchAvailable').original;var once=require('@marcom/ac-function/once');function continuousScrollEventsAvailable(){return(!touchAvailable()||(ac_browser.os==='iOS'&&ac_browser.version>=8)||ac_browser.name==='Chrome')}
module.exports=once(continuousScrollEventsAvailable);module.exports.original=continuousScrollEventsAvailable},{"./touchAvailable":679,"@marcom/ac-browser":638,"@marcom/ac-function/once":643}],662:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function cookiesAvailable(){var available=!1;var documentObj=globalsHelper.getDocument();var navigatorObj=globalsHelper.getNavigator();try{if('cookie' in documentObj&&!!navigatorObj.cookieEnabled){documentObj.cookie='ac_feature_cookie=1';available=(documentObj.cookie.indexOf('ac_feature_cookie')!==-1);documentObj.cookie='ac_feature_cookie=; expires=Thu, 01 Jan 1970 00:00:01 GMT;'}}catch(err){}
return available}
module.exports=once(cookiesAvailable);module.exports.original=cookiesAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],663:[function(require,module,exports){'use strict';var getStyleValue=require('@marcom/ac-prefixer/getStyleValue');var once=require('@marcom/ac-function/once');function cssLinearGradientAvailable(){var values=['linear-gradient(to bottom right, #9f9, white)','linear-gradient(top left, #9f9, white)','gradient(linear, left top, right bottom, from(#9f9), to(white))'];return values.some(function(value){return!!getStyleValue('background-image',value)})}
module.exports=once(cssLinearGradientAvailable);module.exports.original=cssLinearGradientAvailable},{"@marcom/ac-function/once":643,"@marcom/ac-prefixer/getStyleValue":649}],664:[function(require,module,exports){arguments[4][384][0].apply(exports,arguments)},{"@marcom/ac-function/memoize":642,"@marcom/ac-prefixer/getStyleProperty":648,"@marcom/ac-prefixer/getStyleValue":649,"dup":384}],665:[function(require,module,exports){'use strict';var getStyleValue=require('@marcom/ac-prefixer/getStyleValue');var once=require('@marcom/ac-function/once');function cssViewportUnitsAvailable(){return!!getStyleValue('margin','1vw 1vh')}
module.exports=once(cssViewportUnitsAvailable);module.exports.original=cssViewportUnitsAvailable},{"@marcom/ac-function/once":643,"@marcom/ac-prefixer/getStyleValue":649}],666:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var memoize=require('@marcom/ac-function/memoize');function elementAttributeAvailable(attr,tagName){var documentObj=globalsHelper.getDocument();var el;tagName=tagName||'div';el=documentObj.createElement(tagName);return(attr in el)}
module.exports=memoize(elementAttributeAvailable);module.exports.original=elementAttributeAvailable},{"./helpers/globals":668,"@marcom/ac-function/memoize":642}],667:[function(require,module,exports){'use strict';var getEventType=require('@marcom/ac-prefixer/getEventType');var memoize=require('@marcom/ac-function/memoize');function eventTypeAvailable(type,tagName){return!!getEventType(type,tagName)}
module.exports=memoize(eventTypeAvailable);module.exports.original=eventTypeAvailable},{"@marcom/ac-function/memoize":642,"@marcom/ac-prefixer/getEventType":647}],668:[function(require,module,exports){arguments[4][385][0].apply(exports,arguments)},{"dup":385}],669:[function(require,module,exports){'use strict';var touchAvailable=require('./touchAvailable').original;var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function isDesktop(){var windowObj=globalsHelper.getWindow();return(!touchAvailable()&&!windowObj.orientation)}
module.exports=once(isDesktop);module.exports.original=isDesktop},{"./helpers/globals":668,"./touchAvailable":679,"@marcom/ac-function/once":643}],670:[function(require,module,exports){'use strict';var isDesktop=require('./isDesktop').original;var isTablet=require('./isTablet').original;var once=require('@marcom/ac-function/once');function isHandheld(){return(!isDesktop()&&!isTablet())}
module.exports=once(isHandheld);module.exports.original=isHandheld},{"./isDesktop":669,"./isTablet":672,"@marcom/ac-function/once":643}],671:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');module.exports=function isRetina(){var windowObj=globalsHelper.getWindow();return('devicePixelRatio' in windowObj&&windowObj.devicePixelRatio>=1.5)}},{"./helpers/globals":668}],672:[function(require,module,exports){'use strict';var isDesktop=require('./isDesktop').original;var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');var MIN_TABLET_WIDTH=600;function isTablet(){var windowObj=globalsHelper.getWindow();var width=windowObj.screen.width;if(windowObj.orientation&&windowObj.screen.height<width){width=windowObj.screen.height}
return(!isDesktop()&&width>=MIN_TABLET_WIDTH)}
module.exports=once(isTablet);module.exports.original=isTablet},{"./helpers/globals":668,"./isDesktop":669,"@marcom/ac-function/once":643}],673:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function localStorageAvailable(){var windowObj=globalsHelper.getWindow();var available=!1;try{available=!!(windowObj.localStorage&&windowObj.localStorage.non_existent!==null)}catch(err){}
return available}
module.exports=once(localStorageAvailable);module.exports.original=localStorageAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],674:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function mediaElementsAvailable(){var windowObj=globalsHelper.getWindow();return('HTMLMediaElement' in windowObj)}
module.exports=once(mediaElementsAvailable);module.exports.original=mediaElementsAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],675:[function(require,module,exports){arguments[4][386][0].apply(exports,arguments)},{"./helpers/globals":668,"@marcom/ac-function/once":643,"@marcom/ac-polyfills/matchMedia":646,"dup":386}],676:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function sessionStorageAvailable(){var windowObj=globalsHelper.getWindow();var available=!1;try{if('sessionStorage' in windowObj&&typeof windowObj.sessionStorage.setItem==='function'){windowObj.sessionStorage.setItem('ac_feature','test');available=!0;windowObj.sessionStorage.removeItem('ac_feature','test')}}catch(e){}
return available}
module.exports=once(sessionStorageAvailable);module.exports.original=sessionStorageAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],677:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function svgAvailable(){var documentObj=globalsHelper.getDocument();return!!documentObj.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image','1.1')}
module.exports=once(svgAvailable);module.exports.original=svgAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],678:[function(require,module,exports){'use strict';var getStyleValue=require('@marcom/ac-prefixer/getStyleValue');var once=require('@marcom/ac-function/once');function threeDTransformsAvailable(){return!!(getStyleValue('perspective','1px')&&getStyleValue('transform','translateZ(0)'))}
module.exports=once(threeDTransformsAvailable);module.exports.original=threeDTransformsAvailable},{"@marcom/ac-function/once":643,"@marcom/ac-prefixer/getStyleValue":649}],679:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function touchAvailable(){var windowObj=globalsHelper.getWindow();var documentObj=globalsHelper.getDocument();var navigatorObj=globalsHelper.getNavigator();return!!(('ontouchstart' in windowObj)||(windowObj.DocumentTouch&&documentObj instanceof windowObj.DocumentTouch)||(navigatorObj.maxTouchPoints>0)||(navigatorObj.msMaxTouchPoints>0))}
module.exports=once(touchAvailable);module.exports.original=touchAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],680:[function(require,module,exports){'use strict';var globalsHelper=require('./helpers/globals');var once=require('@marcom/ac-function/once');function webGLAvailable(){var documentObj=globalsHelper.getDocument();var canvas=documentObj.createElement('canvas');if(typeof canvas.getContext==='function'){return!!(canvas.getContext('webgl')||canvas.getContext('experimental-webgl'))}
return!1}
module.exports=once(webGLAvailable);module.exports.original=webGLAvailable},{"./helpers/globals":668,"@marcom/ac-function/once":643}],681:[function(require,module,exports){arguments[4][578][0].apply(exports,arguments)},{"dup":578}],682:[function(require,module,exports){arguments[4][389][0].apply(exports,arguments)},{"dup":389}],683:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{"dup":125,"qs":684}],684:[function(require,module,exports){arguments[4][126][0].apply(exports,arguments)},{"./parse":685,"./stringify":686,"dup":126}],685:[function(require,module,exports){arguments[4][127][0].apply(exports,arguments)},{"./utils":687,"dup":127}],686:[function(require,module,exports){arguments[4][128][0].apply(exports,arguments)},{"./utils":687,"dup":128}],687:[function(require,module,exports){arguments[4][129][0].apply(exports,arguments)},{"dup":129}],688:[function(require,module,exports){'use strict';module.exports={clone:require('./clone'),create:require('./create'),defaults:require('./defaults'),extend:require('./extend'),getPrototypeOf:require('./getPrototypeOf'),isDate:require('./isDate'),isEmpty:require('./isEmpty'),isRegExp:require('./isRegExp'),toQueryParameters:require('./toQueryParameters')}},{"./clone":689,"./create":690,"./defaults":691,"./extend":692,"./getPrototypeOf":693,"./isDate":694,"./isEmpty":695,"./isRegExp":696,"./toQueryParameters":697}],689:[function(require,module,exports){'use strict';require('@marcom/ac-polyfills/Array/isArray');var extend=require('./extend');var hasOwnProp=Object.prototype.hasOwnProperty;var deepClone=function(dest,source){var prop;for(prop in source){if(hasOwnProp.call(source,prop)){if(source[prop]===null){dest[prop]=null}
else if(typeof source[prop]==='object'){dest[prop]=Array.isArray(source[prop])?[]:{};deepClone(dest[prop],source[prop])}
else{dest[prop]=source[prop]}}}
return dest};module.exports=function clone(object,deep){if(deep){return deepClone({},object)}
return extend({},object)}},{"./extend":692,"@marcom/ac-polyfills/Array/isArray":681}],690:[function(require,module,exports){'use strict';var F=function(){};module.exports=function create(proto){if(arguments.length>1){throw new Error('Second argument not supported')}
if(proto===null||typeof proto!=='object'){throw new TypeError('Object prototype may only be an Object.')}
if(typeof Object.create==='function'){return Object.create(proto)}else{F.prototype=proto;return new F()}}},{}],691:[function(require,module,exports){arguments[4][387][0].apply(exports,arguments)},{"./extend":692,"dup":387}],692:[function(require,module,exports){arguments[4][388][0].apply(exports,arguments)},{"@marcom/ac-polyfills/Array/prototype.forEach":682,"dup":388}],693:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function getPrototypeOf(obj){if(Object.getPrototypeOf){return Object.getPrototypeOf(obj)}
else{if(typeof obj!=='object'){throw new Error('Requested prototype of a value that is not an object.')}
else if(typeof this.__proto__==='object'){return obj.__proto__}
else{var constructor=obj.constructor;var oldConstructor;if(hasOwnProp.call(obj,'constructor')){oldConstructor=constructor;if(!(delete obj.constructor)){return null}
constructor=obj.constructor;obj.constructor=oldConstructor}
return constructor?constructor.prototype:null}}}},{}],694:[function(require,module,exports){'use strict';module.exports=function isDate(date){return Object.prototype.toString.call(date)==='[object Date]'}},{}],695:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function isEmpty(object){var prop;if(typeof object!=='object'){throw new TypeError('ac-base.Object.isEmpty : Invalid parameter - expected object')}
for(prop in object){if(hasOwnProp.call(object,prop)){return!1}}
return!0}},{}],696:[function(require,module,exports){'use strict';module.exports=function isRegExp(obj){return window.RegExp?obj instanceof RegExp:!1}},{}],697:[function(require,module,exports){'use strict';var joinSearchParams=require('@marcom/ac-url/joinSearchParams');module.exports=function toQueryParameters(object){if(typeof object!=='object'){throw new TypeError('toQueryParameters error: argument is not an object')}
return joinSearchParams(object,!1)}},{"@marcom/ac-url/joinSearchParams":683}],698:[function(require,module,exports){'use strict';var sCode=require('./s-code/s-code');var plugins=require('./s-code/plugins');module.exports.init=sCode;module.exports.plugins=plugins},{"./s-code/plugins":699,"./s-code/s-code":712}],699:[function(require,module,exports){'use strict';function init(sCode){require('./plugins/utilities/utilities')(sCode);require('./plugins/customLinkHandler')(sCode);require('./plugins/detectRIA')(sCode);require('./plugins/deviceOrientationChanges')(sCode);require('./plugins/downloadLinkHandler')(sCode);require('./plugins/getAndPersistValue')(sCode);require('./plugins/getPercentPageViewed')(sCode);require('./plugins/getPreviousValue')(sCode);require('./plugins/getQueryParam')(sCode);require('./plugins/getValOnce')(sCode);require('./plugins/setClickMapEmail')(sCode);require('./plugins/setDynamicObjectIDs')(sCode)}
module.exports.init=init},{"./plugins/customLinkHandler":700,"./plugins/detectRIA":701,"./plugins/deviceOrientationChanges":702,"./plugins/downloadLinkHandler":703,"./plugins/getAndPersistValue":704,"./plugins/getPercentPageViewed":705,"./plugins/getPreviousValue":706,"./plugins/getQueryParam":707,"./plugins/getValOnce":708,"./plugins/setClickMapEmail":709,"./plugins/setDynamicObjectIDs":710,"./plugins/utilities/utilities":711}],700:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.linkHandler=new Function("p","t",""+"var s=this,h=s.p_gh(),i,l;t=t?t:'o';if(!h||(s.linkType&&(h||s.linkN"+"ame)))return '';i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h."+"substring(0,i);l=s.pt(p,'|','p_gn',h.toLowerCase());if(l){s.linkNam"+"e=l=='[['?'':l;s.linkType=t;return h;}return '';");sCode.p_gn=new Function("t","h",""+"var i=t?t.indexOf('~'):-1,n,x;if(t&&h){n=i<0?'':t.substring(0,i);x="+"t.substring(i+1);if(h.indexOf(x.toLowerCase())>-1)return n?n:'[[';}"+"return 0;")}},{}],701:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.detectRIA=new Function("cn","fp","sp","mfv","msv","sf",""+"cn=cn?cn:'s_ria';msv=msv?msv:2;mfv=mfv?mfv:10;var s=this,sv='',fv=-"+"1,dwi=0,fr='',sr='',w,mt=s.n.mimeTypes,uk=s.c_r(cn),k=s.c_w('s_cc',"+"'true',0)?'Y':'N';fk=uk.substring(0,uk.indexOf('|'));sk=uk.substrin"+"g(uk.indexOf('|')+1,uk.length);if(k=='Y'&&s.p_fo('detectRIA')){if(u"+"k&&!sf){if(fp){s[fp]=fk;}if(sp){s[sp]=sk;}return false;}if(!fk&&fp)"+"{if(s.pl&&s.pl.length){if(s.pl['Shockwave Flash 2.0'])fv=2;x=s.pl['"+"Shockwave Flash'];if(x){fv=0;z=x.description;if(z)fv=z.substring(16"+",z.indexOf('.'));}}else if(navigator.plugins&&navigator.plugins.len"+"gth){x=navigator.plugins['Shockwave Flash'];if(x){fv=0;z=x.descript"+"ion;if(z)fv=z.substring(16,z.indexOf('.'));}}else if(mt&&mt.length)"+"{x=mt['application/x-shockwave-flash'];if(x&&x.enabledPlugin)fv=0;}"+"if(fv<=0)dwi=1;w=s.u.indexOf('Win')!=-1?1:0;if(dwi&&s.isie&&w&&exec"+"Script){result=false;for(var i=mfv;i>=3&&result!=true;i--){execScri"+"pt('on error resume next: result = IsObject(CreateObject(\"Shockwav"+"eFlash.ShockwaveFlash.'+i+'\"))','VBScript');fv=i;}}fr=fv==-1?'Flas"+"h Not Detected':fv==0?'Flash Enabled (No Version)':'Flash '+fv;}if("+"!sk&&sp&&s.apv>=4.1){var tc='try{x=new ActiveXObject(\"AgControl.A'"+"+'gControl\");for(var i=msv;i>0;i--){for(var j=9;j>=0;j--){if(x.is'"+"+'VersionSupported(i+\".\"+j)){sv=i+\".\"+j;break;}}if(sv){break;}'"+"+'}}catch(e){try{x=navigator.plugins[\"Silverlight Plug-In\"];sv=x'"+"+'.description.substring(0,x.description.indexOf(\".\")+2);}catch('"+"+'e){}}';eval(tc);sr=sv==''?'Silverlight Not Detected':'Silverlight"+" '+sv;}if((fr&&fp)||(sr&&sp)){s.c_w(cn,fr+'|'+sr,0);if(fr)s[fp]=fr;"+"if(sr)s[sp]=sr;}}")}},{}],702:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.p_oc=new Function("evt",""+"var o=s.wd.orientation,ot=(Math.abs(o)==90)?'l':'p',cv,v;s.lc=(evt."+"type=='load')?s.lc+1:s.lc;if(s.lc==0)return;if(typeof(o)!='undefine"+"d'){ot=(evt.type=='load')?ot:ot+':'+s.c_r('s_orientationHeight');cv"+"=s.c_r('s_orientation');v=cv?cv+=','+ot:ot;s.c_w('s_orientation',v)"+"}");sCode.p_och=new Function("",""+"var dh=Math.max(Math.max(s.d.body.scrollHeight,s.d.documentElement."+"scrollHeight),Math.max(s.d.body.offsetHeight,s.d.documentElement.of"+"fsetHeight),Math.max(s.d.body.clientHeight,s.d.documentElement.clie"+"ntHeight));vph=s.wd.innerHeight||(s.d.documentElement.clientHeight|"+"|s.d.body.clientHeight),st=s.wd.pageYOffset||(s.wd.document.documen"+"tElement.scrollTop||s.wd.document.body.scrollTop),vh=st+vph;s.c_w('"+"s_orientationHeight',vh);");sCode.deviceOrientationChanges=new Function("ext",""+"var s=this,v;s.lc=0;if(typeof(s.linkType)!='undefined'&&s.linkType!"+"='e')return'';var cv=s.c_r('s_orientation'),cva=(cv.indexOf(',')>-1"+")?cv.split(','):'';if(cv){if(cva){if(!ext){for(i=1;i<cva.length;i++"+"){cva[i]=cva[i].split(':')[0];}}cva[0]+='@s';cva.push(cva[cva.lengt"+"h-1].split(':')[0]+'@e');v=cva.toString();}else{v=cv+'@s,'+cv+'@e';"+"}}s.c_w('s_orientation','');if(s.wd.addEventListener){s.wd.addEvent"+"Listener('orientationchange',s.p_oc,false);s.wd.addEventListener('l"+"oad',s.p_oc,false);s.wd.addEventListener('load',s.p_och,false);s.wd"+".addEventListener('scroll',s.p_och,false);}return v;")}},{}],703:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.downloadLinkHandler=new Function("p",""+"var s=this,h=s.p_gh(),n='linkDownloadFileTypes',i,t;if(!h||(s.linkT"+"ype&&(h||s.linkName)))return '';i=h.indexOf('?');t=s[n];s[n]=p?p:t;"+"if(s.lt(h)=='d')s.linkType='d';else h='';s[n]=t;return h;")}},{}],704:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.getAndPersistValue=new Function("v","c","e",""+"var s=this,a=new Date;e=e?e:0;a.setTime(a.getTime()+e*86400000);if("+"v)s.c_w(c,v,e?a:0);return s.c_r(c);");sCode.__se=new Function(""+"var l={'~':'tl:[\\'','^': 'kw:[\\'','%': 'ahoo','|': '\\'],','>': '"+"\\']}','*': '.com','$': 'search',';':'query','#':'land','`':'oogle'"+",'+':'http://www','<':'keyword'};var f=this.___se+'';var g='';for(v"+"ar i=0;i<f.length;i++){if(l[f.substring(i,i+1)]&&typeof l[f.substri"+"ng(i,i+1)]!='undefined'){g+=l[f.substring(i,i+1)];}else{g+=f.substr"+"ing(i,i+1);}}return eval('('+g+')');");sCode.___se="{}";sCode.isEntry=new Function(""+"var s=this;var l=s.linkInternalFilters,r=s.referrer||typeof s.refer"+"rer!='undefined'?s.referrer:document.referrer,p=l.indexOf(','),b=0,"+"v='';if(!r){return 1;}while(p=l.indexOf(',')){v=p>-1?l.substring(b,"+"p):l;if(v=='.'||r.indexOf(v)>-1){return 0;}if(p==-1){break;}b=p+1;l"+"=l.substring(b,l.length);}return 1;");sCode.p_fo=new Function("n",""+"var s=this;if(!s.__fo){s.__fo=new Object;}if(!s.__fo[n]){s.__fo[n]="+"new Object;return 1;}else {return 0;}")}},{}],705:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.handlePPVevents=new Function("",""+"if(!s.getPPVid)return;var dh=Math.max(Math.max(s.d.body.scrollHeigh"+"t,s.d.documentElement.scrollHeight),Math.max(s.d.body.offsetHeight,"+"s.d.documentElement.offsetHeight),Math.max(s.d.body.clientHeight,s."+"d.documentElement.clientHeight)),vph=s.wd.innerHeight||(s.d.documen"+"tElement.clientHeight||s.d.body.clientHeight),st=s.wd.pageYOffset||"+"(s.wd.document.documentElement.scrollTop||s.wd.document.body.scroll"+"Top),vh=st+vph,pv=Math.min(Math.round(vh/dh*100),100),c=s.c_r('s_pp"+"v'),a=(c.indexOf(',')>-1)?c.split(',',5):[],id=(a.length>0)?(a[0]):"+"escape(s.getPPVid),cv=(a.length>1)?parseInt(a[1]):(0),p0=(a.length>"+"2)?parseInt(a[2]):(pv),cy=(a.length>3)?parseInt(a[3]):(0),pt=s._ct,"+"ph=s._ch,t=new Date;t.setTime(t.getTime()+1800000);s._ct=new Date()"+".getTime();s._ch=vh;var sa='',td=Math.round((s._ct-pt)/1000),hd=Mat"+"h.abs(s._ch-ph),lowerBound,upperBound;if(hd&&td){lowerBound=Math.ce"+"il(st/100)*100;upperBound=Math.ceil(s._ch/100)*100;while(lowerBound"+"<=upperBound){if(lowerBound!=0){var value=lowerBound+':'+(td>10?'>'"+":td);if(s.pxViewedArray.length==0){s.pxViewedArray.push(value);}els"+"e if(s.pxViewedArray.toString().indexOf(lowerBound)==-1){s.pxViewed"+"Array.push(value);}else{for(i=0;i<s.pxViewedArray.length;i++){var a"+"v=s.pxViewedArray[i].split(':');if(lowerBound==av[0]){if(av[1]!='>'"+"){var totalTime=Math.floor((Number(av[1])+Number(td))*100)/100;if(t"+"otalTime>10){totalTime='>';}s.pxViewedArray[i]=av[0]+':'+totalTime;"+"}break;}}}}lowerBound=lowerBound+100;s.pxViewedArray.sort(function("+"a,b){return parseInt(a)-parseInt(b)});}}sa=s.pxViewedArray.toString"+"().replace(/,/g,'|');cn=(pv>0)?(id+','+((pv>cv)?pv:cv)+','+p0+','+("+"(vh>cy)?vh:cy)+','+((sa)?sa:'')):'';s.c_w('s_ppv',cn,t);");sCode.getPercentPageViewed=new Function("pid",""+"pid=pid?pid:'-';var s=this,ist=!s.getPPVid?true:false,t=new Date;t."+"setTime(t.getTime()+1800000);if(typeof(s.linkType)!='undefined'&&s."+"linkType!='e')return'';var v=s.c_r('s_ppv'),a=(v.indexOf(',')>-1)?v"+".split(',',5):[];if(a.length<5){for(var i=4;i>0;i--){a[i]=(i<a.leng"+"th)?(a[i-1]):('');}a[0]='';}a[0]=unescape(a[0]);s.getPPVpid=pid;s.c"+"_w('s_ppv',escape(pid),t);s.pxViewedArray=[];if(ist){s.getPPVid=(pi"+"d)?(pid):(s.pageName?s.pageName:document.location.href);s.c_w('s_pp"+"v',escape(s.getPPVid),0);if(s.wd.addEventListener){s.wd.addEventLis"+"tener('load',s.handlePPVevents,false);s.wd.addEventListener('scroll"+"',s.handlePPVevents,false);s.wd.addEventListener('resize',s.handleP"+"PVevents,false);}else if(s.wd.attachEvent){s.wd.attachEvent('onload"+"',s.handlePPVevents);s.wd.attachEvent('onscroll',s.handlePPVevents)"+";s.wd.attachEvent('onresize',s.handlePPVevents);}}return(pid!='-')?"+"(a):(a[1]);")}},{}],706:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.getPreviousValue=new Function("v","c","el",""+"var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el"+"){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i"+"){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)"+":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?"+"s.c_w(c,v,t):s.c_w(c,'no value',t);return r}")}},{}],707:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.getQueryParam=new Function("p","d","u",""+"var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.locati"+"on);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p"+".length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-"+"1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i="+"=p.length?i:i+1)}return v");sCode.p_gpv=new Function("k","u",""+"var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v"+"=s.pt(q,'&','p_gvf',k)}return v");sCode.p_gvf=new Function("t","k",""+"if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'T"+"rue':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s."+"epa(v)}return ''")}},{}],708:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.getValOnce=new Function("v","c","e",""+"var s=this,a=new Date,v=v?v:v='',c=c?c:c='s_gvo',e=e?e:0,k=s.c_r(c"+");if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return"+" v==k?'':v")}},{}],709:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.setClickMapEmail=new Function("qp","ot",""+"var s=this,v=s.getQueryParam(qp,'~'),d,pn,oid,ot=s.getQueryParam(ot)"+",ot=ot?ot:'A',cv;d=v.indexOf('~');if(!v)return '';if(d>-1){pn=v.subs"+"tring(0,d);oid=v.substring(d+1);}cv='&pid='+s.ape(s.fl(pn,255))+'&pi"+"dt=1&oid='+s.ape(s.fl(oid,100))+'&oidt=1&ot='+ot+'&oi=1';s.sq(cv);")}},{}],710:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.setupDynamicObjectIDs=new Function(""+"var s=this;if(!s.doi){s.doi=1;if(s.apv>3&&(!s.isie||!s.ismac||s.apv"+">=5)){if(s.wd.attachEvent)s.wd.attachEvent('onload',s.setOIDs);else"+" if(s.wd.addEventListener)s.wd.addEventListener('load',s.setOIDs,fa"+"lse);else{s.doiol=s.wd.onload;s.wd.onload=s.setOIDs}}s.wd.s_semapho"+"re=1}");sCode.setOIDs=new Function("e",""+"var s=s_c_il["+s._in+"],b=s.eh(s.wd,'onload'),o='onclick',x,l,u,c,i"+",a=new Array;if(s.doiol){if(b)s[b]=s.wd[b];s.doiol(e)}if(s.d.links)"+"{for(i=0;i<s.d.links.length;i++){l=s.d.links[i];"+"if(s._isSafari){s.acAnalytics.dynamicObjectIdHandlerSafari(s, l);}"+"c=l[o]?''+l[o]:'';b"+"=s.eh(l,o);z=l[b]?''+l[b]:'';u=s.getObjectID(l);if(u&&c.indexOf('s_"+"objectID')<0&&z.indexOf('s_objectID')<0){u=s.repl(u,'\"','');u=s.re"+"pl(u,'\\n','').substring(0,97);l.s_oc=l[o];a[u]=a[u]?a[u]+1:1;x='';"+"if(c.indexOf('.t(')>=0||c.indexOf('.tl(')>=0||c.indexOf('s_gs(')>=0"+")x='var x=\".tl(\";';x+='s_objectID=\"'+u+'_'+a[u]+'\";return this."+"s_oc?this.s_oc(e):true';if(s.isns&&s.apv>=5)l.setAttribute(o,x);l[o"+"]=new Function('e',x)}}}s.wd.s_semaphore=0;return true")}},{}],711:[function(require,module,exports){'use strict';module.exports=function(sCode){sCode.manageVars=new Function("c","l","f",""+"var s=this,vl,la,vla;l=l?l:'';f=f?f:1 ;if(!s[c])return false;vl='pa"+"geName,purchaseID,channel,server,pageType,campaign,state,zip,events"+",products,transactionID';for(var n=1;n<76;n++){vl+=',prop'+n+',eVar"+"'+n+',hier'+n;}if(l&&(f==1||f==2)){if(f==1){vl=l;}if(f==2){la=s.spl"+"it(l,',');vla=s.split(vl,',');vl='';for(x in la){for(y in vla){if(l"+"a[x]==vla[y]){vla[y]='';}}}for(y in vla){vl+=vla[y]?','+vla[y]:'';}"+"}s.pt(vl,',',c,0);return true;}else if(l==''&&f==1){s.pt(vl,',',c,0"+");return true;}else{return false;}");sCode.clearVars=new Function("t","var s=this;s[t]='';");sCode.lowercaseVars=new Function("t",""+"var s=this;if(s[t]&&t!='events'){s[t]=s[t].toString();if(s[t].index"+"Of('D=')!=0){s[t]=s[t].toLowerCase();}}");sCode.join=new Function("v","p",""+"var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back"+":'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0"+";x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);el"+"se str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");sCode.p_fo=new Function("n",""+"var s=this;if(!s.__fo){s.__fo=new Object;}if(!s.__fo[n]){s.__fo[n]="+"new Object;return 1;}else {return 0;}");sCode.p_gh=new Function(""+"var s=this;if(!s.eo&&!s.lnk)return '';var o=s.eo?s.eo:s.lnk,y=s.ot("+"o),n=s.oid(o),x=o.s_oidt;if(s.eo&&o==s.eo){while(o&&!n&&y!='BODY'){"+"o=o.parentElement?o.parentElement:o.parentNode;if(!o)return '';y=s."+"ot(o);n=s.oid(o);x=o.s_oidt}}return o.href?o.href:'';");sCode.apl=new Function("L","v","d","u",""+"var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a."+"length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas"+"e()));}}if(!m)L=L?L+d+v:v;return L");sCode.repl=new Function("x","o","n",""+"var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x."+"substring(i+o.length);i=x.indexOf(o,i+l)}return x");sCode.split=new Function("l","d",""+"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x"+"++]=l.substring(0,i);l=l.substring(i+d.length);}return a");sCode.vpr=new Function("vs","v","if(typeof(v)!='undefined'){var s=this; eval('s.'+vs+'=\"'+v+'\"')}")}},{}],712:[function(require,module,exports){(function(){'use strict';var s_code='',s_objectID;function s_gi(un,pg,ss){var c="s.version='H.27';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function('var e;try{console.log(\"'+s.rep(s.rep(s.rep(m,\"\\\\\",\"\\\\\\"+"\\\"),\"\\n\",\"\\\\n\"),\"\\\"\",\"\\\\\\\"\")+'\");}catch(e){}');tcf()};s.cls=function(x,c){var i,y='';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}return "+"y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){return o};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;retur"+"n 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',f=\"+~!*()'\",i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent(x)"+";for(i=0;i<f.length;i++) {n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,\"%\"+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.subs"+"tring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+',"+"'%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+"+"x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unescap"+"e(x)}return y');return tcf(x)}else return unescape(x)}return y};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z"+"+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring(0,"+"2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf',f"+");return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visibi"+"litychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){while("+"s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\");s"+".sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.link"+"Type=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostname,"+"n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.'"+",'c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<0?"+"c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-60)"+";if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':'');"+"return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i;l"+"[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf="+"new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s.w"+"d,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0;r"+"eturn true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return s."+"tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)for("+"n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackingS"+"erverBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+s._in+'_'+un,im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLower"+"Case();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.versio"+"n+(s.tcn?'T':'')+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!"+"s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r"+";return ''}imn+='_'+s.rc[un];s.rc[un]++}if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im=s.wd[im"+"n];if(!im)im=s.wd[imn]=new Image;im.alt=\"\";im.s_l=0;im.onload=im.onerror=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.bcr();s.mrq(\"'+un+'\");s.nrs--;if(!s."+"nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;im.src=rs;if(s.useForcedLinkTracking||s.bcf){if(!s.forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;setTimeout('if(window.s"+"_c_il)window.s_c_il['+s._in+'].bcr()',s.forcedLinkTrackingTimeout);}else if((s.lnk||s.eo)&&(!ta||ta=='_self'||ta=='_top'||ta=='_parent'||(s.wd.name&&ta==s.wd.name))){b=e=new Date;while(!im.s_l&&e.g"+"etTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v"+"]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l="+"0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='http"+"s://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',"+"p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c"+";else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData"+"\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(nf"+"n=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk"+"=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLig"+"htData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp"+"=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return q"+"s};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe="+"s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if("+"fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||"+"fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='supplementalDataID')q='sdid';else if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';el"+"se if(k=='marketingCloudVisitorID')q='mid';else if(k=='analyticsVisitorID')q='aid';else if(k=='audienceManagerLocationHint')q='aamlh';else if(k=='audienceManagerBlob')q='aamb';else if(k=='pageURL')"+"{q='g';if(v.length>255){s.pageURLRest=v.substring(255);v=v.substring(0,255);}}else if(k=='pageURLRest')q='-g';else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigration"+"Key')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}e"+"lse if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='coo"+"kieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='r"+"esolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='bro"+"wserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';"+"else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q="+"'mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k]"+",fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'"+"?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?'),hi=h.indexOf('#');if(qi>=0){if(hi>=0&&hi<qi)qi=hi;}else qi=hi;h=qi>=0?h.substring(0"+",qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h"+"){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h"+"))return 'd';if(s.trackExternalLinks&&h.indexOf('#')!=0&&h.indexOf('about:')!=0&&h.indexOf('javascript:')!=0&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';"+"return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=this;s.t();s.lnk=0;if(b)return this[b](e);return true');s.bcr=function(){var s=this;if(s.bct&&s.bce)s.bct.di"+"spatchEvent(s.bce);if(s.bcf){if(typeof(s.bcf)=='function')s.bcf();else if(s.bct&&s.bct.href)s.d.location=s.bct.href}s.bct=s.bce=s.bcf=0};s.bc=new Function('e','if(e&&e.s_fe)return;var s=s_c_il['+s."+"_in+'],f,tcf,t,n,nrs,a,h;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;if(!s.bbc)s.useForcedLinkTracking=0;else if(!s.useForcedLinkTracking){s.b.removeEventListener(\"click\",s.bc,true);s.bbc=s.useForc"+"edLinkTracking=0;return}else s.b.removeEventListener(\"click\",s.bc,false);s.eo=e.srcElement?e.srcElement:e.target;nrs=s.nrs;s.t();s.eo=0;if(s.nrs>nrs&&s.useForcedLinkTracking&&e.target){a=e.target"+";while(a&&a!=s.b&&a.tagName.toUpperCase()!=\"A\"&&a.tagName.toUpperCase()!=\"AREA\")a=a.parentNode;if(a){h=a.href;if(h.indexOf(\"#\")==0||h.indexOf(\"about:\")==0||h.indexOf(\"javascript:\")==0)h=0"+";t=a.target;if(e.target.dispatchEvent&&h&&(!t||t==\"_self\"||t==\"_top\"||t==\"_parent\"||(s.wd.name&&t==s.wd.name))){tcf=new Function(\"s\",\"var x;try{n=s.d.createEvent(\\\\\"MouseEvents\\\\\")}c"+"atch(x){n=new MouseEvent}return n\");n=tcf(s);if(n){tcf=new Function(\"n\",\"e\",\"var x;try{n.initMouseEvent(\\\\\"click\\\\\",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,"+"e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(x){n=0}return n\");n=tcf(n,e);if(n){n.s_fe=1;e.stopPropagation();if (e.stopImmediatePropagation) {e.stopImmediatePr"+"opagation();}e.preventDefault();s.bct=e.target;s.bce=n}}}}}');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||("+"j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!"+"='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():"+"'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;i"+"f(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",'')"+",\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o."+"s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>"+"=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);"+"return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){va"+"r s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if("+"x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+="+"(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s"+".d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s."+"apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener){if(s.n&&((s.n.userAgent.indexOf('WebKit')>=0&&s.d.createEvent)||(s.n"+".userAgent.indexOf('Firefox/2')>=0&&s.wd.MouseEvent))){s.bbc=1;s.useForcedLinkTracking=1;s.b.addEventListener('click',s.bc,true)}s.b.addEventListener('click',s.bc,false)}else s.eh(s.wd,'onload',0,s"+".wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n)"+"{if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&"+"&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i"+";s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un"+".substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,"+"a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._i"+"l;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}e"+"lse if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g"+"=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))return;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'"+"+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=f"+"unction(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m["+"t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s"+".m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h"+"?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){i"+"f(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\""+"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c',"+"'i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChi"+"ld(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.l"+"ength&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k"+"==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo,onlySet){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!onlySet&&!vo[k])vo['!'+"+"k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}el"+"se f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime"+"();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s._waitingForMarketingCloudVisitorID = false;s._doneWaitingForMarketingCloudVisitorID = false;s._marketing"+"CloudVisitorIDCallback=function(marketingCloudVisitorID) {var s=this;s.marketingCloudVisitorID = marketingCloudVisitorID;s._doneWaitingForMarketingCloudVisitorID = true;s._callbackWhenReadyToTrackC"+"heck();};s._waitingForAnalyticsVisitorID = false;s._doneWaitingForAnalyticsVisitorID = false;s._analyticsVisitorIDCallback=function(analyticsVisitorID) {var s=this;s.analyticsVisitorID = analyticsV"+"isitorID;s._doneWaitingForAnalyticsVisitorID = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerLocationHint = false;s._doneWaitingForAudienceManagerLocationHint = false;s._aud"+"ienceManagerLocationHintCallback=function(audienceManagerLocationHint) {var s=this;s.audienceManagerLocationHint = audienceManagerLocationHint;s._doneWaitingForAudienceManagerLocationHint = true;s."+"_callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerBlob = false;s._doneWaitingForAudienceManagerBlob = false;s._audienceManagerBlobCallback=function(audienceManagerBlob) {var s=this;s.a"+"udienceManagerBlob = audienceManagerBlob;s._doneWaitingForAudienceManagerBlob = true;s._callbackWhenReadyToTrackCheck();};s.isReadyToTrack=function() {var s=this,readyToTrack = true,visitor = s.vis"+"itor;if ((visitor) && (visitor.isAllowed())) {if ((!s._waitingForMarketingCloudVisitorID) && (!s.marketingCloudVisitorID) && (visitor.getMarketingCloudVisitorID)) {s.marketingCloudVisitorID = visit"+"or.getMarketingCloudVisitorID([s,s._marketingCloudVisitorIDCallback]);if (!s.marketingCloudVisitorID) {s._waitingForMarketingCloudVisitorID = true;}}if ((!s._waitingForAnalyticsVisitorID) && (!s.an"+"alyticsVisitorID) && (visitor.getAnalyticsVisitorID)) {s.analyticsVisitorID = visitor.getAnalyticsVisitorID([s,s._analyticsVisitorIDCallback]);if (!s.analyticsVisitorID) {s._waitingForAnalyticsVisi"+"torID = true;}}if ((!s._waitingForAudienceManagerLocationHint) && (!s.audienceManagerLocationHint) && (visitor.getAudienceManagerLocationHint)) {s.audienceManagerLocationHint = visitor.getAudienceM"+"anagerLocationHint([s,s._audienceManagerLocationHintCallback]);if (!s.audienceManagerLocationHint) {s._waitingForAudienceManagerLocationHint = true;}}if ((!s._waitingForAudienceManagerBlob) && (!s."+"audienceManagerBlob) && (visitor.getAudienceManagerBlob)) {s.audienceManagerBlob = visitor.getAudienceManagerBlob([s,s._audienceManagerBlobCallback]);if (!s.audienceManagerBlob) {s._waitingForAudie"+"nceManagerBlob = true;}}if (((s._waitingForMarketingCloudVisitorID)     && (!s._doneWaitingForMarketingCloudVisitorID)     && (!s.marketingCloudVisitorID)) ||((s._waitingForAnalyticsVisitorID)     "+"     && (!s._doneWaitingForAnalyticsVisitorID)          && (!s.analyticsVisitorID)) ||((s._waitingForAudienceManagerLocationHint) && (!s._doneWaitingForAudienceManagerLocationHint) && (!s.audienceM"+"anagerLocationHint)) ||((s._waitingForAudienceManagerBlob)         && (!s._doneWaitingForAudienceManagerBlob)         && (!s.audienceManagerBlob))) {readyToTrack = false;}}return readyToTrack;};s._"+"callbackWhenReadyToTrackQueue = null;s._callbackWhenReadyToTrackInterval = 0;s.callbackWhenReadyToTrack=function(callbackThis,callback,args) {var s=this,callbackInfo;callbackInfo = {};callbackInfo."+"callbackThis = callbackThis;callbackInfo.callback     = callback;callbackInfo.args         = args;if (s._callbackWhenReadyToTrackQueue == null) {s._callbackWhenReadyToTrackQueue = [];}s._callbackWh"+"enReadyToTrackQueue.push(callbackInfo);if (s._callbackWhenReadyToTrackInterval == 0) {s._callbackWhenReadyToTrackInterval = setInterval(s._callbackWhenReadyToTrackCheck,100);}};s._callbackWhenReady"+"ToTrackCheck=new Function('var s=s_c_il['+s._in+'],callbackNum,callbackInfo;if (s.isReadyToTrack()) {if (s._callbackWhenReadyToTrackInterval) {clearInterval(s._callbackWhenReadyToTrackInterval);s._"+"callbackWhenReadyToTrackInterval = 0;}if (s._callbackWhenReadyToTrackQueue != null) {while (s._callbackWhenReadyToTrackQueue.length > 0) {callbackInfo = s._callbackWhenReadyToTrackQueue.shift();cal"+"lbackInfo.callback.apply(callbackInfo.callbackThis,callbackInfo.args);}}}');s._handleNotReadyToTrack=function(variableOverrides) {var s=this,args,varKey,variableOverridesCopy = null,setVariables = "+"null;if (!s.isReadyToTrack()) {args = [];if (variableOverrides != null) {variableOverridesCopy = {};for (varKey in variableOverrides) {variableOverridesCopy[varKey] = variableOverrides[varKey];}}se"+"tVariables = {};s.vob(setVariables,true);args.push(variableOverridesCopy);args.push(setVariables);s.callbackWhenReadyToTrack(s,s.track,args);return true;}return false;};s.gfid=function(){var s=this"+",d='0123456789ABCDEF',k='s_fid',fid=s.c_r(k),h='',l='',i,j,m=8,n=4,e=new Date,y;if(!fid||fid.indexOf('-')<0){for(i=0;i<16;i++){j=Math.floor(Math.random()*m);h+=d.substring(j,j+1);j=Math.floor(Math."+"random()*n);l+=d.substring(j,j+1);m=n=16}fid=h+'-'+l;}y=e.getYear();e.setYear(y+2+(y<1900?1900:0));if(!s.c_w(k,fid,e))fid=0;return fid};s.track=s.t=function(vo,setVariables){var s=this,notReadyToTr"+"ack,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+"+"'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;if ((!s.supplement"+"alDataID) && (s.visitor) && (s.visitor.getSupplementalDataID)) {s.supplementalDataID = s.visitor.getSupplementalDataID(\"AppMeasurement:\" + s._in,(s.expectSupplementalData ? false : true));}if(s.m"+"pc('t',arguments))return;s.gl(s.vl_g);s.uns();s.m_ll();notReadyToTrack = s._handleNotReadyToTrack(vo);if (!notReadyToTrack) {if (setVariables) {s.voa(setVariables);}if(!s.td){var tl=tfs.location,a,"+"o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.isma"+"c&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next){j"+"='1.7';if(a.reduce){j='1.8';if(j.trim){j='1.8.1';if(Date.parse){j='1.8.2';if(Object.create)j='1.8.5'}}}}}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.ja"+"vaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>="+"5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\""+"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)"+"while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s."+"browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}if(!s.analyticsVisitorID&&!s.marketingCloudVisitorID)s.fid=s.gfid();if((vo&&vo._t)||!s.m_m('d')){if("+"s.usePlugins)s.doPlugins(s);if(!s.abort){var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');"+"if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot"+"(o);n=s.oid(o);x=o.s_oidt}}if(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>=0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);"+"i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');"+"s.pev2=(l?s.ape(l):'')}else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(o.dataset&&o.dataset.sObjectId){s.wd.s_objectID=o.dataset.sObjectId;}else if(o.getAttrib"+"ute&&o.getAttribute('data-s-object-id')){s.wd.s_objectID=o.getAttribute('data-s-object-id');}else if(s.useForcedLinkTracking){s.wd.s_objectID='';oc=o.onclick?''+o.onclick:'';if(oc){var ocb=oc.index"+"Of('s_objectID'),oce,ocq,ocx;if(ocb>=0){ocb+=10;while(ocb<oc.length&&(\"= \\t\\r\\n\").indexOf(oc.charAt(ocb))>=0)ocb++;if(ocb<oc.length){oce=ocb;ocq=ocx=0;while(oce<oc.length&&(oc.charAt(oce)!=';'"+"||ocq)){if(ocq){if(oc.charAt(oce)==ocq&&!ocx)ocq=0;else if(oc.charAt(oce)==\"\\\\\")ocx=!ocx;else ocx=0;}else{ocq=oc.charAt(oce);if(ocq!='\"'&&ocq!=\"'\")ocq=0}oce++;}oc=oc.substring(ocb,oce);if(oc"+"){o.s_soid=new Function('s','var e;try{s.wd.s_objectID='+oc+'}catch(e){}');o.s_soid(s)}}}}}if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')"+"+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?q"+"s:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs)}}}else s.dl(vo);if(vo)s.voa(vb,1);}s.abort=0;s.pageURLRest=s."+"lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo,f){"+"var s=this;s.lnk=o;s.linkType=t;s.linkName=n;if(f){s.bct=o;s.bcf=f}s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s."+"setTagContainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.length;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t."+"lmq[i];y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x.u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!="+"'function'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f"+"].apply(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElements"+"ByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.in"+"dexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.ap"+"v=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);"+"s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='suppleme"+"ntalDataID,timestamp,dynamicVariablePrefix,visitorID,marketingCloudVisitorID,analyticsVisitorID,audienceManagerLocationHint,fid,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServer"+"Secure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,"+"deleteLightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,"+"lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,audienceManagerBlob,linkName,linkType';var n;for(n=1;n"+"<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resol"+"ution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,pageURLRest,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackin"+"gServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMa"+"tch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTra"+"ckVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){return o};s.wd.s_gs=function("+"un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",w=window,l=w.s_c_il,n=navigator,u=n.userAgent,v=n.appVersion,e=v.indexOf('MSIE '),m=u.indexOf('https://www.apple.com/jobs/us/Netscape6/'),a,i,j,x,s;if(un){un=un.toLowerCase();if(l)for(j=0;j<2;j++)for(i=0;i<l.length;i++){s=l[i];x=s._c;if((!x||x=='s_c'||(j>0&&x=='s_l'))&&(s.oun==un||(s.fs&&s.sa&&s.fs(s.oun,un)))){if(s.sa)s.sa(un);if(x=='s_c')return s}else s=0}}w.s_an='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';w.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.subst"+"ring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a");w.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x");w.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)");w.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d"+"=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn("+"x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x");w.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");w.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':"+"a");w.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){i"+"f(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")"+"'+c.substring(e+1);s=c.indexOf('=function(')}return c;");c=s_d(c);if(e>0){a=parseInt(i=v.substring(e+5));if(a>3)a=parseFloat(i)}else if(m>0)a=parseFloat(u.substring(m+10));else a=parseFloat(v);if(a<5||v.indexOf('Opera')>=0||u.indexOf('Opera')>=0)c=s_ft(c);if(!s){s=new Object;if(!w.s_c_in){w.s_c_il=new Array;w.s_c_in=0}s._il=w.s_c_il;s._in=w.s_c_in;s._il[s._in]=s;w.s_c_in++}s._c='s_c';(new Function("s","un","pg","ss",c))(s,un,pg,ss);return s}
function s_giqf(){var w=window,q=w.s_giq,i,t,s;if(q)for(i=0;i<q.length;i++){t=q[i];s=s_gi(t.oun);s.sa(t.un);s.setTagContainer(t.tagContainerName)}w.s_giq=0}s_giqf();module.exports=s_gi}())},{}],713:[function(require,module,exports){var sCode=require('./ac-s-code/sCode');module.exports={init:sCode.init,getInstance:sCode.getInstance}},{"./ac-s-code/sCode":726}],714:[function(require,module,exports){(function(){'use strict';function sCodeAccount(bucket){var s_account='';if(typeof bucket==='string'){s_account=bucket}
if(document.location.search&&s_account){var dls=document.location.search;if(dls.indexOf('?cid=AOS-')>-1||dls.indexOf('&cid=AOS-')>-1){s_account+=',applestoreWW'}}
return s_account}
module.exports=sCodeAccount})()},{}],715:[function(require,module,exports){(function(){'use strict';var sCodePlugins=require('../plugin/sCodePlugins');var sCodeServers=require('./server');var browserHelper=require('./helper/browser');var dynamicObjectIdHandlerSafari=require('./../plugin/helper/dynamicObjectIdHandlerSafari');function setDefaults(sCode,options){function resetCookie(cookieName,expires){var date=new Date();var defaultExpirationDate=new Date(date.setFullYear(date.getFullYear()+2));var expirationDate=expires||defaultExpirationDate;var cookieValue=sCode.c_r(cookieName);if(cookieValue){try{sCode.c_w(cookieName,cookieValue,expirationDate)}catch(e){}}}
function resetVisitorIDCookie(cookieName){var date=new Date();var defaultExpirationDate=new Date(date.setFullYear(date.getFullYear()+2));var cookieValue=sCode.c_r(cookieName);if(cookieValue){document.cookie=cookieName+"="+cookieValue+"; expires="+defaultExpirationDate.toUTCString()+"; domain=apple.com; path=/"}}
if(typeof sCode.acAnalytics!=='object'){sCode.acAnalytics={}}
sCode.acAnalytics.dynamicObjectIdHandlerSafari=dynamicObjectIdHandlerSafari;sCode.pageName=(options.pageName||'');sCode.currencyCode='USD';sCode.trackDownloadLinks=!0;sCode.trackExternalLinks=!0;sCode.trackInlineStats=!0;sCode.useForcedLinkTracking=!0;sCode.forcedLinkTrackingTimeout=100;sCode.linkDownloadFileTypes='zip,wav,mp3,doc,pdf,xls,dmg,sit,pkg,exe,m4a,rss,xml,extz,safariextz';sCode.linkInternalFilters='javascript:,apple.com'+((options.linkInternalFilters)?'/'+options.linkInternalFilters:'');sCode.linkLeaveQueryString=!1;sCode.linkTrackVars='campaign';sCode.linkTrackEvents='None';sCode._isSafari=browserHelper.isSafari(s);if(browserHelper.isSafariTopSitesPreview(s)===!0){sCode.t=function(){return''}}
resetCookie('s_vnum_n2_us');resetVisitorIDCookie('s_vi');var tmpDate=new Date();tmpDate.setDate(tmpDate.getDate()-1);resetCookie('s_pv',tmpDate);function s_getObjectID(o){var ID=o.href;return ID}
sCode.getObjectID=s_getObjectID;if(typeof(iTunesDetected)==='function'){var activeX=document.createElement('object');activeX.setAttribute('width',1);activeX.setAttribute('height',1);activeX.id='iTunesDetectorIE';activeX.setAttribute('classid','clsid:D719897A-B07A-4C0C-AEA9-9B663A28DFCB');document.getElementsByTagName('head')[0].appendChild(activeX);sCode.prop12=iTunesDetected()?'itunes':'no itunes'}
sCode.eVar54=document.location.href;sCode.eVar49=document.referrer;sCode.usePlugins=!0;sCode.doPlugins=sCodePlugins;sCode.trackingServer=sCodeServers.getTrackingServer();sCode.trackingServerSecure=sCodeServers.getSecureTrackingServer();sCode.dc=sCodeServers.getDataCenterId()}
module.exports=setDefaults})()},{"../plugin/sCodePlugins":725,"./../plugin/helper/dynamicObjectIdHandlerSafari":719,"./helper/browser":716,"./server":717}],716:[function(require,module,exports){(function(){'use strict';function isSafariTopSitesPreview(){if(navigator&&navigator.loadPurpose&&navigator.loadPurpose==='preview'){return!0}
return!1}
function isSafari(sCode){if(sCode.u.toLowerCase().indexOf('webkit')>-1){if(sCode.u.toLowerCase().indexOf('safari')>-1&&sCode.u.toLowerCase().indexOf('chrome')<0){return!0}}
return!1}
module.exports={isSafariTopSitesPreview:isSafariTopSitesPreview,isSafari:isSafari}})()},{}],717:[function(require,module,exports){(function(){'use strict';var production=['www.apple.com','images.apple.com','movies.apple.com','ssl.apple.com'];function getTrackingServer(){return(_isProduction())?'metrics.apple.com':location.hostname}
function getSecureTrackingServer(){return(_isProduction())?'securemetrics.apple.com':location.hostname}
function getDataCenterId(){return 112}
function _isProduction(){var hostname=window.location.host;if(production.indexOf(hostname)>-1){return!0}
return!1}
module.exports={getTrackingServer:getTrackingServer,getSecureTrackingServer:getSecureTrackingServer,getDataCenterId:getDataCenterId}})()},{}],718:[function(require,module,exports){(function(){'use strict';function cleanPageName(sCode){if(sCode.pageName){var pgEscaped=escape(sCode.pageName);pgEscaped=pgEscaped.replace(/(%u2018|%u2019|%u02BC|%u02BD)/g,'%27');pgEscaped=pgEscaped.replace(/(%u201C|%u201D|%E2%80%9C|%E2%80%9D)/g,'%22');pgEscaped=pgEscaped.replace(/(%09|%0A|%0D)/g,'');sCode.pageName=unescape(pgEscaped)}}
module.exports=cleanPageName}())},{}],719:[function(require,module,exports){(function(){'use strict';function dynamicObjectIdHandlerSafari(sCode,link){if(sCode.lt(link.href)){link.addEventListener('mouseup',function(evt){if(((evt.which)&&(evt.which===1))||((evt.button)&&(evt.button===1))){var linkHref=evt.currentTarget.href;var linkType=sCode.lt(linkHref);if(linkType==='d'){if(linkHref.match(/\.rss|\.xml/)){sCode.eVar16=sCode.prop16='sign ups'}else{sCode.eVar11=((sCode.pageName&&sCode.pageName!=='')?sCode.pageName:'')+' - '+linkHref.substring(linkHref.lastIndexOf('https://www.apple.com/')+1,linkHref.length);sCode.eVar11=sCode.eVar11.toLowerCase();sCode.eVar16=sCode.prop16='Downloads';sCode.events=sCode.apl(sCode.events,'event5','','',1)}
sCode.linkTrackVars='prop16,eVar16,eVar11,events';sCode.linkTrackEvents='event5'}
sCode.linkTrackVars='None';sCode.linkTrackEvents='None'}},!1)}}
module.exports=dynamicObjectIdHandlerSafari}())},{}],720:[function(require,module,exports){(function(){'use strict';function getVisitNumPerChannel(sCode){var e=new Date();var cl;var cs;var vn=0;var iv=!1;var lm=!1;var ch='no channel';var ct=e.getTime();var xs=ct+30*60*1000;var xl=ct+730*24*60*60*1000;var pn=sCode.wd.location.pathname;var geoCode='us';var channelMap='';var i;var channelTable=new Array('no channel','aos','homepage','support','itunes','myappleid.iforgot','trailers','ip','discussions','myappleid','quicktime','ipad','ipadmini','legal','mac','macosx','safari','ipod','developer','retailstore','macbookair','retail.concierge','macosx.downloads','ipodtouch','ios','macbookpro','webapps','search','retail.onetoone','icloud','imac','macmini','ilife','other','findouthow','jobs','mobileme','whymac','macappstore','hotnews','redirects','ipodnano','education','iwork','ipodclassic','macpro','contact','appletv','finalcutstudio','pr','productpromotions','ipodshuffle','airportexpress','environment','aperture','batteries','mac.facetime','productpromotions.rebate','timecapsule','displays','airportextreme','logicstudio','buy','about','accessibility','mightymouse','thunderbolt','html5','remotedesktop','magictrackpad','keyboard','business','retail.jointventure','itunesappstore','pro','science','logicexpress','channelprograms','startpage','advertising','financialservices','giftcards','xsan','server','battery','companystore','ali','supplier','beatles','usergroups','webbadges','procurement','802.11n','retail','itunesnews','ibooks-author','osx','apple-events','applewatch');if(sCode.wd.location.hostname.match(/apple.com.cn/)){geoCode='cn'}else if(!pn.match(/^\/(ws|pr|g5|go|ta|wm|kb)\//)){if(pn.match(/^\/(\w{2}|befr|benl|chfr|chde|asia|lae)(?=\/)/)){geoCode=pn.split('https://www.apple.com/')[1].toLowerCase()}}
var c='s_vnum_n2_'+geoCode;var c2='s_invisit_n2_'+geoCode;if(sCode.channel){ch=sCode.channel.substring(sCode.channel.indexOf('.')+1,sCode.channel.length);ch=ch.substring(ch.indexOf('.')+1,ch.length)}
function chLookup(channel){for(i=0;i<=channelTable.length;i++){if(channel===channelTable[i]){return i+1}}}
channelMap=chLookup(ch);if(!channelMap){channelMap='0'}
sCode.c_w('s_vnum_'+geoCode,'',63072000);sCode.c_w('s_invisit_'+geoCode,'',63072000);sCode.c_w('s_invisit_n_'+geoCode,'',63072000);sCode.c_w('s_vnum_n_'+geoCode,'',63072000);cl=sCode.c_r(c);cs=sCode.c_r(c2);if(channelMap){var val;if(cs){var csa=cs.split(/,/);for(i=0;(val=csa[i]);i++){if(channelMap.toString()===val){iv=!0;break}}}
if(!iv){var cla=(cl)?cl.split(/,/):[];var vs;for(i=0;(val=cla[i]);i++){vs=val.split(/\|/);if(channelMap.toString()===vs[0]){vn=parseInt(vs[1],10)+1;cla[i]=vs[0]+'|'+vn;lm=!0;break}}
e.setTime(xs);sCode.c_w(c2,(cs?(cs+','+channelMap):channelMap),e);e.setTime(xl);if(lm){sCode.c_w(c,cla.toString(),e);return ch+'='+vn}else{if(cla.toString()){cla.push(channelMap+'|'+1)}else{cla=(channelMap+'|'+1)}
sCode.c_w(c,cla.toString(),e);return ch+'='+1}}}}
module.exports=getVisitNumPerChannel}())},{}],721:[function(require,module,exports){(function(){'use strict';function osDetect(sCode){var match;if(sCode.u.match(/windows/i)){sCode.prop9="windows";return}
if(sCode.u.match(/(kindle|silk-accelerated)/i)){if(sCode.u.match(/(kindle fire|silk-accelerated)/i)){sCode.prop9="kindle fire"}else{sCode.prop9="kindle"}
return}
if(sCode.u.match(/(iphone|ipod|ipad)/i)){match=sCode.u.match(/OS [0-9_]+/i);sCode.prop9='i'+match[0].replace(/_/g,'.');return}
if(sCode.u.match(/android/i)){sCode.prop9=sCode.u.match(/android [0-9]\.?[0-9]?\.?[0-9]?/i);return}
if(sCode.u.match(/webos\/[0-9\.]+/i)){match=sCode.u.match(/webos\/[0-9]\.?[0-9]?\.?[0-9]?/i);sCode.prop9=match[0].replace(/webos\//i,'web os ');return}
if(sCode.u.match(/rim tablet os [0-9\.]+/i)){match=sCode.u.match(/rim tablet os [0-9]\.?[0-9]?\.?[0-9]?/i);sCode.prop9=match[0].replace(/rim tablet os/i,'rim os ');return}
if((sCode.u.match(/firefox\/(\d{2}||[3-9])/i)||sCode.u.match(/AppleWebKit\//))&&sCode.u.match(/Mac OS X [0-9_\.]+/)){var matches=sCode.u.match(/[0-9_\.]+/g);matches=matches[1].split(/_|\./);sCode.prop9=matches[0]+"."+matches[1]+".x";return}
var mv=sCode.u.match(/AppleWebKit\/\d*/i)&&sCode.u.match(/AppleWebKit\/\d*/i).toString().replace(/AppleWebKit\//i,'');if(mv>522){sCode.prop9="10.5.x"}else if(mv>400){sCode.prop9="10.4.x"}else if(mv>99){sCode.prop9="10.3.x"}else if(mv>80){sCode.prop9="10.2.x"}else{sCode.prop9="mac unknown or non-safari"}}
module.exports=osDetect}())},{}],722:[function(require,module,exports){(function(){'use strict';function percentPageViewed(sCode){if(!sCode.prop17){var percent=sCode.getPercentPageViewed(sCode.pageName);if(percent&&percent.length>=5&&typeof(percent[1])!=='undefined'){sCode.prop14=percent[0];sCode.prop17=percent[1]+':'+percent[2];sCode.prop28=Math.round(percent[3]/10)*10;sCode.eVar17=sCode.eVar18='';if(percent[4]){var sva=percent[4].split(/\|/g);var sv='';var svaSize=sva.length;for(var i=0;i<svaSize;i++){if(i!==(svaSize-1)){var diff=sva[i+1].split(/:/)[0]-sva[i].split(/:/)[0];if(diff>100){sv+=sva[i].split(/:/)[1];var nz=diff/100;while(nz>1){sv+='0';nz--}}else{sv+=sva[i].split(/:/)[1]}}else{sv+=sva[i].split(/:/)[1]}}
if(sv.length>254){sCode.eVar17=sv.substring(0,254);sCode.eVar18=sv.substring(255,sv.length)}else{sCode.eVar17=sv}}
if(!sCode.tcall){sCode.linkTrackVars='prop17,prop28'}}}}
module.exports=percentPageViewed}())},{}],723:[function(require,module,exports){(function(){'use strict';function plpChannel(sCode){if(((sCode.pageName&&sCode.prop14&&sCode.pageName.toLowerCase()!==sCode.prop14.toLowerCase())||!sCode.prop14)&&sCode.tcall){var ch;var pathLengthValue;var cookieValue=sCode.c_r('s_pathLength');var pathLengthArray=(cookieValue.indexOf(',')>-1)?cookieValue.split(','):[];var e=new Date();var ct=e.getTime();e.setTime(ct+30*60*1000);if(sCode.channel){ch=sCode.channel.substring(sCode.channel.indexOf('.')+1,sCode.channel.length);ch=ch.substring(ch.indexOf('.')+1,ch.length)}else{ch='no channel'}
if(pathLengthArray.length!==0&&pathLengthArray.toString().indexOf(ch+'=')>-1){var pathLengthArraySize=pathLengthArray.length;for(var i=0;i<pathLengthArraySize;i++){if(pathLengthArray[i].toString().indexOf(ch+'=')>-1){pathLengthValue=pathLengthArray[i].split('=');++pathLengthValue[1];pathLengthArray[i]=pathLengthValue[0]+'='+pathLengthValue[1];sCode.prop48=pathLengthValue[1]}}
sCode.c_w('s_pathLength',pathLengthArray,e)}else{pathLengthValue=cookieValue+ch+'='+1+',';sCode.c_w('s_pathLength',pathLengthValue,e);sCode.prop48='1'}}}
module.exports=plpChannel}())},{}],724:[function(require,module,exports){(function(){'use strict';function setMembership(sCode){if(sCode.tcall){var membership;var pathname=window.location.pathname;var newMembership=!1;var noMatch=!0;if(sCode.c_r('iTunesPresent')||(sCode.prop12&&sCode.prop12==='iTunes')){membership=(membership)?membership+'it,':'it,'}
if(sCode.c_r('hasMobileMe')){membership=(membership)?membership+'mm,':'mm,'}
if(sCode.c_r('DefaultAppleID')||(sCode.pageName&&sCode.pageName.match(/iforgot - cr or email option/))){membership=membership?membership+'aid,':'aid,'}
if(sCode.c_r('trackStartpage')){membership=membership?membership+'sp,':'sp,'}
if(sCode.prop11){if(sCode.prop11.match('3p')){membership=membership?membership+'3p,':'3p,'}}
if(sCode.pageName){if(sCode.pageName.match(/one to one - index/)){membership=membership?membership+'o2o,':'o2o,'}}
if(pathname.match('https://www.apple.com/welcomescreen/')){var portion;if(portion===pathname.match('ilife.*')){portion='il'+portion.toString().match('[0-9]+')+',';membership=membership?membership+portion:portion}else if(portion===pathname.match('iwork.*')){portion='iwk'+portion.toString().match('[0-9]+')+',';membership=membership?membership+portion:portion}else if(portion===pathname.match('itunes.*')){portion='it'+portion.toString().match('[0-9]+')+',';membership=membership?membership+portion:portion}else if(portion===pathname.match('aperture.*')){portion='ap'+portion.toString().match('[0-9]+')+',';membership=membership?membership+portion:portion}}
if(sCode.getQueryParam('sr')&&sCode.getQueryParam('vr')){var ver=sCode.getQueryParam('vr');ver=ver.substring(0,ver.indexOf('-'))+',';membership=(membership)?membership+ver:ver}
if(typeof(membership)!=='undefined'){var e;var ct;membership=membership.substring(0,membership.length-1).toLowerCase();membership=membership.split(',');if(sCode.c_r('s_membership')){var membershipCookie=sCode.c_r('s_membership').split(/:/);membershipCookie.splice(0,1);for(var i=0;i<membership.length;i++){for(var j=0;j<membershipCookie.length;j++){if(membershipCookie[j]===membership[i]){noMatch=!1}}
if(noMatch){membershipCookie[membershipCookie.length]=membership[i];newMembership=!0}
noMatch=!0}
if(newMembership){e=new Date();membership=membershipCookie.length+':'+membershipCookie.toString().replace(/,/g,':');ct=e.getTime();e.setTime(ct+63072000);sCode.c_w('s_membership',membership,e);sCode.prop31=membership}}else{membership=membership.length+':'+membership.toString().replace(/,/g,':');e=new Date();ct=e.getTime();e.setTime(ct+63072000);sCode.c_w('s_membership',membership,e);sCode.prop31=membership}}
if(!sCode.prop31&&!sCode.c_r('s_pathLength')){sCode.prop31=sCode.c_r('s_membership')}}}
module.exports=setMembership}())},{}],725:[function(require,module,exports){(function(){'use strict';var plpChannel=require('./helper/plpChannel');var cleanPageName=require('./helper/cleanPageName');var osDetect=require('./helper/osDetect');var percentPageViewed=require('./helper/percentPageViewed');var setMembership=require('./helper/setMembership');var getVisitNumPerChannel=require('./helper/getVisitNumPerChannel');function sCodePlugins(sCode){sCode.tcall=(typeof(sCode.linkType)==='undefined')?!0:!1;if(typeof(cleanPageName)==='function'){cleanPageName(sCode)}
var dynamicObjectPathExp='/(apple.com\/retail\/.+\/map\/|apple.com\/buy\/locator\/|discussions.apple.com|discussionsjapan.apple.com)/g';if(!sCode.d.URL.match(dynamicObjectPathExp)){sCode.setupDynamicObjectIDs()}
if(navigator&&navigator.platform){if(window.devicePixelRatio>=1.5){sCode.prop5=navigator.platform+' 2x'}else{sCode.prop5=navigator.platform}}
var tempVar1=sCode.getQueryParam('ref');if(tempVar1&&sCode.tcall){sCode.referrer=tempVar1}else if(tempVar1&&!sCode.tcall){sCode.referrer=''}
if(!sCode.campaign){sCode.campaign=sCode.getQueryParam('cid');sCode.setClickMapEmail('Email_PageName,Email_OID','Email_OT');if(sCode.campaign.match(/OAS-.+?-DOMAINS-/i)){var tempVar0='http://'+sCode.campaign.replace(/OAS-.+?-DOMAINS-/i,'');sCode.referrer=(sCode.tcall)?tempVar0:''}}
sCode.server=sCode.getQueryParam('alias');if(!sCode.server){sCode.server='new approach ac-analytics'}
sCode.campaign=sCode.getValOnce(sCode.campaign,'s_campaign',0);sCode.prop6=(!sCode.prop6&&sCode.getQueryParam('cp')&&sCode.pageName)?('D="'+sCode.getQueryParam('cp').toLowerCase()+': '+sCode.pageName+'"'):sCode.prop6;sCode.prop11=sCode.getQueryParam('sr');if(!sCode.d.URL.match(/\/channel\//)&&!sCode.prop11&&sCode.c_r("s_3p")){sCode.prop11=sCode.c_r('s_3p');sCode.c_w('s_3p','',-1)}
sCode.eVar7=(!sCode.eVar7)?sCode.getQueryParam('aid'):'';sCode.eVar7=sCode.getValOnce(sCode.eVar7,'s_var_7',0);if(sCode.eVar2){sCode.events=sCode.apl(sCode.events,'event6',', ',1)}
if((!sCode.d.URL.match(/apple.com\/(\w{2}|befr|benl|chfr|chde|asia|lae)\/search\//)&&!sCode.d.URL.match(/apple.com\/search\//))&&(sCode.d.referrer.match(/apple.com\/(\w{2}|befr|benl|chfr|chde|asia|lae)\/search\//)||sCode.d.referrer.match(/apple.com\/search\//))){sCode.eVar2=(sCode.d.referrer.match(/\/support\//))?"acs: ":((sCode.d.referrer.match(/\/store\//)?"aos: ":"www: "));if(sCode.d.referrer.match(/apple.com\/(\w{2}|befr|benl|chfr|chde|asia|lae)\/search/)){sCode.eVar2+=sCode.getQueryParam('q','',sCode.d.referrer).replace(/\+/g,' ');var geo=sCode.d.referrer.match(/\/(\w{2}|befr|benl|chfr|chde|asia|lae)\//i);sCode.eVar2+=" ("+geo[0].replace(/\//g,'')+")"}else{sCode.eVar2+=sCode.getQueryParam('q','',sCode.d.referrer).replace(/\+/g,' ')+" (us)"}}
if(sCode.prop11==='em'&&sCode.tcall){sCode.referrer='imap://chatterbox.com'}
if(sCode.prop11==='app'&&sCode.tcall){sCode.referrer='file://fromApp'}
if(document.referrer&&document.referrer.indexOf('https://www.apple.com/jobs/us/apple.com/startpage/')>-1&&sCode.tcall){sCode.referrer='news://startpage.com';sCode._1_referrer=1}
if(typeof(percentPageViewed)==='function'){percentPageViewed(sCode)}
sCode.prop38=(sCode.tcall)?sCode.deviceOrientationChanges(!0):'';sCode.prop32=sCode.eVar32=sCode.getQueryParam('psid');if(sCode.prop32||sCode.c_r('s_sid')){var e=new Date();var ct=e.getTime();e.setTime(ct+630720000);if(sCode.prop32){sCode.c_w('s_psid',sCode.prop32,e)}else{sCode.c_w('s_psid',sCode.c_r('s_sid'),e)}
sCode.c_w('s_sid','',-1)}
if(!sCode.prop32&&!sCode.c_r('s_pathLength')){sCode.prop32=sCode.c_r('s_psid')}
sCode.linkLeaveQueryString=!0;var pageURL=sCode.downloadLinkHandler();if(pageURL){if(pageURL.match(/\.rss|\.xml/)){sCode.eVar16=sCode.prop16='sign ups'}else{sCode.eVar11=((sCode.pageName&&sCode.pageName!=='')?sCode.pageName:'')+' - '+pageURL.substring(pageURL.lastIndexOf('https://www.apple.com/')+1,pageURL.length);sCode.eVar16=sCode.prop16='downloads';sCode.events=sCode.apl(sCode.events,'event5',', ',1)}
sCode.linkTrackVars='prop16,eVar16,eVar11,events';sCode.linkTrackEvents='event5'}
sCode.linkLeaveQueryString=!1;if(typeof(osDetect)==='function'){osDetect(sCode)}
if(sCode.pageName&&sCode.pageName.match(/feedback - thank you/)){sCode.prop16=sCode.eVar16="feedback"}
sCode.linkLeaveQueryString=!0;var exitUrl=sCode.linkHandler('itms.apple.com|itunes.apple.com','e');var url=sCode.linkHandler('ax.itunes.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/|rss.support.apple.com','o');if(url){sCode.eVar16=sCode.prop16='sign ups';sCode.linkTrackVars='eVar16,prop16'}
sCode.linkLeaveQueryString=!1;if(typeof(setMembership)==='function'){setMembership(sCode)}
if(typeof plpChannel==='function'){plpChannel(sCode)}
if(sCode.tcall){sCode.prop50=getVisitNumPerChannel(s)}
sCode.hier1=(sCode.channel)?sCode.channel:'';sCode.linkTrackVars=sCode.apl(sCode.linkTrackVars,'hier1',', ',1);sCode.linkTrackVars=sCode.linkTrackVars.replace(new RegExp(' ','g'),'');function getCleanVisitorId(){var visitorId=(sCode&&sCode.c_r)?sCode.c_r('s_vi'):'';var match=(visitorId)?visitorId.match(/^\s*\[CS\]v1\|(.+)\[CE\]\s*$/):null;if(match){return match[1]}}
sCode.prop49='D='+(getCleanVisitorId()||'s_vi');var eVar10=sCode.getQueryParam("afid");if(eVar10){sCode.eVar10=sCode.getValOnce(eVar10,"s_afc")}
sCode.prop4=(sCode.prop4)?sCode.prop4:'D=g';var retailCookie=sCode.c_r("rtsid")||sCode.c_r("rtsidInt")||null;if(retailCookie){if(!sCode.events){sCode.events="event37"}else{if(typeof sCode.events==="string"&&sCode.events.indexOf("event37")===-1){sCode.events+=",event37"}}}
sCode.manageVars('lowercaseVars','purchaseID,pageType,events,products,transactionID',2)}
module.exports=sCodePlugins})()},{"./helper/cleanPageName":718,"./helper/getVisitNumPerChannel":720,"./helper/osDetect":721,"./helper/percentPageViewed":722,"./helper/plpChannel":723,"./helper/setMembership":724}],726:[function(require,module,exports){(function(){'use strict';var ac_Object=require('@marcom/ac-object');var sCode=require('@marcom/s-code');var sCodeAccount=require('./config/account');var setDefaults=require('./config/defaults');var sCodeInstance;var initDefaults={force:!1};function init(options){options=ac_Object.defaults(initDefaults,options||{});if(!sCodeInstance||options.force===!0){var bucket=(options.bucket||'');sCodeInstance=window.s=sCode.init(sCodeAccount(bucket));var plugins=sCode.plugins.init(sCodeInstance);setDefaults(sCodeInstance,options)}
return sCodeInstance}
function getInstance(){return sCodeInstance}
module.exports={init:init,getInstance:getInstance}}())},{"./config/account":714,"./config/defaults":715,"@marcom/ac-object":688,"@marcom/s-code":698}],727:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"&&exports){module.exports=factory}else if(typeof define==="function"&&define.amd){define(factory)}else{root.Deferred=factory}}(this,(function(){'use strict';var exports={};var statuses,each,CallbackContainer,funcOrEmpty,Deferred,Promise,promiseProto,passThrough;statuses={0:'pending',1:'resolved',2:'rejected'};each=function(type,data){var i,pending,length,callbackObj,callbackResult;if(this._status!==0){if(console&&console.warn){console.warn('Trying to fulfill more than once.')}
return!1}
this.data=data;pending=this.pending;length=pending.length;for(i=0;i<length;i++){callbackObj=pending[i];if(callbackObj[type]){callbackResult=callbackObj[type](data)}
if(typeof callbackResult==='object'&&callbackResult.hasOwnProperty('then')&&callbackResult.hasOwnProperty('status')){callbackResult.then(function(data){callbackObj.deferred.resolve(data)},function(data){callbackObj.deferred.reject(data)},function(data){callbackObj.deferred.progress(data)})}
else{callbackObj.deferred[type](callbackResult||undefined)}}
if(type!=='progress'){pending=[]}
return!0};Promise=function(then,status){this.then=then;this.status=status};promiseProto=Promise.prototype;passThrough=function(value){return value};promiseProto.success=function(callback,context){return this.then(callback.bind(context),passThrough,passThrough)};promiseProto.fail=function(callback,context){return this.then(passThrough,callback.bind(context),passThrough)};promiseProto.progress=function(callback,context){return this.then(passThrough,passThrough,callback.bind(context))};funcOrEmpty=function(func){if(typeof func!=='function'){return function(){}}
return func};CallbackContainer=function(success,error,progress){this.resolve=funcOrEmpty(success);this.reject=funcOrEmpty(error);this.progress=funcOrEmpty(progress);this.deferred=new Deferred()};Deferred=function(){this.pending=[];this._status=0;this._promise=new Promise(this.then.bind(this),this.status.bind(this))};Deferred.prototype={status:function(){return statuses[this._status]},promise:function(){return this._promise},progress:function(update){each.call(this,'progress',update);return this._promise},resolve:function(value){each.call(this,'resolve',value);if(this._status===0){this._status=1}
return this._promise},reject:function(error){each.call(this,'reject',error);if(this._status===0){this._status=2}
return this._promise},then:function(success,error,progress){var result,callbackObject;callbackObject=new CallbackContainer(success,error,progress);if(this._status===0){this.pending.push(callbackObject)}
else if(this._status===1&&typeof success==='function'){result=success(this.data);if(typeof result==='object'&&result.hasOwnProperty('then')&&result.hasOwnProperty('status')){result.then(function(data){callbackObject.deferred.resolve(data)},function(data){callbackObject.deferred.reject(data)},function(data){callbackObject.deferred.progress(data)})}
else{callbackObject.deferred.resolve(result)}}
else if(this._status===2&&typeof error==='function'){result=error(this.data);callbackObject.deferred.reject(result)}
return callbackObject.deferred.promise()}};var when=function(){var values,deferred,pending,success,fail;values=[].slice.call(arguments);deferred=new Deferred();pending=0;success=function(value){pending--;var i=values.indexOf(this);values[i]=value;if(pending===0){deferred.resolve(values)}};fail=function(error){deferred.reject(error)};values.forEach(function(value){if(value.then){pending++}});values.forEach(function(value){if(value.then){value.then(success.bind(value),fail)}});return deferred.promise()};Deferred.when=when;exports.Deferred=Deferred;return exports}())))},{}],728:[function(require,module,exports){"use strict";function Deferred(){}
Deferred.prototype={'resolve':function resolve(){this._defer.resolve.apply(this._defer,Array.prototype.slice.call(arguments));return this.promise()},'reject':function reject(){this._defer.reject.apply(this._defer,Array.prototype.slice.call(arguments));return this.promise()},'progress':function progress(){var message='ac-defer.progress is deprecated since it is not part of the A+ spec. Recommend using ac-event-emitter for progress signaling';console.warn(message);this._defer.progress.apply(this._defer,Array.prototype.slice.call(arguments));return this.promise()},'then':function then(){this._defer.then.apply(this._defer,Array.prototype.slice.call(arguments));return this.promise()},'promise':function promise(){return this._defer.promise.apply(this._defer,Array.prototype.slice.call(arguments))}};module.exports=Deferred},{}],729:[function(require,module,exports){'use strict';var proto=new(require('./ac-deferred/Deferred'))(),SmartsignDeferred=require('smartsign-deferred').Deferred;function Deferred(){this._defer=new SmartsignDeferred()}
Deferred.prototype=proto;module.exports.join=function join(){return SmartsignDeferred.when.apply(null,[].slice.call(arguments))};module.exports.all=function all(arrayOfPromises){return SmartsignDeferred.when.apply(null,arrayOfPromises)};module.exports.Deferred=Deferred},{"./ac-deferred/Deferred":728,"smartsign-deferred":727}],730:[function(require,module,exports){'use strict';module.exports={flatten:require('./ac-array/flatten'),intersection:require('./ac-array/intersection'),toArray:require('./ac-array/toArray'),union:require('./ac-array/union'),unique:require('./ac-array/unique'),without:require('./ac-array/without')}},{"./ac-array/flatten":731,"./ac-array/intersection":732,"./ac-array/toArray":733,"./ac-array/union":734,"./ac-array/unique":735,"./ac-array/without":736}],731:[function(require,module,exports){'use strict';module.exports=function flatten(array){var flattenedArray=[];var callback=function(item){if(Array.isArray(item)){item.forEach(callback)}else{flattenedArray.push(item)}};array.forEach(callback);return flattenedArray}},{}],732:[function(require,module,exports){'use strict';module.exports=function intersection(array){if(!array){return[]}
var argsLength=arguments.length;var i=0;var len=array.length;var result=[];var item;for(i;i<len;i++){item=array[i];if(result.indexOf(item)>-1){continue}
for(var j=1;j<argsLength;j++){if(arguments[j].indexOf(item)<0){break}}
if(j===argsLength){result.push(item)}}
return result}},{}],733:[function(require,module,exports){'use strict';module.exports=function toArray(arrayLike){return Array.prototype.slice.call(arrayLike)}},{}],734:[function(require,module,exports){'use strict';var flatten=require('./flatten');var unique=require('./unique');module.exports=function union(array){return unique(flatten(Array.prototype.slice.call(arguments)))}},{"./flatten":731,"./unique":735}],735:[function(require,module,exports){'use strict';module.exports=function unique(array){var _unique=function(prev,current){if(prev.indexOf(current)<0){prev.push(current)}
return prev};return array.reduce(_unique,[])}},{}],736:[function(require,module,exports){'use strict';module.exports=function without(arr,value,recurse){var newArr;var index=arr.indexOf(value);var length=arr.length;if(index>=0){if(recurse){newArr=arr.slice(0,length);var i,amountRemoved=0;for(i=index;i<length;i++){if(arr[i]===value){newArr.splice(i-amountRemoved,1);amountRemoved++}}}else if(index===(length-1)){newArr=arr.slice(0,(length-1))}else if(index===0){newArr=arr.slice(1)}else{newArr=arr.slice(0,index);newArr=newArr.concat(arr.slice(index+1))}}else{return arr}
return newArr}},{}],737:[function(require,module,exports){module.exports.DOMEmitter=require("./ac-dom-emitter/DOMEmitter")},{"./ac-dom-emitter/DOMEmitter":738}],738:[function(require,module,exports){'use strict';var proto;var EventEmitter=require('ac-event-emitter').EventEmitter;var internalEventPrefix='dom-emitter';function DOMEmitter(el){if(el===null){return}
this.el=el;this._bindings={};this._eventEmitter=new EventEmitter()}
proto=DOMEmitter.prototype;proto._parseEventNames=function(evt){if(!evt){return[evt]}
return evt.split(' ')};proto._onListenerEvent=function(evtName,e){this.trigger(evtName,e,!1)};proto._setListener=function(evt){this._bindings[evt]=this._onListenerEvent.bind(this,evt);this._addEventListener(evt,this._bindings[evt])};proto._removeListener=function(evt){this._removeEventListener(evt,this._bindings[evt]);delete this._bindings[evt]};proto._addEventListener=function(evt,func,useCapture){if(this.el.addEventListener){this.el.addEventListener(evt,func,useCapture)}else if(this.el.attachEvent){this.el.attachEvent('on'+evt,func)}else{target['on'+evt]=func}
return this};proto._removeEventListener=function(evt,func,useCapture){if(this.el.removeEventListener){this.el.removeEventListener(evt,func,useCapture)}else{this.el.detachEvent('on'+evt,func)}
return this};proto._triggerInternalEvent=function(evt,data){this.trigger(internalEventPrefix+':'+evt,data)};proto.on=function(evts,callback,context){evts=this._parseEventNames(evts);evts.forEach(function(callback,context,evt){if(!this.has(evt)){this._setListener(evt)}
this._triggerInternalEvent('willon',{evt:evt,callback:callback,context:context});this._eventEmitter.on(evt,callback,context);this._triggerInternalEvent('didon',{evt:evt,callback:callback,context:context})}.bind(this,callback,context));return this};proto.off=function(evts,callback,context){var args=Array.prototype.slice.call(arguments,0);evts=this._parseEventNames(evts);evts.forEach(function(callback,context,args,evt){if(args.length===0){this._eventEmitter.off();var i;for(i in this._bindings){if(this._bindings.hasOwnProperty(i)){this._removeListener(i)}}
return}
this._triggerInternalEvent('willoff',{evt:evt,callback:callback,context:context});this._eventEmitter.off(evt,callback,context);this._triggerInternalEvent('didoff',{evt:evt,callback:callback,context:context});if(!this.has(evt)){this._removeListener(evt)}}.bind(this,callback,context,args));return this};proto.once=function(evts,callback,context){evts=this._parseEventNames(evts);evts.forEach(function(callback,context,evt){if(!this.has(evt)){this._setListener(evt)}
this._triggerInternalEvent('willonce',{evt:evt,callback:callback,context:context});this._eventEmitter.once.call(this,evt,callback,context);this._triggerInternalEvent('didonce',{evt:evt,callback:callback,context:context})}.bind(this,callback,context));return this};proto.has=function(evt,callback,context){if(this._eventEmitter&&this._eventEmitter.has.apply(this._eventEmitter,arguments)){return!0}
return!1};proto.trigger=function(evts,data,doNotPropogate){evts=this._parseEventNames(evts);evts.forEach(function(data,doNotPropogate,evt){this._eventEmitter.trigger(evt,data,doNotPropogate)}.bind(this,data,doNotPropogate));return this};proto.destroy=function(){this._triggerInternalEvent('willdestroy');this.off();this.el=this._eventEmitter=this._bindings=null};module.exports=DOMEmitter},{"ac-event-emitter":832}],739:[function(require,module,exports){'use strict';var vendorTransformHelper=require('./ac-dom-styles/vendorTransformHelper');var ac_dom_styles={};ac_dom_styles.setStyle=function(el,styles){var stylesObj;var camelCaseProp;var prop;if((typeof styles!=='string'&&typeof styles!=='object')||Array.isArray(styles)){throw new TypeError('styles argument must be either an object or a string')}
stylesObj=ac_dom_styles.setStyle.__explodeStyleStringToObject(styles);for(prop in stylesObj){if(stylesObj.hasOwnProperty(prop)){camelCaseProp=prop.replace(/-(\w)/g,ac_dom_styles.setStyle.__camelCaseReplace);ac_dom_styles.setStyle.__setStyle(el,camelCaseProp,stylesObj,stylesObj[prop])}}
return el};ac_dom_styles.setStyle.__explodeStyleStringToObject=function(styles){var stylesObj=(typeof styles==='object')?styles:{};var splitStyles;var colon;var len;var i;if(typeof styles==='string'){splitStyles=styles.split(';');len=splitStyles.length;for(i=0;i<len;i+=1){colon=splitStyles[i].indexOf(':');if(colon>0){stylesObj[splitStyles[i].substr(0,colon).trim()]=splitStyles[i].substr(colon+1).trim()}}}
return stylesObj};ac_dom_styles.setStyle.__setStyle=function(element,camelCaseProp,stylesObj,stylesValue){if(typeof element.style[camelCaseProp]!=='undefined'){element.style[camelCaseProp]=stylesValue}};ac_dom_styles.setStyle.__camelCaseReplace=function(match,group,offset,string){return(offset===0)&&(string.substr(1,3)!=='moz')?group:group.toUpperCase()};ac_dom_styles.getStyle=function(el,property,css){var value;property=property.replace(/-(\w)/g,ac_dom_styles.setStyle.__camelCaseReplace);property=(property==='float')?'cssFloat':property;css=css||window.getComputedStyle(el,null);value=css?css[property]:null;if(property==='opacity'){return value?parseFloat(value):1.0}
return value==='auto'?null:value};ac_dom_styles.setVendorPrefixStyle=function(el,property,value){if(typeof property!=='string'){throw new TypeError('ac-dom-styles.setVendorPrefixStyle: property must be a string')}
if(typeof value!=='string'&&typeof value!=='number'){throw new TypeError('ac-dom-styles.setVendorPrefixStyle: value must be a string or a number')}
var prefixes=['','webkit','Moz','ms','O'];var prefixedCamelProp;var prefixedValue;value+='';property=property.replace(/-(webkit|moz|ms|o)-/i,'');property=property.replace(/^(webkit|Moz|ms|O)/,'');property=property.charAt(0).toLowerCase()+property.slice(1);property=property.replace(/-(\w)/,function(match,group){return group.toUpperCase()});value=value.replace(/-(webkit|moz|ms|o)-/,'-vendor-');prefixes.forEach(function(prefix){prefixedCamelProp=(prefix==='')?property:prefix+property.charAt(0).toUpperCase()+property.slice(1);prefixedValue=(prefix==='')?value.replace('-vendor-',''):value.replace('-vendor-','-'+prefix.charAt(0).toLowerCase()+prefix.slice(1)+'-');if(prefixedCamelProp in el.style){ac_dom_styles.setStyle(el,prefixedCamelProp+':'+prefixedValue)}})};ac_dom_styles.getVendorPrefixStyle=function(el,property){if(typeof property!=='string'){throw new TypeError('ac-dom-styles.getVendorPrefixStyle: property must be a string')}
var prefixes=['','webkit','Moz','ms','O'];var style;property=property.replace(/-(webkit|moz|ms|o)-/i,'');property=property.replace(/^(webkit|Moz|ms|O)/,'').charAt(0).toLowerCase()+property.slice(1);property=property.replace(/-(\w)/,function(match,group){return group.toUpperCase()});prefixes.some(function(prefix,index){var prefixedCamelProp=(prefix==='')?property:prefix+property.charAt(0).toUpperCase()+property.slice(1);if(prefixedCamelProp in el.style){style=ac_dom_styles.getStyle(el,prefixedCamelProp);return!0}});return style};ac_dom_styles.setVendorPrefixTransform=function(el,transformFunctions){if((typeof transformFunctions!=='string'&&typeof transformFunctions!=='object')||Array.isArray(transformFunctions)||transformFunctions===null){throw new TypeError('ac-dom-styles.setVendorPrefixTransform: transformFunctions argument must be either an object or a string')}
ac_dom_styles.setVendorPrefixStyle(el,'transform',vendorTransformHelper.convert2dFunctions(transformFunctions))};require('./ac-dom-styles/ie')(ac_dom_styles);module.exports=ac_dom_styles},{"./ac-dom-styles/ie":740,"./ac-dom-styles/vendorTransformHelper":741}],740:[function(require,module,exports){'use strict';module.exports=function(ac_dom_styles){if(typeof window.getComputedStyle!=='function'){ac_dom_styles.getStyle=function(el,style,css){var alphaFilter;var value;css=css||el.currentStyle;if(css){style=style.replace(/-(\w)/g,ac_dom_styles.setStyle.__camelCaseReplace);style=style==='float'?'styleFloat':style;value=css[style]||null;return value==='auto'?null:value}}}}},{}],741:[function(require,module,exports){'use strict';var vendorTransformHelper={__objectifiedFunctions:{},__paramMaps:{translate:'p1, p2, 0',translateX:'p1, 0, 0',translateY:'0, p1, 0',scale:'p1, p2, 1',scaleX:'p1, 1, 1',scaleY:'1, p1, 1',rotate:'0, 0, 1, p1',matrix:'p1, p2, 0, 0, p3, p4, 0, 0, 0, 0, 1, 0, p5, p6, 0, 1'},convert2dFunctions:function(functions2d){var values;this.__init(functions2d);for(var func in this.__objectifiedFunctions){if(this.__objectifiedFunctions.hasOwnProperty(func)){values=this.__objectifiedFunctions[func].replace(' ','').split(',');if(func in this.__paramMaps){for(var map in this.__paramMaps){if(func===map){this.valuesToSet.push(this.__stripFunctionAxis(func)+'3d('+this.__map2DTransformParams(values,this.__paramMaps[func])+')')}}}else{this.valuesToSet.push(func+'('+this.__objectifiedFunctions[func]+')')}}}
return this.valuesToSet.join(' ')},__init:function(functions2d){this.valuesToSet=[];this.__objectifiedFunctions=(typeof functions2d==='object')?functions2d:{};if(typeof functions2d==='string'){this.__objectifiedFunctions=this.__objectifyFunctionString(functions2d)}},__map2DTransformParams:function(params2d,template3d){params2d.forEach(function(val,i){template3d=template3d.replace('p'+(i+1),val)});return template3d},__splitFunctionStringToArray:function(functionString){return functionString.match(/[\w]+\(.+?\)/g)},__splitFunctionNameAndParams:function(functionString){return functionString.match(/(.*)\((.*)\)/)},__stripFunctionAxis:function(func){return func.match(/([a-z]+)(|X|Y)$/)[1]},__objectifyFunctionString:function(functionString){var self=this;var splitMember;this.__splitFunctionStringToArray(functionString).forEach(function(member){splitMember=self.__splitFunctionNameAndParams(member);self.__objectifiedFunctions[splitMember[1]]=splitMember[2]});return this.__objectifiedFunctions}};module.exports=vendorTransformHelper},{}],742:[function(require,module,exports){'use strict';var ac_dom_styles=require('ac-dom-styles');var ac_dom_metrics={};var viewportScrollOffsets=function(){return{x:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}};var viewportDimensions=function(){return{height:window.innerHeight||document.documentElement.clientHeight,width:window.innerWidth||document.documentElement.clientWidth}};ac_dom_metrics.cumulativeOffset=function(el){var box=ac_dom_metrics.getBoundingBox(el);var scrollOffsets=viewportScrollOffsets();var offset=[box.top+scrollOffsets.y,box.left+scrollOffsets.x];offset.top=offset[0];offset.left=offset[1];return offset};ac_dom_metrics.getBoundingBox=function(el){var rect=el.getBoundingClientRect();var width=rect.width||rect.right-rect.left;var height=rect.height||rect.bottom-rect.top;return{top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:width,height:height}};ac_dom_metrics.getInnerDimensions=function(el){var dims=ac_dom_metrics.getBoundingBox(el);var width=dims.width;var height=dims.height;var style;var styleValue;var css=window.getComputedStyle?window.getComputedStyle(el,null):null;['padding','border'].forEach(function(prop){['Top','Right','Bottom','Left'].forEach(function(side){style=prop==='border'?prop+side+'Width':prop+side;styleValue=parseFloat(ac_dom_styles.getStyle(el,style,css));styleValue=isNaN(styleValue)?0:styleValue;if(side==='Right'||side==='Left'){width-=styleValue}
if(side==='Top'||side==='Bottom'){height-=styleValue}})});return{width:width,height:height}};ac_dom_metrics.getOuterDimensions=function(el){var dims=ac_dom_metrics.getBoundingBox(el);var width=dims.width;var height=dims.height;var marginStyle;var css=window.getComputedStyle?window.getComputedStyle(el,null):null;['margin'].forEach(function(prop){['Top','Right','Bottom','Left'].forEach(function(side){marginStyle=parseFloat(ac_dom_styles.getStyle(el,prop+side,css));marginStyle=isNaN(marginStyle)?0:marginStyle;if(side==='Right'||side==='Left'){width+=marginStyle}
if(side==='Top'||side==='Bottom'){height+=marginStyle}})});return{width:width,height:height}};ac_dom_metrics.pixelsInViewport=function(el,boundingBox){var pixelsInView;var viewportMetrics=viewportDimensions();boundingBox=boundingBox||ac_dom_metrics.getBoundingBox(el);var elementViewportOffsetY=boundingBox.top;if(elementViewportOffsetY>=0){pixelsInView=viewportMetrics.height-elementViewportOffsetY;if(pixelsInView>boundingBox.height){pixelsInView=boundingBox.height}}else{pixelsInView=boundingBox.height+elementViewportOffsetY}
if(pixelsInView<0){pixelsInView=0}
if(pixelsInView>viewportMetrics.height){pixelsInView=viewportMetrics.height}
return pixelsInView};ac_dom_metrics.percentInViewport=function(el){var boundingBox=ac_dom_metrics.getBoundingBox(el);var pixelsInView=ac_dom_metrics.pixelsInViewport(el,boundingBox);return pixelsInView/boundingBox.height};ac_dom_metrics.isInViewport=function(el,threshold){var percentInViewport=ac_dom_metrics.percentInViewport(el);if(typeof threshold!=="number"||1<threshold||threshold<0){threshold=0}
return(percentInViewport>threshold||percentInViewport===1)};require('./ac-dom-metrics/ie')(ac_dom_metrics);module.exports=ac_dom_metrics},{"./ac-dom-metrics/ie":743,"ac-dom-styles":739}],743:[function(require,module,exports){'use strict';module.exports=function(ac_metrics){if(!('getBoundingClientRect' in document.createElement('_'))){ac_metrics.getBoundingBox=function(el){var left=el.offsetLeft;var top=el.offsetTop;var width=el.offsetWidth;var height=el.offsetHeight;return{top:top,right:left+width,bottom:top+height,left:left,width:width,height:height}}}}},{}],744:[function(require,module,exports){'use strict';module.exports=8},{}],745:[function(require,module,exports){'use strict';module.exports=11},{}],746:[function(require,module,exports){'use strict';module.exports=9},{}],747:[function(require,module,exports){'use strict';module.exports=10},{}],748:[function(require,module,exports){'use strict';module.exports=1},{}],749:[function(require,module,exports){'use strict';module.exports=3},{}],750:[function(require,module,exports){'use strict';module.exports=function createDocumentFragment(html){var fragment=document.createDocumentFragment();var div;if(html){div=document.createElement('div');div.innerHTML=html;while(div.firstChild){fragment.appendChild(div.firstChild)}}
return fragment}},{}],751:[function(require,module,exports){'use strict';require('ac-polyfills/Array/prototype.slice');require('ac-polyfills/Array/prototype.filter');var isNodeType=require('./internal/isNodeType');var ELEMENT_NODE=require('./ELEMENT_NODE');module.exports=function filterByNodeType(nodes,nodeType){nodeType=nodeType||ELEMENT_NODE;nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(node){return isNodeType(node,nodeType)})}},{"./ELEMENT_NODE":748,"./internal/isNodeType":759,"ac-polyfills/Array/prototype.filter":769,"ac-polyfills/Array/prototype.slice":771}],752:[function(require,module,exports){'use strict';module.exports=function hasAttribute(el,attr){if('hasAttribute' in el){return el.hasAttribute(attr)}
return(el.attributes.getNamedItem(attr)!==null)}},{}],753:[function(require,module,exports){'use strict';module.exports={createDocumentFragment:require('./createDocumentFragment'),filterByNodeType:require('./filterByNodeType'),hasAttribute:require('./hasAttribute'),indexOf:require('./indexOf'),insertAfter:require('./insertAfter'),insertBefore:require('./insertBefore'),insertFirstChild:require('./insertFirstChild'),insertLastChild:require('./insertLastChild'),isComment:require('./isComment'),isDocument:require('./isDocument'),isDocumentFragment:require('./isDocumentFragment'),isDocumentType:require('./isDocumentType'),isElement:require('./isElement'),isNode:require('./isNode'),isNodeList:require('./isNodeList'),isTextNode:require('./isTextNode'),remove:require('./remove'),replace:require('./replace'),COMMENT_NODE:require('./COMMENT_NODE'),DOCUMENT_FRAGMENT_NODE:require('./DOCUMENT_FRAGMENT_NODE'),DOCUMENT_NODE:require('./DOCUMENT_NODE'),DOCUMENT_TYPE_NODE:require('./DOCUMENT_TYPE_NODE'),ELEMENT_NODE:require('./ELEMENT_NODE'),TEXT_NODE:require('./TEXT_NODE')}},{"./COMMENT_NODE":744,"./DOCUMENT_FRAGMENT_NODE":745,"./DOCUMENT_NODE":746,"./DOCUMENT_TYPE_NODE":747,"./ELEMENT_NODE":748,"./TEXT_NODE":749,"./createDocumentFragment":750,"./filterByNodeType":751,"./hasAttribute":752,"./indexOf":754,"./insertAfter":755,"./insertBefore":756,"./insertFirstChild":757,"./insertLastChild":758,"./isComment":761,"./isDocument":762,"./isDocumentFragment":763,"./isDocumentType":764,"./isElement":765,"./isNode":766,"./isNodeList":767,"./isTextNode":768,"./remove":772,"./replace":773}],754:[function(require,module,exports){'use strict';require('ac-polyfills/Array/prototype.indexOf');require('ac-polyfills/Array/prototype.slice');var validate=require('./internal/validate');var filterByNodeType=require('./filterByNodeType');module.exports=function indexOf(node,nodeType){var parentNode=node.parentNode;var nodes;if(!parentNode){return 0}
nodes=parentNode.childNodes;if(nodeType!==!1){nodes=filterByNodeType(nodes,nodeType)}else{nodes=Array.prototype.slice.call(nodes)}
return nodes.indexOf(node)}},{"./filterByNodeType":751,"./internal/validate":760,"ac-polyfills/Array/prototype.indexOf":770,"ac-polyfills/Array/prototype.slice":771}],755:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertAfter(node,target){validate.insertNode(node,!0,'insertAfter');validate.childNode(target,!0,'insertAfter');validate.hasParentNode(target,'insertAfter');if(!target.nextSibling){return target.parentNode.appendChild(node)}
return target.parentNode.insertBefore(node,target.nextSibling)}},{"./internal/validate":760}],756:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertBefore(node,target){validate.insertNode(node,!0,'insertBefore');validate.childNode(target,!0,'insertBefore');validate.hasParentNode(target,'insertBefore');return target.parentNode.insertBefore(node,target)}},{"./internal/validate":760}],757:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertFirstChild(node,target){validate.insertNode(node,!0,'insertFirstChild');validate.parentNode(target,!0,'insertFirstChild');if(!target.firstChild){return target.appendChild(node)}
return target.insertBefore(node,target.firstChild)}},{"./internal/validate":760}],758:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function insertLastChild(node,target){validate.insertNode(node,!0,'insertLastChild');validate.parentNode(target,!0,'insertLastChild');return target.appendChild(node)}},{"./internal/validate":760}],759:[function(require,module,exports){'use strict';var isNode=require('../isNode');module.exports=function isNodeType(node,nodeType){if(!isNode(node)){return!1}
if(typeof nodeType==='number'){return(node.nodeType===nodeType)}
return(nodeType.indexOf(node.nodeType)!==-1)}},{"../isNode":766}],760:[function(require,module,exports){'use strict';var isNodeType=require('./isNodeType');var COMMENT_NODE=require('../COMMENT_NODE');var DOCUMENT_FRAGMENT_NODE=require('../DOCUMENT_FRAGMENT_NODE');var ELEMENT_NODE=require('../ELEMENT_NODE');var TEXT_NODE=require('../TEXT_NODE');var VALID_INSERT_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_INSERT_NODE=' must be an Element, TextNode, Comment, or Document Fragment';var VALID_CHILD_NODE=[ELEMENT_NODE,TEXT_NODE,COMMENT_NODE];var ERR_INVALID_CHILD_NODE=' must be an Element, TextNode, or Comment';var VALID_PARENT_NODE=[ELEMENT_NODE,DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=' must be an Element, or Document Fragment';var ERR_NO_PARENT_NODE=' must have a parentNode';module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||'target';if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||'target';if(!node&&!required){return}
if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_CHILD_NODE)}},insertNode:function(node,required,funcName,paramName){paramName=paramName||'node';if(!node&&!required){return}
if(!isNodeType(node,VALID_INSERT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_INSERT_NODE)}},hasParentNode:function(node,funcName,paramName){paramName=paramName||'target';if(!node.parentNode){throw new TypeError(funcName+': '+paramName+ERR_NO_PARENT_NODE)}}}},{"../COMMENT_NODE":744,"../DOCUMENT_FRAGMENT_NODE":745,"../ELEMENT_NODE":748,"../TEXT_NODE":749,"./isNodeType":759}],761:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var COMMENT_NODE=require('./COMMENT_NODE');module.exports=function isComment(obj){return isNodeType(obj,COMMENT_NODE)}},{"./COMMENT_NODE":744,"./internal/isNodeType":759}],762:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_NODE=require('./DOCUMENT_NODE');module.exports=function isDocument(obj){return isNodeType(obj,DOCUMENT_NODE)}},{"./DOCUMENT_NODE":746,"./internal/isNodeType":759}],763:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_FRAGMENT_NODE=require('./DOCUMENT_FRAGMENT_NODE');module.exports=function isDocumentFragment(obj){return isNodeType(obj,DOCUMENT_FRAGMENT_NODE)}},{"./DOCUMENT_FRAGMENT_NODE":745,"./internal/isNodeType":759}],764:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var DOCUMENT_TYPE_NODE=require('./DOCUMENT_TYPE_NODE');module.exports=function isDocumentType(obj){return isNodeType(obj,DOCUMENT_TYPE_NODE)}},{"./DOCUMENT_TYPE_NODE":747,"./internal/isNodeType":759}],765:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var ELEMENT_NODE=require('./ELEMENT_NODE');module.exports=function isElement(obj){return isNodeType(obj,ELEMENT_NODE)}},{"./ELEMENT_NODE":748,"./internal/isNodeType":759}],766:[function(require,module,exports){'use strict';module.exports=function isNode(obj){return!!(obj&&obj.nodeType)}},{}],767:[function(require,module,exports){'use strict';var nodeListToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;module.exports=function isNodeList(obj){if(!obj){return!1}
if(typeof obj.length!=='number'){return!1}
if(typeof obj[0]==='object'&&(!obj[0]||!obj[0].nodeType)){return!1}
return nodeListToStringPattern.test(Object.prototype.toString.call(obj))}},{}],768:[function(require,module,exports){'use strict';var isNodeType=require('./internal/isNodeType');var TEXT_NODE=require('./TEXT_NODE');module.exports=function isTextNode(obj){return isNodeType(obj,TEXT_NODE)}},{"./TEXT_NODE":749,"./internal/isNodeType":759}],769:[function(require,module,exports){if(!Array.prototype.filter){Array.prototype.filter=function filter(callback,thisObj){var arrayObject=Object(this);var len=arrayObject.length>>>0;var i;var results=[];if(typeof callback!=='function'){throw new TypeError(callback+' is not a function')}
for(i=0;i<len;i+=1){if(i in arrayObject&&callback.call(thisObj,arrayObject[i],i,arrayObject)){results.push(arrayObject[i])}}
return results}}},{}],770:[function(require,module,exports){if(!Array.prototype.indexOf){Array.prototype.indexOf=function indexOf(searchElement,fromIndex){var startIndex=fromIndex||0;var currentIndex=0;if(startIndex<0){startIndex=this.length+fromIndex-1;if(startIndex<0){throw 'Wrapped past beginning of array while looking up a negative start index.'}}
for(currentIndex=0;currentIndex<this.length;currentIndex++){if(this[currentIndex]===searchElement){return currentIndex}}
return(-1)}}},{}],771:[function(require,module,exports){(function(){'use strict';var _slice=Array.prototype.slice;try{_slice.call(document.documentElement)}catch(e){Array.prototype.slice=function(begin,end){end=(typeof end!=='undefined')?end:this.length;if(Object.prototype.toString.call(this)==='[object Array]'){return _slice.call(this,begin,end)}
var i,cloned=[],size,len=this.length;var start=begin||0;start=(start>=0)?start:len+start;var upTo=(end)?end:len;if(end<0){upTo=len+end}
size=upTo-start;if(size>0){cloned=new Array(size);if(this.charAt){for(i=0;i<size;i++){cloned[i]=this.charAt(start+i)}}else{for(i=0;i<size;i++){cloned[i]=this[start+i]}}}
return cloned}}}())},{}],772:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function remove(node){validate.childNode(node,!0,'remove');if(!node.parentNode){return node}
return node.parentNode.removeChild(node)}},{"./internal/validate":760}],773:[function(require,module,exports){'use strict';var validate=require('./internal/validate');module.exports=function replace(newNode,oldNode){validate.insertNode(newNode,!0,'insertFirstChild','newNode');validate.childNode(oldNode,!0,'insertFirstChild','oldNode');validate.hasParentNode(oldNode,'insertFirstChild','oldNode');return oldNode.parentNode.replaceChild(newNode,oldNode)}},{"./internal/validate":760}],774:[function(require,module,exports){'use strict';var events={};events.addEventListener=function(target,type,listener,useCapture){if(target.addEventListener){target.addEventListener(type,listener,useCapture)}else if(target.attachEvent){target.attachEvent('on'+type,listener)}else{target['on'+type]=listener}
return target};events.dispatchEvent=function(target,type){if(document.createEvent){target.dispatchEvent(new CustomEvent(type))}else{target.fireEvent('on'+type,document.createEventObject())}
return target};events.removeEventListener=function(target,type,listener,useCapture){if(target.removeEventListener){target.removeEventListener(type,listener,useCapture)}else{target.detachEvent('on'+type,listener)}
return target};var prefixMatch=/^(webkit|moz|ms|o)/i;events.addVendorPrefixEventListener=function(target,type,listener,useCapture){if(prefixMatch.test(type)){type=type.replace(prefixMatch,'')}else{type=type.charAt(0).toUpperCase()+type.slice(1)}
if(/WebKit/i.test(window.navigator.userAgent)){return events.addEventListener(target,'webkit'+type,listener,useCapture)}else if(/Opera/i.test(window.navigator.userAgent)){return events.addEventListener(target,'O'+type,listener,useCapture)}else if(/Gecko/i.test(window.navigator.userAgent)){return events.addEventListener(target,type.toLowerCase(),listener,useCapture)}else{type=type.charAt(0).toLowerCase()+type.slice(1);return events.addEventListener(target,type,listener,useCapture)}};events.removeVendorPrefixEventListener=function(target,type,listener,useCapture){if(prefixMatch.test(type)){type=type.replace(prefixMatch,'')}else{type=type.charAt(0).toUpperCase()+type.slice(1)}
events.removeEventListener(target,'webkit'+type,listener,useCapture);events.removeEventListener(target,'O'+type,listener,useCapture);events.removeEventListener(target,type.toLowerCase(),listener,useCapture);type=type.charAt(0).toLowerCase()+type.slice(1);return events.removeEventListener(target,type,listener,useCapture)};events.stop=function(evt){if(!evt){evt=window.event}
if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=!0}
if(evt.preventDefault){evt.preventDefault()}
evt.stopped=!0;evt.returnValue=!1};events.target=function(evt){return(typeof evt.target!=='undefined')?evt.target:evt.srcElement};module.exports=events},{}],775:[function(require,module,exports){'use strict';var ac_dom_traversal={querySelector:require('./ac-dom-traversal/querySelector'),querySelectorAll:require('./ac-dom-traversal/querySelectorAll'),ancestor:require('./ac-dom-traversal/ancestor'),ancestors:require('./ac-dom-traversal/ancestors'),children:require('./ac-dom-traversal/children'),firstChild:require('./ac-dom-traversal/firstChild'),lastChild:require('./ac-dom-traversal/lastChild'),siblings:require('./ac-dom-traversal/siblings'),nextSibling:require('./ac-dom-traversal/nextSibling'),nextSiblings:require('./ac-dom-traversal/nextSiblings'),previousSibling:require('./ac-dom-traversal/previousSibling'),previousSiblings:require('./ac-dom-traversal/previousSiblings'),filterBySelector:require('./ac-dom-traversal/filterBySelector'),matchesSelector:require('./ac-dom-traversal/matchesSelector')};require('./ac-dom-traversal/shims/ie')(ac_dom_traversal);module.exports=ac_dom_traversal},{"./ac-dom-traversal/ancestor":776,"./ac-dom-traversal/ancestors":777,"./ac-dom-traversal/children":778,"./ac-dom-traversal/filterBySelector":779,"./ac-dom-traversal/firstChild":780,"./ac-dom-traversal/lastChild":783,"./ac-dom-traversal/matchesSelector":784,"./ac-dom-traversal/nextSibling":785,"./ac-dom-traversal/nextSiblings":786,"./ac-dom-traversal/previousSibling":787,"./ac-dom-traversal/previousSiblings":788,"./ac-dom-traversal/querySelector":789,"./ac-dom-traversal/querySelectorAll":790,"./ac-dom-traversal/shims/ie":791,"./ac-dom-traversal/siblings":792}],776:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function ancestor(node,selector){validate.childNode(node,!0,'ancestors');validate.selector(selector,!1,'ancestors');if(node!==document.body){while((node=node.parentNode)&&ac_dom_nodes.isElement(node)){if(!selector||matchesSelector(node,selector)){return node}
if(node===document.body){break}}}
return null}},{"./helpers/validate":782,"./matchesSelector":784,"ac-dom-nodes":753}],777:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function ancestors(node,selector){var els=[];validate.childNode(node,!0,'ancestors');validate.selector(selector,!1,'ancestors');if(node!==document.body){while((node=node.parentNode)&&ac_dom_nodes.isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}
if(node===document.body){break}}}
return els}},{"./helpers/validate":782,"./matchesSelector":784,"ac-dom-nodes":753}],778:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var filterBySelector=require('./filterBySelector');var validate=require('./helpers/validate');module.exports=function children(node,selector){var els;validate.parentNode(node,!0,'children');validate.selector(selector,!1,'children');els=node.children||node.childNodes;els=ac_dom_nodes.filterByNodeType(els);if(selector){els=filterBySelector(els,selector)}
return els}},{"./filterBySelector":779,"./helpers/validate":782,"ac-dom-nodes":753}],779:[function(require,module,exports){'use strict';var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function filterBySelector(nodes,selector){validate.selector(selector,!0,'filterBySelector');nodes=Array.prototype.slice.call(nodes);return nodes.filter(function(el){return matchesSelector(el,selector)})}},{"./helpers/validate":782,"./matchesSelector":784}],780:[function(require,module,exports){'use strict';var children=require('./children');var validate=require('./helpers/validate');module.exports=function firstChild(node,selector){var els;validate.parentNode(node,!0,'firstChild');validate.selector(selector,!1,'firstChild');if(node.firstElementChild&&!selector){return node.firstElementChild}
els=children(node,selector);if(els.length){return els[0]}
return null}},{"./children":778,"./helpers/validate":782}],781:[function(require,module,exports){'use strict';module.exports=window.Element?(function(proto){return proto.matches||proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector}(Element.prototype)):null},{}],782:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var isNodeType=function(node,nodeType){if(!ac_dom_nodes.isNode(node)){return!1}
if(typeof nodeType==='number'){return(node.nodeType===nodeType)}
return(nodeType.indexOf(node.nodeType)!==-1)};var VALID_PARENT_NODE=[ac_dom_nodes.ELEMENT_NODE,ac_dom_nodes.DOCUMENT_NODE,ac_dom_nodes.DOCUMENT_FRAGMENT_NODE];var ERR_INVALID_PARENT_NODE=' must be an Element, Document, or Document Fragment';var VALID_CHILD_NODE=[ac_dom_nodes.ELEMENT_NODE,ac_dom_nodes.TEXT_NODE,ac_dom_nodes.COMMENT_NODE];var ERR_INVALID_CHILD_NODE=' must be an Element, TextNode, or Comment';var ERR_INVALID_SELECTOR=' must be a string';module.exports={parentNode:function(node,required,funcName,paramName){paramName=paramName||'node';if((node||required)&&!isNodeType(node,VALID_PARENT_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_PARENT_NODE)}},childNode:function(node,required,funcName,paramName){paramName=paramName||'node';if(!node&&!required){return}
if(!isNodeType(node,VALID_CHILD_NODE)){throw new TypeError(funcName+': '+paramName+ERR_INVALID_CHILD_NODE)}},selector:function(selector,required,funcName,paramName){paramName=paramName||'selector';if((selector||required)&&typeof selector!=='string'){throw new TypeError(funcName+': '+paramName+ERR_INVALID_SELECTOR)}}}},{"ac-dom-nodes":753}],783:[function(require,module,exports){'use strict';var children=require('./children');var validate=require('./helpers/validate');module.exports=function lastChild(node,selector){var els;validate.parentNode(node,!0,'lastChild');validate.selector(selector,!1,'lastChild');if(node.lastElementChild&&!selector){return node.lastElementChild}
els=children(node,selector);if(els.length){return els[els.length-1]}
return null}},{"./children":778,"./helpers/validate":782}],784:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var nativeMatches=require('./helpers/nativeMatches');var validate=require('./helpers/validate');module.exports=function matchesSelector(node,selector){validate.selector(selector,!0,'matchesSelector');return ac_dom_nodes.isElement(node)?nativeMatches.call(node,selector):!1}},{"./helpers/nativeMatches":781,"./helpers/validate":782,"ac-dom-nodes":753}],785:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function nextSibling(node,selector){validate.childNode(node,!0,'nextSibling');validate.selector(selector,!1,'nextSibling');if(node.nextElementSibling&&!selector){return node.nextElementSibling}
while(node=node.nextSibling){if(ac_dom_nodes.isElement(node)){if(!selector||matchesSelector(node,selector)){return node}}}
return null}},{"./helpers/validate":782,"./matchesSelector":784,"ac-dom-nodes":753}],786:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function nextSiblings(node,selector){var els=[];validate.childNode(node,!0,'nextSiblings');validate.selector(selector,!1,'nextSiblings');while(node=node.nextSibling){if(ac_dom_nodes.isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}}}
return els}},{"./helpers/validate":782,"./matchesSelector":784,"ac-dom-nodes":753}],787:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function previousSibling(node,selector){validate.childNode(node,!0,'previousSibling');validate.selector(selector,!1,'previousSibling');if(node.previousElementSibling&&!selector){return node.previousElementSibling}
while(node=node.previousSibling){if(ac_dom_nodes.isElement(node)){if(!selector||matchesSelector(node,selector)){return node}}}
return null}},{"./helpers/validate":782,"./matchesSelector":784,"ac-dom-nodes":753}],788:[function(require,module,exports){'use strict';var ac_dom_nodes=require('ac-dom-nodes');var matchesSelector=require('./matchesSelector');var validate=require('./helpers/validate');module.exports=function previousSiblings(node,selector){var els=[];validate.childNode(node,!0,'previousSiblings');validate.selector(selector,!1,'previousSiblings');while(node=node.previousSibling){if(ac_dom_nodes.isElement(node)){if(!selector||matchesSelector(node,selector)){els.push(node)}}}
return els.reverse()}},{"./helpers/validate":782,"./matchesSelector":784,"ac-dom-nodes":753}],789:[function(require,module,exports){'use strict';var validate=require('./helpers/validate');module.exports=function querySelector(selector,context){context=context||document;validate.parentNode(context,!0,'querySelector','context');validate.selector(selector,!0,'querySelector');return context.querySelector(selector)}},{"./helpers/validate":782}],790:[function(require,module,exports){'use strict';var validate=require('./helpers/validate');module.exports=function querySelectorAll(selector,context){context=context||document;validate.parentNode(context,!0,'querySelectorAll','context');validate.selector(selector,!0,'querySelectorAll');return Array.prototype.slice.call(context.querySelectorAll(selector))}},{"./helpers/validate":782}],791:[function(require,module,exports){'use strict';var sizzle=require('../vendor/sizzle/sizzle');var ac_dom_nodes=require('ac-dom-nodes');var nativeMatches=require('../helpers/nativeMatches');var validate=require('../helpers/validate');module.exports=function(ac_dom_traversal,forceShim){if(forceShim||!('querySelectorAll' in document)){ac_dom_traversal.querySelectorAll=function(selector,context){var children;var matches;context=context||document;validate.parentNode(context,!0,'querySelectorAll','context');validate.selector(selector,!0,'querySelectorAll');if(ac_dom_nodes.isDocumentFragment(context)){children=ac_dom_traversal.children(context);matches=[];children.forEach(function(node){var childMatches;if(sizzle.matchesSelector(node,selector)){matches.push(node)}
childMatches=sizzle(selector,node);if(childMatches.length){matches=matches.concat(childMatches)}});return matches}
return sizzle(selector,context)};ac_dom_traversal.querySelector=function(selector,context){var allResults;context=context||document;validate.parentNode(context,!0,'querySelector','context');validate.selector(selector,!0,'querySelector');allResults=ac_dom_traversal.querySelectorAll(selector,context);return allResults.length?allResults[0]:null}}
if(forceShim||!nativeMatches){ac_dom_traversal.matchesSelector=function(node,selector){return sizzle.matchesSelector(node,selector)}}}},{"../helpers/nativeMatches":781,"../helpers/validate":782,"../vendor/sizzle/sizzle":793,"ac-dom-nodes":753}],792:[function(require,module,exports){'use strict';var children=require('./children');var validate=require('./helpers/validate');module.exports=function siblings(node,selector){var els=[];validate.childNode(node,!0,'siblings');validate.selector(selector,!1,'siblings');if(node.parentNode){els=children(node.parentNode,selector);els=els.filter(function(el){return(el!==node)})}
return els}},{"./children":778,"./helpers/validate":782}],793:[function(require,module,exports){(function(window,undefined){var cachedruns,dirruns,sortOrder,siblingCheck,assertGetIdNotName,document=window.document,docElem=document.documentElement,strundefined="undefined",hasDuplicate=!1,baseHasDuplicate=!0,done=0,slice=[].slice,push=[].push,expando=("sizcache"+Math.random()).replace(".",""),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])",identifier="(?:[\\w#_-]|[^\\x00-\\xa0]|\\\\.)",operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+"+)"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+"+)|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+"+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|(.*))\\)|)",pos=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",combinators=whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*",groups="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+attributes+"|"+pseudos.replace(2,7)+"|[^\\\\(),])+",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcombinators=new RegExp("^"+combinators),rgroups=new RegExp(groups+"?(?="+whitespace+"*,|$)","g"),rselector=new RegExp("^(?:(?!,)(?:(?:^|,)"+whitespace+"*"+groups+")*?|"+whitespace+"*(.*?))(\\)|$)"),rtokens=new RegExp(groups.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+combinators,"g"),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={"ID":new RegExp("^#("+characterEncoding+"+)"),"CLASS":new RegExp("^\\.("+characterEncoding+"+)"),"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+"+)['\"]?\\]"),"TAG":new RegExp("^("+characterEncoding.replace("[-","[-\\*")+"+)"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|nth|last|first)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"POS":new RegExp(pos,"ig"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},classCache={},cachedClasses=[],compilerCache={},cachedSelectors=[],markFunction=function(fn){fn.sizzleFilter=!0;return fn},createInputFunction=function(type){return function(elem){return elem.nodeName.toLowerCase()==="input"&&elem.type===type}},createButtonFunction=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}},assert=function(fn){var pass=!1,div=document.createElement("div");try{pass=fn(div)}catch(e){}
div=null;return pass},assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass}),assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return div.getElementsByTagName("*").length===0}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return!1}
div.lastChild.className="e";return div.getElementsByClassName("e").length!==1});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(nodeType!==1&&nodeType!==9){return[]}
if(!selector||typeof selector!=="string"){return results}
xml=isXML(context);if(!xml&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}}}
return select(selector,context,results,seed,xml)};var Expr=Sizzle.selectors={cacheLength:50,match:matchExpr,order:["ID","TAG"],attrHandle:{},createPseudo:markFunction,find:{"ID":assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},"TAG":assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;(elem=results[i]);i++){if(elem.nodeType===1){tmp.push(elem)}}
return tmp}
return results}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" "}
return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}
match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+((match[6]+match[7])||match[2]==="odd")}else if(match[2]){Sizzle.error(match[0])}
return match},"PSEUDO":function(match){var argument,unquoted=match[4];if(matchExpr.CHILD.test(match[0])){return null}
if(unquoted&&(argument=rselector.exec(unquoted))&&argument.pop()){match[0]=match[0].slice(0,argument[0].length-unquoted.length-1);unquoted=argument[0].slice(0,-1)}
match.splice(2,3,unquoted||match[3]);return match}},filter:{"ID":assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id}}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},"TAG":function(nodeName){if(nodeName==="*"){return function(){return!0}}
nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=classCache[className];if(!pattern){pattern=classCache[className]=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)");cachedClasses.push(className);if(cachedClasses.length>Expr.cacheLength){delete classCache[cachedClasses.shift()]}}
return function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class"))||"")}},"ATTR":function(name,operator,check){if(!operator){return function(elem){return Sizzle.attr(elem,name)!=null}}
return function(elem){var result=Sizzle.attr(elem,name),value=result+"";if(result==null){return operator==="!="}
switch(operator){case "=":return value===check;case "!=":return value!==check;case "^=":return check&&value.indexOf(check)===0;case "*=":return check&&value.indexOf(check)>-1;case "$=":return check&&value.substr(value.length-check.length)===check;case "~=":return(" "+value+" ").indexOf(check)>-1;case "|=":return value===check||value.substr(0,check.length+1)===check+"-"}}},"CHILD":function(type,argument,first,last){if(type==="nth"){var doneName=done++;return function(elem){var parent,diff,count=0,node=elem;if(first===1&&last===0){return!0}
parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.sizset)){for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.sizset=++count;if(node===elem){break}}}
parent[expando]=doneName}
diff=elem.sizset-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}}
return function(elem){var node=elem;switch(type){case "only":case "first":while((node=node.previousSibling)){if(node.nodeType===1){return!1}}
if(type==="first"){return!0}
node=elem;case "last":while((node=node.nextSibling)){if(node.nodeType===1){return!1}}
return!0}}},"PSEUDO":function(pseudo,argument,context,xml){var fn=Expr.pseudos[pseudo]||Expr.pseudos[pseudo.toLowerCase()];if(!fn){Sizzle.error("unsupported pseudo: "+pseudo)}
if(!fn.sizzleFilter){return fn}
return fn(argument,context,xml)}},pseudos:{"not":markFunction(function(selector,context,xml){var matcher=compile(selector.replace(rtrim,"$1"),context,xml);return function(elem){return!matcher(elem)}}),"enabled":function(elem){return elem.disabled===!1},"disabled":function(elem){return elem.disabled===!0},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}
return elem.selected===!0},"parent":function(elem){return!!elem.firstChild},"empty":function(elem){return!elem.firstChild},"contains":markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"header":function(elem){return rheader.test(elem.nodeName)},"text":function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},"radio":createInputFunction("radio"),"checkbox":createInputFunction("checkbox"),"file":createInputFunction("file"),"password":createInputFunction("password"),"image":createInputFunction("image"),"submit":createButtonFunction("submit"),"reset":createButtonFunction("reset"),"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},"input":function(elem){return rinputs.test(elem.nodeName)},"focus":function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href)},"active":function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{"first":function(elements,argument,not){return not?elements.slice(1):[elements[0]]},"last":function(elements,argument,not){var elem=elements.pop();return not?elements:[elem]},"even":function(elements,argument,not){var results=[],i=not?1:0,len=elements.length;for(;i<len;i=i+2){results.push(elements[i])}
return results},"odd":function(elements,argument,not){var results=[],i=not?0:1,len=elements.length;for(;i<len;i=i+2){results.push(elements[i])}
return results},"lt":function(elements,argument,not){return not?elements.slice(+argument):elements.slice(0,+argument)},"gt":function(elements,argument,not){return not?elements.slice(0,+argument+1):elements.slice(+argument+1)},"eq":function(elements,argument,not){var elem=elements.splice(+argument,1);return not?elements:elem}}};Expr.setFilters.nth=Expr.setFilters.eq;Expr.filters=Expr.pseudos;if(!assertHrefNotNormalized){Expr.attrHandle={"href":function(elem){return elem.getAttribute("href",2)},"type":function(elem){return elem.getAttribute("type")}}}
if(assertUsableName){Expr.order.push("NAME");Expr.find.NAME=function(name,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name)}}}
if(assertUsableClassName){Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className)}}}
try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){var elem,results=[];for(;(elem=this[i]);i++){results.push(elem)}
return results}}
var isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":!1};var contains=Sizzle.contains=docElem.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:function(a,b){while((b=b.parentNode)){if(b===a){return!0}}
return!1};var getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}}else{for(;(node=elem[i]);i++){ret+=getText(node)}}
return ret};Sizzle.attr=function(elem,name){var attr,xml=isXML(elem);if(!xml){name=name.toLowerCase()}
if(Expr.attrHandle[name]){return Expr.attrHandle[name](elem)}
if(assertAttributes||xml){return elem.getAttribute(name)}
attr=elem.getAttributeNode(name);return attr?typeof elem[name]==="boolean"?elem[name]?name:null:attr.specified?attr.value:null:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};[0,0].sort(function(){return(baseHasDuplicate=0)});if(docElem.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=!0;return 0}
return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}}else{sortOrder=function(a,b){if(a===b){hasDuplicate=!0;return 0}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}
var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else if(!aup){return-1}else if(!bup){return 1}
while(cur){ap.unshift(cur);cur=cur.parentNode}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b){return ret}
var cur=a.nextSibling;while(cur){if(cur===b){return-1}
cur=cur.nextSibling}
return 1}}
Sizzle.uniqueSort=function(results){var elem,i=1;if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;(elem=results[i]);i++){if(elem===results[i-1]){results.splice(i--,1)}}}}
return results};function multipleContexts(selector,contexts,results,seed){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results,seed)}}
function handlePOSGroup(selector,posfilter,argument,contexts,seed,not){var results,fn=Expr.setFilters[posfilter.toLowerCase()];if(!fn){Sizzle.error(posfilter)}
if(selector||!(results=seed)){multipleContexts(selector||"*",contexts,(results=[]),seed)}
return results.length>0?fn(results,argument,not):[]}
function handlePOS(selector,context,results,seed,groups){var match,not,anchor,ret,elements,currentContexts,part,lastIndex,i=0,len=groups.length,rpos=matchExpr.POS,rposgroups=new RegExp("^"+rpos.source+"(?!"+whitespace+")","i"),setUndefined=function(){var i=1,len=arguments.length-2;for(;i<len;i++){if(arguments[i]===undefined){match[i]=undefined}}};for(;i<len;i++){rpos.exec("");selector=groups[i];ret=[];anchor=0;elements=seed;while((match=rpos.exec(selector))){lastIndex=rpos.lastIndex=match.index+match[0].length;if(lastIndex>anchor){part=selector.slice(anchor,match.index);anchor=lastIndex;currentContexts=[context];if(rcombinators.test(part)){if(elements){currentContexts=elements}
elements=seed}
if((not=rendsWithNot.test(part))){part=part.slice(0,-5).replace(rcombinators,"$&*")}
if(match.length>1){match[0].replace(rposgroups,setUndefined)}
elements=handlePOSGroup(part,match[1],match[2],currentContexts,elements,not)}}
if(elements){ret=ret.concat(elements);if((part=selector.slice(anchor))&&part!==")"){multipleContexts(part,ret,results,seed)}else{push.apply(results,ret)}}else{Sizzle(selector,context,results,seed)}}
return len===1?results:Sizzle.uniqueSort(results)}
function tokenize(selector,context,xml){var tokens,soFar,type,groups=[],i=0,match=rselector.exec(selector),matched=!match.pop()&&!match.pop(),selectorGroups=matched&&selector.match(rgroups)||[""],preFilters=Expr.preFilter,filters=Expr.filter,checkContext=!xml&&context!==document;for(;(soFar=selectorGroups[i])!=null&&matched;i++){groups.push(tokens=[]);if(checkContext){soFar=" "+soFar}
while(soFar){matched=!1;if((match=rcombinators.exec(soFar))){soFar=soFar.slice(match[0].length);matched=tokens.push({part:match.pop().replace(rtrim," "),captures:match})}
for(type in filters){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match,context,xml)))){soFar=soFar.slice(match.shift().length);matched=tokens.push({part:type,captures:match})}}
if(!matched){break}}}
if(!matched){Sizzle.error(selector)}
return groups}
function addCombinator(matcher,combinator,context){var dir=combinator.dir,doneName=done++;if(!matcher){matcher=function(elem){return elem===context}}
return combinator.first?function(elem,context){while((elem=elem[dir])){if(elem.nodeType===1){return matcher(elem,context)&&elem}}}:function(elem,context){var cache,dirkey=doneName+"."+dirruns,cachedkey=dirkey+"."+cachedruns;while((elem=elem[dir])){if(elem.nodeType===1){if((cache=elem[expando])===cachedkey){return!1}else if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem}}else{elem[expando]=cachedkey;if(matcher(elem,context)){elem.sizset=!0;return elem}
elem.sizset=!1}}}}}
function addMatcher(higher,deeper){return higher?function(elem,context){var result=deeper(elem,context);return result&&higher(result===!0?elem:result,context)}:deeper}
function matcherFromTokens(tokens,context,xml){var token,matcher,i=0;for(;(token=tokens[i]);i++){if(Expr.relative[token.part]){matcher=addCombinator(matcher,Expr.relative[token.part],context)}else{token.captures.push(context,xml);matcher=addMatcher(matcher,Expr.filter[token.part].apply(null,token.captures))}}
return matcher}
function matcherFromGroupMatchers(matchers){return function(elem,context){var matcher,j=0;for(;(matcher=matchers[j]);j++){if(matcher(elem,context)){return!0}}
return!1}}
var compile=Sizzle.compile=function(selector,context,xml){var tokens,group,i,cached=compilerCache[selector];if(cached&&cached.context===context){cached.dirruns++;return cached}
group=tokenize(selector,context,xml);for(i=0;(tokens=group[i]);i++){group[i]=matcherFromTokens(tokens,context,xml)}
cached=compilerCache[selector]=matcherFromGroupMatchers(group);cached.context=context;cached.runs=cached.dirruns=0;cachedSelectors.push(selector);if(cachedSelectors.length>Expr.cacheLength){delete compilerCache[cachedSelectors.shift()]}
return cached};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};var select=function(selector,context,results,seed,xml){selector=selector.replace(rtrim,"$1");var elements,matcher,i,len,elem,token,type,findContext,notTokens,match=selector.match(rgroups),tokens=selector.match(rtokens),contextNodeType=context.nodeType;if(matchExpr.POS.test(selector)){return handlePOS(selector,context,results,seed,match)}
if(seed){elements=slice.call(seed,0)}else if(match&&match.length===1){if(tokens.length>1&&contextNodeType===9&&!xml&&(match=matchExpr.ID.exec(tokens[0]))){context=Expr.find.ID(match[1],context,xml)[0];if(!context){return results}
selector=selector.slice(tokens.shift().length)}
findContext=((match=rsibling.exec(tokens[0]))&&!match.index&&context.parentNode)||context;notTokens=tokens.pop();token=notTokens.split(":not")[0];for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if((match=matchExpr[type].exec(token))){elements=Expr.find[type]((match[1]||"").replace(rbackslash,""),findContext,xml);if(elements==null){continue}
if(token===notTokens){selector=selector.slice(0,selector.length-notTokens.length)+token.replace(matchExpr[type],"");if(!selector){push.apply(results,slice.call(elements,0))}}
break}}}
if(selector){matcher=compile(selector,context,xml);dirruns=matcher.dirruns;if(elements==null){elements=Expr.find.TAG("*",(rsibling.test(selector)&&context.parentNode)||context)}
for(i=0;(elem=elements[i]);i++){cachedruns=matcher.runs++;if(matcher(elem,context)){results.push(elem)}}}
return results};if(document.querySelectorAll){(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')")}
div.innerHTML="<input type='hidden'>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(context.nodeType===9){try{push.apply(results,slice.call(context.querySelectorAll(selector),0));return results}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var old=context.getAttribute("id"),nid=old||expando,newContext=rsibling.test(selector)&&context.parentNode||context;if(old){nid=nid.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}
try{push.apply(results,slice.call(newContext.querySelectorAll(selector.replace(rgroups,"[id='"+nid+"'] $&")),0));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}
return oldSelect(selector,context,results,seed,xml)};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push(Expr.match.PSEUDO)}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}
return Sizzle(expr,null,null,[elem]).length>0}}})()}
if(typeof module==='object'&&module.exports){module.exports=Sizzle}else{window.Sizzle=Sizzle}})(window)},{}],794:[function(require,module,exports){'use strict';module.exports={DOMEmitter:require('./ac-dom-emitter/DOMEmitter')}},{"./ac-dom-emitter/DOMEmitter":795}],795:[function(require,module,exports){'use strict';var proto;var EventEmitter=require('ac-event-emitter').EventEmitter,ac_dom_events=require('ac-dom-events'),ac_dom_traversal=require('ac-dom-traversal');var internalEventPrefix='dom-emitter';function DOMEmitter(el){if(el===null){return}
this.el=el;this._bindings={};this._delegateFuncs={};this._eventEmitter=new EventEmitter()}
proto=DOMEmitter.prototype;proto._parseEventNames=function(evt){if(!evt){return[evt]}
return evt.split(' ')};proto._onListenerEvent=function(evtName,e){this.trigger(evtName,e,!1)};proto._setListener=function(evt){this._bindings[evt]=this._onListenerEvent.bind(this,evt);ac_dom_events.addEventListener(this.el,evt,this._bindings[evt])};proto._removeListener=function(evt){ac_dom_events.removeEventListener(this.el,evt,this._bindings[evt]);this._bindings[evt]=null};proto._triggerInternalEvent=function(evt,data){this.trigger(internalEventPrefix+':'+evt,data)};proto._normalizeArgumentsAndCall=function(argsArr,func){var binding={};if(argsArr.length===0){func.call(this,binding);return}
if(typeof argsArr[0]==='string'||argsArr[0]===null){argsArr=this._cleanStringData(argsArr);binding.events=argsArr[0];if(typeof argsArr[1]==='string'){binding.delegateQuery=argsArr[1];binding.callback=argsArr[2];binding.context=argsArr[3]}else{binding.callback=argsArr[1];binding.context=argsArr[2]}
func.call(this,binding);return}
var i,splits,splitChar=':',obj=argsArr[0];for(i in obj){if(obj.hasOwnProperty(i)){binding={};splits=this._cleanStringData(i.split(splitChar));binding.events=splits[0];binding.delegateQuery=splits[1];binding.callback=obj[i];binding.context=argsArr[1];func.call(this,binding)}}};proto._registerDelegateFunc=function(evt,delegateQuery,callback,unboundCallback,context){var delegateFunc=this._delegateFunc.bind(this,evt,delegateQuery,callback,context);this._delegateFuncs[delegateQuery]=this._delegateFuncs[delegateQuery]||{};this._delegateFuncs[delegateQuery][evt]=this._delegateFuncs[delegateQuery][evt]||[];this._delegateFuncs[delegateQuery][evt].push({func:unboundCallback,context:context,delegateFunc:delegateFunc});return delegateFunc};proto._cleanStringData=function(arr){var isString=!1;if(typeof arr==='string'){arr=[arr];isString=!0}
var result=[],i,val,valLen,spaceIdx,len=arr.length;for(i=0;i<len;i++){val=arr[i];if(typeof val==='string'){if(val===''||val===' '){continue}
valLen=val.length;while(val[0]===' '){val=val.slice(1,valLen);valLen--}
while(val[valLen-1]===' '){val=val.slice(0,valLen-1);valLen--}}
result.push(val)}
if(isString){return result[0]}
return result};proto._unregisterDelegateFunc=function(evt,delegateQuery,unboundCallback,context){if(!this._delegateFuncs[delegateQuery]||!this._delegateFuncs[delegateQuery][evt]){return}
var matchIdx=this._getDelegateFuncBindingIdx(evt,delegateQuery,unboundCallback,context),delegateFunc;if(matchIdx>-1){delegateFunc=this._delegateFuncs[delegateQuery][evt][matchIdx].delegateFunc;this._delegateFuncs[delegateQuery][evt].splice(matchIdx,1);if(this._delegateFuncs[delegateQuery][evt].length===0){this._delegateFuncs[delegateQuery][evt]=null}}
return delegateFunc};proto._unregisterDelegateFuncs=function(evt,delegateQuery){if(!this._delegateFuncs[delegateQuery]){return}
if(evt!==null&&!this._delegateFuncs[delegateQuery][evt]){return}
if(evt===null){var i;for(i in this._delegateFuncs[delegateQuery]){if(this._delegateFuncs[delegateQuery].hasOwnProperty(i)){this._unbindDelegateFunc(i,delegateQuery)}}
return}
this._unbindDelegateFunc(evt,delegateQuery)};proto._unbindDelegateFunc=function(evt,delegateQuery){var binding,preRemoveLen,i=0;while(this._delegateFuncs[delegateQuery][evt]&&this._delegateFuncs[delegateQuery][evt][i]){binding=this._delegateFuncs[delegateQuery][evt][i];preRemoveLen=this._delegateFuncs[delegateQuery][evt][i].length;this._off({events:evt,delegateQuery:delegateQuery,callback:binding.func,context:binding.context});if(this._delegateFuncs[delegateQuery][evt]&&preRemoveLen===this._delegateFuncs[delegateQuery][evt].length){i++}}
binding=preRemoveLen=null};proto._unregisterDelegateFuncsByEvent=function(evt){var i;for(i in this._delegateFuncs){if(this._delegateFuncs.hasOwnProperty(i)){this._unregisterDelegateFuncs(evt,i)}}};proto._delegateFunc=function(evt,delegateQuery,callback,context,e){if(ac_dom_traversal.matchesSelector(ac_dom_events.target(e),delegateQuery)){var args=Array.prototype.slice.call(arguments,0),unboundArgs=args.slice(4,args.length);context=context||window;if(typeof e.detail==='object'){unboundArgs[0]=e.detail}
callback.call(context,unboundArgs)}};proto.on=function(){this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._on);return this};proto.once=function(){this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._once);return this};proto.off=function(){this._normalizeArgumentsAndCall(Array.prototype.slice.call(arguments,0),this._off);return this};proto._on=function(binding){var evts=binding.events,callback=binding.callback,delegateQuery=binding.delegateQuery,context=binding.context,unboundCallback=binding.unboundCallback||callback;evts=this._parseEventNames(evts);evts.forEach(function(callback,unboundCallback,context,delegateQuery,evt){if(!this.has(evt)){this._setListener(evt)}
if(typeof delegateQuery==='string'){callback=this._registerDelegateFunc(evt,delegateQuery,callback,unboundCallback,context)}
this._triggerInternalEvent('willon',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery});this._eventEmitter.on(evt,callback,context);this._triggerInternalEvent('didon',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery})}.bind(this,callback,unboundCallback,context,delegateQuery));evts=callback=unboundCallback=delegateQuery=context=null};proto._off=function(binding){var evts=binding.events,callback=binding.callback,delegateQuery=binding.delegateQuery,context=binding.context,unboundCallback=binding.unboundCallback||callback;if(typeof evts==='undefined'){this._eventEmitter.off();var i;for(i in this._bindings){if(this._bindings.hasOwnProperty(i)){this._removeListener(i)}}
for(i in this._delegateFuncs){if(this._delegateFuncs.hasOwnProperty(i)){this._delegateFuncs[i]=null}}
return}
evts=this._parseEventNames(evts);evts.forEach(function(callback,unboundCallback,context,delegateQuery,evt){if(typeof delegateQuery==='string'&&typeof unboundCallback==='function'){callback=this._unregisterDelegateFunc(evt,delegateQuery,unboundCallback,context);if(!callback){return}}
if(typeof delegateQuery==='string'&&typeof callback==='undefined'){this._unregisterDelegateFuncs(evt,delegateQuery);return}
if(typeof evt==='string'&&typeof callback==='undefined'){this._unregisterDelegateFuncsByEvent(evt);if(typeof delegateQuery==='string'){return}}
this._triggerInternalEvent('willoff',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery});this._eventEmitter.off(evt,callback,context);this._triggerInternalEvent('didoff',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery});if(!this.has(evt)){this._removeListener(evt)}}.bind(this,callback,unboundCallback,context,delegateQuery));evts=callback=unboundCallback=delegateQuery=context=null};proto._once=function(binding){var evts=binding.events,callback=binding.callback,delegateQuery=binding.delegateQuery,context=binding.context;evts=this._parseEventNames(evts);evts.forEach(function(callback,context,delegateQuery,evt){if(typeof delegateQuery==='string'){return this._handleDelegateOnce(evt,callback,context,delegateQuery)}
if(!this.has(evt)){this._setListener(evt)}
this._triggerInternalEvent('willonce',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery});this._eventEmitter.once.call(this,evt,callback,context);this._triggerInternalEvent('didonce',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery})}.bind(this,callback,context,delegateQuery));evts=callback=delegateQuery=context=null};proto._handleDelegateOnce=function(evt,callback,context,delegateQuery){this._triggerInternalEvent('willonce',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery});this._on({events:evt,context:context,delegateQuery:delegateQuery,callback:this._getDelegateOnceCallback.bind(this,evt,callback,context,delegateQuery),unboundCallback:callback});this._triggerInternalEvent('didonce',{evt:evt,callback:callback,context:context,delegateQuery:delegateQuery});return this};proto._getDelegateOnceCallback=function(evt,callback,context,delegateQuery){var args=Array.prototype.slice.call(arguments,0),passedArgs=args.slice(4,args.length);callback.apply(context,passedArgs);this._off({events:evt,delegateQuery:delegateQuery,callback:callback,context:context})};proto._getDelegateFuncBindingIdx=function(evt,delegateQuery,unboundCallback,context,ignoreFuncMatch){var idx=-1;if(this._delegateFuncs[delegateQuery]&&this._delegateFuncs[delegateQuery][evt]){var i,bindingObj,len=this._delegateFuncs[delegateQuery][evt].length;for(i=0;i<len;i++){bindingObj=this._delegateFuncs[delegateQuery][evt][i];if(ignoreFuncMatch&&typeof unboundCallback==='undefined'){unboundCallback=bindingObj.func}
if(bindingObj.func===unboundCallback&&bindingObj.context===context){idx=i;break}}}
return idx};proto._triggerDelegateEvents=function(evt,delegateQuery,data){var targets=ac_dom_traversal.querySelectorAll(delegateQuery,this.el);var i,target,len=targets.length;for(i=0;i<len;i++){target=targets[i];if(document.createEvent){target.dispatchEvent(new CustomEvent(evt,{bubbles:!0,cancelable:!1,detail:data}))}else{var eventObject=document.createEventObject();eventObject.detail=data;target.fireEvent('on'+evt,eventObject)}
return target}};proto.has=function(evt,callbackOrDelegateQuery,callbackOrContext,context){var delegateQuery,callback;if(typeof callbackOrDelegateQuery==='string'){delegateQuery=callbackOrDelegateQuery;callback=callbackOrContext}else{callback=callbackOrDelegateQuery;context=callbackOrContext}
if(delegateQuery){var matchIdx=this._getDelegateFuncBindingIdx(evt,delegateQuery,callback,context,!0);if(matchIdx>-1){return!0}
return!1}
if(this._eventEmitter&&this._eventEmitter.has.apply(this._eventEmitter,arguments)){return!0}
return!1};proto.trigger=function(evts,dataOrDelegateQuery,doNotPropogateOrData,doNotPropogate){evts=this._parseEventNames(evts);var delegateQuery,data;if(typeof dataOrDelegateQuery==='string'){delegateQuery=this._cleanStringData(dataOrDelegateQuery);data=doNotPropogateOrData}else{data=dataOrDelegateQuery;doNotPropogate=doNotPropogateOrData}
evts=this._cleanStringData(evts);evts.forEach(function(delegateQuery,data,doNotPropogate,evt){if(delegateQuery){this._triggerDelegateEvents(evt,delegateQuery,data);return}
this._eventEmitter.trigger(evt,data,doNotPropogate)}.bind(this,delegateQuery,data,doNotPropogate));return this};proto.propagateTo=function(eventEmitter,prefix){this._eventEmitter.propagateTo(eventEmitter,prefix);return this};proto.stopPropagatingTo=function(eventEmitter){this._eventEmitter.stopPropagatingTo(eventEmitter);return this};proto.destroy=function(){this._triggerInternalEvent('willdestroy');this.off();this.el=this._eventEmitter=this._bindings=this._delegateFuncs=null};module.exports=DOMEmitter},{"ac-dom-events":774,"ac-dom-traversal":775,"ac-event-emitter":832}],796:[function(require,module,exports){'use strict';module.exports={SharedInstance:require('./ac-shared-instance/SharedInstance')}},{"./ac-shared-instance/SharedInstance":797}],797:[function(require,module,exports){'use strict';var instanceScope=window,instanceSharedInstanceNamespace='AC',instanceExportKey='SharedInstance',instanceTarget=instanceScope[instanceSharedInstanceNamespace];var SharedInstance=(function(){var registry={};return{get:function(name,version){var module=null;if(registry[name]&&registry[name][version]){module=registry[name][version]}
return module},set:function(name,version,Module){if(!registry[name]){registry[name]={}}
if(typeof Module==='function'){registry[name][version]=new Module()}else{registry[name][version]=Module}
return registry[name][version]},share:function(name,version,Module){var module=this.get(name,version);if(!module){module=this.set(name,version,Module)}
return module},remove:function(name,version){var versionType=typeof version;if(versionType==='string'||versionType==='number'){if(!registry[name]||!registry[name][version]){return}
registry[name][version]=null;return}
if(registry[name]){registry[name]=null}}}}());if(!instanceTarget){instanceTarget=instanceScope[instanceSharedInstanceNamespace]={}}
if(!instanceTarget[instanceExportKey]){instanceTarget[instanceExportKey]=SharedInstance}
module.exports=instanceTarget[instanceExportKey]},{}],798:[function(require,module,exports){'use strict';module.exports={WindowDelegate:require('./ac-window-delegate/WindowDelegate'),WindowDelegateOptimizer:require('./ac-window-delegate/WindowDelegateOptimizer'),WindowDelegateCustomEvent:require('./ac-window-delegate/WindowDelegateCustomEvent')}},{"./ac-window-delegate/WindowDelegate":801,"./ac-window-delegate/WindowDelegateCustomEvent":802,"./ac-window-delegate/WindowDelegateOptimizer":803}],799:[function(require,module,exports){'use strict';var EventEmitter=require('ac-event-emitter').EventEmitter;var CustomEventController=function(){this._emitter=new EventEmitter();this._customEvents={}};var proto=CustomEventController.prototype;proto.on=function(evts,callback,context){this._activateCustomEvents(evts);this._emitterOn.apply(this,arguments);return this};proto.once=function(evts,callback,context){this._emitterOnce.apply(this,arguments);return this};proto.off=function(evts,callback,context){this._emitterOff.apply(this,arguments);this._deactivateCustomEvents(evts);return this};proto.has=function(evt,callback,context){return this._emitter.has.apply(this._emitter,arguments)};proto.trigger=function(){this._emitter.trigger.apply(this._emitter,arguments);return this};proto.propagateTo=function(){this._emitter.propagateTo.apply(this._emitter,arguments);return this};proto.stopPropagatingTo=function(){this._emitter.stopPropagatingTo.apply(this._emitter,arguments);return this};proto.add=function(customEvent){this._customEvents[customEvent.name]=customEvent};proto.canHandleCustomEvent=function(evt){return this._customEvents.hasOwnProperty(evt)};proto.isHandlingCustomEvent=function(evt){if(this._customEvents[evt]&&this._customEvents[evt].active){return!0}
return!1};proto._activateCustomEvents=function(evts){var evtsArr=evts.split(' '),evt,i,len=evtsArr.length;for(i=0;i<len;i++){evt=evtsArr[i];if(this._customEvents[evt]&&!this._customEvents[evt].active){this._customEvents[evt].initialize();this._customEvents[evt].active=!0}}};proto._deactivateCustomEvents=function(evts){var i;if(!evts||evts.length===0){for(i in this._customEvents){if(this._customEvents.hasOwnProperty(i)){this._deactivateCustomEvent(i)}}
return}
var evtsArr=evts.split(' '),len=evtsArr.length;for(i=0;i<len;i++){this._deactivateCustomEvent(evtsArr[i])}};proto._deactivateCustomEvent=function(evt){if(!this.has(evt)&&this._customEvents[evt]&&this._customEvents[evt].active){this._customEvents[evt].deinitialize();this._customEvents[evt].active=!1}};proto._emitterOn=function(){this._emitter.on.apply(this._emitter,arguments)};proto._emitterOnce=function(){this._emitter.once.apply(this._emitter,arguments)};proto._emitterOff=function(){this._emitter.off.apply(this._emitter,arguments)};module.exports=CustomEventController},{"ac-event-emitter":832}],800:[function(require,module,exports){'use strict';var EventEmitter=require('ac-event-emitter').EventEmitter;var proto;var OptimizerController=function(optimizers){EventEmitter.call(this);this.optimizers=optimizers;this._events={};this._properties={};this._initialize()};proto=OptimizerController.prototype=new EventEmitter(null);proto.canOptimizeEvent=function(evt){return this._events.hasOwnProperty(evt)};proto.canOptimizeProperty=function(prop){return this._properties.hasOwnProperty(prop)};proto.isOptimizingEvent=function(evt){if(this._events[evt]&&this._events[evt].active){return!0}
return!1};proto.isOptimizingProperty=function(prop){if(this._properties[prop]&&this._properties[prop].active){return!0}
return!1};proto.add=function(optimizer){this._setOptimizerEvents(optimizer);this._setOptimizerProperties(optimizer);optimizer.on('update',this._onUpdate,this);optimizer.on('activate',this._onActivate,this);optimizer.on('deactivate',this._onDeactivate,this)};proto.get=function(prop){if(this.isOptimizingProperty(prop)){return this._properties[prop].value}
return null};proto.set=function(prop,val){if(!this._properties[prop]){return!1}
this._properties[prop].value=val;return this};proto.getOptimizerByEvent=function(evt){if(this._events[evt]){return this._events[evt]}
return null};proto._initialize=function(){var i,optimizer;for(i in this.optimizers){if(this.optimizers.hasOwnProperty(i)){this.add(this.optimizers[i])}}};proto._onUpdate=function(e){this.set(e.prop,e.val)};proto._onActivate=function(optimizer){var propertyNames=optimizer.propertyNames,i,len=propertyNames.length;for(i=0;i<len;i++){this._properties[propertyNames[i]].active=!0}};proto._onDeactivate=function(optimizer){var propertyNames=optimizer.propertyNames,i,len=propertyNames.length;for(i=0;i<len;i++){this._properties[propertyNames[i]].active=!1}};proto._setOptimizerEvents=function(optimizer){var i,optimizerEvents=optimizer.eventNames,len=optimizerEvents.length;for(i=0;i<len;i++){this._setOptimizerEvent(optimizerEvents[i],optimizer)}};proto._setOptimizerEvent=function(evt,optimizer){if(this._events[evt]){return}
this._events[evt]=optimizer};proto._setOptimizerProperties=function(optimizer){var i,optimizeProperties=optimizer.propertyNames,len=optimizeProperties.length;for(i=0;i<len;i++){this._setOptimizerProperty(optimizeProperties[i])}};proto._setOptimizerProperty=function(prop){if(this._properties.hasOwnProperty(prop)){return}
this._properties[prop]={};this._properties[prop].active=!1;this._properties[prop].value=null};module.exports=OptimizerController},{"ac-event-emitter":832}],801:[function(require,module,exports){'use strict';var proto;var SharedInstance=require('ac-shared-instance').SharedInstance,DOMEmitter=require('ac-dom-emitter').DOMEmitter,OptimizerController=require('./OptimizerController'),CustomEventController=require('./CustomEventController'),queries=require('./queries/queries'),optimizers=require('./optimizers/optimizers');var sharedInstanceName='ac-window-delegate:WindowDelegate',sharedInstanceVersion='2.0.1';function WindowDelegate(){this._emitter=new DOMEmitter(window);this._controllers={optimizer:new OptimizerController(optimizers),customEvent:new CustomEventController()};var i;for(i in queries){if(queries.hasOwnProperty(i)){this[i]=this._getProperty.bind(this,i);queries[i]=queries[i].bind(this)}}
this._bindEvents()}
proto=WindowDelegate.prototype;proto.on=function(evts,callback,context){var evtsObj=this._seperateCustomEvents(evts);this._optimizeEvents(evtsObj.standardEvents);this._customEventOn(evtsObj.customEvents,callback,context);this._emitterOn.apply(this,arguments);return this};proto.once=function(evts,callback,context){var evtsObj=this._seperateCustomEvents(evts);this._optimizeEvents(evtsObj.standardEvents);this._customEventOnce(evtsObj.customEvents,callback,context);this._emitterOnce.apply(this,arguments);return this};proto.off=function(evts,callback,context){var evtsObj=this._seperateCustomEvents(evts),force=!1;if(!evts){force=!0}
this._customEventOff(evtsObj.customEvents,callback,context,force);this._emitterOff.apply(this,arguments);if(force){try{var evt;for(evt in this._controllers.optimizer._events){if(this._controllers.optimizer._events.hasOwnProperty(evt)&&this._shouldDeoptimizeEvent(evt,!0)){this._deoptimizeEvent(evt)}}
this._bindEvents()}catch(e){}}
return this};proto.has=function(evt,callback,context){return this._emitter.has.apply(this._emitter,arguments)};proto.trigger=function(){this._emitter.trigger.apply(this._emitter,arguments);return this};proto.propagateTo=function(){this._emitter.propagateTo.apply(this._emitter,arguments);return this};proto.stopPropagatingTo=function(){this._emitter.stopPropagatingTo.apply(this._emitter,arguments);return this};proto.addOptimizer=function(optimizer){this._controllers.optimizer.add(optimizer);return this};proto.addCustomEvent=function(customEvent){this._controllers.customEvent.add(customEvent);return this};proto._emitterOn=function(){this._emitter.on.apply(this._emitter,arguments)};proto._emitterOnce=function(){this._emitter.once.apply(this._emitter,arguments)};proto._emitterOff=function(){this._emitter.off.apply(this._emitter,arguments)};proto._onEventUnbound=function(e){var evt=e.evt;if(this._shouldDeoptimizeEvent(evt)){this._deoptimizeEvent(evt)}};proto._customEventOn=function(evtsArr,callback,context){if(evtsArr.length===0){return}
this._controllers.customEvent.on(evtsArr.join(' '),callback,context)};proto._customEventOnce=function(evtsArr,callback,context){if(evtsArr.length===0){return}
this._controllers.customEvent.once(evtsArr.join(' '),callback,context)};proto._customEventOff=function(evtsArr,callback,context,force){if(!force&&evtsArr.length===0){return}
if(force&&evtsArr.length===0){this._controllers.customEvent.off();return}
this._controllers.customEvent.off(evtsArr.join(' '),callback,context)};proto._getProperty=function(prop,forceQuery){var value=null;if(!forceQuery){value=this._getOptimizedValue(prop)}
if(value===null){value=queries[prop].call(this,forceQuery)}
return value};proto._optimizeEvents=function(evts){var evt,i,len=evts.length;for(i=0;i<len;i++){evt=evts[i];if(this._shouldOptimizeEvent(evt)){this._optimizeEvent(evt)}}};proto._shouldOptimizeEvent=function(evt){if(this._controllers.optimizer.canOptimizeEvent(evt)&&!this._controllers.optimizer.isOptimizingEvent(evt)){return!0}
return!1};proto._shouldDeoptimizeEvent=function(evt,force){if(this._controllers.optimizer.isOptimizingEvent(evt)&&(force||this._emitter._eventEmitter._events[evt].length<=1)){return!0}
return!1};proto._optimizeEvent=function(evt){var optimizer=this._controllers.optimizer.getOptimizerByEvent(evt);optimizer.activate();this._emitterOn(evt,optimizer.callback,optimizer)};proto._deoptimizeEvent=function(evt){var optimizer=this._controllers.optimizer.getOptimizerByEvent(evt);optimizer.deactivate();this._emitterOff(evt,optimizer.callback,optimizer)};proto._getOptimizedValue=function(prop){return this._controllers.optimizer.get(prop)};proto._seperateCustomEvents=function(evtString){var result={customEvents:[],standardEvents:[]};if(typeof evtString==='string'){var evtsArray=evtString.split(' '),evt,i,len=evtsArray.length;for(i=0;i<len;i++){evt=evtsArray[i];if(this._controllers.customEvent.canHandleCustomEvent(evt)){result.customEvents.push(evt)}else{result.standardEvents.push(evt)}}}
return result};proto._bindEvents=function(){this._emitter.on('dom-emitter:didoff',this._onEventUnbound,this)};module.exports=SharedInstance.share(sharedInstanceName,sharedInstanceVersion,WindowDelegate)},{"./CustomEventController":799,"./OptimizerController":800,"./optimizers/optimizers":806,"./queries/queries":815,"ac-dom-emitter":794,"ac-shared-instance":796}],802:[function(require,module,exports){'use strict';var EventEmitter=require('ac-event-emitter').EventEmitter;function WindowDelegateCustomEvent(name,initializeFunc,deinitializeFunc){EventEmitter.call(this);this.name=name;this.active=!1;this._initializeFunc=initializeFunc;this._deinitializeFunc=deinitializeFunc}
var proto=WindowDelegateCustomEvent.prototype=new EventEmitter(null);proto.initialize=function(){if(this._initializeFunc){this._initializeFunc()}
return this};proto.deinitialize=function(){if(this._deinitializeFunc){this._deinitializeFunc()}
return this};module.exports=WindowDelegateCustomEvent},{"ac-event-emitter":832}],803:[function(require,module,exports){'use strict';var EventEmitter=require('ac-event-emitter').EventEmitter;function WindowDelegateOptimizer(config,callback){EventEmitter.call(this);this.active=!1;this.eventNames=config.eventNames;this.propertyNames=config.propertyNames;this.options=config.options||{};this.callback=callback}
var proto=WindowDelegateOptimizer.prototype=new EventEmitter(null);proto.update=function(prop,val){this.trigger('update',{prop:prop,val:val})};proto.activate=function(){this.active=!0;this.trigger('activate',this)};proto.deactivate=function(){this.active=!1;this.trigger('deactivate',this)};module.exports=WindowDelegateOptimizer},{"ac-event-emitter":832}],804:[function(require,module,exports){'use strict';var Optimizer=require('../../WindowDelegateOptimizer'),queries=require('../../queries/queries');var config={eventNames:['resize'],propertyNames:['clientWidth','clientHeight','innerWidth','innerHeight']};var resizeOptimizer=new Optimizer(config,function(e){var i,propertyNames=config.propertyNames,len=propertyNames.length;for(i=0;i<len;i++){this.update(propertyNames[i],queries[propertyNames[i]](!0))}});module.exports=resizeOptimizer},{"../../WindowDelegateOptimizer":803,"../../queries/queries":815}],805:[function(require,module,exports){'use strict';var Optimizer=require('../../WindowDelegateOptimizer'),queries=require('../../queries/queries');var config={eventNames:['scroll'],propertyNames:['scrollX','scrollY','maxScrollX','maxScrollY']};var scrollOptimizer=new Optimizer(config,function(e){var i,propertyNames=config.propertyNames,len=propertyNames.length;for(i=0;i<len;i++){this.update(propertyNames[i],queries[propertyNames[i]](!0))}});module.exports=scrollOptimizer},{"../../WindowDelegateOptimizer":803,"../../queries/queries":815}],806:[function(require,module,exports){'use strict';var resizeEvt=require('./events/resize'),scrollEvt=require('./events/scroll');module.exports=[resizeEvt,scrollEvt]},{"./events/resize":804,"./events/scroll":805}],807:[function(require,module,exports){'use strict';var queryClientHeight=function(forceQuery){return document.documentElement.clientHeight};module.exports=queryClientHeight},{}],808:[function(require,module,exports){'use strict';var queryClientWidth=function(forceQuery){return document.documentElement.clientWidth};module.exports=queryClientWidth},{}],809:[function(require,module,exports){'use strict';var queryInnerHeight=function(forceQuery){return window.innerHeight||this.clientHeight(forceQuery)};module.exports=queryInnerHeight},{}],810:[function(require,module,exports){'use strict';var queryInnerWidth=function(forceQuery){return window.innerWidth||this.clientWidth(forceQuery)};module.exports=queryInnerWidth},{}],811:[function(require,module,exports){'use strict';var queryMaxScrollX=function(forceQuery){return document.body.scrollWidth-this.innerWidth()};module.exports=queryMaxScrollX},{}],812:[function(require,module,exports){'use strict';var queryMaxScrollY=function(forceQuery){return document.body.scrollHeight-this.innerHeight()};module.exports=queryMaxScrollY},{}],813:[function(require,module,exports){'use strict';var queryScrollX=function(forceQuery){var offset=window.pageXOffset;if(!offset){var target=document.documentElement||document.body.parentNode||document.body;offset=target.scrollLeft}
return offset};module.exports=queryScrollX},{}],814:[function(require,module,exports){'use strict';var queryScrollY=function(forceQuery){var offset=window.pageYOffset;if(!offset){var target=document.documentElement||document.body.parentNode||document.body;offset=target.scrollTop}
return offset};module.exports=queryScrollY},{}],815:[function(require,module,exports){'use strict';var queryInnerWidth=require('./methods/innerWidth'),queryInnerHeight=require('./methods/innerHeight'),queryClientWidth=require('./methods/clientWidth'),queryClientHeight=require('./methods/clientHeight'),queryScrollX=require('./methods/scrollX'),queryScrollY=require('./methods/scrollY'),queryMaxScrollX=require('./methods/maxScrollX'),queryMaxScrollY=require('./methods/maxScrollY');module.exports={innerWidth:queryInnerWidth,innerHeight:queryInnerHeight,clientWidth:queryClientWidth,clientHeight:queryClientHeight,scrollX:queryScrollX,scrollY:queryScrollY,maxScrollX:queryMaxScrollX,maxScrollY:queryMaxScrollY}},{"./methods/clientHeight":807,"./methods/clientWidth":808,"./methods/innerHeight":809,"./methods/innerWidth":810,"./methods/maxScrollX":811,"./methods/maxScrollY":812,"./methods/scrollX":813,"./methods/scrollY":814}],816:[function(require,module,exports){var ElementTracker=require('./ac-element-tracker/ElementTracker');module.exports=new ElementTracker();module.exports.ElementTracker=ElementTracker},{"./ac-element-tracker/ElementTracker":817}],817:[function(require,module,exports){'use strict';var proto;var ac_Object=require('ac-object');var ac_dom_nodes=require('ac-dom-nodes');var ac_dom_metrics=require('ac-dom-metrics');var ac_Array=require('ac-array');var windowDelegate=require('ac-window-delegate').WindowDelegate;var TrackedElement=require('./TrackedElement');var EventEmitter=require('ac-event-emitter').EventEmitter;var defaultOptions={autoStart:!1};function ElementTracker(elements,options){this.options=ac_Object.clone(defaultOptions);this.options=typeof options==='object'?ac_Object.extend(this.options,options):this.options;this.windowDelegate=windowDelegate;this.tracking=!1;this.elements=[];if(elements&&(Array.isArray(elements)||ac_dom_nodes.isNodeList(elements)||ac_dom_nodes.isElement(elements))){this.addElements(elements)}
if(this.options.autoStart){this.start()}}
proto=ElementTracker.prototype=ac_Object.create(EventEmitter.prototype);var nodelistToStringPattern=/^\[object (HTMLCollection|NodeList|Object)\]$/;proto._registerElements=function(elements){elements=[].concat(elements);elements.forEach(function(element){if(this._elementInDOM(element)){var trackedElement=new TrackedElement(element);trackedElement.offsetTop=trackedElement.element.offsetTop;this.elements.push(trackedElement)}},this)};proto._registerTrackedElements=function(trackedElements){var objects=[].concat(trackedElements);objects.forEach(function(object){if(this._elementInDOM(object.element)){object.offsetTop=object.element.offsetTop;this.elements.push(object)}},this)};proto._elementInDOM=function(element){var assertion=!1;var body=document.getElementsByTagName('body')[0];if(ac_dom_nodes.isElement(element)&&body.contains(element)){assertion=!0}
return assertion};proto._onVPChange=function(){this.elements.forEach(function(elementObj){this.refreshElementState(elementObj)},this)};proto._elementPercentInView=function(elementObj){return elementObj.pixelsInView/elementObj.height};proto._elementPixelsInView=function(elementObj){var pixels=0;var top=elementObj.top;var bottom=elementObj.bottom;var winHeight=this.windowDelegate.innerHeight();if(top<=0&&bottom>=winHeight){pixels=winHeight}else if(top>=0&&top<winHeight&&bottom>winHeight){pixels=winHeight-top}else if(top<0&&(bottom<winHeight&&bottom>=0)){pixels=elementObj.bottom}else if(top>=0&&bottom<=winHeight){pixels=elementObj.height}
return pixels};proto._ifInView=function(trackedElement,alreadyInView){if(!alreadyInView){trackedElement.trigger('enterview',trackedElement)}};proto._ifAlreadyInView=function(trackedElement){if(!trackedElement.inView){trackedElement.trigger('exitview',trackedElement)}};proto.addElements=function(collection){collection=ac_dom_nodes.isNodeList(collection)?ac_Array.toArray(collection):[].concat(collection);collection.forEach(function(element){this.addElement(element)},this)};proto.addElement=function(element){var trackedElement;if(ac_dom_nodes.isElement(element)){trackedElement=new TrackedElement(element);this._registerTrackedElements(trackedElement)}
return trackedElement};proto.removeElement=function(element){var indexes=[];var filtered;this.elements.forEach(function(elementObj,i){if(elementObj===element||elementObj.element===element){indexes.push(i)}});filtered=this.elements.filter(function(element,i){return indexes.indexOf(i)<0?!0:!1});this.elements=filtered};proto.stop=function(){if(this.tracking===!0){this.tracking=!1;this.windowDelegate.off('scroll resize orientationchange',this._onVPChange,this)}};proto.start=function(){if(this.tracking===!1){this.tracking=!0;this.windowDelegate.on('scroll resize orientationchange',this._onVPChange,this);this.refreshAllElementStates()}};proto.refreshAllElementStates=function(){this.elements.forEach(function(trackedElement){this.refreshElementState(trackedElement)},this)};proto.refreshElementState=function(trackedElement){var box=ac_dom_metrics.getBoundingBox(trackedElement.element);var alreadyInView=trackedElement.inView;trackedElement=ac_Object.extend(trackedElement,box);trackedElement.pixelsInView=this._elementPixelsInView(trackedElement);trackedElement.percentInView=this._elementPercentInView(trackedElement);trackedElement.inView=trackedElement.pixelsInView>0;if(trackedElement.inView){this._ifInView(trackedElement,alreadyInView)}
if(alreadyInView){this._ifAlreadyInView(trackedElement)}
return trackedElement};module.exports=ElementTracker},{"./TrackedElement":818,"ac-array":730,"ac-dom-metrics":742,"ac-dom-nodes":753,"ac-event-emitter":832,"ac-object":820,"ac-window-delegate":798}],818:[function(require,module,exports){'use strict';var proto;var DOMEmitter=require('ac-dom-emitter').DOMEmitter;var ac_dom_nodes=require('ac-dom-nodes');var ac_Object=require('ac-object');function TrackedElement(element){if(ac_dom_nodes.isElement(element)){this.element=element}else{throw new TypeError('TrackedElement: '+element+' is not a valid DOM element')}
this.inView=!1;this.percentInView=0;this.pixelsInView=0;this.offsetTop=0;this.top=0;this.right=0;this.bottom=0;this.left=0;this.width=0;this.height=0;DOMEmitter.call(this,element)}
proto=TrackedElement.prototype=ac_Object.create(DOMEmitter.prototype);module.exports=TrackedElement},{"ac-dom-emitter":737,"ac-dom-nodes":753,"ac-object":820}],819:[function(require,module,exports){var toString=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var indexOf=typeof Array.prototype.indexOf==='function'?function(arr,el){return arr.indexOf(el)}:function(arr,el){for(var i=0;i<arr.length;i++){if(arr[i]===el)return i}
return-1};var isArray=Array.isArray||function(arr){return toString.call(arr)=='[object Array]'};var objectKeys=Object.keys||function(obj){var ret=[];for(var key in obj){if(obj.hasOwnProperty(key)){ret.push(key)}}
return ret};var forEach=typeof Array.prototype.forEach==='function'?function(arr,fn){return arr.forEach(fn)}:function(arr,fn){for(var i=0;i<arr.length;i++)fn(arr[i]);};var reduce=function(arr,fn,initial){if(typeof arr.reduce==='function')return arr.reduce(fn,initial);var res=initial;for(var i=0;i<arr.length;i++)res=fn(res,arr[i]);return res};var isint=/^[0-9]+$/;function promote(parent,key){if(parent[key].length==0)return parent[key]={}
var t={};for(var i in parent[key]){if(hasOwnProperty.call(parent[key],i)){t[i]=parent[key][i]}}
parent[key]=t;return t}
function parse(parts,parent,key,val){var part=parts.shift();if(hasOwnProperty.call(Object.prototype,key))return;if(!part){if(isArray(parent[key])){parent[key].push(val)}else if('object'==typeof parent[key]){parent[key]=val}else if('undefined'==typeof parent[key]){parent[key]=val}else{parent[key]=[parent[key],val]}}else{var obj=parent[key]=parent[key]||[];if(']'==part){if(isArray(obj)){if(''!=val)obj.push(val)}else if('object'==typeof obj){obj[objectKeys(obj).length]=val}else{obj=parent[key]=[parent[key],val]}}else if(~indexOf(part,']')){part=part.substr(0,part.length-1);if(!isint.test(part)&&isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val)}else{if(!isint.test(part)&&isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val)}}}
function merge(parent,key,val){if(~indexOf(key,']')){var parts=key.split('['),len=parts.length,last=len-1;parse(parts,parent,'base',val)}else{if(!isint.test(key)&&isArray(parent.base)){var t={};for(var k in parent.base)t[k]=parent.base[k];parent.base=t}
set(parent.base,key,val);}
return parent}
function compact(obj){if('object'!=typeof obj)return obj;if(isArray(obj)){var ret=[];for(var i in obj){if(hasOwnProperty.call(obj,i)){ret.push(obj[i])}}
return ret}
for(var key in obj){obj[key]=compact(obj[key])}
return obj}
function parseObject(obj){var ret={base:{}};forEach(objectKeys(obj),function(name){merge(ret,name,obj[name])});return compact(ret.base)}
function parseString(str){var ret=reduce(String(str).split('&'),function(ret,pair){var eql=indexOf(pair,'='),brace=lastBraceInKey(pair),key=pair.substr(0,brace||eql),val=pair.substr(brace||eql,pair.length),val=val.substr(indexOf(val,'=')+1,val.length);if(''==key)key=pair,val='';if(''==key)return ret;return merge(ret,decode(key),decode(val))},{base:{}}).base;return compact(ret)}
exports.parse=function(str){if(null==str||''==str)return{};return'object'==typeof str?parseObject(str):parseString(str)};var stringify=exports.stringify=function(obj,prefix){if(isArray(obj)){return stringifyArray(obj,prefix)}else if('[object Object]'==toString.call(obj)){return stringifyObject(obj,prefix)}else if('string'==typeof obj){return stringifyString(obj,prefix)}else{return prefix+'='+encodeURIComponent(String(obj))}};function stringifyString(str,prefix){if(!prefix)throw new TypeError('stringify expects an object');return prefix+'='+encodeURIComponent(str)}
function stringifyArray(arr,prefix){var ret=[];if(!prefix)throw new TypeError('stringify expects an object');for(var i=0;i<arr.length;i++){ret.push(stringify(arr[i],prefix+'['+i+']'))}
return ret.join('&')}
function stringifyObject(obj,prefix){var ret=[],keys=objectKeys(obj),key;for(var i=0,len=keys.length;i<len;++i){key=keys[i];if(''==key)continue;if(null==obj[key]){ret.push(encodeURIComponent(key)+'=')}else{ret.push(stringify(obj[key],prefix?prefix+'['+encodeURIComponent(key)+']':encodeURIComponent(key)))}}
return ret.join('&')}
function set(obj,key,val){var v=obj[key];if(hasOwnProperty.call(Object.prototype,key))return;if(undefined===v){obj[key]=val}else if(isArray(v)){v.push(val)}else{obj[key]=[v,val]}}
function lastBraceInKey(str){var len=str.length,brace,c;for(var i=0;i<len;++i){c=str[i];if(']'==c)brace=!1;if('['==c)brace=!0;if('='==c&&!brace)return i}}
function decode(str){try{return decodeURIComponent(str.replace(/\+/g,' '))}catch(err){return str}}},{}],820:[function(require,module,exports){'use strict';module.exports={clone:require('./ac-object/clone'),create:require('./ac-object/create'),defaults:require('./ac-object/defaults'),extend:require('./ac-object/extend'),getPrototypeOf:require('./ac-object/getPrototypeOf'),isDate:require('./ac-object/isDate'),isEmpty:require('./ac-object/isEmpty'),isRegExp:require('./ac-object/isRegExp'),toQueryParameters:require('./ac-object/toQueryParameters')}},{"./ac-object/clone":821,"./ac-object/create":822,"./ac-object/defaults":823,"./ac-object/extend":824,"./ac-object/getPrototypeOf":825,"./ac-object/isDate":826,"./ac-object/isEmpty":827,"./ac-object/isRegExp":828,"./ac-object/toQueryParameters":829}],821:[function(require,module,exports){'use strict';var extend=require('./extend');module.exports=function clone(object){return extend({},object)}},{"./extend":824}],822:[function(require,module,exports){'use strict';var F=function(){};module.exports=function create(proto){if(arguments.length>1){throw new Error('Second argument not supported')}
if(proto===null||typeof proto!=='object'){throw new TypeError('Object prototype may only be an Object.')}
if(typeof Object.create==='function'){return Object.create(proto)}else{F.prototype=proto;return new F()}}},{}],823:[function(require,module,exports){'use strict';var extend=require('./extend');module.exports=function defaults(defaultsObj,options){if(typeof defaultsObj!=='object'){throw new TypeError('defaults: must provide a defaults object')}
options=options||{};if(typeof options!=='object'){throw new TypeError('defaults: options must be a typeof object')}
return extend({},defaultsObj,options)}},{"./extend":824}],824:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function extend(){var args;var dest;if(arguments.length<2){args=[{},arguments[0]]}else{args=[].slice.call(arguments)}
dest=args.shift();args.forEach(function(source){if(source!=null){for(var property in source){if(hasOwnProp.call(source,property)){dest[property]=source[property]}}}});return dest}},{}],825:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function getPrototypeOf(obj){if(Object.getPrototypeOf){return Object.getPrototypeOf(obj)}
else{if(typeof obj!=='object'){throw new Error('Requested prototype of a value that is not an object.')}
else if(typeof this.__proto__==='object'){return obj.__proto__}
else{var constructor=obj.constructor;var oldConstructor;if(hasOwnProp.call(obj,'constructor')){oldConstructor=constructor;if(!(delete obj.constructor)){return null}
constructor=obj.constructor;obj.constructor=oldConstructor}
return constructor?constructor.prototype:null}}}},{}],826:[function(require,module,exports){'use strict';module.exports=function isDate(date){return Object.prototype.toString.call(date)==='[object Date]'}},{}],827:[function(require,module,exports){'use strict';var hasOwnProp=Object.prototype.hasOwnProperty;module.exports=function isEmpty(object){var prop;if(typeof object!=='object'){throw new TypeError('ac-base.Object.isEmpty : Invalid parameter - expected object')}
for(prop in object){if(hasOwnProp.call(object,prop)){return!1}}
return!0}},{}],828:[function(require,module,exports){'use strict';module.exports=function isRegExp(obj){return window.RegExp?obj instanceof RegExp:!1}},{}],829:[function(require,module,exports){'use strict';var qs=require('qs');module.exports=function toQueryParameters(object){if(typeof object!=='object'){throw new TypeError('toQueryParameters error: argument is not an object')}
return qs.stringify(object)}},{"qs":819}],830:[function(require,module,exports){var ElementEngagement=require('./ac-element-engagement/ElementEngagement');module.exports=new ElementEngagement();module.exports.ElementEngagement=ElementEngagement},{"./ac-element-engagement/ElementEngagement":831}],831:[function(require,module,exports){'use strict';var proto;var ac_Object=require('ac-object');var Super=require('ac-element-tracker').ElementTracker;var trackedElementDefaults={timeToEngage:500,inViewThreshold:0.75,stopOnEngaged:!0};var extendedTrackedElementProps={thresholdEnterTime:0,thresholdExitTime:0,inThreshold:!1,engaged:!1,tracking:!0};var ElementEngagement=function(){Super.call(this)};proto=ElementEngagement.prototype=ac_Object.create(Super.prototype);proto._decorateTrackedElement=function(trackedElement,options){var extendedDefaults;extendedDefaults=ac_Object.defaults(trackedElementDefaults,options||{});ac_Object.extend(trackedElement,extendedDefaults);ac_Object.extend(trackedElement,extendedTrackedElementProps)};proto._attachElementListeners=function(trackedElement){trackedElement.on('thresholdenter',this._thresholdEnter,this);trackedElement.on('thresholdexit',this._thresholdExit,this);trackedElement.on('enterview',this._enterView,this);trackedElement.on('exitview',this._exitView,this)};proto._removeElementListeners=function(trackedElement){trackedElement.off('thresholdenter',this._thresholdEnter);trackedElement.off('thresholdexit',this._thresholdExit);trackedElement.off('enterview',this._enterView);trackedElement.off('exitview',this._exitView)};proto._attachAllElementListeners=function(){this.elements.forEach(function(trackedElement){if(!trackedElement.stopOnEngaged){this._attachElementListeners(trackedElement)}else if(!trackedElement.engaged){this._attachElementListeners(trackedElement)}},this)};proto._removeAllElementListeners=function(){this.elements.forEach(function(trackedElement){this._removeElementListeners(trackedElement)},this)};proto._elementInViewPastThreshold=function(trackedElement){var winHeight=this.windowDelegate.innerHeight();var isIt=!1;if(trackedElement.pixelsInView===winHeight){isIt=!0}else{isIt=(trackedElement.percentInView>trackedElement.inViewThreshold)}
return isIt};proto._ifInView=function(trackedElement,alreadyInView){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifInView.apply(this,arguments);if(!alreadyInThreshold&&this._elementInViewPastThreshold(trackedElement)){trackedElement.inThreshold=!0;trackedElement.trigger('thresholdenter',trackedElement);if(typeof trackedElement.timeToEngage==='number'&&trackedElement.timeToEngage>=0){trackedElement.engagedTimeout=window.setTimeout(this._engaged.bind(this,trackedElement),trackedElement.timeToEngage)}}};proto._ifAlreadyInView=function(trackedElement){var alreadyInThreshold=trackedElement.inThreshold;Super.prototype._ifAlreadyInView.apply(this,arguments);if(alreadyInThreshold&&!this._elementInViewPastThreshold(trackedElement)){trackedElement.inThreshold=!1;trackedElement.trigger('thresholdexit',trackedElement);if(trackedElement.engagedTimeout){window.clearTimeout(trackedElement.engagedTimeout);trackedElement.engagedTimeout=null}}};proto._engaged=function(trackedElement){trackedElement.engagedTimeout=null;this._elementEngaged(trackedElement);trackedElement.trigger('engaged',trackedElement);this.trigger('engaged',trackedElement)};proto._thresholdEnter=function(trackedElement){trackedElement.thresholdEnterTime=Date.now();trackedElement.thresholdExitTime=0;this.trigger('thresholdenter',trackedElement)};proto._thresholdExit=function(trackedElement){trackedElement.thresholdExitTime=Date.now();this.trigger('thresholdexit',trackedElement)};proto._enterView=function(trackedElement){this.trigger('enterview',trackedElement)};proto._exitView=function(trackedElement){this.trigger('exitview',trackedElement)};proto._elementEngaged=function(trackedElement){trackedElement.engaged=!0;if(trackedElement.stopOnEngaged){this.stop(trackedElement)}};proto.stop=function(trackedElement){if(this.tracking&&!trackedElement){this._removeAllElementListeners();Super.prototype.stop.call(this)}
if(trackedElement&&trackedElement.tracking){trackedElement.tracking=!1;this._removeElementListeners(trackedElement)}};proto.start=function(trackedElement){if(!trackedElement){this._attachAllElementListeners()}
if(trackedElement&&!trackedElement.tracking){if(!trackedElement.stopOnEngaged){trackedElement.tracking=!0;this._attachElementListeners(trackedElement)}else if(!trackedElement.engaged){trackedElement.tracking=!0;this._attachElementListeners(trackedElement)}}
if(!this.tracking){Super.prototype.start.call(this)}else{this.refreshAllElementStates()}};proto.addElement=function(element,options){var trackedElement=Super.prototype.addElement.call(this,element);this._decorateTrackedElement(trackedElement,options);return trackedElement};proto.addElements=function(collection,options){[].forEach.call(collection,function(element){this.addElement(element,options)},this)};module.exports=ElementEngagement},{"ac-element-tracker":816,"ac-object":820}],832:[function(require,module,exports){module.exports.EventEmitter=require('./ac-event-emitter/EventEmitter')},{"./ac-event-emitter/EventEmitter":833}],833:[function(require,module,exports){'use strict';var propagationName='EventEmitter:propagation';var EventEmitter=function(context){if(context){this.context=context}};var proto=EventEmitter.prototype;var getEvents=function(){if(!this.hasOwnProperty('_events')&&typeof this._events!=='object'){this._events={}}
return this._events};var parseEvents=function(args,register){var event=args[0];var callback=args[1];var context=args[2];if((typeof event!=='string'&&typeof event!=='object')||event===null||Array.isArray(event)){throw new TypeError('Expecting event name to be a string or object.')}
if((typeof event==='string')&&!callback){throw new Error('Expecting a callback function to be provided.')}
if(callback&&(typeof callback!=='function')){if(typeof event==='object'&&typeof callback==='object'){context=callback}
else{throw new TypeError('Expecting callback to be a function.')}}
if(typeof event==='object'){for(var evt in event){register.call(this,evt,event[evt],context)}}
if(typeof event==='string'){event=event.split(' ');event.forEach(function(evt){register.call(this,evt,callback,context)},this)}};var each=function(event,callback){var eventsArray;var i;var length;eventsArray=getEvents.call(this)[event];if(!eventsArray||eventsArray.length===0){return}
eventsArray=eventsArray.slice();this._stoppedImmediatePropagation=!1;for(i=0,length=eventsArray.length;i<length;i++){if(this._stoppedImmediatePropagation||callback(eventsArray[i],i)){break}}};var removeSpecificCallback=function(events,event,callback){var i=-1;each.call(this,event,function(callbackObject,index){if(callbackObject.callback===callback){i=index;return!0}});if(i===-1){return}
events[event].splice(i,1)};proto.on=function(){var events=getEvents.call(this);parseEvents.call(this,arguments,function(event,callback,context){events[event]=events[event]||(events[event]=[]);events[event].push({callback:callback,context:context})});return this};proto.once=function(){parseEvents.call(this,arguments,function(event,callback,context){var wrapper=function(data){callback.call(context||this,data);this.off(event,wrapper)};this.on(event,wrapper,this)});return this};proto.off=function(event,callback){var events=getEvents.call(this);if(arguments.length===0){this._events={}}
else if(!event||(typeof event!=='string'&&typeof event!=='object')||Array.isArray(event)){throw new TypeError('Expecting event name to be a string or object.')}
if(typeof event==='object'){for(var e in event){removeSpecificCallback.call(this,events,e,event[e])}}
if(typeof event==='string'){var split=event.split(' ');if(split.length===1){if(callback){removeSpecificCallback.call(this,events,event,callback)}
else{events[event]=[]}}
else{split.forEach(function(event){events[event]=[]})}}
return this};proto.trigger=function(event,data,doNotPropagate){if(!event){throw new Error('trigger method requires an event name')}
if(typeof event!=='string'){throw new TypeError('Expecting event names to be a string.')}
if(doNotPropagate&&typeof doNotPropagate!=='boolean'){throw new TypeError('Expecting doNotPropagate to be a boolean.')}
event=event.split(' ');event.forEach(function(evt){each.call(this,evt,function(callbackObject){callbackObject.callback.call(callbackObject.context||this.context||this,data)}.bind(this));if(!doNotPropagate){each.call(this,propagationName,function(propagation){var eventName=evt;if(propagation.prefix){eventName=propagation.prefix+eventName}
propagation.emitter.trigger(eventName,data)})}},this);return this};proto.propagateTo=function(eventEmitter,prefix){var events=getEvents.call(this);if(!events[propagationName]){this._events[propagationName]=[]}
events[propagationName].push({emitter:eventEmitter,prefix:prefix})};proto.stopPropagatingTo=function(eventEmitter){var events=getEvents.call(this);if(!eventEmitter){events[propagationName]=[];return}
var propagationTargets=events[propagationName];var length=propagationTargets.length;var i;for(i=0;i<length;i++){if(propagationTargets[i].emitter===eventEmitter){propagationTargets.splice(i,1);break}}};proto.stopImmediatePropagation=function(){this._stoppedImmediatePropagation=!0};proto.has=function(evt,callback,context){var events=getEvents.call(this);var eventsArray=events[evt];if(arguments.length===0){return Object.keys(events)}
if(!eventsArray){return!1}
if(!callback){return(eventsArray.length>0)?!0:!1}
for(var i=0,length=eventsArray.length;i<length;i++){var callbackContainer=eventsArray[i];if(context&&callback&&callbackContainer.context===context&&callbackContainer.callback===callback){return!0}
else if(callback&&!context&&callbackContainer.callback===callback){return!0}}
return!1};module.exports=EventEmitter},{}],834:[function(require,module,exports){'use strict';module.exports={adler32:require('./ac-checksum/adler32')}},{"./ac-checksum/adler32":835}],835:[function(require,module,exports){'use strict';module.exports=function adler32(string){var adlerModulo=65521;var checksum16a=1;var checksum16b=0;var unicodeValueForCurrentChar;var i;for(i=0;i<string.length;i+=1){unicodeValueForCurrentChar=string.charCodeAt(i);checksum16a=(checksum16a+unicodeValueForCurrentChar)%adlerModulo;checksum16b=(checksum16b+checksum16a)%adlerModulo}
return(checksum16b<<16)|checksum16a}},{}],836:[function(require,module,exports){'use strict';module.exports={log:require('./ac-console/log')}},{"./ac-console/log":837}],837:[function(require,module,exports){'use strict';var debugMessagingKey='f7c9180f-5c45-47b4-8de4-428015f096c0';var allowDebugMessaging=!!(function(){try{return window.localStorage.getItem(debugMessagingKey)}catch(err){}}());module.exports=function log(message){if(window.console&&typeof console.log!=='undefined'&&allowDebugMessaging){console.log(message)}}},{}],838:[function(require,module,exports){arguments[4][744][0].apply(exports,arguments)},{"dup":744}],839:[function(require,module,exports){arguments[4][745][0].apply(exports,arguments)},{"dup":745}],840:[function(require,module,exports){arguments[4][746][0].apply(exports,arguments)},{"dup":746}],841:[function(require,module,exports){arguments[4][747][0].apply(exports,arguments)},{"dup":747}],842:[function(require,module,exports){arguments[4][748][0].apply(exports,arguments)},{"dup":748}],843:[function(require,module,exports){arguments[4][749][0].apply(exports,arguments)},{"dup":749}],844:[function(require,module,exports){arguments[4][750][0].apply(exports,arguments)},{"dup":750}],845:[function(require,module,exports){arguments[4][751][0].apply(exports,arguments)},{"./ELEMENT_NODE":842,"./internal/isNodeType":853,"ac-polyfills/Array/prototype.filter":863,"ac-polyfills/Array/prototype.slice":865,"dup":751}],846:[function(require,module,exports){arguments[4][752][0].apply(exports,arguments)},{"dup":752}],847:[function(require,module,exports){arguments[4][753][0].apply(exports,arguments)},{"./COMMENT_NODE":838,"./DOCUMENT_FRAGMENT_NODE":839,"./DOCUMENT_NODE":840,"./DOCUMENT_TYPE_NODE":841,"./ELEMENT_NODE":842,"./TEXT_NODE":843,"./createDocumentFragment":844,"./filterByNodeType":845,"./hasAttribute":846,"./indexOf":848,"./insertAfter":849,"./insertBefore":850,"./insertFirstChild":851,"./insertLastChild":852,"./isComment":855,"./isDocument":856,"./isDocumentFragment":857,"./isDocumentType":858,"./isElement":859,"./isNode":860,"./isNodeList":861,"./isTextNode":862,"./remove":866,"./replace":867,"dup":753}],848:[function(require,module,exports){arguments[4][754][0].apply(exports,arguments)},{"./filterByNodeType":845,"./internal/validate":854,"ac-polyfills/Array/prototype.indexOf":864,"ac-polyfills/Array/prototype.slice":865,"dup":754}],849:[function(require,module,exports){arguments[4][755][0].apply(exports,arguments)},{"./internal/validate":854,"dup":755}],850:[function(require,module,exports){arguments[4][756][0].apply(exports,arguments)},{"./internal/validate":854,"dup":756}],851:[function(require,module,exports){arguments[4][757][0].apply(exports,arguments)},{"./internal/validate":854,"dup":757}],852:[function(require,module,exports){arguments[4][758][0].apply(exports,arguments)},{"./internal/validate":854,"dup":758}],853:[function(require,module,exports){arguments[4][759][0].apply(exports,arguments)},{"../isNode":860,"dup":759}],854:[function(require,module,exports){arguments[4][760][0].apply(exports,arguments)},{"../COMMENT_NODE":838,"../DOCUMENT_FRAGMENT_NODE":839,"../ELEMENT_NODE":842,"../TEXT_NODE":843,"./isNodeType":853,"dup":760}],855:[function(require,module,exports){arguments[4][761][0].apply(exports,arguments)},{"./COMMENT_NODE":838,"./internal/isNodeType":853,"dup":761}],856:[function(require,module,exports){arguments[4][762][0].apply(exports,arguments)},{"./DOCUMENT_NODE":840,"./internal/isNodeType":853,"dup":762}],857:[function(require,module,exports){arguments[4][763][0].apply(exports,arguments)},{"./DOCUMENT_FRAGMENT_NODE":839,"./internal/isNodeType":853,"dup":763}],858:[function(require,module,exports){arguments[4][764][0].apply(exports,arguments)},{"./DOCUMENT_TYPE_NODE":841,"./internal/isNodeType":853,"dup":764}],859:[function(require,module,exports){arguments[4][765][0].apply(exports,arguments)},{"./ELEMENT_NODE":842,"./internal/isNodeType":853,"dup":765}],860:[function(require,module,exports){arguments[4][766][0].apply(exports,arguments)},{"dup":766}],861:[function(require,module,exports){arguments[4][767][0].apply(exports,arguments)},{"dup":767}],862:[function(require,module,exports){arguments[4][768][0].apply(exports,arguments)},{"./TEXT_NODE":843,"./internal/isNodeType":853,"dup":768}],863:[function(require,module,exports){arguments[4][769][0].apply(exports,arguments)},{"dup":769}],864:[function(require,module,exports){arguments[4][770][0].apply(exports,arguments)},{"dup":770}],865:[function(require,module,exports){arguments[4][771][0].apply(exports,arguments)},{"dup":771}],866:[function(require,module,exports){arguments[4][772][0].apply(exports,arguments)},{"./internal/validate":854,"dup":772}],867:[function(require,module,exports){arguments[4][773][0].apply(exports,arguments)},{"./internal/validate":854,"dup":773}],868:[function(require,module,exports){'use strict';var feature={cssPropertyAvailable:require('./ac-feature/cssPropertyAvailable'),localStorageAvailable:require('./ac-feature/localStorageAvailable')};var hasOwnProp=Object.prototype.hasOwnProperty;feature.threeDTransformsAvailable=function(){if(typeof this._threeDTransformsAvailable!=='undefined'){return this._threeDTransformsAvailable}
var div,style;try{this._threeDTransformsAvailable=!1;if(hasOwnProp.call(window,'styleMedia')){this._threeDTransformsAvailable=window.styleMedia.matchMedium('(-webkit-transform-3d)')}else if(hasOwnProp.call(window,'media')){this._threeDTransformsAvailable=window.media.matchMedium('(-webkit-transform-3d)')}
if(!this._threeDTransformsAvailable){if(!(style=document.getElementById('supportsThreeDStyle'))){style=document.createElement('style');style.id='supportsThreeDStyle';style.textContent='@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-ms-transform-3d),(-webkit-transform-3d) { #supportsThreeD { height:3px } }';document.querySelector('head').appendChild(style)}
if(!(div=document.querySelector('#supportsThreeD'))){div=document.createElement('div');div.id='supportsThreeD';document.body.appendChild(div)}
this._threeDTransformsAvailable=(div.offsetHeight===3)||style.style.MozTransform!==undefined||style.style.WebkitTransform!==undefined}
return this._threeDTransformsAvailable}catch(e){return!1}};feature.canvasAvailable=function(){if(typeof this._canvasAvailable!=='undefined'){return this._canvasAvailable}
var canvas=document.createElement('canvas');this._canvasAvailable=!!(typeof canvas.getContext==='function'&&canvas.getContext('2d'));return this._canvasAvailable};feature.sessionStorageAvailable=function(){if(typeof this._sessionStorageAvailable!=='undefined'){return this._sessionStorageAvailable}
try{if(typeof window.sessionStorage!=='undefined'&&typeof window.sessionStorage.setItem==='function'){window.sessionStorage.setItem('ac_browser_detect','test');this._sessionStorageAvailable=!0;window.sessionStorage.removeItem('ac_browser_detect','test')}else{this._sessionStorageAvailable=!1}}catch(e){this._sessionStorageAvailable=!1}
return this._sessionStorageAvailable};feature.cookiesAvailable=function(){if(typeof this._cookiesAvailable!=='undefined'){return this._cookiesAvailable}
this._cookiesAvailable=(hasOwnProp.call(document,'cookie')&&!!navigator.cookieEnabled)?!0:!1;return this._cookiesAvailable};feature.__normalizedScreenWidth=function(){if(typeof window.orientation==='undefined'){return window.screen.width}
return window.screen.width<window.screen.height?window.screen.width:window.screen.height};feature.touchAvailable=function(){return!!(('ontouchstart' in window)||window.DocumentTouch&&document instanceof window.DocumentTouch)};feature.isDesktop=function(){if(!this.touchAvailable()&&!window.orientation){return!0}
return!1};feature.isHandheld=function(){return!this.isDesktop()&&!this.isTablet()};feature.isTablet=function(){return!this.isDesktop()&&this.__normalizedScreenWidth()>480};feature.isRetina=function(){var mediaQueryStrings=['min-device-pixel-ratio:1.5','-webkit-min-device-pixel-ratio:1.5','min-resolution:1.5dppx','min-resolution:144dpi','min--moz-device-pixel-ratio:1.5'];var i;if(window.devicePixelRatio!==undefined){if(window.devicePixelRatio>=1.5){return!0}}else{for(i=0;i<mediaQueryStrings.length;i+=1){if(window.matchMedia('('+mediaQueryStrings[i]+')').matches===!0){return!0}}}
return!1};feature.svgAvailable=function(){return document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image','1.1')};module.exports=feature},{"./ac-feature/cssPropertyAvailable":869,"./ac-feature/localStorageAvailable":870}],869:[function(require,module,exports){'use strict';var style=null;var prefixes=null;var preFixes=null;var css=null;module.exports=function(property){if(style===null){style=document.createElement('browserdetect').style}
if(prefixes===null){prefixes=['-webkit-','-moz-','-o-','-ms-','-khtml-','']}
if(preFixes===null){preFixes=['Webkit','Moz','O','ms','Khtml','']}
if(css===null){css={}}
property=property.replace(/([A-Z]+)([A-Z][a-z])/g,'$1\\-$2').replace(/([a-z\d])([A-Z])/g,'$1\\-$2').replace(/^(\-*webkit|\-*moz|\-*o|\-*ms|\-*khtml)\-/,'').toLowerCase();switch(property){case 'gradient':if(css.gradient!==undefined){return css.gradient}
property='background-image:';var value1='gradient(linear,left top,right bottom,from(#9f9),to(white));';var value2='linear-gradient(left top,#9f9, white);';style.cssText=(property+prefixes.join(value1+property)+prefixes.join(value2+property)).slice(0,-property.length);css.gradient=(style.backgroundImage.indexOf('gradient')!==-1);return css.gradient;case 'inset-box-shadow':if(css['inset-box-shadow']!==undefined){return css['inset-box-shadow']}
property='box-shadow:';var value='#fff 0 1px 1px inset;';style.cssText=prefixes.join(property+value);css['inset-box-shadow']=(style.cssText.indexOf('inset')!==-1);return css['inset-box-shadow'];default:var properties=property.split('-');var length=properties.length;var Property;var i;var j;if(properties.length>0){property=properties[0];for(i=1;i<length;i+=1){property+=properties[i].substr(0,1).toUpperCase()+properties[i].substr(1)}}
Property=property.substr(0,1).toUpperCase()+property.substr(1);if(css[property]!==undefined){return css[property]}
for(j=preFixes.length-1;j>=0;j-=1){if(style[preFixes[j]+property]!==undefined||style[preFixes[j]+Property]!==undefined){css[property]=!0;return!0}}
return!1}}},{}],870:[function(require,module,exports){'use strict';var isAvailable=null;module.exports=function localStorageAvailable(){if(isAvailable===null){isAvailable=!!(window.localStorage&&window.localStorage.non_existent!==null)}
return isAvailable}},{}],871:[function(require,module,exports){arguments[4][819][0].apply(exports,arguments)},{"dup":819}],872:[function(require,module,exports){arguments[4][820][0].apply(exports,arguments)},{"./ac-object/clone":873,"./ac-object/create":874,"./ac-object/defaults":875,"./ac-object/extend":876,"./ac-object/getPrototypeOf":877,"./ac-object/isDate":878,"./ac-object/isEmpty":879,"./ac-object/isRegExp":880,"./ac-object/toQueryParameters":881,"dup":820}],873:[function(require,module,exports){arguments[4][821][0].apply(exports,arguments)},{"./extend":876,"dup":821}],874:[function(require,module,exports){arguments[4][822][0].apply(exports,arguments)},{"dup":822}],875:[function(require,module,exports){arguments[4][823][0].apply(exports,arguments)},{"./extend":876,"dup":823}],876:[function(require,module,exports){arguments[4][824][0].apply(exports,arguments)},{"dup":824}],877:[function(require,module,exports){arguments[4][825][0].apply(exports,arguments)},{"dup":825}],878:[function(require,module,exports){arguments[4][826][0].apply(exports,arguments)},{"dup":826}],879:[function(require,module,exports){arguments[4][827][0].apply(exports,arguments)},{"dup":827}],880:[function(require,module,exports){arguments[4][828][0].apply(exports,arguments)},{"dup":828}],881:[function(require,module,exports){arguments[4][829][0].apply(exports,arguments)},{"dup":829,"qs":871}],882:[function(require,module,exports){'use strict';var DEFAULT_NAMESPACE='ac-storage-';var Item=require('./ac-storage/Item');var Storage=require('./ac-storage/Storage');var storageAvailable=require('./ac-storage/Storage/storageAvailable');var ac_Storage=new Storage(DEFAULT_NAMESPACE);ac_Storage.Item=Item;ac_Storage.storageAvailable=storageAvailable;module.exports=ac_Storage},{"./ac-storage/Item":883,"./ac-storage/Storage":890,"./ac-storage/Storage/storageAvailable":892}],883:[function(require,module,exports){'use strict';var ac_adler32=require('ac-checksum').adler32;var ac_Object=require('ac-object');var apis=require('./Item/apis');var createExpirationDate=require('./Item/createExpirationDate');var encoder=require('./Item/encoder');var DAY=1000*60*60*24;var DEFAULT_DAYS_TO_EXPIRE_IN=30;function Item(key){if(!key||typeof key!=='string'){throw 'ac-storage/Item: Key for Item must be a string'}
this._key=key;this._checksum=null;this._expirationDate=null;this._metadata=null;this._value=null;this.setExpirationDate(Item.createExpirationDate(DEFAULT_DAYS_TO_EXPIRE_IN))}
Item.prototype={save:function(){var api;var stateObj;var value;var options={};api=apis.best(options);if(api){if(this.value()===null&&typeof api.removeItem==='function'){return api.removeItem(this.key())}else if(typeof api.setItem==='function'){stateObj=this.__state();value=encoder.encode(stateObj);return api.setItem(this.key(),value,this.expirationDate())}}
return!1},load:function(){var api;var value;api=apis.best();if(api&&typeof api.getItem==='function'){value=api.getItem(this.key());this.__updateState(encoder.decode(value));if(value===null||this.hasExpired()){this.remove();return!1}else{return!0}}else{return!1}},remove:function(){var api;this.__updateState(null);api=apis.best();return api.removeItem(this.key())},hasExpired:function(checksum){if(((this.expirationDate()!==!1)&&(this.expirationDate()<=Date.now()))||!this.__checksumIsValid(checksum)){return!0}
return!1},value:function(checksum){if(this.hasExpired(checksum)){this.remove()}
return this._value},setValue:function(value){this._value=value},setChecksum:function(checksum){if(checksum===null){this._checksum=checksum}else if(typeof checksum==='string'&&checksum!==''){this._checksum=ac_adler32(checksum)}else{throw 'ac-storage/Item#setChecksum: Checksum must be null or a string'}},checksum:function(){return this._checksum},setExpirationDate:function(expirationDate){if(expirationDate===null){expirationDate=Item.createExpirationDate(DEFAULT_DAYS_TO_EXPIRE_IN)}
if(expirationDate!==!1){if(typeof expirationDate==='string'){expirationDate=new Date(expirationDate).getTime()}
if(expirationDate&&typeof expirationDate.getTime==='function'){expirationDate=expirationDate.getTime()}
if(!expirationDate||isNaN(expirationDate)){throw 'ac-storage/Item: Invalid date object provided as expirationDate'}
expirationDate-=expirationDate%DAY;if(expirationDate<=Date.now()){expirationDate=!1}}
this._expirationDate=expirationDate},expirationDate:function(){return this._expirationDate},__state:function(){var stateObj={};stateObj.checksum=this.checksum();stateObj.expirationDate=this.expirationDate();stateObj.metadata=this.metadata();stateObj.value=this.value();return stateObj},__updateState:function(stateObj){var prop;var setter;if(stateObj===null){stateObj={checksum:null,expirationDate:null,metadata:null,value:null}}
for(prop in stateObj){setter='set'+prop.charAt(0).toUpperCase()+prop.slice(1);if(typeof this[setter]==='function'){this[setter](stateObj[prop])}}},__checksumIsValid:function(checksum){if(checksum){checksum=ac_adler32(checksum);if(!this.checksum()){throw 'ac-storage/Item: No checksum exists to determine if this Item’s value is valid. Try loading context from persistent storage first.'}else if(checksum===this.checksum()){return!0}
return!1}else if(this.checksum()){throw 'ac-storage/Item: No checksum passed, but checksum exists in Item’s state.'}
return!0},setKey:function(){throw 'ac-storage/Item: Cannot set key /after/ initialization!'},key:function(){return this._key},metadata:function(){return this._metadata},setMetadata:function(value){this._metadata=value}};Item.createExpirationDate=createExpirationDate;module.exports=Item},{"./Item/apis":884,"./Item/createExpirationDate":887,"./Item/encoder":888,"ac-checksum":834,"ac-object":872}],884:[function(require,module,exports){'use strict';var ac_Log=require('ac-console').log;var api_localStorage=require('./apis/localStorage');var api_userData=require('./apis/userData');var apis={_list:[api_localStorage,api_userData],list:function(){return this._list},all:function(method){ac_Log('ac-storage/Item/apis.all: Method is deprecated');var args=Array.prototype.slice.call(arguments,1);if(typeof method!=='string'){throw 'ac-storage/Item/apis.all: Method name must be provided as a string'}
var results=this.list().map(function(api){if(api.available()){if(typeof api[method]==='function'){return api[method].apply(api,args)}else{throw 'ac-storage/Item/apis.all: Method not available on api'}}
return!1});return results},best:function(){var best=null;this.list().some(function(api){if(api.available()){best=api;return!0}});return best}};module.exports=apis},{"./apis/localStorage":885,"./apis/userData":886,"ac-console":836}],885:[function(require,module,exports){'use strict';var AC_Environment_Feature=require('ac-feature');var api=window.localStorage;var api_session=window.sessionStorage;var available;var api_localStorage={name:'localStorage',available:function(){try{localStorage.setItem('localStorage',1);localStorage.removeItem('localStorage')}catch(e){return!1}
if(available===undefined){available=AC_Environment_Feature.localStorageAvailable()}
return available},getItem:function(key){return api.getItem(key)||api_session.getItem(key)},setItem:function(key,value,expirationDate){if(expirationDate===!1){api_session.setItem(key,value)}else{api.setItem(key,value)}
return!0},removeItem:function(key){api.removeItem(key);api_session.removeItem(key);return!0}};module.exports=api_localStorage},{"ac-feature":868}],886:[function(require,module,exports){'use strict';var AC_Element=require('ac-dom-nodes');var DAY=1000*60*60*24;var storeID='ac-storage';var available;var api_userData={name:'userData',available:function(){if(available===undefined){available=!1;if(document&&document.body){var el=this.element();if(AC_Element.isElement(el)&&el.addBehavior!==undefined){available=!0}
if(available===!1){this.removeElement()}}else{throw 'ac-storage/Item/apis/userData: DOM must be ready before using #userData.'}}
return available},getItem:function(key){var el=this.element();el.load(storeID);return el.getAttribute(key)||null},setItem:function(key,value,expirationDate){var el=this.element();el.setAttribute(key,value);if(expirationDate===!1){expirationDate=new Date(Date.now()+DAY)}
if(expirationDate&&typeof expirationDate.toUTCString==='function'){el.expires=expirationDate.toUTCString()}
el.save(storeID);return!0},removeItem:function(key){var el=this.element();el.removeAttribute(key);el.save(storeID);return!0},_element:null,element:function(){if(this._element===null){this._element=document.createElement('meta');this._element.setAttribute('id','userData');this._element.setAttribute('name','ac-storage');this._element.style.behavior="url('#default#userData')";document.getElementsByTagName('head')[0].appendChild(this._element)}
return this._element},removeElement:function(){if(this._element!==null){AC_Element.remove(this._element)}
return this._element}};module.exports=api_userData},{"ac-dom-nodes":847}],887:[function(require,module,exports){'use strict';var DAY=1000*60*60*24;var createExpirationDate=function(days,fromDate){if(typeof days!=='number'){throw 'ac-storage/Item/createExpirationDate: days parameter must be a number.'}
if(fromDate===undefined||typeof fromDate==='number'){fromDate=fromDate===undefined?new Date():new Date(fromDate)}
if(typeof fromDate.toUTCString!=='function'||fromDate.toUTCString()==='Invalid Date'){throw 'ac-storage/Item/createExpirationDate: fromDate must be a date object, timestamp, or undefined.'}
fromDate.setTime(fromDate.getTime()+(days*DAY));return fromDate.getTime()};module.exports=createExpirationDate},{}],888:[function(require,module,exports){'use strict';var compressor=require('./encoder/compressor');var encoder={encode:function(stateObj){var stateObjString;var compressedStateObj;compressedStateObj=compressor.compress(stateObj);try{stateObjString=JSON.stringify(compressedStateObj)}catch(ignore){}
if(!this.__isValidStateObjString(stateObjString)){throw 'ac-storage/Item/encoder/encode: state object is invalid or cannot be saved as string'}
return stateObjString},decode:function(stateObjString){var stateObj;var decompressedStateObj;if(!this.__isValidStateObjString(stateObjString)){if(stateObjString===undefined||stateObjString===null||stateObjString===''){return null}
throw 'ac-storage/Item/encoder/decode: state string does not contain a valid state object'}
try{stateObj=JSON.parse(stateObjString)}catch(ignore){throw 'ac-storage/Item/encoder/decode: Item state object could not be decoded'}
decompressedStateObj=compressor.decompress(stateObj);return decompressedStateObj},__isValidStateObjString:function(stateObjString){try{if(stateObjString!==undefined&&stateObjString.substring(0,1)==='{'){return!0}
return!1}
catch(e){return!1}}};module.exports=encoder},{"./encoder/compressor":889}],889:[function(require,module,exports){var DAY=1000*60*60*24;var DATE_KEY=14975;var compressor={mapping:{key:'k',checksum:'c',expirationDate:'e',metadata:'m',value:'v'},compress:function(stateObj){var compressedStateObj={};var mapping=compressor.mapping;for(var prop in mapping){if(stateObj.hasOwnProperty(prop)&&stateObj[prop]){if(prop==='expirationDate'){var days=this.millisecondsToOffsetDays(stateObj[prop]);compressedStateObj[mapping[prop]]=days}else{compressedStateObj[mapping[prop]]=stateObj[prop]}}}
return compressedStateObj},decompress:function(compressedStateObj){var stateObj={};var mapping=compressor.mapping;for(var prop in mapping){if(compressedStateObj.hasOwnProperty(mapping[prop])){if(prop==='expirationDate'){var milliseconds=this.offsetDaysToMilliseconds(compressedStateObj[mapping[prop]]);stateObj[prop]=milliseconds}else{stateObj[prop]=compressedStateObj[mapping[prop]]}}}
return stateObj},millisecondsToOffsetDays:function(milliseconds){return Math.floor(milliseconds/DAY)-DATE_KEY},offsetDaysToMilliseconds:function(days){return(days+DATE_KEY)*DAY}};module.exports=compressor},{}],890:[function(require,module,exports){'use strict';var ac_Object=require('ac-object');var api_localStorage=require('./Item/apis/localStorage');var registry=require('./Storage/registry');var defaultOptions={};function Storage(namespace,options){this._namespace=namespace||'';this._options=ac_Object.extend(ac_Object.clone(defaultOptions),options||{})}
Storage.prototype={getItem:function(key){var item=this.__item(key);item.load();return item.value()},setItem:function(key,value){var item=this.__item(key);if(value===undefined){throw 'ac-storage/Storage#setItem: Must provide value to set key to. Use #removeItem to remove.'}
item.setValue(value);return item.save()},removeItem:function(key){var item=this.__item(key);registry.remove(item.key(),!0);return item.save()},removeExpired:function(){var item;var i;if(api_localStorage.available()){for(i=0;i<window.localStorage.length;i++){item=this.__item(window.localStorage.key(i));if(item.hasExpired()&&JSON.parse(window.localStorage[window.localStorage.key(i)]).v!=='undefined'){item.remove()}}}else{var storeID='ac-storage';var el=document.getElementById('userData');el.load(storeID);var attr;var doc=el.xmlDocument;var attributes=doc.firstChild.attributes;var len=attributes.length;i=-1;while(++i<len){attr=attributes[i];item=this.__item(attr.nodeName);if(item.hasExpired()&&JSON.parse(attr.nodeValue).v!=='undefined'){item.remove()}}}},__item:function(key){if(typeof key!=='string'||key===''){throw 'ac-storage/Storage: Key must be a String.'}
var item=registry.item(this.namespace()+key);return item},namespace:function(){return this._namespace},setNamespace:function(value){this._namespace=value},options:function(){return this._namespace},setOptions:function(value){this._namespace=value}};module.exports=Storage},{"./Item/apis/localStorage":885,"./Storage/registry":891,"ac-object":872}],891:[function(require,module,exports){'use strict';var Item=require('../Item');var items={};var registry={item:function(key){var item=items[key];if(!item){item=this.register(key)}
return item},register:function(key){var item=items[key];if(!item){item=new Item(key);items[key]=item}
return item},clear:function(alsoRemoveItemFromStorage){var key;for(key in items){this.remove(key,alsoRemoveItemFromStorage)}
return!0},remove:function(key,alsoRemoveItemFromStorage){var item=items[key];if(item&&!!alsoRemoveItemFromStorage){item.remove()}
items[key]=null;return!0}};module.exports=registry},{"../Item":883}],892:[function(require,module,exports){'use strict';var apis=require('../Item/apis');var available;module.exports=function storageAvailable(){if(available!==undefined){return available}
available=!!apis.best();return available}},{"../Item/apis":884}],893:[function(require,module,exports){module.exports={observer:{Audio:require('./ac-analytics/observer/Audio'),Click:require('./ac-analytics/observer/Click'),Event:require('./ac-analytics/observer/Event'),Exit:require('./ac-analytics/observer/Exit'),Gallery:require('./ac-analytics/observer/Gallery'),Link:require('./ac-analytics/observer/Link'),Overlay:require('./ac-analytics/observer/Overlay'),Page:require('./ac-analytics/observer/Page'),Section:require('./ac-analytics/observer/Section'),Video:require('./ac-analytics/observer/Video')},regions:require('./ac-analytics/regions/regions'),createBasicObserverSuite:require('./ac-analytics/factory/basicObserverSuite').create,reset:require('./ac-analytics/reset')}},{"./ac-analytics/factory/basicObserverSuite":899,"./ac-analytics/observer/Audio":902,"./ac-analytics/observer/Click":903,"./ac-analytics/observer/Event":904,"./ac-analytics/observer/Exit":905,"./ac-analytics/observer/Gallery":906,"./ac-analytics/observer/Link":907,"./ac-analytics/observer/Overlay":908,"./ac-analytics/observer/Page":909,"./ac-analytics/observer/Section":910,"./ac-analytics/observer/Video":911,"./ac-analytics/regions/regions":941,"./ac-analytics/reset":942}],894:[function(require,module,exports){'use strict';var proto;var ac_Array=require('@marcom/ac-array');var errorHandler=require('./error-handler/ErrorHandler');var ac_Storage=require('ac-storage');var STORAGE_KEY=require('./storageKey').analyticsQueue;function Queue(){this._storage=ac_Storage;this._arr=[];this._length=0}
proto=Queue.prototype;proto.add=function(item){if(!item){errorHandler.log('Queue','add',item+' is not a valid object')}
if(errorHandler.exception){return}
this._arr.push(item);this._updateQueueSize()};proto.remove=function(){if(this.size()>0){this._arr.shift();this._updateQueueSize()}};proto.reset=function(){this._arr=[];this._length=0};proto.peek=function(){if(this.size()>0){return this._arr[0]}};proto.isEmpty=function(){return(this.size()===0)};proto.size=function(){return this._length};proto.load=function(){var analyticsData=this._storage.getItem(STORAGE_KEY);if(Array.isArray(analyticsData)){this._arr=analyticsData;this._storage.removeItem(STORAGE_KEY);this._updateQueueSize()}};proto.save=function(){this._storage.setItem(STORAGE_KEY,this._arr);this.reset()};proto.collect=function(){var analyticsQueue=this._arr;var analyticsData=this._storage.getItem(STORAGE_KEY);if(Array.isArray(analyticsData)){var temp=analyticsData;analyticsQueue=temp.concat(analyticsQueue)}
this._storage.setItem(STORAGE_KEY,analyticsQueue);this.reset()};proto.canSave=function(){return this._storage.storageAvailable()};proto._updateQueueSize=function(){this._length=this._arr.length};module.exports=Queue},{"./error-handler/ErrorHandler":898,"./storageKey":943,"@marcom/ac-array":576,"ac-storage":882}],895:[function(require,module,exports){'use strict';var proto;var Deferred=require('ac-deferred').Deferred;var Queue=require('./Queue');var plugins=require('./plugins/plugins');var translator=require('./translator/translator');var errorHandler=require('./error-handler/ErrorHandler');var moduleName='Tracker';function Tracker(plugin){if(typeof plugins[plugin]==='function'){this.plugin=new plugins[plugin]()}else{errorHandler.log(moduleName,null,'Could not create a Tracker. "'+plugin+'" is not a valid plugin')}
if(errorHandler.exception){return}
this.paused=!1;this._queue=new Queue();this.resume()}
proto=Tracker.prototype;proto.track=function(request){var translatedRequest;if(!request||typeof request!=='object'||!request.type){errorHandler.log(moduleName,'track',request+' is not a valid request object')}
if(errorHandler.exception){return}
translatedRequest=translator.translate(request);translatedRequest=this.plugin.translate(translatedRequest);this._queue.add(translatedRequest);if(this.paused===!0){this._queue.collect();return}
this._run()};proto.isPaused=function(){return this.paused};proto.resume=function(){this._queue.load();var queueSize=this._queue.size();if(queueSize===0){return}
this.paused=!1;this._run()};proto._run=function(){var promise;if(this._queue.size()===0){return}
var request=this._queue.peek();var options=request.options||{};if(typeof options.async==='undefined'){options.async=!0}
if(options.async===!1){promise=this.sync(this.send.bind(this))}else{promise=this.async(this.send.bind(this))}
promise.then(function(){if(!this.paused&&this._queue.size()>0){this._run()}}.bind(this))};proto.send=function(){if(typeof this.plugin.submit!=='function'){errorHandler.log(moduleName,'send','provided plugin does not contain a valid submit method')}
if(errorHandler.exception){return}
if(this._queue.size()===0){return}
var request=this._queue.peek();this.plugin.submit(request);this._queue.remove()};proto.pause=function(){if(this.paused===!0){return}
if(!this.canPause()){return}
if(this._queue.size()>0){this._queue.save()}
this.paused=!0};proto.canPause=function(){return this._queue.canSave()};proto.async=function(callback){var defer=new Deferred();if((!callback)||(typeof(callback)!=='function')){errorHandler.log(moduleName,'async','Provided callback "'+callback+'" is not a function')}
if(errorHandler.exception){return}
setTimeout(function(){callback();defer.resolve()},0);return defer.promise()};proto.sync=function(callback){var defer=new Deferred();if((!callback)||(typeof(callback)!=='function')){errorHandler.log(moduleName,'sync','Provided callback "'+callback+'" is not a function')}
if(errorHandler.exception){return}
callback();defer.resolve();return defer.promise()};module.exports=Tracker},{"./Queue":894,"./error-handler/ErrorHandler":898,"./plugins/plugins":913,"./translator/translator":957,"ac-deferred":729}],896:[function(require,module,exports){'use strict';var proto;var ac_DOMNodes=require('@marcom/ac-dom-nodes');var ac_DOMEvents=require('@marcom/ac-dom-events');var errorHandler=require('../error-handler/ErrorHandler');var moduleName='TouchController';function TouchController(element,eventCallback){if(!ac_DOMNodes.isElement(element)){errorHandler.log(moduleName,null,element+' is not a valid DOM element')}
if(typeof eventCallback!=='function'){errorHandler.log(moduleName,null,eventCallback+' is not a valid function')}
if(errorHandler.exception){return}
this._element=element;this._eventCallback=eventCallback;this.addEventListener()}
proto=TouchController.prototype;proto.addEventListener=function(){ac_DOMEvents.addEventListener(this._element,'touchstart',this._onTouchStart.bind(this))};proto.removeEventListener=function(){ac_DOMEvents.removeEventListener(this._element,'touchstart',this._boundOnTouchStart);ac_DOMEvents.removeEventListener(this._element,'touchmove',this._boundOnTouchMove);ac_DOMEvents.removeEventListener(this._element,'touchend',this._boundOnTouchEnd)};proto._onTouchStart=function(e){this.moved=!1;this._boundOnTouchMove=this._onTouchMove.bind(this);this._boundOnTouchEnd=this._onTouchEnd.bind(this);ac_DOMEvents.addEventListener(this._element,'touchmove',this._boundOnTouchMove);ac_DOMEvents.addEventListener(this._element,'touchend',this._boundOnTouchEnd)};proto._onTouchMove=function(e){this.moved=!0};proto._onTouchEnd=function(e){ac_DOMEvents.removeEventListener(this._element,'touchmove',this._boundOnTouchMove);ac_DOMEvents.removeEventListener(this._element,'touchend',this._boundOnTouchEnd);if(!this.moved){this._eventCallback(e)}};proto.destroy=function(){this.removeEventListener();this._element=null;this._eventCallback=null;this._boundOnTouchStart=null};module.exports=TouchController},{"../error-handler/ErrorHandler":898,"@marcom/ac-dom-events":592,"@marcom/ac-dom-nodes":617}],897:[function(require,module,exports){(function(){'use strict';function dataStringToObject(data){var options;var optionsObj={};var splitOption;if(data&&typeof data==='string'&&data.length>0){options=data.split(',');if(options&&options.length>0){options.forEach(function(option){splitOption=option.split(':');optionsObj[splitOption[0].trim()]=(splitOption[1])?splitOption[1].trim():splitOption[1]})}}
return optionsObj}
module.exports={dataStringToObject:dataStringToObject}}())},{}],898:[function(require,module,exports){'use strict';var proto;var ac_console=require('@marcom/ac-console');var messagePrefix='Analytics';function ErrorHandler(){this.exception=!1;this.errors=[]}
proto=ErrorHandler.prototype;proto.log=function(moduleName,methodName,message){var formattedMessage=this._formatMessage(moduleName,methodName,message);this.exception=!0;this.errors.push({instance:moduleName,method:methodName,message:formattedMessage});ac_console.log(formattedMessage)};proto.report=function(index){var out='';if(typeof index==='number'&&this.errors[index]){out=this.errors[index].message;ac_console.log(this.errors[index].message)}else{this.errors.forEach(function(err){out+=err.message+'\r\n'});ac_console.log(out)}
return out};proto._formatMessage=function(moduleName,methodName,message){var thrower;var throwerString='';var separator=' : ';var throwerSep;if(!!moduleName||!!methodName){throwerSep=(moduleName&&methodName)?'.':'';throwerString=(moduleName||'')+throwerSep+(methodName||'')+separator}
return messagePrefix+separator+throwerString+message};module.exports=new ErrorHandler()},{"@marcom/ac-console":588}],899:[function(require,module,exports){'use strict';var PageObserver=require('../observer/Page');var LinkObserver=require('../observer/Link');var ClickObserver=require('../observer/Click');var SectionObserver=require('../observer/Section');var ac_Object=require('@marcom/ac-object');var onDocumentReady=require('../onDocumentReady');var defaults={page:{},link:{autoEnable:!1},click:{autoEnable:!1},section:{autoEnable:!1}};function _enableObservers(observers){for(var prop in observers){if(observers.hasOwnProperty(prop)){if(typeof observers[prop].enable==='function'){observers[prop].enable()}}}}
function create(options){options=ac_Object.extend(defaults,options||{});var observers={page:new PageObserver(options.page),link:new LinkObserver(options.link),click:new ClickObserver(options.click),section:new SectionObserver(options.section)};onDocumentReady(function(){_enableObservers(observers)});return observers}
module.exports={create:create}},{"../observer/Click":903,"../observer/Link":907,"../observer/Page":909,"../observer/Section":910,"../onDocumentReady":912,"@marcom/ac-object":688}],900:[function(require,module,exports){(function(){'use strict';var ac_Array=require('@marcom/ac-array');var errorHandler=require('./error-handler/ErrorHandler');var head=document.getElementsByTagName('head')[0];var metaTags=ac_Array.toArray(head.getElementsByTagName('meta'));var metaPropertyPrefix='analytics';var prefixPattern='^'+metaPropertyPrefix+'-';var patternRegex=new RegExp(prefixPattern);var metaObject;var initialTimeStamp=Date.now();var moduleName='metadata';function _getProductName(metaObject){var analyticsPageTitle=_strToArray(metaObject.track);if(!Array.isArray(analyticsPageTitle)||analyticsPageTitle.length===0){errorHandler.log(moduleName,'_getProductname','"track" meta tag value is malformed. e.g. "product name - page name"')}
if(errorHandler.exception){return}
return analyticsPageTitle[0].trim()}
function _getPageName(metaObject){if(!metaObject.track||metaObject.track===''){errorHandler.log(moduleName,'_getPageName','"track" meta tag value is malformed. e.g. "product name - page name"')}
if(errorHandler.exception){return}
return metaObject.track.toLowerCase()}
function _getLocale(){var htmlEl=document.documentElement;var locale=htmlEl.getAttribute('data-locale')||htmlEl.lang;if(!locale){errorHandler.log(moduleName,'_getLocale','html lang attribute can not be empty')}
if(errorHandler.exception){return}
return locale}
function _metaTagsToObject(tags){tags=_filterMetaTags(tags);var metaObject={};tags.forEach(function(tag){var key=_transformPropertyName(tag.getAttribute('property'));var value=tag.getAttribute('content');metaObject[key]=value});return metaObject}
function _filterMetaTags(tags){var filtered=tags.filter(function(tag){var propName=tag.getAttribute('property');return patternRegex.test(propName)});return filtered}
function _transformPropertyName(name){var transformed=name.replace(metaPropertyPrefix+'-','');return transformed.replace(/-+(.)?/g,function(match,character){return character?character.toUpperCase():''})}
function _augmentMetaObject(metaObject){metaObject.pageName=metaObject.pageName||_getPageName(metaObject);metaObject.productName=metaObject.productName||_getProductName(metaObject);metaObject.locale=metaObject.locale||_getLocale();metaObject.initialTimeStamp=initialTimeStamp;return metaObject}
function _strToArray(str,separator){separator=separator||'-';if(typeof str!=='string'){errorHandler.log(moduleName,'_strToArray',str+' is not a valid string')}
if(errorHandler.exception){return}
return str.split(separator)}
function bundleMetaObject(metaTags){metaObject=_metaTagsToObject(metaTags)}
function getMetadata(){return _augmentMetaObject(metaObject)}
function refreshMetadata(){metaTags=ac_Array.toArray(head.getElementsByTagName('meta'));metaObject=null;initialTimeStamp=Date.now();bundleMetaObject(metaTags);return _augmentMetaObject(metaObject)}
bundleMetaObject(metaTags);module.exports={getMetadata:getMetadata,refreshMetadata:refreshMetadata}}())},{"./error-handler/ErrorHandler":898,"@marcom/ac-array":576}],901:[function(require,module,exports){'use strict';var Tracker=require('./Tracker');module.exports=new Tracker('sCode');module.exports.Tracker=Tracker},{"./Tracker":895}],902:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var ac_DOMEvents=require('@marcom/ac-dom-events');var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var defaultOptions={mediaEvents:['play','pause','ended']};var moduleName='AudioAnalyticsObserver';function AudioAnalyticsObserver(audio,options){if(!audio){errorHandler.log(moduleName,null,audio+' is not a valid audio object')}
defaultOptions.mediaEventCallbacks={'ended':this._onEnded.bind(this)};this.options=ac_Object.defaults(defaultOptions,options||{});if(!Array.isArray(this.options.mediaEvents)){errorHandler.log(moduleName,null,this.options.mediaEvents+' is not a valid media events array')}
if(errorHandler.exception){return}
this.audio=audio;this.tracker=metricsTracker;this.defaultTracking=this.track.bind(this);this.attachEvents()}
proto=AudioAnalyticsObserver.prototype;proto.attachEvents=function(){var options=this.options;var customCallback;var mediaEventCallback;options.mediaEvents.forEach(function(mediaEvent){customCallback=options.mediaEventCallbacks[mediaEvent];mediaEventCallback=(typeof customCallback==='function')?customCallback:this.defaultTracking;this.addListener(mediaEvent,mediaEventCallback)}.bind(this))};proto.detachEvents=function(){var options=this.options;var customCallback;var mediaEventCallback;options.mediaEvents.forEach(function(mediaEvent){customCallback=options.mediaEventCallbacks[mediaEvent];mediaEventCallback=(typeof customCallback==='function')?customCallback:this.defaultTracking;this.removeListener(mediaEvent,mediaEventCallback)}.bind(this))};proto.addListener=function(eventName,callback){ac_DOMEvents.addEventListener(this.audio,eventName,callback)};proto.removeListener=function(eventName,callback){ac_DOMEvents.removeEventListener(this.audio,eventName,callback)};proto._onEnded=function(e){this.ended=!0;this.track(e)};proto.track=function(e){var data={};data.ended=this.ended;this.tracker.track({"type":"audio","event":e,"data":data,"options":this.options})};proto.destroy=function(){this.detachEvents();this.options=null;this.tracker=null;this.audio=null;this.defaultTracking=null};module.exports=AudioAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-dom-events":592,"@marcom/ac-object":688}],903:[function(require,module,exports){'use strict';var proto;var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var ac_DOMNodes=require('@marcom/ac-dom-nodes');var ac_Object=require('@marcom/ac-object');var ac_Feature=require('@marcom/ac-feature');var ac_DOMEvents=require('@marcom/ac-dom-events');var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var TouchController=require('../controller/Touch');var EventEmitter=require('ac-event-emitter').EventEmitter;var defaultOptions={dataAttribute:'analytics-click',titleDataAttribute:'analytics-title',autoEnable:!0};var moduleName='ClickAnalyticsObserver';function ClickAnalyticsObserver(options){if(errorHandler.exception){return}
this.options=ac_Object.defaults(defaultOptions,options||{});this.tracker=metricsTracker;this.isEnabled=!1;this._boundOnInteraction=this._onInteraction.bind(this);this._touchGesture=[];this._elements=null;if(this.options.autoEnable===!0){this.enable()}}
proto=ClickAnalyticsObserver.prototype=ac_Object.create(EventEmitter.prototype);proto.enable=function(){if(!this.isEnabled){this.addListener();this.isEnabled=!0;this.trigger('enabled')}};proto.addListener=function(){var element=document.body;if(!ac_Feature.touchAvailable()){ac_DOMEvents.addEventListener(element,'mouseup',this._boundOnInteraction)}else{this._elements=ac_DOMTraversal.querySelectorAll('*[data-'+this.options.dataAttribute+']');this._elements.forEach(function(element,i){this._touchGesture[i]=new TouchController(element,this._boundOnInteraction)}.bind(this))}};proto.removeListener=function(){var element=document.body;ac_DOMEvents.removeEventListener(element,'mouseup',this._boundOnInteraction);if(this._touchGesture.length>0){this._touchGesture.forEach(function(touchgesture){touchgesture.destroy()})}};proto._onInteraction=function(e){var targetEl=ac_DOMEvents.target(e);var linkAncestor;if(!targetEl.getAttribute('data-'+this.options.dataAttribute)){linkAncestor=ac_DOMTraversal.ancestor(targetEl,'['+this.options.dataAttribute+']');if(linkAncestor){targetEl=linkAncestor}}
if(targetEl.getAttribute('data-'+this.options.dataAttribute)){this.track(e,targetEl)}};proto.track=function(e,targetEl){var data={};if(!ac_DOMNodes.isElement(targetEl)){errorHandler.log(moduleName,'track',targetEl+' is not a valid DOM element')}
if(errorHandler.exception){return}
data.targetEl=targetEl;this.tracker.track({"type":"click","event":e,"data":data,"options":this.options})};proto.destroy=function(){this.removeListener();this.options=null;this.tracker=null;this.isEnabled=null;this._boundOnInteraction=null;this._touchGesture=[];this._elements=null};module.exports=ClickAnalyticsObserver},{"../controller/Touch":896,"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-dom-events":592,"@marcom/ac-dom-nodes":617,"@marcom/ac-dom-traversal":33,"@marcom/ac-feature":659,"@marcom/ac-object":688,"ac-event-emitter":832}],904:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var errorHandler=require('../error-handler/ErrorHandler');var metricsTracker=require('../metricsTracker');var defaultOptions={interactionEvents:[],interactionEventCallbacks:{}};var moduleName='EventAnalyticsObserver';function EventAnalyticsObserver(targetObj,options){if(!targetObj||typeof targetObj!=='object'||typeof targetObj.on!=='function'||typeof targetObj.off!=='function'){errorHandler.log(moduleName,null,targetObj+' does not appear to be a valid EventEmitter or DOMEmitter')}
this.options=ac_Object.defaults(defaultOptions,options||{});if(!Array.isArray(this.options.interactionEvents)){errorHandler.log(moduleName,null,this.options.interactionEvents+' is not an array')}
if(errorHandler.exception){return}
this.tracker=metricsTracker;this.targetObj=targetObj;this._callbacks={};this.attachEvents()}
proto=EventAnalyticsObserver.prototype;proto.attachEvents=function(){var options=this.options;var interactionEventCallback;var instanceCallbackName;options.interactionEvents.forEach(function(interactionEvent){interactionEventCallback=options.interactionEventCallbacks[interactionEvent];interactionEventCallback=(typeof interactionEventCallback==='function')?interactionEventCallback:this.track.bind(this);this._callbacks[interactionEvent]=interactionEventCallback;this.addListener(interactionEvent,interactionEventCallback)},this)};proto.detachEvents=function(){var options=this.options;var instanceCallbackName;Object.keys(this._callbacks).forEach(function(callbackName){this.removeListener(callbackName,this._callbacks[callbackName])},this)};proto.addListener=function(eventType,callback){this.targetObj.on(eventType,callback)};proto.removeListener=function(eventType,callback){this.targetObj.off(eventType,callback)};proto.track=function(data){this.tracker.track({"type":"event","data":data,"options":this.options})};proto.destroy=function(){this.detachEvents();this.options=null;this.tracker=null;this.targetObj=null;this._callbacks=null};module.exports=EventAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-object":688}],905:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var ac_DOMEvents=require('@marcom/ac-dom-events');var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var defaultOptions={async:!1};function ExitAnalyticsObserver(options){if(errorHandler.exception){return}
this.options=ac_Object.defaults(defaultOptions,options||{});this.tracker=metricsTracker;this._boundOnBeforeUnload=this._onBeforeUnload.bind(this);this.addExitListener()}
proto=ExitAnalyticsObserver.prototype;proto.addExitListener=function(){if('onbeforeunload' in window){ac_DOMEvents.addEventListener(window,'beforeunload',this._boundOnBeforeUnload)}};proto.removeExitListener=function(){if('onbeforeunload' in window){ac_DOMEvents.removeEventListener(window,'beforeunload',this._boundOnBeforeUnload)}};proto._onBeforeUnload=function(e){var data={};data.exitTimeStamp=e.timeStamp;this.tracker.track({"type":"exit","event":e,"data":data,"options":this.options})};proto.destroy=function(){this.removeExitListener();this.options=null;this.tracker=null;this._boundOnBeforeUnload=null};module.exports=ExitAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-dom-events":592,"@marcom/ac-object":688}],906:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var metricsTracker=require('../metricsTracker');var metadata=require('../metadata').getMetadata();var errorHandler=require('../error-handler/ErrorHandler');var defaultOptions={trackAutoRotate:!1,beforeUpdateEvent:'willShow',afterUpdateEvent:'didShow'};var moduleName='GalleryAnalyticsObserver';function GalleryAnalyticsObserver(gallery,options){if(!gallery||typeof gallery!=='object'){errorHandler.log(moduleName,null,gallery+' is not an object')}
if(errorHandler.exception){return}
this.options=ac_Object.defaults(defaultOptions,options||{});this.gallery=gallery;this.tracker=metricsTracker;this.trackedInteractionTypes=[];this.outgoingSlideInteractionType='auto';this.incomingSlideTimestamp=metadata.initialTimeStamp;this._onUpdate=this._onUpdate.bind(this);this._onComplete=this.track.bind(this);this.addListener()}
proto=GalleryAnalyticsObserver.prototype;proto.addListener=function(){if(this.options.beforeUpdateEvent){this.gallery.on(this.options.beforeUpdateEvent,this._onUpdate)}
if(this.options.afterUpdateEvent){this.gallery.on(this.options.afterUpdateEvent,this._onComplete)}};proto.removeListener=function(){if(this.options.beforeUpdateEvent){this.gallery.off(this.options.beforeUpdateEvent,this._onUpdate)}
if(this.options.afterUpdateEvent){this.gallery.off(this.options.afterUpdateEvent,this._onComplete)}};proto._createInteractionEvent=function(evt){var interactionEvent=evt.interactionEvent.originalEvent||evt.interactionEvent;if(interactionEvent){return interactionEvent={type:interactionEvent.type,target:interactionEvent.target,srcElement:interactionEvent.srcElement}}
return null};proto._onUpdate=function(d){var interactionEvent;this.interactionEvent=null;if(d.interactionEvent){this.interactionEvent=this._createInteractionEvent(d)}};proto._getSlideId=function(slide){var slideId='';var length=0;if(slide&&Array.isArray(slide)){length=slide.length;for(var i=0;i<length;i++){if(typeof slide[i].getElementId==='function'){slideId+=slide[i].getElementId()+'-'}}}
return slideId.slice(0,slideId.length-1)};proto.track=function(d){if(this.options.trackAutoRotate===!1){if(!d.interactionEvent||(d.interactionEvent.gallery&&d.interactionEvent.gallery===this.gallery)){return}}
var data=ac_Object.clone(d);data.interactionEvent=this.interactionEvent||this._createInteractionEvent(d);if(!this.options.galleryName){errorHandler.log(moduleName,'track',this.options.galleryName+' is not a valid gallery name')}
if(errorHandler.exception){return}
if(data.incoming&&typeof data.incoming.id!=='string'){data.incoming.id=this._getSlideId(data.incoming)}
if(data.outgoing&&typeof data.outgoing.id!=='string'){data.outgoing.id=this._getSlideId(data.outgoing)}
this.outgoingSlideTimestamp=this.incomingSlideTimestamp;this.incomingSlideTimestamp=Date.now();data.incomingSlideTimestamp=this.incomingSlideTimestamp;data.outgoingSlideTimestamp=this.outgoingSlideTimestamp;this.tracker.track({"type":"gallery","data":data,"observer":this,"options":this.options})};proto.destroy=function(){if(!this.gallery){errorHandler.log(moduleName,'destroy',this.gallery+' is not an object')}
if(errorHandler.exception){return}
this.removeListener();this.options=null;this.tracker=null;this.gallery=null;this.trackedInteractionTypes=null;this.interactionEvent=null};module.exports=GalleryAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metadata":900,"../metricsTracker":901,"@marcom/ac-object":688}],907:[function(require,module,exports){'use strict';var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var ac_Object=require('@marcom/ac-object');var ac_DOMEvents=require('@marcom/ac-dom-events');var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var EventEmitter=require('ac-event-emitter').EventEmitter;var proto;var defaultOptions={dataAttribute:'analytics-link',titleDataAttribute:'analytics-title',silent:!0,autoEnable:!0};function LinkAnalyticsObserver(options){if(errorHandler.exception){return}
this.options=ac_Object.defaults(defaultOptions,options||{});this.tracker=metricsTracker;this.isEnabled=!1;this.defaultTracking=this.track.bind(this);if(this.options.autoEnable===!0){this.enable()}}
proto=LinkAnalyticsObserver.prototype=ac_Object.create(EventEmitter.prototype);proto.enable=function(){if(!this.isEnabled){this.addListener();this.isEnabled=!0;this.trigger('enabled')}};proto.addListener=function(){var element=document.body;ac_DOMEvents.addEventListener(element,'mouseup',this.defaultTracking)};proto.removeListener=function(){var element=document.body;ac_DOMEvents.removeEventListener(element,'mouseup',this.defaultTracking)};proto.track=function(e){var data={};var targetEl;var linkAncestor;var element=ac_DOMEvents.target(e);if(element.nodeName.toLowerCase()==='a'){targetEl=element}
if(!targetEl){linkAncestor=ac_DOMTraversal.ancestor(element,'a');if(linkAncestor){targetEl=linkAncestor}}
if(targetEl){data.targetEl=targetEl;this.tracker.track({"type":"link","event":e,"data":data,"options":this.options})}};proto.destroy=function(){this.removeListener();this.options=null;this.tracker=null;this.isEnabled=null;this.defaultTracking=null};module.exports=LinkAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-dom-events":592,"@marcom/ac-dom-traversal":33,"@marcom/ac-object":688,"ac-event-emitter":832}],908:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var defaultOptions={interactionEvents:['open','close','reopen']};var moduleName='OverlayAnalyticsObserver';function OverlayAnalyticsObserver(overlay,options){if(!overlay||typeof overlay!=='object'||typeof overlay.on!=='function'||typeof overlay.off!=='function'){errorHandler.log(moduleName,null,overlay+' is not an object')}
defaultOptions.interactionEventCallbacks={'open':this._onOpen.bind(this),'close':this._onClose.bind(this),'reopen':this._onReopen.bind(this)};this.options=ac_Object.defaults(defaultOptions,options||{});if(!Array.isArray(this.options.interactionEvents)){errorHandler.log(moduleName,null,this.options.interactionEvents+' is not a valid interaction events array')}
if(errorHandler.exception){return}
this.overlay=overlay;this.tracker=metricsTracker;this.active=!1;this.defaultTracking=this.track.bind(this);this.attachEvents()}
proto=OverlayAnalyticsObserver.prototype;proto.attachEvents=function(){var options=this.options;var customCallback;var interactionEventCallback;options.interactionEvents.forEach(function(interactionEvent){customCallback=options.interactionEventCallbacks[interactionEvent];interactionEventCallback=(typeof customCallback==='function')?customCallback:this.defaultTracking;this.addListener(interactionEvent,interactionEventCallback)}.bind(this))};proto.detachEvents=function(){var options=this.options;var customCallback;var interactionEventCallback;options.interactionEvents.forEach(function(interactionEvent){customCallback=options.interactionEventCallbacks[interactionEvent];interactionEventCallback=(typeof customCallback==='function')?customCallback:this.defaultTracking;this.removeListener(interactionEvent,interactionEventCallback)}.bind(this))};proto.addListener=function(eventName,callback){this.overlay.on(eventName,callback)};proto.removeListener=function(eventName,callback){this.overlay.off(eventName,callback)};proto._onOpen=function(e){this.active=!0;this.track(e)};proto._onReopen=function(e){this.active=!0;this.track(e)};proto._onClose=function(e){this.active=!1;this.track(e)};proto.track=function(e){var data=this.options.data||{};data.active=this.active;this.tracker.track({"type":"overlay","event":e,"data":data,"options":this.options})};proto.destroy=function(){this.detachEvents();this.options=null;this.tracker=null;this.overlay=null;this.active=null;this.defaultTracking=null};module.exports=OverlayAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-object":688}],909:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var EventEmitter=require('ac-event-emitter').EventEmitter;var defaultOptions={autoEnable:!0};function PageAnalyticsObserver(options){if(errorHandler.exception){return}
this.options=ac_Object.defaults(defaultOptions,options||{});this.tracker=metricsTracker;this.data=this.options.data||{};this.isEnabled=!1;if(this.options.autoEnable===!0){this.enable()}}
proto=PageAnalyticsObserver.prototype=ac_Object.create(EventEmitter.prototype);proto.enable=function(){if(!this.isEnabled){this.track();this.isEnabled=!0;this.trigger('enabled')}};proto.track=function(e){var data=this.options.data||{};this.tracker.track({"type":"page","event":e,"data":data,"options":this.options})};proto.destroy=function(){this.options=null;this.tracker=null;this.data=null;this.isEnabled=null};module.exports=PageAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-object":688,"ac-event-emitter":832}],910:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var ElementEngagement=require('ac-element-engagement').ElementEngagement;var metricsTracker=require('../metricsTracker');var errorHandler=require('../error-handler/ErrorHandler');var dataAttr=require('../data-attr/helper');var EventEmitter=require('ac-event-emitter').EventEmitter;var defaultOptions={dataAttribute:'analytics-section-engagement',autoEnable:!0};var trackedElementDefaults={stopOnEngaged:!1,timeToEngage:1000};function SectionAnalyticsObserver(options){if(errorHandler.exception){return}
this.options=ac_Object.defaults(defaultOptions,options||{});this.tracker=metricsTracker;this.elementEngagement=new ElementEngagement();this.isEnabled=!1;if(this.options.autoEnable===!0){this.enable()}}
proto=SectionAnalyticsObserver.prototype=ac_Object.create(EventEmitter.prototype);proto.enable=function(){if(!this.isEnabled){this._loadSections();this.isEnabled=!0;this.trigger('enabled')}};proto._loadSections=function(){this.sections=ac_DOMTraversal.querySelectorAll('[data-'+this.options.dataAttribute+']');this.sections.forEach(function(section){var options;var dataString=section.getAttribute('data-'+this.options.dataAttribute);options=dataAttr.dataStringToObject(dataString);options=this._castDataAttributeOptions(options);options=ac_Object.defaults(trackedElementDefaults,options);this.elementEngagement.addElement(section,options)},this);if(this.sections&&this.sections.length>0){this._setPosition();this.options.elements=this.sections;this._bindEvents();this.elementEngagement.start()}};proto._setPosition=function(){var i;var totalSections=this.sections.length;for(i=0;i<totalSections;i+=1){this.sections[i].position=i+1}};proto._castDataAttributeOptions=function(options){var inViewThreshold;var timeToEngage;var trackOnce;options=ac_Object.clone(options);Object.keys(options).forEach(function(key){var value=options[key];var castValue;if(value==='false'){castValue=!1}else if(value==='true'){castValue=!0}else if(!isNaN(parseFloat(value))){castValue=parseFloat(value)}else{castValue=value}
options[key]=castValue});return options};proto._bindEvents=function(){this.elementEngagement.on('thresholdexit',this._onThresholdExit,this);this.elementEngagement.windowDelegate.on('scroll',this._onScroll,this)};proto._unbindEvents=function(){this.elementEngagement.off('thresholdexit',this._onThresholdExit,this);this.elementEngagement.windowDelegate.off('scroll',this._onScroll,this)};proto._onThresholdExit=function(trackedElement){if(trackedElement.engaged){var data={element:trackedElement};this.elementEngagement.stop(trackedElement);this.track(data)}};proto._onScroll=function(){var windowDelegate=this.elementEngagement.windowDelegate;if(windowDelegate.scrollY()>=windowDelegate.maxScrollY()){this._pageEnd()}};proto._pageEnd=function(){var len=this.elementEngagement.elements.length;var sectionsInView=[];this.elementEngagement.elements.forEach(function(element){if(element.inView&&element.inThreshold&&element.tracking){sectionsInView.push(element)}});sectionsInView.forEach(function(section){if(section.engaged){this._forceTracking(section)}else{if(section.has('engaged')===!1){section.once('engaged',this._forceTracking,this)}}},this)};proto._forceTracking=function(trackedElement){trackedElement.thresholdExitTime=Date.now();this.elementEngagement.stop(trackedElement);this.track({element:trackedElement})};proto.track=function(data){this.tracker.track({type:'section',data:data,options:this.options})};proto.destroy=function(){if(this.elementEngagement){this.elementEngagement.stop()}
this._unbindEvents();this.options=null;this.elementEngagement=null;this.tracker=null;this.sections=null};module.exports=SectionAnalyticsObserver},{"../data-attr/helper":897,"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-dom-traversal":33,"@marcom/ac-object":688,"ac-element-engagement":830,"ac-event-emitter":832}],911:[function(require,module,exports){'use strict';var proto;var ac_Object=require('@marcom/ac-object');var errorHandler=require('../error-handler/ErrorHandler');var metricsTracker=require('../metricsTracker');var ac_DOMNodes_isElement=require('@marcom/ac-dom-nodes/isElement');var defaultOptions={mediaEvents:[],mediaEventCallbacks:{},mediaEventPrefix:''};var moduleName='VideoAnalyticsObserver';var dataAttributeAnalyticsId="data-analytics-id";function VideoAnalyticsObserver(video,options){var prefix;if(!video||typeof video!=='object'){errorHandler.log(moduleName,null,video+' is not an object')}
this.options=ac_Object.defaults(defaultOptions,options||{});if(!Array.isArray(this.options.mediaEvents)){errorHandler.log(moduleName,null,this.options.mediaEvents+' is not a valid media events array')}
if(errorHandler.exception){return}
this.tracker=metricsTracker;this.video=video;this.playCount=0;this.captionsEnableCount=0;this._callbacks={};prefix=this.options.mediaEventPrefix;this._events={play:prefix+'play',ended:prefix+'ended',timeupdate:prefix+'timeupdate',scrubStart:prefix+'scrub-start',scrubEnd:prefix+'scrub-end',captionsEnabled:prefix+'captions-enabled'};this.attachEvents()}
proto=VideoAnalyticsObserver.prototype;proto.attachEvents=function(){var options=this.options;var mediaEventCallback;options.mediaEvents.forEach(function(mediaEvent){mediaEventCallback=options.mediaEventCallbacks[mediaEvent];mediaEventCallback=(typeof mediaEventCallback==='function')?mediaEventCallback:this._defaultTracking.bind(this,mediaEvent);this._callbacks[mediaEvent]=mediaEventCallback;this.addListener(options.mediaEventPrefix+mediaEvent,this._callbacks[mediaEvent])}.bind(this));this._bindPlay();this.video.on(this._events.ended,this._onEnded,this);this.video.on(this._events.captionsEnabled,this._onCaptionsEnabled,this);this.video.on(this._events.timeupdate,this._onTimeupdate,this)};proto.detachEvents=function(){var options=this.options;options.mediaEvents.forEach(function(mediaEvent){this.removeListener(options.mediaEventPrefix+mediaEvent,this._callbacks[mediaEvent])}.bind(this))};proto._onPlay=function(e){var data=this._bundleTrackingData('play',e);data.playCount=this.playCount;this.track(data);this.playCount+=1;this._playBound=!1};proto._onTimeupdate=function(e){if(e.currentTime===0&&!this.ended){if(this.playCount>0){this._bindPlay()}}};proto._bindPlay=function(){if(!this._playBound){this.video.once(this._events.play,this._onPlay,this);this._playBound=!0}};proto._onCaptionsEnabled=function(e){var data=this._bundleTrackingData('captions-enabled',e);data.captionsEnableCount=this.captionsEnableCount;this.track(data);this.captionsEnableCount+=1};proto._onEnded=function(e){var data=this._bundleTrackingData('ended',e);this.ended=!0;this.track(data);this._bindPlay()};proto.addListener=function(eventType,callback){this.video.on(eventType,callback)};proto.removeListener=function(eventType,callback){this.video.off(eventType,callback)};proto._getCommonVideoData=function(){var data={};var videoIdFromDataAttr;data.targetEl=this.video.el||this.video.element||null;videoIdFromDataAttr=(data.targetEl&&ac_DOMNodes_isElement(data.targetEl))?data.targetEl.getAttribute(dataAttributeAnalyticsId):'';data.videoId=(videoIdFromDataAttr)?videoIdFromDataAttr:this.video.targetId;data.ended=this.ended;return data};proto._bundleTrackingData=function(eventType,e){var commonTrackingData=this._getCommonVideoData();commonTrackingData.eventType=eventType;return ac_Object.extend(ac_Object.clone(e),commonTrackingData)};proto._defaultTracking=function(eventType,e){var data=this._bundleTrackingData(eventType,e);this.track(data)};proto.track=function(data){this.tracker.track({type:"video",data:data,options:this.options})};proto.destroy=function(){this.detachEvents();this.options=null;this.tracker=null;this.video=null;this.playCount=null;this.captionsEnableCount=null;this._events=null;this._callbacks=null};module.exports=VideoAnalyticsObserver},{"../error-handler/ErrorHandler":898,"../metricsTracker":901,"@marcom/ac-dom-nodes/isElement":629,"@marcom/ac-object":688}],912:[function(require,module,exports){'use strict';var isLoaded=!1;var ac_DOMEvents=require('@marcom/ac-dom-events');function onDocumentReady(func){function _documentReadyCallback(){if(document.readyState==='complete'){func();ac_DOMEvents.removeEventListener(document,'readystatechange',_documentReadyCallback)}}
if(document.readyState==='complete'){func()}else{ac_DOMEvents.addEventListener(document,'readystatechange',_documentReadyCallback)}}
module.exports=onDocumentReady},{"@marcom/ac-dom-events":592}],913:[function(require,module,exports){'use strict';module.exports={sCode:require('./s-code/sCode')}},{"./s-code/sCode":921}],914:[function(require,module,exports){(function(){'use strict';var ac_DOMNodes=require('@marcom/ac-dom-nodes');var errorHandler=require('../../../error-handler/ErrorHandler');var storeUrlPattern=require('../../../regexp/storeUrlPattern');var moduleName='sCodePluginHelper-DOM';function isIntraPageLink(element){var internalLink=!0;if(ac_DOMNodes.isElement(element)&&element.href){var href=element.getAttribute('href');if(href.charAt(0)!=='#'&&href.indexOf('javascript:')===-1){internalLink=!1}}
return internalLink}
function isStoreLink(url){if(typeof url!=='string'){errorHandler.log(moduleName,'isStoreLink',url+' is not a valid string')}
if(errorHandler.exception){return}
return storeUrlPattern.test(url)}
function getLinkHref(targetEl){return targetEl.getAttribute('href')||''}
module.exports={isIntraPageLink:isIntraPageLink,isStoreLink:isStoreLink,getLinkHref:getLinkHref}}())},{"../../../error-handler/ErrorHandler":898,"../../../regexp/storeUrlPattern":938,"@marcom/ac-dom-nodes":617}],915:[function(require,module,exports){(function(){'use strict';var errorHandler=require('../../../error-handler/ErrorHandler');var moduleName='sCodePluginFormatter';var separator=require('./separator');function productName(value){return lowerCaseString(value)}
function channel(value,locale){var prefix='www.';var customCountryCodeFormat={"fr-ca":"ca.fr"};prefix+=customCountryCodeFormat[locale]?customCountryCodeFormat[locale]:legacyCountryCode(locale);return prefix+'.'+value}
function pageName(originalPageName,locale){var suffix='';var customCountryCodes={"fr-ca":"ca-fr"};var customCode=customCountryCodes[locale];originalPageName=originalPageName||'';if(typeof locale==='string'){locale=locale.toLowerCase();suffix=customCode?customCode:legacyCountryCode(locale);suffix=_decorateCountryCode(suffix)}
return lowerCaseString(originalPageName)+suffix}
function eventString(prefix,suffix){prefix=prefix||'';suffix=suffix||'';return!!prefix?(prefix+'@'+suffix):suffix}
function countryCodeFilter(locale){var translated;var customCountryFilter={"fr-ca":"ca/fr","en-419":"lae","es-419":"la","en-ap":"asia"};var reversedLocales=['fr-be','nl-be','fr-ch','de-ch'];if(customCountryFilter[locale]){translated=customCountryFilter[locale]}else if(reversedLocales.indexOf(locale)>=0){var localeStr=_transformLocale(locale);translated=localeStr.reverse().join('-')}else{translated=_getCountryCodeFromLocale(locale)}
return translated}
function legacyCountryCode(locale){var legacy;var customCountryCode={"fr-be":"bf","nl-be":"bl","fr-ch":"cr","de-ch":"ce","en-419":"la","es-419":"la","en-gb":"uk"};if(customCountryCode[locale]){legacy=customCountryCode[locale]}else{legacy=_getCountryCodeFromLocale(locale)}
return legacy}
function cleanProps(properties){var cleanProperties={};if(typeof(properties)==='object'){for(var key in properties){cleanProperties[key]=_sanitize(properties[key])}}
return cleanProperties}
function stringReplacer(str,target,replaceWith){var transformedStr=str;target=(typeof target==='string')?target:'';replaceWith=(typeof replaceWith==='string')?replaceWith:'';if(typeof transformedStr==='string'){transformedStr=transformedStr.replace(new RegExp(target,'gi'),replaceWith)}
return transformedStr}
function getRegionAncestry(data){var regionAncestry='';if(Array.isArray(data.regionAncestry)){data.regionAncestry.forEach(function(region){regionAncestry+=region.name+separator.pipe})}
return regionAncestry}
function lowerCaseString(str){if(typeof str==='string'){str=str.toLowerCase()}
return str}
function _getCountryCodeFromLocale(locale){if(!locale){errorHandler.log(moduleName,'_getCountryCodeFromLocale','locale should be a valid string')}
if(errorHandler.exception){return}
var temp=_transformLocale(locale);var country;if(temp.length>1){country=lowerCaseString(temp[1])}
return country}
function _decorateCountryCode(countryCode){if(!countryCode){errorHandler.log(moduleName,'_decorateCountryCode','countryCode should be a valid string')}
if(errorHandler.exception){return}
return' ('+lowerCaseString(countryCode)+')'}
var whitelist=/[\ì\î\ë\í]/g;function _sanitize(value){if(typeof value==='string'){value=value.replace(whitelist,'')}
return value}
function _transformLocale(locale){return locale.split(/[-_]/)}
module.exports={productName:productName,channel:channel,pageName:pageName,eventString:eventString,countryCodeFilter:countryCodeFilter,legacyCountryCode:legacyCountryCode,cleanProps:cleanProps,stringReplacer:stringReplacer,lowerCaseString:lowerCaseString,getRegionAncestry:getRegionAncestry}}())},{"../../../error-handler/ErrorHandler":898,"./separator":917}],916:[function(require,module,exports){(function(){'use strict';var errorHandler=require('../../../error-handler/ErrorHandler');var sProps={channel:'sChannel',campaign:'sCampaign',bucket:'sBucket',bucketProduct:'sBucketProduct',bucketStore:'sBucketStore'};var moduleName='sCodePluginMetadataHelper';function channel(topLevelMetadata){var value=topLevelMetadata[sProps.channel];if(!value){errorHandler.log(moduleName,'channel','analytics-s-channel metadata tag must exist')}
if(errorHandler.exception){return}
value=value.toLowerCase().split(' ').join('.');return value}
function bucket(bucketIndex,topLevelMetadata){var bucketProp=sProps.bucket+bucketIndex;if(!topLevelMetadata[bucketProp]){errorHandler.log(moduleName,'bucket','analytics-s-bucket-'+bucketIndex+' metadata tag must exist')}
if(errorHandler.exception){return}
return topLevelMetadata[bucketProp]}
function bucketProduct(bucketIndex,topLevelMetadata){var bucketProductProp=sProps.bucketProduct+bucketIndex;var bucketProd=topLevelMetadata[bucketProductProp];return bucketProd}
function bucketStore(topLevelMetadata){return topLevelMetadata[sProps.bucketStore]||''}
function campaign(topLevelMetadata){return topLevelMetadata[sProps.campaign]||''}
function platform(){var value='other';var userAgent=navigator.userAgent;var patterns={'mobile other':'/(kindle|silk-accelerated|android|webos|rim tablet os|windows phone)/i','windows':/windows/i,'iphone/ipod touch':/(iphone|ipod)/i,'ipad':/(ipad)/i,'Mac':/Mac OS X/i};for(var key in patterns){if(userAgent.match(patterns[key])){value=key;break}}
return value}
module.exports={channel:channel,bucket:bucket,bucketProduct:bucketProduct,bucketStore:bucketStore,platform:platform,campaign:campaign}}())},{"../../../error-handler/ErrorHandler":898}],917:[function(require,module,exports){(function(){'use strict';module.exports={pipe:' | ',hyphen:' - ',colon:': '}}())},{}],918:[function(require,module,exports){(function(){'use strict';var STORAGE_KEY=require('../../../storageKey').appleMetrics;var ac_Storage=require('ac-storage');var ac_feature=require('@marcom/ac-feature');var separator=require('./separator');var DOMHelper=require('./DOM');function setNavigationSrc(data,metadata,linkUrl){var navSrcObj={};var navSrcStr;var regionAncestry=_getRegionAncestry(data);var label=(data.targetEl.getAttribute('data-label')||'');if(data.region){navSrcObj.region=data.region}
navSrcObj.pageName=metadata.pageName||'';navSrcObj.linkText=data.linkText||'';navSrcObj.eVar1=(navSrcObj.pageName+separator.pipe+regionAncestry+navSrcObj.linkText);if(data.region==='search'){navSrcObj.prop7='www'+separator.colon+label;navSrcObj.eVar2=label;navSrcObj.events='event8'}
navSrcStr=JSON.stringify(navSrcObj);if(DOMHelper.isStoreLink(linkUrl)===!1){ac_Storage.setItem(STORAGE_KEY,navSrcStr)}else{_navPathInfoHandOff(navSrcStr)}}
function _getRegionAncestry(data){var regionAncestry='';if(Array.isArray(data.regionAncestry)){data.regionAncestry.forEach(function(region){regionAncestry+=region.name+separator.pipe})}
return regionAncestry}
function _navPathInfoHandOff(navSrcStr){if(ac_feature.localStorageAvailable()===!0){window.localStorage.setItem(STORAGE_KEY,navSrcStr)}}
module.exports=setNavigationSrc}())},{"../../../storageKey":943,"./DOM":914,"./separator":917,"@marcom/ac-feature":659,"ac-storage":882}],919:[function(require,module,exports){(function(){'use strict';var DOMHelper=require('./DOM');function async(data){var isIntraPageLink=DOMHelper.isIntraPageLink(data.targetEl);var isAsync=!0;if(!isIntraPageLink){isAsync=!1}
return isAsync}
module.exports={async:async}}())},{"./DOM":914}],920:[function(require,module,exports){(function(){'use strict';var formatter=require('./formatter');function set(metadata,originalMetaData){return[{name:"{PAGE_NAME}",value:metadata.pageName},{name:"{PAGE_NAME_NO_LOCALE}",value:originalMetaData.pageName},{name:"{CHANNEL}",value:metadata.channel},{name:"{CAMPAIGN}",value:metadata.campaign},{name:"{COUNTRY_CODE}",value:metadata.legacyCountryCode},{name:"{COUNTRY_CODE_FILTER}",value:metadata.countryCodeFilter},{name:"{PRODUCT_NAME}",value:metadata.productName},{name:"{PLATFORM}",value:metadata.platform}]}
function translate(str,templateVarArr){if(typeof str==='string'){templateVarArr.forEach(function(templateVar){if(templateVar.name&&typeof templateVar.name==='string'){if(str.toLowerCase().indexOf(templateVar.name.toLowerCase())>-1){str=formatter.stringReplacer(str,templateVar.name,templateVar.value)}}})}
return str}
module.exports={set:set,translate:translate}}())},{"./formatter":915}],921:[function(require,module,exports){'use strict';var proto;var errorHandler=require('../../error-handler/ErrorHandler');var ac_Object=require('@marcom/ac-object');var ac_sCode=require('@marcom/ac-s-code');var topLevelMetadata=require('../../metadata');var formatter=require('./helpers/formatter');var metadataHelper=require('./helpers/metadata');var translator=require('./translator/translator');var submitMethods=require('./submit-methods/submitMethods');var templateVarHelper=require('./helpers/templateVar');var countryBucket=['us','au|ca|cn|de|es|fr|it|jp|uk','ap|at|bf|bl|br|ce|cr|dk|fi|hk|ie|in|kr|la|mx|nl|no|nz|pl|pt|ru|se|sg|th|tw|za'];var moduleName='SCodePlugin';function SCodePlugin(){if(errorHandler.exception){return}
this._initializePlugin(topLevelMetadata.getMetadata())}
proto=SCodePlugin.prototype;proto.reset=function(){var options={force:!0};this.clearProps();this._initializePlugin(topLevelMetadata.refreshMetadata(),options)};proto._initializePlugin=function(topLevelMetadataObj,options){this.setPageMetadata(topLevelMetadataObj);this.setFormattedValues();this.setTemplateVars();this.formattedValues.channel=this._replaceTemplateVars(this.formattedValues.channel);this.initializeSCode(topLevelMetadataObj,options)};proto.initializeSCode=function(topLevelMetadataObj,options){options=options||{};options.bucket=this.getBucket(topLevelMetadataObj);options.channel=this.formattedValues.channel;options.pageName=this.formattedValues.pageName;options.linkInternalFilters=this.getLinkInternalFilters();ac_sCode.init(options)};proto.setPageMetadata=function(topLevelMetadataObj){this.pageMetadata=ac_Object.clone(topLevelMetadataObj);this.pageMetadata.platform=metadataHelper.platform();this.pageMetadata.campaign=metadataHelper.campaign(topLevelMetadataObj);this.pageMetadata.channel=metadataHelper.channel(topLevelMetadataObj);this.pageMetadata.pageName=formatter.lowerCaseString(this.pageMetadata.pageName);this.pageMetadata.locale=formatter.lowerCaseString(this.pageMetadata.locale)};proto.setFormattedValues=function(){this.formattedValues={pageName:formatter.pageName(this.pageMetadata.pageName,this.pageMetadata.locale),channel:formatter.channel(this.pageMetadata.channel,this.pageMetadata.locale),productName:formatter.productName(this.pageMetadata.productName),countryCodeFilter:formatter.countryCodeFilter(this.pageMetadata.locale),legacyCountryCode:formatter.legacyCountryCode(this.pageMetadata.locale),campaign:this.pageMetadata.campaign,platform:this.pageMetadata.platform}};proto.setTemplateVars=function(){this.templateVarArr=templateVarHelper.set(this.formattedValues,this.pageMetadata)};proto.clearProps=function(){var sCode=ac_sCode.getInstance();if(typeof sCode==='object'){sCode.prop6=sCode.g_prop6=sCode.pageURL=sCode.g_pageURL=sCode.g_channel=''}};proto.translate=function(request){if(!request||typeof request!=='object'){errorHandler.log(moduleName,'translate','Request param ('+request+') is not an object')}
if(errorHandler.exception){return}
request=translator.translate(request,this.formattedValues,this.pageMetadata);return request};proto.submit=function(translatedRequest){var options;var sCode=ac_sCode.getInstance();if(!translatedRequest||typeof translatedRequest!=='object'){errorHandler.log(moduleName,'submit','Request param ('+translatedRequest+') is not an object')}
if(errorHandler.exception){return}
if(!translatedRequest.type||typeof translatedRequest.type!=='string'){errorHandler.log(moduleName,'submit','property "type" ('+translatedRequest.type+'") must be a string')}
if(!window.s||typeof window.s!=='object'){errorHandler.log(moduleName,'submit','sCode ('+window.s+') is not an object')}
if(errorHandler.exception){return}
options=translatedRequest.options||{};this._setSCodeProps(translatedRequest);if(options.silent!==!0){if(translatedRequest.submitMethod&&submitMethods[translatedRequest.submitMethod]){submitMethods[translatedRequest.submitMethod](translatedRequest,this.formattedValues,sCode)}}};proto.getLinkInternalFilters=function(){var value;if(this.formattedValues.countryCodeFilter!=='us'){value=this.formattedValues.countryCodeFilter}
return value};proto._setSCodeProps=function(request){var properties=request.properties||{};var sCode=ac_sCode.getInstance();sCode.linkTrackEvents='';request.data.linkTrackVars=request.data.linkTrackVars||[];for(var key in properties){if(key==='events'){sCode.linkTrackEvents=properties[key]}
if(key!=='title'){request.data.linkTrackVars.push(key);sCode[key]=properties[key]}}};proto.getBucket=function(topLevelMetadataObj){var countryBucketSize=countryBucket.length;var index=2;for(var i=0;i<countryBucketSize;i++){if(countryBucket[i].indexOf(this.formattedValues.legacyCountryCode)!==-1){index=i;break}}
var bucketMetaTagValue=metadataHelper.bucket(index,topLevelMetadataObj);var bucket=this._replaceTemplateVars(bucketMetaTagValue);var bucketProduct=this._replaceTemplateVars(metadataHelper.bucketProduct(index,topLevelMetadataObj));var bucketStore=this._replaceTemplateVars(metadataHelper.bucketStore(topLevelMetadataObj));return bucket+(!!bucketProduct?(','+bucketProduct):'')+(!!bucketStore?(','+bucketStore):'')};proto._replaceTemplateVars=function(str){return templateVarHelper.translate(str,this.templateVarArr)};module.exports=SCodePlugin},{"../../error-handler/ErrorHandler":898,"../../metadata":900,"./helpers/formatter":915,"./helpers/metadata":916,"./helpers/templateVar":920,"./submit-methods/submitMethods":923,"./translator/translator":936,"@marcom/ac-object":688,"@marcom/ac-s-code":713}],922:[function(require,module,exports){(function(){'use strict';function submit(request,metadata,sCode){var url=window.location.href;var title=request.properties.title||'';var src;var img1x1;if(typeof sCode==='object'){src=_getBasePath(url)+((metadata.countryCodeFilter!=='us')?metadata.countryCodeFilter:'')+'/b/ss/'+sCode.un+'/'+(sCode.mobile?'5.1':'1')+'/'+sCode.version+'/s0'+Date.now()+'?ndh=1&t='+_getTimestamp()+'&fid='+sCode.fid+'&g='+url+'&pageName='+metadata.pageName+'&cc='+sCode.currencyCode+'&c3='+title+'&h1='+sCode.channel+'&pe=lnk_e&pev2='+title+'&s='+sCode.resolution+'&c='+sCode.colorDepth+'&j='+sCode.javascriptVersion+'&v='+sCode.javaEnabled+'&k='+sCode.cookiesEnabled+'&bw='+sCode.browserWidth+'&bh='+sCode.browserHeight+'&p='+sCode.plugins+'&r='+sCode.eVar49;img1x1=document.createElement('img');img1x1.setAttribute('width','1');img1x1.setAttribute('height','1');img1x1.setAttribute('border','0');img1x1.src=src;return img1x1}}
function _getBasePath(url){var protocol;var host;url=url.split('https://www.apple.com/');protocol=url[0];host=url[2];return protocol+'//'+host+'/'}
function _getTimestamp(){var now=new Date();return now.getDate()+'/'+now.getMonth()+'/'+now.getFullYear()+' '+now.getHours()+':'+now.getMinutes()+':'+now.getSeconds()+' '+now.getDay()+' '+now.getTimezoneOffset()}
module.exports=submit}())},{}],923:[function(require,module,exports){var t=require('./t');var tl=require('./tl');var manual=require('./manual');module.exports={t:t,tl:tl,manual:manual}},{"./manual":922,"./t":924,"./tl":925}],924:[function(require,module,exports){(function(){'use strict';function submit(request,metadata,sCode){if(typeof sCode==='object'&&typeof sCode.t==='function'){sCode.pageName=metadata.pageName;sCode.channel=metadata.channel;sCode.t()}}
module.exports=submit}())},{}],925:[function(require,module,exports){(function(){'use strict';var errorHandler=require('../../../error-handler/ErrorHandler');var moduleName='sCodePluginSubmitMethodtl';var DOMHelper=require('../helpers/DOM');function submit(request,metadata,sCode){var linkType;var targetEl;if(typeof sCode==='object'&&typeof sCode.tl==='function'){if(typeof request.data!=='object'){errorHandler.log(moduleName,'submit','Request param data ('+request.data+') is not an object')}
if(typeof request.properties.title!=='string'){errorHandler.log(moduleName,'submit','Request param title ('+request.properties.title+') is not a string')}
if(errorHandler.exception){return}
sCode.linkTrackVars='eVar54,eVar49';if(request.data.linkTrackVars&&request.data.linkTrackVars.length>0){sCode.linkTrackVars+=','+request.data.linkTrackVars.join(',')}
linkType=request.data.linkType||'o';targetEl=_targetEl(request.data.targetEl);sCode.forcedLinkTrackingTimeout=_forcedLinkTrackingTimeout(request);sCode.tl(targetEl,linkType,request.properties.title);_clearTrackingData(sCode)}}
function _clearTrackingData(sCode){sCode.linkTrackVars='';sCode.linkTrackEvents=''}
function _forcedLinkTrackingTimeout(request){var duration=0;var element=request.data.targetEl;var href;if(request.type&&request.type==='link'||request.type==='click'){if(_isOutgoingLink(element)===!0){duration=500}}
return duration}
function _targetEl(element){var result=_isOutgoingLink(element);return(result===!0)?element:!0}
function _isOutgoingLink(element){var isOutgoingLink=!0;var isIntraPageLink=DOMHelper.isIntraPageLink(element);if(!element||isIntraPageLink===!0){isOutgoingLink=!1}
return isOutgoingLink}
module.exports=submit}())},{"../../../error-handler/ErrorHandler":898,"../helpers/DOM":914}],926:[function(require,module,exports){(function(){'use strict';var formatter=require('../../helpers/formatter');function translate(request,metadata,originalMetaData){var translatedRequest=request;var data=translatedRequest.data;var interactionTypePrefix={"play":"s","replay":"r","ended":"e","pause":"p"};var divider=' - ';var properties={};properties.prop13=formatter.eventString('a',interactionTypePrefix[data.interactionType])+divider+originalMetaData.pageName;properties.prop3=properties.title=formatter.eventString('a',interactionTypePrefix[data.interactionType])+divider+originalMetaData.pageName+divider+formatter.lowerCaseString(data.title);properties.prop4=data.audioSrc;translatedRequest.properties=properties;translatedRequest.submitMethod='tl';return translatedRequest}
module.exports={translate:translate}}())},{"../../helpers/formatter":915}],927:[function(require,module,exports){(function(){'use strict';var setOptions=require('../../helpers/setOptions');var separator=require('../../helpers/separator');var formatter=require('../../helpers/formatter');function translate(request,metadata,originalMetaData){var translatedRequest=request;translatedRequest.properties={};_setDefaultTrackingProps(translatedRequest,originalMetaData);translatedRequest.options.async=setOptions.async(translatedRequest.data);translatedRequest.submitMethod='tl';return translatedRequest}
function _setDefaultTrackingProps(translatedRequest,originalMetaData){var linkText=translatedRequest.data.linkText.toLowerCase();var defaultText=originalMetaData.pageName+separator.hyphen+(translatedRequest.data.linkImg||linkText);var regionAncestry=formatter.getRegionAncestry(translatedRequest.data);translatedRequest.properties.title=defaultText;translatedRequest.properties.prop3=defaultText;translatedRequest.properties.eVar1=originalMetaData.pageName+separator.hyphen+(regionAncestry||'')+linkText;_setCustomTrackingProps(translatedRequest)}
function _setCustomTrackingProps(translatedRequest){if(!translatedRequest.data.dataAnalyticsClick&&typeof translatedRequest.data.dataAnalyticsClick!=='object'){return}
for(var key in translatedRequest.data.dataAnalyticsClick){translatedRequest.properties[key]=translatedRequest.data.dataAnalyticsClick[key]}
_formatDefaultProps(translatedRequest)}
function _formatDefaultProps(translatedRequest){if(translatedRequest.data.dataAnalyticsClick.prefix&&translatedRequest.properties.prop3){formatter.eventString(translatedRequest.data.dataAnalyticsClick.prefix,translatedRequest.properties.prop3)}}
module.exports={translate:translate}}())},{"../../helpers/formatter":915,"../../helpers/separator":917,"../../helpers/setOptions":919}],928:[function(require,module,exports){(function(){'use strict';var formatter=require('../../helpers/formatter');var templateVarHelper=require('../../helpers/templateVar');function translate(request,metadata,originalMetaData){var translatedRequest=request;var data=translatedRequest.data;var templateVarArr=templateVarHelper.set(metadata,originalMetaData);var properties={};for(var key in data){properties[key]=data[key];if(typeof properties[key]==='string'){properties[key]=templateVarHelper.translate(properties[key],templateVarArr)}}
translatedRequest.properties=properties;translatedRequest.submitMethod='tl';return translatedRequest}
module.exports={translate:translate}}())},{"../../helpers/formatter":915,"../../helpers/templateVar":920}],929:[function(require,module,exports){(function(){'use strict';var formatter=require('../../helpers/formatter');function translate(request,metadata,originalMetaData){var translatedRequest=request;var data=translatedRequest.data;var divider=' - ';var properties={};var timeSpentOnPage=((data.exitTimeStamp-originalMetaData.initialTimeStamp)*0.001).toFixed(2);properties.prop3=timeSpentOnPage;properties.title=formatter.eventString(timeSpentOnPage,originalMetaData.pageName);translatedRequest.properties=properties;translatedRequest.submitMethod='manual';return translatedRequest}
module.exports={translate:translate}}())},{"../../helpers/formatter":915}],930:[function(require,module,exports){(function(){'use strict';var errorHandler=require('../../../../error-handler/ErrorHandler');var formatter=require('../../helpers/formatter');var moduleName='sCodePluginGalleryTranslator';function translate(request,metadata,originalMetaData){var translatedRequest=request;var data=translatedRequest.data;var divider=' - ';var interactionTypeMap={"click":"ci","keydown":"ki","swipe":"si","dot":"bi","thumb":"ci","paddle":"pi","auto":"ai"};var outgoingInteractionType;var incomingInteractionType;var properties={};var propString='';_clearConditionalsCodeProps(properties);if(data.incomingInteractionType){if(interactionTypeMap[data.incomingInteractionType]){incomingInteractionType=interactionTypeMap[data.incomingInteractionType]}}
if(data.outgoingInteractionType){if(interactionTypeMap[data.outgoingInteractionType]){outgoingInteractionType=interactionTypeMap[data.outgoingInteractionType]}}
if(!incomingInteractionType){errorHandler.log(moduleName,'translate',incomingInteractionType+'" is not a valid interaction type for the incoming slide')}
if(!outgoingInteractionType){errorHandler.log(moduleName,'translate',outgoingInteractionType+'" is not a valid interaction type for the outgoing slide')}
if(errorHandler.exception){return}
propString=originalMetaData.pageName+divider+request.options.galleryName+divider;properties.prop2=formatter.eventString(outgoingInteractionType,'')+propString+data.outgoing.id;properties.prop3=properties.title=formatter.eventString(incomingInteractionType,'')+propString+data.incoming.id;if(data.galleryFirstTimeTrigger===!0){properties.prop16='gallery interaction';properties.eVar16=(request.options.galleryName?request.options.galleryName+' ':'')+'gallery interaction';properties.events='event1'}
translatedRequest.properties=properties;translatedRequest.submitMethod='tl';return translatedRequest}
function _clearConditionalsCodeProps(properties){properties.prop16=properties.eVar16=''}
module.exports={translate:translate}}())},{"../../../../error-handler/ErrorHandler":898,"../../helpers/formatter":915}],931:[function(require,module,exports){(function(){'use strict';var setOptions=require('../../helpers/setOptions');var separator=require('../../helpers/separator');var formatter=require('../../helpers/formatter');var DOMHelper=require('../../helpers/DOM');var dataAttrHelper=require('../../../../data-attr/helper');var templateVarHelper=require('../../helpers/templateVar');var setNavigationSrc=require('../../helpers/setNavigationSrc');function translate(request,metadata,originalMetaData){var translatedRequest=request;var linkUrl=DOMHelper.getLinkHref(translatedRequest.data.targetEl);translatedRequest.properties={};translatedRequest.options.async=setOptions.async(translatedRequest.data);_setDefaultTrackingProps(translatedRequest,originalMetaData,linkUrl);_setCustomProps(translatedRequest,metadata,originalMetaData);setNavigationSrc(translatedRequest.data,metadata,linkUrl);translatedRequest.submitMethod='tl';return translatedRequest}
function _setDefaultTrackingProps(translatedRequest,originalMetaData,linkUrl){var identityStr='';var defaultLinkTitle=_getDefaultLinkTitle(translatedRequest.data,originalMetaData);if(linkUrl.indexOf('http://')>-1||linkUrl.indexOf('https:///')>-1){identityStr=separator.hyphen+(linkUrl.split('https://www.apple.com/')[2].split('.')[0]+' link')}
translatedRequest.properties.title=defaultLinkTitle+identityStr}
function _setCustomProps(translatedRequest,metadata,originalMetaData){var dataAttrValue=translatedRequest.data.targetEl.getAttribute('data-'+translatedRequest.options.dataAttribute);var templateVarArr=templateVarHelper.set(metadata,originalMetaData);var customProperties;if(dataAttrValue){customProperties=dataAttrHelper.dataStringToObject(dataAttrValue);for(var prop in customProperties){if(customProperties.hasOwnProperty(prop)){translatedRequest.properties[prop]=customProperties[prop];if(typeof translatedRequest.properties[prop]==='string'){translatedRequest.properties[prop]=templateVarHelper.translate(translatedRequest.properties[prop],templateVarArr)}}}}}
function _getDefaultLinkTitle(data,originalMetaData){var title=originalMetaData.pageName+separator.hyphen+data.linkText;var postfix=data.linkImg||data.linkText||data.linkId||'';if(data.region){title=formatter.eventString(data.region.charAt(0),postfix)}
return title}
module.exports={translate:translate}}())},{"../../../../data-attr/helper":897,"../../helpers/DOM":914,"../../helpers/formatter":915,"../../helpers/separator":917,"../../helpers/setNavigationSrc":918,"../../helpers/setOptions":919,"../../helpers/templateVar":920}],932:[function(require,module,exports){(function(){'use strict';var formatter=require('../../helpers/formatter');function translate(request,metadata,originalMetaData){var translatedRequest=request;var properties={};translatedRequest.properties=properties;translatedRequest.submitMethod='tl';return translatedRequest}
module.exports={translate:translate}}())},{"../../helpers/formatter":915}],933:[function(require,module,exports){(function(){'use strict';var STORAGE_KEY=require('../../../../storageKey').appleMetrics;var separator=require('../../helpers/separator');var ac_Storage=require('ac-storage');var formatter=require('../../helpers/formatter');var DOMHelper=require('../../helpers/DOM');var templateVarHelper=require('../../helpers/templateVar');var errorHandler=require('../../../../error-handler/ErrorHandler');var ac_feature=require('@marcom/ac-feature');var w=window;var moduleName='sCodePageTranslator';function translate(request,metadata,originalMetaData){var translatedRequest=request;translatedRequest.properties={};_setDefaultProps(translatedRequest);_replaceTemplateVars(translatedRequest,metadata,originalMetaData);_setPageRequestProps(translatedRequest,metadata);_setNavSrcProps(translatedRequest,metadata);translatedRequest.submitMethod='t';return translatedRequest}
function _setDefaultProps(translatedRequest){translatedRequest.data.prop20=translatedRequest.data.prop20||'AOS'+separator.colon+'{COUNTRY_CODE}'}
function _setPageRequestProps(translatedRequest,metadata){if(typeof translatedRequest.properties!=='object'){errorHandler.log(moduleName,'_setPageRequestProps',translatedRequest.properties+' is not a valid properties object in the analytics request')}
if(errorHandler.exception){return}
translatedRequest.properties.prop19=translatedRequest.properties.prop20+separator.colon+metadata.pageName;translatedRequest.properties.eVar3=translatedRequest.properties.prop20}
function _setNavSrcProps(translatedRequest,metadata){var navSrcData=_getNavPathInfo()||{};translatedRequest.properties.prop25=_getNavSource(navSrcData);translatedRequest.properties.eVar1=navSrcData.eVar1||null;translatedRequest.properties.products=navSrcData.products||null;translatedRequest.properties.eVar2=navSrcData.eVar2||null;translatedRequest.properties.prop7=navSrcData.prop7||null;if(navSrcData.events){translatedRequest.properties.events=navSrcData.events}}
function _getNavPathInfo(){var isArrivingFromStore=_isArrivingFromStore();var navSrcStr;var navSrcObj;if(isArrivingFromStore===!0&&ac_feature.localStorageAvailable()===!0){navSrcStr=w.localStorage.getItem(STORAGE_KEY);navSrcObj=_transformLocalStorageStrtoObject(w.localStorage,navSrcStr)}else{navSrcStr=ac_Storage.getItem(STORAGE_KEY);navSrcObj=_transformLocalStorageStrtoObject(ac_Storage,navSrcStr)}
return navSrcObj}
function _transformLocalStorageStrtoObject(storageObj,str){var obj;if(str){storageObj.removeItem(STORAGE_KEY);obj=JSON.parse(str)}
return obj}
function _isArrivingFromStore(){var referrer=document.referrer;return(referrer&&DOMHelper.isStoreLink(referrer))}
function _replaceTemplateVars(translatedRequest,metadata,originalMetaData){var templateVarArr=templateVarHelper.set(metadata,originalMetaData);if(typeof translatedRequest.data!=='object'){errorHandler.log(moduleName,'_replaceTemplateVars',translatedRequest.data+' is not a valid data object in the analytics request')}
if(errorHandler.exception){return}
for(var key in translatedRequest.data){if(translatedRequest.data.hasOwnProperty(key)){translatedRequest.properties[key]=translatedRequest.data[key];if(typeof translatedRequest.properties[key]==='string'){translatedRequest.properties[key]=templateVarHelper.translate(translatedRequest.properties[key],templateVarArr)}}}}
function _getNavSource(navSourceData){var entryPoint=_getEntryPointStr();if(navSourceData.region){return navSourceData.region}
if(entryPoint){return entryPoint}
return'other nav or none'}
function _getEntryPointStr(){var referrer=document.referrer;var currentDomain=window.location.host;var entryPoint;if(!referrer){entryPoint='direct entry'}
if(referrer&&referrer!==''&&referrer.split('?')[0].indexOf(currentDomain)===-1){entryPoint='third party'}
return entryPoint}
module.exports={translate:translate}}())},{"../../../../error-handler/ErrorHandler":898,"../../../../storageKey":943,"../../helpers/DOM":914,"../../helpers/formatter":915,"../../helpers/separator":917,"../../helpers/templateVar":920,"@marcom/ac-feature":659,"ac-storage":882}],934:[function(require,module,exports){(function(){'use strict';function translate(request,metadata,originalMetaData){var translatedRequest=request;var trackedElement=translatedRequest.data.element;var divider=' - ';var properties={};var elementName=trackedElement.name||trackedElement.id||'';var timeInThreshold=trackedElement.thresholdExitTime-trackedElement.thresholdEnterTime;var sectionNumber=(trackedElement.element&&trackedElement.element.position)?' .'+trackedElement.element.position:'';properties.prop34=properties.title=originalMetaData.pageName+divider+elementName+divider+'section engaged'+sectionNumber;properties.prop35=(timeInThreshold/1000).toFixed(2);translatedRequest.properties=properties;translatedRequest.submitMethod='tl';return translatedRequest}
module.exports={translate:translate}}())},{}],935:[function(require,module,exports){(function(){'use strict';var formatter=require('../../helpers/formatter');function translate(request,metadata,originalMetaData){var translatedRequest=request;var data=translatedRequest.data;var divider=' - ';var eventTypeMap={"started":"s","replay":"rp","ended":"e","reended":"re","captions-enabled":"ce"};var eventType=(data.eventType&&eventTypeMap[data.eventType])?eventTypeMap[data.eventType]:data.eventType;var properties={};if(!eventTypeMap[data.eventType]){translatedRequest.options.silent=!0}else{translatedRequest.options.silent=!1}
_clearConditionalsCodeProps(properties);properties.title=properties.prop13=formatter.eventString('v',eventType)+': '+originalMetaData.pageName+divider+data.videoId;if(data.eventType==='started'){properties.prop16=properties.eVar16='video plays';properties.events='event2'}else if(data.eventType==='ended'){properties.prop16=properties.eVar16='video ends'}
if(data.eventType==='captions-enabled'){properties.title=properties.prop2=originalMetaData.pageName+divider+data.videoId+divider+'cc';properties.prop13=''}
if(data.videoType&&data.playerType){properties.prop18=data.videoType+' via '+data.playerType}
translatedRequest.properties=properties;translatedRequest.submitMethod='tl';return translatedRequest}
function _clearConditionalsCodeProps(properties){properties.prop16=properties.eVar16=properties.prop18=properties.prop2=''}
module.exports={translate:translate}}())},{"../../helpers/formatter":915}],936:[function(require,module,exports){(function(){'use strict';var components={audio:require('./component/audio'),gallery:require('./component/gallery'),link:require('./component/link'),click:require('./component/click'),overlay:require('./component/overlay'),page:require('./component/page'),section:require('./component/section'),video:require('./component/video'),exit:require('./component/exit'),event:require('./component/event')};function translate(request,metaData,originalMetaData){var translatedRequest=request;if(request.type&&components[request.type]){translatedRequest=components[request.type].translate(request,metaData,originalMetaData)}
return translatedRequest}
module.exports={translate:translate,components:components}}())},{"./component/audio":926,"./component/click":927,"./component/event":928,"./component/exit":929,"./component/gallery":930,"./component/link":931,"./component/overlay":932,"./component/page":933,"./component/section":934,"./component/video":935}],937:[function(require,module,exports){'use strict';module.exports=new RegExp(/[\{|\}]/g)},{}],938:[function(require,module,exports){'use strict';module.exports=new RegExp(/^(https?:\/\/.*\.apple\.com)?(\/[a-z\-_0-9]*)?\/shop(\/.*)?$/i)},{}],939:[function(require,module,exports){'use strict';module.exports=new RegExp(/(\{[a-zA-Z][\w-]+?\})/g)},{}],940:[function(require,module,exports){'use strict';var proto;var dataAttribute='analytics-region';var validJSONPattern=/(?:\w+:\w+)(?:,(?=(?:\w+:\w+))|$)/;var singleValuePattern=/[\w\s]+/;var dataAttrHelper=require('../data-attr/helper');function Region(regionElement){this.element=regionElement;this.childRegions={};this.parentRegion='';this.options=this.getDataOptions();this.name=this.setName()}
proto=Region.prototype;proto.setName=function(){var value='';if(this.options.name){value=this.options.name}
if(!this.options.name&&this.element.id){this.options.name=this.element.id}
return value};proto.getDataOptions=function(){var data={};var value=this.element.getAttribute('data-'+dataAttribute);value=value.charAt(value.length-1)===','?value.substr(0,value.length-1):value;if(this._isJSONable(value)){data=dataAttrHelper.dataStringToObject(value)}else if(this._isSingleValue(value)){data.name=value}
return data};proto._isJSONable=function(value){return validJSONPattern.test(value)};proto._isSingleValue=function(value){return singleValuePattern.test(value)};module.exports={Region:Region,dataAttribute:dataAttribute}},{"../data-attr/helper":897}],941:[function(require,module,exports){(function(){'use strict';var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var ac_DOMNodes=require('@marcom/ac-dom-nodes');var Region=require('./Region').Region;var dataAttribute=require('./Region').dataAttribute;var allRegions=[];var tree={};function getAllRegions(){if(allRegions.length>0){return allRegions}
var allRegionsElements=ac_DOMTraversal.querySelectorAll('[data-'+dataAttribute+']');var topLevelRegion;var regionsLen=allRegionsElements.length;var i=0;function _getChildRegions(regionObj){var childRegion;while(ac_DOMNodes.isElement(allRegionsElements[i+1])&&regionObj.element.contains(allRegionsElements[i+1])){childRegion=new Region(allRegionsElements[i+1]);allRegions.push(childRegion);childRegion.parentRegion=regionObj.name;regionObj.childRegions[childRegion.name]=childRegion;i+=1;_getChildRegions(childRegion)}}
for(i;i<regionsLen;i+=1){topLevelRegion=new Region(allRegionsElements[i]);tree[topLevelRegion.name]=topLevelRegion;allRegions.push(topLevelRegion);_getChildRegions(topLevelRegion)}
return allRegions}
function getTree(){getAllRegions();if(Object.keys(tree).length>0){return tree}}
function getRegionByElement(element){var parsedRegions=getAllRegions();if(ac_DOMNodes.isElement(element)){var allAncestorRegions=getRegionAncestryByElement(element);if(allAncestorRegions.length>0){return allAncestorRegions.pop()}}}
function getRegionAncestryByElement(element){var parsedRegions=getAllRegions();if(ac_DOMNodes.isElement(element)){return parsedRegions.filter(function(region){return region.element.contains(element)})}}
function getRegionByName(name){var parsedRegions=getAllRegions();if(typeof name==='string'){return parsedRegions.filter(function(region){return region.name===name})}}
function refreshRegion(region){var regionObj=region;if(ac_DOMNodes.isElement(region)){regionObj=getRegionByElement(region)}
if(typeof regionObj==='object'){allRegions.forEach(function(r){if(r.element===regionObj.element){r.options=r.getDataOptions();r.name=r.setName()}})}}
module.exports={getTree:getTree,getAllRegions:getAllRegions,getRegionByElement:getRegionByElement,getRegionByName:getRegionByName,getRegionAncestryByElement:getRegionAncestryByElement,refreshRegion:refreshRegion}}())},{"./Region":940,"@marcom/ac-dom-nodes":617,"@marcom/ac-dom-traversal":33}],942:[function(require,module,exports){'use strict';var topLevelMetadata=require('./metadata');var regions=require('./regions/regions');var metricsTracker=require('./metricsTracker');function resetACAnalytics(){topLevelMetadata.refreshMetadata();regions.refreshRegion();metricsTracker.plugin.reset()}
module.exports=resetACAnalytics},{"./metadata":900,"./metricsTracker":901,"./regions/regions":941}],943:[function(require,module,exports){(function(){'use strict';module.exports={appleMetrics:'apple_Metrics',analyticsQueue:'ac-analytics-queue'}}())},{}],944:[function(require,module,exports){'use strict';var proto;var moduleName='TokenRegistry';var errorHandler=require('../error-handler/ErrorHandler');function TokenRegistry(){this.tokens={};this._size=0}
proto=TokenRegistry.prototype;proto.setToken=function(tokenName,tokenValue){if(typeof tokenName!=='string'){errorHandler.log(moduleName,'setToken',tokenName+' is not a valid string')}
if(typeof tokenValue!=='string'){errorHandler.log(moduleName,'setToken',tokenValue+' is not a valid string')}
if(errorHandler.exception){return}
this.tokens[tokenName]=tokenValue;this._updateSize()};proto.removeToken=function(tokenName){var index;if(typeof tokenName!=='string'){errorHandler.log(moduleName,'removeToken',tokenName+' is not a valid string')}
if(!this.tokens[tokenName]){errorHandler.log(moduleName,'removeToken',tokenName+' doesnt exist')}
if(errorHandler.exception){return}
delete this.tokens[tokenName];this._updateSize()};proto.getToken=function(tokenName){if(typeof tokenName!=='string'){errorHandler.log(moduleName,'getToken',tokenName+' is not a valid string')}
if(errorHandler.exception){return}
return this.tokens[tokenName]};proto.size=function(){return this._size};proto.clear=function(){this.tokens={};this._size=0};proto._updateSize=function(){this._size=Object.keys(this.tokens).length};module.exports=new TokenRegistry()},{"../error-handler/ErrorHandler":898}],945:[function(require,module,exports){'use strict';var proto;var moduleName='TokenReplacer';var tokenPattern=require('../regexp/tokenPattern');var curlysPattern=require('../regexp/curlyBracePattern');var tokenRegistry=require('./Registry');var errorHandler=require('../error-handler/ErrorHandler');function TokenReplacer(){this.registry=tokenRegistry}
proto=TokenReplacer.prototype;proto.replace=function(str,replacements){if(typeof str!=='string'){errorHandler.log(moduleName,'replace',str+' is not a valid string')}
if(errorHandler.exception){return}
if(typeof replacements==='object'){str=this._replace(str,replacements)}
if(this.registry.size()>0){str=this._replace(str,this.registry.tokens)}
return str};proto.parseTokens=function(str){var tokens;if(typeof str!=='string'){errorHandler.log(moduleName,'parseTokens',str+' is not a valid string')}
if(errorHandler.exception){return}
tokens=str.match(tokenPattern);if(tokens){return tokens.map(function(value){return this._removeCurlys(value)}.bind(this))}};proto._replace=function(str,replacements){return str.replace(tokenPattern,function(match){return((typeof replacements[this._removeCurlys(match)]==='string')?replacements[this._removeCurlys(match)]:match)}.bind(this))};proto._removeCurlys=function(str){str=str.trim();return str.replace(curlysPattern,'')};module.exports=new TokenReplacer()},{"../error-handler/ErrorHandler":898,"../regexp/curlyBracePattern":937,"../regexp/tokenPattern":939,"./Registry":944}],946:[function(require,module,exports){(function(){'use strict';var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var ac_DOMEvents=require('@marcom/ac-dom-events');var interactionTypes={play:function(request){if(request.data.ended===!0){return'replay'}
return'play'},ended:function(request){return request.event.type},pause:function(request){return request.event.type}};function translate(request){var translatedRequest=request;var targetEl=ac_DOMEvents.target(request.event);translatedRequest.data.targetEl=targetEl;if(targetEl&&targetEl.getAttribute('src')){translatedRequest.data.audioSrc=targetEl.getAttribute('src')}
if(!translatedRequest.data.audioSrc){var audioSourceTag=ac_DOMTraversal.querySelector('source',targetEl);if(audioSourceTag&&audioSourceTag.getAttribute('src')){translatedRequest.data.audioSrc=audioSourceTag.getAttribute('src')}}
translatedRequest.data.interactionType=(interactionTypes[request.event.type])?interactionTypes[request.event.type](request):request.event.type;translatedRequest.data.title=translatedRequest.data.targetEl.title||'No title found';translatedRequest.data.duration=translatedRequest.data.targetEl.duration;translatedRequest.data.currentTime=translatedRequest.data.targetEl.currentTime;return translatedRequest}
module.exports={translate:translate}}())},{"@marcom/ac-dom-events":592,"@marcom/ac-dom-traversal":33}],947:[function(require,module,exports){(function(){'use strict';var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var regions=require('../../regions/regions');var parseFromDataAttribute=require('./../helpers/parseFromDataAttribute');function translate(request){var translatedRequest=request;var linkImg=ac_DOMTraversal.querySelector('img',request.data.targetEl);var linkImgSrc;var targetElParentRegion=regions.getRegionByElement(request.data.targetEl);var linkTitle=request.data.targetEl.getAttribute('data-'+request.options.titleDataAttribute);var dataAttrValue=request.data.targetEl.getAttribute('data-'+request.options.dataAttribute);var customProperties=(dataAttrValue)?parseFromDataAttribute(dataAttrValue,request.data.targetEl):'';translatedRequest.data.regionAncestry=regions.getRegionAncestryByElement(request.data.targetEl);if(linkImg){linkImgSrc=linkImg.getAttribute('src');translatedRequest.data.linkImg=linkImgSrc.substring(linkImgSrc.lastIndexOf('https://www.apple.com/')+1,linkImgSrc.length);if(typeof translatedRequest.data.linkImg==='string'){translatedRequest.data.linkImg=translatedRequest.data.linkImg.toLowerCase()}}
if(linkTitle){translatedRequest.data.linkText=linkTitle}else{if(typeof request.data.targetEl.innerText==='string'){translatedRequest.data.linkText=request.data.targetEl.innerText.trim()}else{translatedRequest.data.linkText=request.data.targetEl.textContent.trim()}}
if(typeof targetElParentRegion==='object'){translatedRequest.data.region=targetElParentRegion.name}
if(customProperties){translatedRequest.data.dataAnalyticsClick=customProperties}
return translatedRequest}
module.exports={translate:translate}}())},{"../../regions/regions":941,"./../helpers/parseFromDataAttribute":956,"@marcom/ac-dom-traversal":33}],948:[function(require,module,exports){(function(){'use strict';function translate(request){var translatedRequest=request;return translatedRequest}
module.exports={translate:translate}}())},{}],949:[function(require,module,exports){(function(){'use strict';function translate(request){var translatedRequest=request;return translatedRequest}
module.exports={translate:translate}}())},{}],950:[function(require,module,exports){(function(){'use strict';var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var interactionTypes={click:function(request){var type='click';var navType=_triggerNavType(request);return navType||type},auto:function(request){var type='auto';return type},keydown:function(request){var type='keydown';return type},touchend:function(request){var type='swipe';return type},touchstart:function(request){var type='swipe';return type},touchmove:function(request){var type='swipe';return type}};function translate(request){var interactionEventType=_interactionEventType(request);var interactionType=interactionEventType;var observer=request.observer;var translatedRequest=request;if(interactionTypes[interactionEventType]){interactionType=interactionTypes[interactionEventType](request)}
translatedRequest.data.targetEl=_getTargetElement(request);translatedRequest.data.slideInViewTime=_slideInViewTime(request);translatedRequest.data.outgoingInteractionType=request.observer.outgoingSlideInteractionType;translatedRequest.data.incomingInteractionType=interactionType;translatedRequest.data.galleryFirstTimeTrigger=_isFirstTimeGalleryTrigger(translatedRequest);observer.outgoingSlideInteractionType=interactionType;return translatedRequest}
function _triggerNavType(request){var type=!1;var trigger=_getTargetElement(request);var nav;if(trigger){nav=ac_DOMTraversal.ancestor(trigger,'nav');type=nav?_getNavTypeFromClassName(nav.className):type}
return type}
function _getNavTypeFromClassName(className){var type=!1;['paddle','dot','thumb'].some(function(typeName){if(className.indexOf(typeName)>=0){type=typeName;return!0}});return type}
function _getTargetElement(request){var interactionEvent=request.data.interactionEvent;var element=!1;if(interactionEvent){element=(interactionEvent.target||interactionEvent.srcElement)}
return element}
function _slideInViewTime(request){return request.data.incomingSlideTimestamp-request.data.outgoingSlideTimestamp}
function _isFirstTimeGalleryTrigger(request){var incomingInteractionType=request.data.incomingInteractionType;var observer=request.observer;var firstTimeGalleryTrigger=!1;if(incomingInteractionType!=='auto'&&observer.trackedInteractionTypes.indexOf(incomingInteractionType)===-1){firstTimeGalleryTrigger=!0;observer.trackedInteractionTypes.push(incomingInteractionType)}
return firstTimeGalleryTrigger}
function _interactionEventType(request){var data=request.data;var type='auto';if(data.interactionEvent&&data.interactionEvent.type){type=data.interactionEvent.type}
return type}
module.exports={translate:translate}}())},{"@marcom/ac-dom-traversal":33}],951:[function(require,module,exports){(function(){'use strict';var ac_DOMTraversal=require('@marcom/ac-dom-traversal');var regions=require('../../regions/regions');function translate(request){var translatedRequest=request;var linkImg=ac_DOMTraversal.querySelector('img',request.data.targetEl);var linkImgSrc;var targetElParentRegion=regions.getRegionByElement(request.data.targetEl);var linkTitle=request.data.targetEl.getAttribute('data-'+request.options.titleDataAttribute);if(linkTitle){translatedRequest.data.linkText=linkTitle}else{translatedRequest.data.linkText=(typeof request.data.targetEl.innerText==='string')?request.data.targetEl.innerText.trim():request.data.targetEl.textContent.trim()}
translatedRequest.data.regionAncestry=regions.getRegionAncestryByElement(request.data.targetEl);if(request.data.targetEl.id){translatedRequest.data.linkId=request.data.targetEl.id}
if(linkImg){linkImgSrc=linkImg.getAttribute('src');translatedRequest.data.linkImg=linkImgSrc.substring(linkImgSrc.lastIndexOf('https://www.apple.com/')+1,linkImgSrc.length);if(typeof translatedRequest.data.linkImg==='string'){translatedRequest.data.linkImg=translatedRequest.data.linkImg.toLowerCase()}}
if(typeof targetElParentRegion==='object'){translatedRequest.data.region=targetElParentRegion.name}
return translatedRequest}
module.exports={translate:translate}}())},{"../../regions/regions":941,"@marcom/ac-dom-traversal":33}],952:[function(require,module,exports){(function(){'use strict';function translate(request){var translatedRequest=request;return translatedRequest}
module.exports={translate:translate}}())},{}],953:[function(require,module,exports){(function(){'use strict';function translate(request){var translatedRequest=request;return translatedRequest}
module.exports={translate:translate}}())},{}],954:[function(require,module,exports){(function(){'use strict';function translate(request){return request}
module.exports={translate:translate}}())},{}],955:[function(require,module,exports){(function(){'use strict';var eventTypes={play:function(request){if(request.data.ended===!0){return'replay'}
return'started'},ended:function(request){if(request.data.ended===!0){return'reended'}
return'ended'},'captions-enabled':function(request){if(request.data.captionsEnableCount===0){return'captions-enabled'}
return'captions-reenabled'}};var interactionTypes={click:function(request){return request.data.event.type}};function translate(request){var translatedRequest=request;translatedRequest.data.eventType=(eventTypes[request.data.eventType])?eventTypes[request.data.eventType](request):request.data.eventType;if(request.data.event&&interactionTypes[request.data.event.type]){translatedRequest.data.interactionType=interactionTypes[request.data.event.type](request)}
return translatedRequest}
module.exports={translate:translate}}())},{}],956:[function(require,module,exports){(function(){'use strict';var tokenReplacer=require('./../../tokens/Replacer');var dataAttrHelper=require('./../../data-attr/helper');var isElement=require('@marcom/ac-dom-nodes/isElement');var hasAttribute=require('@marcom/ac-dom-nodes/hasAttribute');function parseFromDataAttribute(dataAttrValue,el){var dataObj;var tokensArr;var replacements={};var translatedStr;tokensArr=tokenReplacer.parseTokens(dataAttrValue);if(!tokensArr||tokensArr.length===0){return}
replacements=_getTokenValues(el,tokensArr);translatedStr=tokenReplacer.replace(dataAttrValue,replacements);dataObj=dataAttrHelper.dataStringToObject(translatedStr);return dataObj}
function _getTokenValues(el,tokensArr){var replacements={};var value;var len=tokensArr.length;if(isElement(el)){for(var i=0;i<len;i++){if(hasAttribute(el,tokensArr[i])){value=el.getAttribute(tokensArr[i]);replacements[tokensArr[i]]=value}}}
return replacements}
module.exports=parseFromDataAttribute}())},{"./../../data-attr/helper":897,"./../../tokens/Replacer":945,"@marcom/ac-dom-nodes/hasAttribute":616,"@marcom/ac-dom-nodes/isElement":629}],957:[function(require,module,exports){(function(){'use strict';var errorHandler=require('../error-handler/ErrorHandler');var components={audio:require('./component/audio'),gallery:require('./component/gallery'),link:require('./component/link'),click:require('./component/click'),overlay:require('./component/overlay'),page:require('./component/page'),section:require('./component/section'),video:require('./component/video'),exit:require('./component/exit'),event:require('./component/event')};function translate(request){var translatedRequest=request;if(request.type&&components[request.type]){if(typeof request.data!=='object'){errorHandler.log('Translator','translate','request.data ('+request.data+') must be an object')}
if(errorHandler.exception){return}
translatedRequest=components[request.type].translate(request)}
return translatedRequest}
module.exports={translate:translate,components:components}}())},{"../error-handler/ErrorHandler":898,"./component/audio":946,"./component/click":947,"./component/event":948,"./component/exit":949,"./component/gallery":950,"./component/link":951,"./component/overlay":952,"./component/page":953,"./component/section":954,"./component/video":955}],958:[function(require,module,exports){module.exports=clone;function clone(a){var out=new Float32Array(16);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}},{}],959:[function(require,module,exports){module.exports=create;function create(){var out=new Float32Array(16);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}},{}],960:[function(require,module,exports){module.exports=fromRotationTranslation;function fromRotationTranslation(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;out[0]=1-(yy+zz);out[1]=xy+wz;out[2]=xz-wy;out[3]=0;out[4]=xy-wz;out[5]=1-(xx+zz);out[6]=yz+wx;out[7]=0;out[8]=xz+wy;out[9]=yz-wx;out[10]=1-(xx+yy);out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}},{}],961:[function(require,module,exports){module.exports=identity;function identity(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}},{}],962:[function(require,module,exports){module.exports=invert;function invert(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det){return null}
det=1.0/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a02*b10-a01*b11-a03*b09)*det;out[2]=(a31*b05-a32*b04+a33*b03)*det;out[3]=(a22*b04-a21*b05-a23*b03)*det;out[4]=(a12*b08-a10*b11-a13*b07)*det;out[5]=(a00*b11-a02*b08+a03*b07)*det;out[6]=(a32*b02-a30*b05-a33*b01)*det;out[7]=(a20*b05-a22*b02+a23*b01)*det;out[8]=(a10*b10-a11*b08+a13*b06)*det;out[9]=(a01*b08-a00*b10-a03*b06)*det;out[10]=(a30*b04-a31*b02+a33*b00)*det;out[11]=(a21*b02-a20*b04-a23*b00)*det;out[12]=(a11*b07-a10*b09-a12*b06)*det;out[13]=(a00*b09-a01*b07+a02*b06)*det;out[14]=(a31*b01-a30*b03-a32*b00)*det;out[15]=(a20*b03-a21*b01+a22*b00)*det;return out}},{}],963:[function(require,module,exports){module.exports=multiply;function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=b0*a00+b1*a10+b2*a20+b3*a30;out[1]=b0*a01+b1*a11+b2*a21+b3*a31;out[2]=b0*a02+b1*a12+b2*a22+b3*a32;out[3]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[4];b1=b[5];b2=b[6];b3=b[7];out[4]=b0*a00+b1*a10+b2*a20+b3*a30;out[5]=b0*a01+b1*a11+b2*a21+b3*a31;out[6]=b0*a02+b1*a12+b2*a22+b3*a32;out[7]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[8];b1=b[9];b2=b[10];b3=b[11];out[8]=b0*a00+b1*a10+b2*a20+b3*a30;out[9]=b0*a01+b1*a11+b2*a21+b3*a31;out[10]=b0*a02+b1*a12+b2*a22+b3*a32;out[11]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[12];b1=b[13];b2=b[14];b3=b[15];out[12]=b0*a00+b1*a10+b2*a20+b3*a30;out[13]=b0*a01+b1*a11+b2*a21+b3*a31;out[14]=b0*a02+b1*a12+b2*a22+b3*a32;out[15]=b0*a03+b1*a13+b2*a23+b3*a33;return out}},{}],964:[function(require,module,exports){module.exports=rotate;function rotate(out,a,rad,axis){var x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z),s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22;if(Math.abs(len)<0.000001){return null}
len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*s;b22=z*z*t+c;out[0]=a00*b00+a10*b01+a20*b02;out[1]=a01*b00+a11*b01+a21*b02;out[2]=a02*b00+a12*b01+a22*b02;out[3]=a03*b00+a13*b01+a23*b02;out[4]=a00*b10+a10*b11+a20*b12;out[5]=a01*b10+a11*b11+a21*b12;out[6]=a02*b10+a12*b11+a22*b12;out[7]=a03*b10+a13*b11+a23*b12;out[8]=a00*b20+a10*b21+a20*b22;out[9]=a01*b20+a11*b21+a21*b22;out[10]=a02*b20+a12*b21+a22*b22;out[11]=a03*b20+a13*b21+a23*b22;if(a!==out){out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}
return out}},{}],965:[function(require,module,exports){module.exports=rotateX;function rotateX(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}
out[4]=a10*c+a20*s;out[5]=a11*c+a21*s;out[6]=a12*c+a22*s;out[7]=a13*c+a23*s;out[8]=a20*c-a10*s;out[9]=a21*c-a11*s;out[10]=a22*c-a12*s;out[11]=a23*c-a13*s;return out}},{}],966:[function(require,module,exports){module.exports=rotateY;function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}
out[0]=a00*c-a20*s;out[1]=a01*c-a21*s;out[2]=a02*c-a22*s;out[3]=a03*c-a23*s;out[8]=a00*s+a20*c;out[9]=a01*s+a21*c;out[10]=a02*s+a22*c;out[11]=a03*s+a23*c;return out}},{}],967:[function(require,module,exports){module.exports=rotateZ;function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}
out[0]=a00*c+a10*s;out[1]=a01*c+a11*s;out[2]=a02*c+a12*s;out[3]=a03*c+a13*s;out[4]=a10*c-a00*s;out[5]=a11*c-a01*s;out[6]=a12*c-a02*s;out[7]=a13*c-a03*s;return out}},{}],968:[function(require,module,exports){module.exports=scale;function scale(out,a,v){var x=v[0],y=v[1],z=v[2];out[0]=a[0]*x;out[1]=a[1]*x;out[2]=a[2]*x;out[3]=a[3]*x;out[4]=a[4]*y;out[5]=a[5]*y;out[6]=a[6]*y;out[7]=a[7]*y;out[8]=a[8]*z;out[9]=a[9]*z;out[10]=a[10]*z;out[11]=a[11]*z;out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}},{}],969:[function(require,module,exports){module.exports=translate;function translate(out,a,v){var x=v[0],y=v[1],z=v[2],a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23;if(a===out){out[12]=a[0]*x+a[4]*y+a[8]*z+a[12];out[13]=a[1]*x+a[5]*y+a[9]*z+a[13];out[14]=a[2]*x+a[6]*y+a[10]*z+a[14];out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]}else{a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a03;out[4]=a10;out[5]=a11;out[6]=a12;out[7]=a13;out[8]=a20;out[9]=a21;out[10]=a22;out[11]=a23;out[12]=a00*x+a10*y+a20*z+a[12];out[13]=a01*x+a11*y+a21*z+a[13];out[14]=a02*x+a12*y+a22*z+a[14];out[15]=a03*x+a13*y+a23*z+a[15]}
return out}},{}],970:[function(require,module,exports){module.exports=transpose;function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a01;out[6]=a[9];out[7]=a[13];out[8]=a02;out[9]=a12;out[11]=a[14];out[12]=a03;out[13]=a13;out[14]=a23}else{out[0]=a[0];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a[1];out[5]=a[5];out[6]=a[9];out[7]=a[13];out[8]=a[2];out[9]=a[6];out[10]=a[10];out[11]=a[14];out[12]=a[3];out[13]=a[7];out[14]=a[11];out[15]=a[15]}
return out}},{}],971:[function(require,module,exports){module.exports=create;function create(){var out=new Float32Array(3)
out[0]=0
out[1]=0
out[2]=0
return out}},{}],972:[function(require,module,exports){module.exports=cross;function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2]
out[0]=ay*bz-az*by
out[1]=az*bx-ax*bz
out[2]=ax*by-ay*bx
return out}},{}],973:[function(require,module,exports){module.exports=dot;function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}},{}],974:[function(require,module,exports){module.exports=fromValues;function fromValues(x,y,z){var out=new Float32Array(3)
out[0]=x
out[1]=y
out[2]=z
return out}},{}],975:[function(require,module,exports){module.exports=length;function length(a){var x=a[0],y=a[1],z=a[2]
return Math.sqrt(x*x+y*y+z*z)}},{}],976:[function(require,module,exports){module.exports=normalize;function normalize(out,a){var x=a[0],y=a[1],z=a[2]
var len=x*x+y*y+z*z
if(len>0){len=1/Math.sqrt(len)
out[0]=a[0]*len
out[1]=a[1]*len
out[2]=a[2]*len}
return out}},{}],977:[function(require,module,exports){module.exports=create
function create(){var out=new Float32Array(4)
out[0]=0
out[1]=0
out[2]=0
out[3]=0
return out}},{}],978:[function(require,module,exports){module.exports=fromValues
function fromValues(x,y,z,w){var out=new Float32Array(4)
out[0]=x
out[1]=y
out[2]=z
out[3]=w
return out}},{}],979:[function(require,module,exports){module.exports=transformMat4
function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3]
out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w
out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w
out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w
out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w
return out}},{}],980:[function(require,module,exports){$(document).ready(function(){var forceFocus=!1;var winY=0;var autoInit=function(){$('input[data-auto]').focus(function(){if($(window).responsiveLessThan('sm')){if(!forceFocus){winY=$(window).scrollTop();$(window).scrollTop(1);if($.isiOS()){setTimeout(function(){$(window).scrollTop(0)},100)}}else{forceFocus=!1}}
var $autoForm=$(this).closest('.form-auto-suggest');var $auto=$autoForm.find('.auto-suggest');autoSuggestOn($auto);$(this).trigger('keyup')});$('input[data-auto]').bind('keyup',function(e){if(e.keyCode===38||e.keyCode===40){return}
var term=$(this).val();var $source=$('#'+$(this).attr('data-source'));var $autoForm=$(this).closest('.form-auto-suggest');if(e.keyCode===13){if($autoForm.hasClass('match')){return}
autoSuggestAdd(term,$autoForm);return}
var $auto=$autoForm.find('.auto-suggest');var $autoDefault=$auto.find('.auto-suggest__default');var $autoEmpty=$auto.find('.auto-suggest__empty');var $autoResults=$auto.find('.auto-suggest__results');if(!$auto.hasClass('active')){autoSuggestOn($auto)}else{if($autoForm.next('.curtain').length){var $curtain=$autoForm.next('.curtain');$autoForm.addClass('form-group-curtain');$.curtainOn($curtain)}}
if(term.length>2){$autoDefault.addClass('hide');if(term.toLowerCase()!='current location'){$(this).removeClass('current')}else{$(this).addClass('current')}
var results=autoSuggestProcess(term,$source,$autoEmpty,$autoResults)}else{$auto.addClass('auto-suggest--empty');$autoForm.removeClass('match--true');$autoDefault.removeClass('hide');$autoEmpty.addClass('hide');$autoResults.addClass('hide')}});$('.auto-suggest-cancel').on('click keyup',function(e){if(e.type==="click"||e.type==="keyup"&&e.which===13){autoSuggestOff()}})};var autoNav=function(e,$auto){var $activeAuto=$auto.children('div:not(.hide)');var selected=$activeAuto.find('li').index($('li.selected'));var $a11yMsg=$activeAuto.closest('.form-auto-suggest').find('.auto-suggest-msg');$a11yMsg.html('');if(e.keyCode===38||e.keyCode===40){var next;if(e.keyCode===38){next=selected-1;if(next<0){next=0}}
else if(e.keyCode===40){next=selected+1}
if($activeAuto.find('li:eq('+next+')').length){$activeAuto.find('li').removeClass('selected');var $next=$activeAuto.find('li:eq('+next+')');$next.addClass('selected');$a11yMsg.html($next.text()+' highlighted, hit enter to select.')}
e.preventDefault()}
if(e.keyCode===13){if(selected!==-1&&!$(':focus').hasClass('clearable-trigger')){var $list=$activeAuto.find('li:eq('+selected+')').children('a');autoSuggestListAdd($list)}
e.preventDefault()}};var autoSuggestOn=function($auto){$('html').addClass('auto-suggest-on');$auto.addClass('active');var $autoForm=$auto.closest('.form-auto-suggest');$autoForm.addClass('active');$autoForm.find('.auto-suggest-input').attr('aria-expanded','true');autoSuggestList();$.clickFocus(!0,'auto-suggest','.form-auto-suggest',autoSuggestOff,!0);if($autoForm.next('.curtain').length){var $curtain=$autoForm.next('.curtain');$autoForm.addClass('form-group-curtain');$.curtainOn($curtain)}
if($autoForm.find('input[data-match-only]').length){$autoForm.addClass('match')}
$(document).unbind('keydown.auto-nav').bind('keydown.auto-nav',function(e){autoNav(e,$auto)})};var autoSuggestOff=function(){setTimeout(function(){$('html').removeClass('auto-suggest-on');var $auto=$('.auto-suggest.active');var $autoForm=$auto.closest('.form-auto-suggest');$autoForm.removeClass('active match--true');$autoForm.find('.auto-suggest-input').attr('aria-expanded','false');$auto.removeClass('active').find('li').removeClass('selected');if(!$(':focus').attr('data-auto')){$('.form-auto-suggest').removeClass('form-group-curtain');$.curtainOff()}
$.clickFocus(!1,'auto-suggest');$(document).unbind('keydown.auto-nav');if($(window).responsiveLessThan('sm')){$(window).scrollTop(winY)}},0)};var autoSuggestCompare=function(term,arr){var return_arr=[];var term=term.toLowerCase();for(var i=0;i<arr.length;i++){if(typeof arr[i].term==='string'||typeof arr[i].title==='string'){if(arr[i].title){var current_title=arr[i].title;var current_title_mod=current_title.toLowerCase();var link='#';for(var j=0;j<arr[i].list.length;j++){var current_term=arr[i].list[j].name;var current_term_mod=current_term.toLowerCase();if(current_term_mod.indexOf(term)>-1||current_title_mod.indexOf(term)>-1){var termIndex=current_term_mod.indexOf(term)>-1?current_term_mod.indexOf(term):1000;var return_term=autoSuggestMatch(term,current_term,termIndex,link,current_title);return_arr.push(return_term)}}}
else{var current_term=arr[i].term;var current_term_mod=current_term.toLowerCase();var link=arr[i].link;if(current_term_mod.indexOf(term)>-1){var termIndex=current_term_mod.indexOf(term);var return_term=autoSuggestMatch(term,current_term,termIndex,link);return_arr.push(return_term)}}}}
return return_arr};var autoSuggestMatch=function(term,current_term,termIndex,link,title){if(typeof title==="undefined"||title===null){title=null}
var return_term='<a href="'+link+'" data-value="'+current_term+'"';return_term+=title?' data-value-title="'+title+'"':'';return_term+='>';return_term+=title?'<span class="auto-suggest__list__title">'+title+': </span>':'';return_term+=current_term.substring(0,termIndex);return_term+='<strong>'+current_term.substring(termIndex,termIndex+term.length)+'</strong>';return_term+=current_term.substring(termIndex+term.length,current_term.length);return_term+='</a>';return return_term};var autoSuggestProcess=function(term,$source,$autoEmpty,$autoResults){var $autoForm=$autoResults.closest('.form-auto-suggest');var $a11yMsg=$autoForm.find('.auto-suggest-msg');$a11yMsg.html('');var results=!1;var terms_output='';if($source.html()==undefined){return}
var data=JSON.parse($source.html());for(var j=0;j<data.length;j++){var obj=data[j];var terms_arr=autoSuggestCompare(term,obj.terms);if(terms_arr.length>0){results=!0;if(obj.title){terms_output+=' <div class="title">'+obj.title+'</div>'}
terms_output+='<ul class="auto-suggest__list" role="listbox">';for(var k=0;k<terms_arr.length;k++){if(k<10){terms_output+='<li role="option">'+terms_arr[k]+'</li>'}}
terms_output+='</ul>';$a11yMsg.html(terms_arr.length+' result found. Use up and down arrow keys to navigate.')}}
if(results){$autoResults.closest('.auto-suggest').removeClass('auto-suggest--empty');$autoForm.addClass('match--true');$autoEmpty.addClass('hide');$autoResults.removeClass('hide').html(terms_output);autoSuggestList();autoSuggestLimit($autoForm)}else{$autoResults.closest('.auto-suggest').addClass('auto-suggest--empty');$autoForm.removeClass('match--true');$autoEmpty.removeClass('hide');$autoResults.addClass('hide')}};var autoSuggestList=function(){$('.auto-suggest__list a').on('click keyup',function(e){if(e.type==="click"||e.type==="keyup"&&e.which===13){autoSuggestListAdd($(this));e.preventDefault()}});$('.auto-suggest__list a').hover(function(){var $auto=$(this).closest('.auto-suggest__list');$auto.find('li').removeClass('selected')})};var autoSuggestListAdd=function($list){var value=$list.attr('data-value');var title=$list.attr('data-value-title');var $autoForm=$list.closest('.form-auto-suggest');var $input=$autoForm.find('input[data-auto]');if($input.attr('data-title')){title=$input.attr('data-title')}
if($(this).hasClass('current-location')){$input.addClass('current')}
forceFocus=!0;$input.val('').trigger('keyup').focus();autoSuggestAdd(value,$autoForm,title)};var autoSuggestAdd=function(value,$autoForm,title){var $autoList=$autoForm.find('.auto-suggest-list');var inputTags=$autoList.hasClass('auto-suggest-list--input')?!0:!1;var $input=$autoForm.find('input.auto-suggest-input');if($input.attr('data-title')){title=$input.attr('data-title')}
if(typeof title==="undefined"||title===null){var outputTitle=''}else{var outputTitle='<span class="auto-suggest-list__title">'+title+': </span>'}
if($autoForm.hasClass('form-group--searchview')){$.searchViewAdd(value);$.curtainOff()}
dataName=value.toLowerCase();var newTerm='<li data-name="'+dataName+'">';if(inputTags){newTerm+='<input name="'+dataName+'" id="'+dataName+'" type="checkbox" value="1" class="phone-btn-xs" checked /><label for="'+dataName+'">'+outputTitle+value+'</label>'}else{newTerm+='<button class="delete"><span class="a11y">Remove: '+value+'</span><span class="button-icon"></span><span class="button-fallback">x</span></button>'+outputTitle+value}
newTerm+='</li>';if(!$autoList.find('li[data-name="'+dataName+'"]').length&&value.length){$autoList.append(newTerm);autoSuggestRemove()}else{$autoList.find('li[data-name="'+dataName+'"] input').prop('checked',!0)}
$input.removeClass('current').val('');if(!$input.attr('data-done-clear')||$input.attr('data-done-clear')=='false'){var ph=$input.attr('placeholder');$input.attr('placeholder','').val(value).attr('placeholder',ph);if($.isIE8()){autoSuggestOff()}}else{autoSuggestOff()}
if($(window).responsiveLessThan('sm')){autoSuggestOff();$input.blur()}
$(window).trigger('auto-suggest-update',[$autoForm,value])};var autoSuggestRemove=function(){$('.auto-suggest-list .delete').unbind('click').click(function(){var $item=$(this).parent('li');var $autoForm=$item.closest('.form-auto-suggest');$item.remove();$(window).trigger('auto-suggest-update',[$autoForm])})};var autoSuggestLimit=function($autoForm){var $autoSuggest=$autoForm.find('.auto-suggest');var limit=5;if($autoForm.find('.auto-suggest-input').attr('data-results-limit')){limit=$autoForm.find('.auto-suggest-input').attr('data-results-limit')}
if($autoSuggest.find('.auto-suggest__results li').length<=limit){return}
var $title=$autoSuggest.find('.auto-suggest__results .title');$autoSuggest.find('.auto-suggest__results li:lt('+limit+')').wrapAll('<div class="auto-suggest-calc">');var eleH=$autoSuggest.find('.auto-suggest-calc').outerHeight()+$title.outerHeight()+20;$autoSuggest.css('max-height',eleH)};autoInit();autoSuggestRemove();$(window).on('auto-suggest-off',function(){autoSuggestOff()});$(window).on('global-rebind',function(){autoInit()})})},{}],981:[function(require,module,exports){function browser(){var doc=document.documentElement;if(window.navigator.userAgent.indexOf('MSIE 10.0')>=0){doc.setAttribute('data-useragent','ie-10')}
if(window.navigator.userAgent.indexOf('MSIE 8')<0&&['iPad','iPhone','iPod'].indexOf(navigator.platform)>=0||/iPad|iPhone|iPod/.test(navigator.userAgent)){doc.setAttribute('data-useragent','iOS')}
if(window.navigator.userAgent.indexOf('Firefox')>=0){doc.setAttribute('data-useragent','ff')}
if(window.navigator.userAgent.indexOf('Safari')>=0&&navigator.userAgent.indexOf('Chrome')===-1){doc.setAttribute('data-useragent','safari')}}
browser();(function($){$.isWebkit=function(){return'WebkitAppearance' in document.documentElement.style};$.isIE8=function(){if(window.navigator.userAgent.indexOf('MSIE 8')>=0){return!0}
return!1};$.isIE9=function(){if(window.navigator.userAgent.indexOf('MSIE 9')>=0){return!0}
return!1};$.css3=function(){if($.isIE8()||$.isIE9()){return!1}else{return!0}};$.isFF=function(){if(window.navigator.userAgent.indexOf('Firefox')>=0){return!0}
return!1};$.isiOS=function(){if(window.navigator.userAgent.indexOf('MSIE 8')<0&&['iPad','iPhone','iPod'].indexOf(navigator.platform)>=0||/iPad|iPhone|iPod/.test(navigator.userAgent)){return!0}
return!1};$.isPhone=function(){if($.isiOS()){return!0}
return!1};$.isTouch=function(){try{document.createEvent("TouchEvent");return!0}catch(e){return!1}};$.transitionType=function(){var transitionType=$.isWebkit()?'webkitTransitionEnd':'transitionend'+' msTransitionEnd oTransitionEnd';return transitionType}})(jQuery)},{}],982:[function(require,module,exports){'use strict';(function($){var tabFocus=!0;$.tabFocusOff=function(){tabFocus=!1};$.clickFocus=function(state,name,className,callback,tabOut){if(typeof className==="undefined"||className===null){className=''}
if(typeof callback==="undefined"||callback===null){callback=$.noop()}
if(typeof tabOut==="undefined"||tabOut===null){tabOut=!1}
if(state){setTimeout(function(){$(document).bind('click.'+name,function(e){if(!($(e.target).hasClass(className)||$(e.target).closest(className).length)){callback()}});if(tabOut){$(document).bind('keyup.'+name,function(e){var $focused=$(':focus');var $target=$(e.target);if(!($focused.hasClass(className)||$focused.closest(className).length)){callback()}else if(!($target.hasClass(className)||$target.closest(className).length)){callback()}})}},0)}else{$(document).unbind('click.'+name);$(document).unbind('keyup.'+name)}};$(document).on('click keyup',function(e){if(tabFocus){$('*').removeClass('tabfocus');if(e.which==9){$(':focus').addClass('tabfocus')}}else{tabFocus=!0}})})(jQuery)},{}],983:[function(require,module,exports){(function($){$.curtainOn=function($curtain){$curtain.addClass('show');setTimeout(function(){$curtain.addClass('in');$.curtainBind()},0)};$.curtainOff=function(){var $curtain=$('.curtain.show');$curtain.removeClass('in');if($.css3()){$curtain.unbind().one($.transitionType(),function(){$curtain.removeClass('show')})}else{setTimeout(function(){$curtain.removeClass('show')},0)}};$.curtainBind=function(){$('.curtain.show').unbind('click').click(function(){$.curtainOff()})}})(jQuery)},{}],984:[function(require,module,exports){'use strict';var ElementEngagement=require('@marcom/ac-element-engagement').ElementEngagement;var elementEngagement=new ElementEngagement();$(function(){$('[data-engaged]').each(function(){var $el=$(this);var obj=JSON.parse($el.attr('data-engaged'));var options={timeToEngage:obj.timeToEngage,inViewThreshold:obj.inViewThreshold};var trackedEl=elementEngagement.addElement($el[0],options);trackedEl.on('engaged',function(){$el.addClass('engaged').trigger('engage.engaged')});trackedEl.on('enterview',function(){$el.trigger('engage.enter')});trackedEl.on('exitview',function(){$el.trigger('engage.exit')})});if(navigator.userAgent.indexOf('iPhone')!==-1){setTimeout(function(){elementEngagement.start()},10)}});elementEngagement.start()},{"@marcom/ac-element-engagement":140}],985:[function(require,module,exports){'use strict';var Gallery=require('@marcom/ac-gallery').Gallery;var galleries=Gallery.autoCreate();$(function(){var galleryRandomSlide=function($gallery,rand,first){var $slides=$gallery.find('.gallery-images');var $rand=$slides.find('span:eq('+rand+')');var $picture=$('<picture><source media="(min-width: 736px)" srcset="'+$rand.attr('data-src-md')+'"><source srcset="'+$rand.attr('data-src-sm')+'"><img src="'+$rand.attr('data-src-default')+'" alt="'+$rand.attr('data-alt')+'"></picture>');var $slide=$('<div data-ac-gallery-item>').attr('id',$rand.attr('id')).addClass('ac-gallery-item').append($picture);if(first){$slide.addClass('active')}
return $slide};var galleryRandomSlideNav=function($slide){return'<li role="presentation"><a href="#'+$slide.attr('id')+'" class="dotnav-item current" data-ac-gallery-trigger="'+$slide.attr('id')+'"><span class="a11y">'+$slide.html()+'</span></a></li>'};$('.gallery--slideshow:not(.gallery--random)').slideshow();$('.gallery--random').each(function(){var $gallery=$(this);var $slides=$gallery.find('.gallery-images');var $slidesEl=$gallery.find('.gallery-slides > div');var $dotnavEl=$gallery.find('nav.dotnav ul');var nums=new Array();while(nums.length<$slides.attr('data-select')){var rand=Math.floor(Math.random()*$slides.find('span').length);if(nums.indexOf(rand)===-1){nums.push(rand)}}
var first=!0;nums.forEach(function(num){var $slide=galleryRandomSlide($gallery,num,first);$slidesEl.append($slide);$dotnavEl.append(galleryRandomSlideNav($slide));first=!1});$slidesEl.attr('data-ac-gallery-slide','');if($gallery.hasClass('gallery--slideshow')){$gallery.slideshow()}else{Gallery.create($slidesEl[0])}});function galleryHeight(){$('.gallery').each(function(){var $gallery=$(this);$gallery.css('padding-bottom','');var maxW=$gallery.outerWidth();var maxH=0;$gallery.find('.ac-gallery-item').each(function(){maxH=$(this).outerHeight()>maxH?$(this).outerHeight():maxH});var asp=maxH/maxW*100;if(asp!=0){$gallery.css('padding-bottom',asp+'%')}})}
$('.gallery img').on('load',function(){galleryHeight()});setTimeout(function(){galleryHeight()},0);$(window).on('resize.gallery',function(){$('.gallery img').on('load',function(){galleryHeight()});setTimeout(function(){galleryHeight()},0)})})},{"@marcom/ac-gallery":329}],986:[function(require,module,exports){'use strict';var Modal=require('@marcom/ac-modal').Modal;var createStandardModal=require('@marcom/ac-modal').createStandardModal;var createFullViewportModal=require('@marcom/ac-modal').createFullViewportModal;var modals=[];$(function(){$('.modal-content-inner').each(function(){var $modalContent=$(this);var modalType=$modalContent.attr('data-type');var modalId=$modalContent.attr('data-id');var newModal=modalType==='full'?createFullViewportModal():createStandardModal();newModal.appendContent($modalContent[0]);modals[modalId]=newModal});$('[data-trigger="modal"]').click(function(e){var trg=$(this).attr('data-target');var modal=modals[trg];modal.open();e.preventDefault()})})},{"@marcom/ac-modal":448}],987:[function(require,module,exports){(function($){$.fn.responsive=function(options){var settings=$.extend({},$.fn.responsive.defaults,options);var vars={bp:settings.bp};var responsive=this;responsive.data('bp',settings.bp);var $window=$(window);responsive.data('originalBreakpoint',responsive.getBreakpoint());var resizeThresholdTimerId=null;if($.isFunction($(window).on)){$(window).on('resize.responsive',function(){resizeThresholdTimerId&&window.clearTimeout(resizeThresholdTimerId);resizeThresholdTimerId=window.setTimeout(function(){responsive.resizeCallback()},50)})}};$.fn.getBreakpoint=function(){var windowWidth=$(window).width();var breakpoint;var bp=$(this).data('bp');$.each(bp,function(i,value){if(windowWidth>=value.bp_width){breakpoint=bp[i].bp_name}});if(breakpoint==undefined){breakpoint='lg'}
return breakpoint};$.fn.resizeCallback=function(){var newBreakpoint=$(this).getBreakpoint();var originalBreakpoint=$(this).data('originalBreakpoint');if(newBreakpoint!==originalBreakpoint){$(window).trigger({'type':'breakpoint-change','from':originalBreakpoint,'to':newBreakpoint});$(this).data('originalBreakpoint',newBreakpoint)}};$.fn.responsiveLessThan=function(checkBreakpoint,equal){equal=typeof equal!=='undefined'?equal:!1;var windowWidth=$(window).width();var breakpoint=$(this).getBreakpointValue(checkBreakpoint);if(equal&&windowWidth<=breakpoint){return!0}else if(windowWidth<breakpoint){return!0}
return!1};$.fn.responsiveGreaterThan=function(checkBreakpoint,equal){equal=typeof equal!=='undefined'?equal:!1;var windowWidth=$(window).width();var breakpoint=$(this).getBreakpointValue(checkBreakpoint);if(equal&&windowWidth>=breakpoint){return!0}else if(windowWidth>breakpoint){return!0}
return!1};$.fn.getBreakpointValue=function(breakpointName){var bp=$(this).data('bp');var breakpoint;$.each(bp,function(i,value){if(breakpointName==value.bp_name){breakpoint=bp[i].bp_width}});return breakpoint};$.fn.responsive.defaults={bp:[{'bp_name':'xxs','bp_width':0},{'bp_name':'xs','bp_width':480},{'bp_name':'sm','bp_width':736},{'bp_name':'md','bp_width':1024},{'bp_name':'lg','bp_width':1068},{'bp_name':'xlg','bp_width':1600}]}})(jQuery)},{}],988:[function(require,module,exports){'use strict';(function($){$.shift=function($c,direction,shiftAmount,callback){if(callback===undefined){callback=$.noop()}
shiftAmount=direction==='down'?shiftAmount:0-shiftAmount;$c.nextAll('.components-wrapper, .component').each(function(){var $nextC=$(this);if(direction==='down'){shiftDown($nextC,shiftAmount,callback)}else{shiftUp($nextC,shiftAmount,callback)}});shiftAnimate(lastElement(),shiftAmount,callback)};var lastElement=function(){var selectors=['#ac-gf','#footer','body > footer','body > *:visible'];var $el;for(var i=0;i<selectors.length;i++){$el=$(selectors[i]);if($el.length){return $el.last()}}};var shiftDown=function($nextC,shiftAmount,callback){shiftAnimate($nextC,shiftAmount,callback)};var shiftUp=function($nextC,shiftAmount,callback){shiftAnimate($nextC,shiftAmount,callback)};var shiftAnimate=function($nextC,shiftAmount,callback){$nextC.attr('data-shift',!0);setTimeout(function(){$nextC.css({'-webkit-transform':'translateY('+shiftAmount+'px)','-moz-transform':'translateY('+shiftAmount+'px)','-ms-transform':'translateY('+shiftAmount+'px)','-o-transform':'translateY('+shiftAmount+'px)','transform':'translateY('+shiftAmount+'px)'})},0);if($.css3()){$nextC.unbind().one($.transitionType(),function(){$('[data-shift]').removeAttr('data-shift').css({'-webkit-transform':'','-moz-transform':'','-ms-transform':'','-o-transform':'','transform':''});callback()})}else{$('[data-shift]').removeAttr('data-shift').css({'-webkit-transform':'','-moz-transform':'','-ms-transform':'','-o-transform':'','transform':''});callback()}}})(jQuery)},{}],989:[function(require,module,exports){(function($){'use strict';var autoGalleryIndex=0;var FadeGallery=require('@marcom/ac-gallery/fade/FadeGallery');var _addActiveClassToTriggers=function(item,duration){duration=duration||0;var type;for(type in item._triggerEls){$.each(item._triggerEls[type],function(index,el){$(el).addClass('active')})}};var _removeActiveClassFromTriggers=function(item){var type;for(type in item._triggerEls){$.each(item._triggerEls[type],function(index,el){$(el).removeClass('active')})}};$.fn.slideshow=function(options){this.each(function(){var $this=$(this);var settings=$.extend({},$.fn.slideshow.defaults,options);var id=$this.attr('id');if(!id){id='autogallery'+autoGalleryIndex++;$this.attr('id',id)}
var gallery=new FadeGallery($('.gallery-slides > div',this)[0],{duration:settings.duration,autoPlay:!1,ease:settings.ease,container:id,itemSelector:'.ac-gallery-item',wrapAround:!0,touch:!0});$.each(gallery.getItems(),function(index,item){$('[data-ac-gallery-trigger='+item.getElementId()+']').append('<span class="dotnav-item__timer">')});setTimeout(function(){_addActiveClassToTriggers(gallery.getCurrentItem(),settings.delay-0.1)},1);gallery.on(FadeGallery.UPDATE,function(items){if(!gallery._isAutoPlaying||gallery.getItemIndex(items.incoming[0])===0){$.each(gallery.getItems(),function(index,item){_removeActiveClassFromTriggers(item)})}
if(gallery._isAutoPlaying){setTimeout(function(){_addActiveClassToTriggers(items.incoming[0],settings.delay)},1)}});$this.data('ac-gallery',gallery)})};$.fn.slideshow.defaults={delay:3,duration:0.85,ease:'ease-in'}})(jQuery)},{"@marcom/ac-gallery/fade/FadeGallery":334}],990:[function(require,module,exports){'use strict';$(function(){var Link=require('@marcom/ac-social').Link;$('.pre-footer__icons a[data-network-action]').each(function(){var $el=$(this);var data={url:window.location.toString()};if($el.data('network-action-title')){data.title=$el.data('network-action-title')}
if($el.data('network-action-description')){data.description=$el.data('network-action-description')}
Link.create($el.data('network-action').toUpperCase().replace('-','_'),data,this)})})},{"@marcom/ac-social":488}],991:[function(require,module,exports){'use strict';(function($){var scrollPos=0;var headerH=$('#header').outerHeight();$.stickyOn=function(name,$stickyCont,$parent,inBuffer,outBuffer,header){if(header===undefined){header=!0}
if(inBuffer===undefined){inBuffer=0}
if(outBuffer===undefined){outBuffer=0}
$(window).on('scroll.'+name,function(){var start=$stickyCont.offset().top;var end=start+$stickyCont.outerHeight();var checkPos=header?scrollPos+headerH:scrollPos;if(checkPos-inBuffer>start){$parent.addClass('sticky-on');if(checkPos+outBuffer>end){$parent.addClass('sticky-passed')}else{$parent.removeClass('sticky-passed')}}else{$parent.removeClass('sticky-on sticky-passed')}})};$.stickyOff=function(name,$parent){$parent.removeClass('sticky-on sticky-passed');$(window).off('scroll.'+name)};$(window).on('scroll',function(){scrollPos=$(window).scrollTop()});$(window).on('resize',function(){headerH=$('#header').outerHeight()})})(jQuery)},{}],992:[function(require,module,exports){'use strict'},{}],993:[function(require,module,exports){'use strict';(function($){var mT=50;var cardContentHeight=function($cContent){$cContent.css({'display':'block'});var h=$cContent.outerHeight();$cContent.css({'display':''});return h-mT};var cardClosePos=function($component){var scrollPos=$(window).scrollTop();var endPos=$component.offset().top;if(scrollPos<endPos){return}
endPos-=100;var shift=scrollPos-endPos;$('main').addClass('scroll');setTimeout(function(){$('main').css({'transform':'translateY('+shift+'px)'})},0);$('main').unbind().one($.transitionType(),function(){setTimeout(function(){$('main').removeClass('scroll').css('transform','');$(window).scrollTop(endPos)},300)})};var cardInit=function($el){var $c=$el.closest('.card');var $component=$el.closest('.component');var $cContent=$c.find('.card-content');var $btn=$c.find('.button-section button');var targetProfileCardClass=$btn.data('profileTarget');var $targetProfileCardEl=$(targetProfileCardClass).find('.profile-card__title');var name='card-'+$component.index();if($c.hasClass('opened')){cardClosePos($component);$.stickyOff(name,$c);var cContentH=$cContent.outerHeight();var callback=function(){$c.removeClass('opened');$btn.attr('aria-expanded',!1)};$targetProfileCardEl.removeClass('animate animate-in');$c.removeClass('animate animate-in');$.shift($component,'up',cContentH,callback)}
else{var cContentH=cardContentHeight($cContent);var callback=function(){$c.addClass('opened').find('.card-padding').remove();$btn.attr('aria-expanded',!0)};$.stickyOn(name,$cContent,$c,18,100);$c.addClass('animate');$targetProfileCardEl.addClass('animate');setTimeout(function(){$c.addClass('animate-in');cardPadding($c,$component,cContentH)},0);$.shift($component,'down',cContentH,callback)}};var cardPadding=function($c,$component,cContentH){var componentP=parseInt($component.css('padding-bottom').replace('px',''));if(componentP){var $cPadding=$('<div class="card-padding" />').css({height:cContentH,'-webkit-transform':'translateY('+componentP+'px)','-moz-transform':'translateY('+componentP+'px)','-ms-transform':'translateY('+componentP+'px)','-o-transform':'translateY('+componentP+'px)','transform':'translateY('+componentP+'px)'});$c.append($cPadding)}};$('.card .button-section').on('click','button',function(){cardInit($(this))});$('.card .button-section').on('click','.button-label',function(){cardInit($(this))})})(jQuery)},{}],994:[function(require,module,exports){'use strict';$(document).ready(function(){$('.events-selector select').on('change',function(){var val=$(this).find('option').filter(':selected').attr('data-table');var $events=$(this).closest('.events');var $nextEvent=$events.find('.events-results#events-'+val);if($events.find('.events-results.active').length){$events.find('.events-results.active').removeClass('active').hide();$nextEvent.addClass('active').show()}else{$nextEvent.slideDown(300,function(){$(this).addClass('active')})}})})},{}],995:[function(require,module,exports){'use strict';require('@marcom/ac-localnav');require('@marcom/ac-footer');$(document).ready(function(){$(window).responsive();if(!$.isTouch()){$('html').addClass('no-touch')}
$('body').removeClass('no-js')})},{"@marcom/ac-footer":160,"@marcom/ac-localnav":398}],996:[function(require,module,exports){'use strict';var StackGallery=require('./stack/StackGallery');var StackGalleryItem=require('./stack/StackItem');module.exports={StackGallery:StackGallery,StackGalleryItem:StackGalleryItem}},{"./stack/StackGallery":997,"./stack/StackItem":998}],997:[function(require,module,exports){'use strict';var clone=require('@marcom/ac-object/clone');var create=require('@marcom/ac-object/create');var setStyle=require('@marcom/ac-dom-styles/setStyle');var StackItem=require('./StackItem');var AutoGallery=require('@marcom/ac-gallery').AutoGallery;var DEFAULT_STACK_DURATION=0.5;function StackGallery(el,options){options=clone(options)||{};options.itemType=options.itemType||StackItem;this._stackDuration=options.duration||DEFAULT_STACK_DURATION;options.toggleNavDuration=options.toggleNavDuration===undefined?this._stackDuration:options.toggleNavDuration;this._zIndexCount=options.startZIndex||1;this._ease=options.ease;if(options.resizeContainerOnUpdate===!0){options.resizeContainerOnUpdate=this._stackDuration}
this._onItemShowComplete=this._onItemShowComplete.bind(this);AutoGallery.call(this,el,options);setStyle(this._el,{position:'relative'});if(this._currentItem){this._currentItem.slideIn(0)}}
StackGallery.RESIZED=AutoGallery.RESIZED;StackGallery.UPDATE=AutoGallery.UPDATE;StackGallery.UPDATE_COMPLETE=AutoGallery.UPDATE_COMPLETE;var superProto=AutoGallery.prototype;var proto=StackGallery.prototype=create(superProto);proto.addItem=function(item,index){if(item.nodeType){item=new this._itemType(item)}
var returnValue=superProto.addItem.call(this,item,index);if(item!==this._currentItem){item.slideOut(0)}else{item.slideIn(0)}
return returnValue};proto.destroy=function(options){var returnValue=superProto.destroy.call(this,options);this._stackDuration=null;this._zIndexCount=null;this._ease=null;this._onItemShowComplete=null;return returnValue};proto._startAt=function(index){var item=this._items[index];if(item&&this._currentItem!==item){this._currentItem.slideOut(0);this._currentItem.hide();this._setCurrentItem(item);this._currentItem.show();this._currentItem.slideIn(0);this.trigger(StackGallery.UPDATE,this._items)}};proto._onItemShowComplete=function(clip){if(clip&&clip.target()!==this._currentItem.getElement()){if(!this._currentItem.isFading()){this._currentItem.slideIn(this._stackDuration,this._ease,++this._zIndexCount,this._onItemShowComplete)}
return}
var item;var index=this._items.length;while(index--){item=this._items[index];if(item!==this._currentItem){item.slideOut()}}
if(this._incomingOutgoingItems){this.trigger(StackGallery.UPDATE_COMPLETE,this._incomingOutgoingItems)}};proto._updateItems=function(items,silent){if(silent){return}
this._incomingOutgoingItems=silent?!1:items;items.incoming[0].slideIn(this._stackDuration,this._ease,++this._zIndexCount,this._onItemShowComplete);items.outgoing[0].slideOut(this._stackDuration,this._ease);items.outgoing[0].hide();items.incoming[0].show()};module.exports=StackGallery},{"./StackItem":998,"@marcom/ac-dom-styles/setStyle":17,"@marcom/ac-gallery":329,"@marcom/ac-object/clone":455,"@marcom/ac-object/create":456}],998:[function(require,module,exports){'use strict';var create=require('@marcom/ac-object/create');var getContentDimensions=require('@marcom/ac-dom-metrics/getContentDimensions');var moveX=require('@marcom/ac-solar/moveX');var setStyle=require('@marcom/ac-dom-styles/setStyle');var cssPropertyAvailable=require('@marcom/ac-feature/cssPropertyAvailable');var Item=require('@marcom/ac-gallery').Item;function StackItem(el,options){Item.call(this,el,options);setStyle(el,{position:'absolute'});this._createContainer()}
StackItem.SELECTED=Item.SELECTED;StackItem.SHOW=Item.SHOW;StackItem.HIDE=Item.HIDE;var superProto=Item.prototype;var proto=StackItem.prototype=create(superProto);proto.slideIn=function(duration,ease,zIndex,callback){this._destroyCurrentClip();if(duration){setStyle(this._containerEl,{transition:'transform 0s',transform:'scale(1.065, 1.065)'});setStyle(this._el,{zIndex:zIndex||1});moveX(this._el,Math.floor(getContentDimensions(this._el).width*1.1),0);setTimeout(function(){this._clip=moveX(this._el,0,duration-0.1,{delay:0.1,ease:ease,onComplete:callback})}.bind(this))}else{setStyle(this._el,{zIndex:zIndex||1});moveX(this._el,0,0,{onComplete:callback})}};proto.slideOut=function(duration,ease){if(duration&&cssPropertyAvailable('transition')){setStyle(this._containerEl,{transition:'transform '+duration+'s ease-in',transform:'scale(1.0, 1.0) translateX(-5%)'})}};proto.isFading=function(){return!!(this._clip&&this._clip.playing())};proto.destroy=function(){setStyle(this._el,{position:null,opacity:null,zIndex:null});superProto.destroy.call(this);this._destroyCurrentClip();this._clip=null};proto._createContainer=function(){this._containerEl=document.createElement('div');setStyle(this._el,{overflow:'hidden'});setStyle(this._containerEl,{transform:'scale(1.065, 1.065)'});while(this._el.childNodes.length>0){this._containerEl.appendChild(this._el.childNodes[0])}
this._el.appendChild(this._containerEl)};proto._destroyCurrentClip=function(){if(this.isFading()){this._clip.destroy()}};module.exports=StackItem},{"@marcom/ac-dom-metrics/getContentDimensions":1,"@marcom/ac-dom-styles/setStyle":17,"@marcom/ac-feature/cssPropertyAvailable":152,"@marcom/ac-gallery":329,"@marcom/ac-object/create":456,"@marcom/ac-solar/moveX":574}],999:[function(require,module,exports){'use strict';function placeholderResponsive(){$('input[data-placeholder-default]').each(function(){$(this).attr('placeholder',$(this).attr('data-placeholder-default'))});if($(window).responsiveGreaterThan('xs',!0)){var $input=$('input[data-placeholder-xs]');$input.attr('placeholder',$input.attr('data-placeholder-xs'))}
if($(window).responsiveGreaterThan('sm',!0)){var $input=$('input[data-placeholder-sm]');$input.attr('placeholder',$input.attr('data-placeholder-sm'))}
if($(window).responsiveGreaterThan('md',!0)){var $input=$('input[data-placeholder-md]');$input.attr('placeholder',$input.attr('data-placeholder-md'))}
if($(window).responsiveGreaterThan('lg',!0)){var $input=$('input[data-placeholder-lg]');$input.attr('placeholder',$input.attr('data-placeholder-lg'))}}
$(document).ready(function(){placeholderResponsive();$(window).bind('breakpoint-change.placeholder',function(e){placeholderResponsive()})})},{}],1000:[function(require,module,exports){'use strict';$(document).ready(function(){var subpixelTimer;var subpixelFix=function(){clearTimeout(subpixelTimer);subpixelTimer=setTimeout(function(){$('body').removeClass('pixel-even pixel-odd');if($(window).responsiveGreaterThan('xlg')){if($(window).innerWidth()%2==0){$('body').addClass('pixel-odd')}else{$('body').addClass('pixel-even')}}},50)};$(window).on('resize.subpixel',function(){subpixelFix()});subpixelFix()})},{}],1001:[function(require,module,exports){'use strict';(function($){$('.text-rail').on('engage.engaged',function(){if(!$(this).hasClass('svg-drawn')){var count=0;$(this).find('.draw-svg').each(function(){var drawDuration=1250;if($(this).hasClass('draw-svg--slower')){drawDuration=2500}else if($(this).hasClass('draw-svg--slowest')){drawDuration=5000}
$(this).css('visibility','visible');var mySVG=$(this).drawsvg({duration:drawDuration});setTimeout(function(){mySVG.drawsvg('animate')},count*500);count++});$(this).addClass('svg-drawn')}})})(jQuery)},{}]},{},[980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001])